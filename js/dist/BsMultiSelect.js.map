{"version":3,"sources":["../src/BsMultiSelect.js"],"names":[],"mappings":"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","file":"BsMultiSelect.js","sourcesContent":["import {PluginManager, plugStaticDom} from './PluginManager'\r\n\r\nimport {composeSync} from './ToolsJs';\r\n\r\nimport {PickDomFactory} from './PickDomFactory';\r\nimport {ChoiceDomFactory} from './ChoiceDomFactory';\r\n\r\nimport {StaticDomFactory, CreateElementAspect} from './StaticDomFactory';\r\n\r\nimport {PicksDom} from './PicksDom';\r\nimport {FilterDom} from './FilterDom';\r\n\r\nimport {ChoicesDomFactory} from './ChoicesDomFactory';\r\nimport {PopupAspect} from './PopupAspect';\r\n\r\nimport {ComponentPropertiesAspect, TriggerAspect, OnChangeAspect} from './ComponentPropertiesAspect';\r\nimport {OptionsAspect, OptionPropertiesAspect} from './OptionsAspect';\r\n\r\nimport {ChoicesEnumerableAspect } from './ChoicesEnumerableAspect'\r\nimport {FilterManagerAspect, NavigateManager } from './FilterListAspect'\r\nimport {BuildAndAttachChoiceAspect, BuildChoiceAspect} from './BuildChoiceAspect'\r\nimport {FillChoicesAspect} from './FillChoicesAspect'\r\n\r\nimport {UpdateDataAspect } from './UpdateDataAspect'\r\n\r\nimport {OptionToggleAspect} from './OptionToggleAspect'\r\nimport {CreateChoiceAspect, IsChoiceSelectableAspect, SetOptionSelectedAspect} from './CreateChoiceAspect.js'\r\nimport {Choices} from './Choices'\r\nimport {NavigateAspect, HoveredChoiceAspect} from './NavigateAspect'\r\n\r\nimport {Picks} from './Picks'\r\nimport {BuildPickAspect} from './BuildPickAspect'\r\nimport {InputAspect} from './InputAspect'\r\nimport {ResetFilterListAspect} from './ResetFilterListAspect'\r\nimport {ManageableResetFilterListAspect} from './ResetFilterListAspect'\r\nimport {FocusInAspect} from './ResetFilterListAspect'\r\nimport {MultiSelectInlineLayoutAspect} from './MultiSelectInlineLayoutAspect'\r\nimport {FilterAspect} from './FilterAspect'\r\nimport {DisabledComponentAspect, LoadAspect, AppearanceAspect} from './AppearanceAspect'\r\nimport {DoublyLinkedList, ArrayFacade} from './ToolsJs'\r\nimport {CountableChoicesListInsertAspect} from './CountableChoicesListInsertAspect'\r\n\r\n/// environment - common for many; configuration for concreate\r\nexport function BsMultiSelect(element, environment, configuration, onInit){\r\n    var {Popper, window, plugins} = environment;\r\n    \r\n    if (typeof Popper === 'undefined') {\r\n        throw new Error(\"BsMultiSelect: Popper.js (https://popper.js.org) is required\")\r\n    }\r\n\r\n    let { containerClass,\r\n          css, \r\n          getDisabled,\r\n          options, \r\n          getText, getSelected, setSelected, getIsOptionDisabled,\r\n        } = configuration;\r\n\r\n    let disposeAspect = {};\r\n    let triggerAspect = TriggerAspect(element, environment.trigger);\r\n    let onChangeAspect = OnChangeAspect(triggerAspect, 'dashboardcode.multiselect:change');\r\n    let componentPropertiesAspect = ComponentPropertiesAspect(getDisabled??(() => false));\r\n    let optionsAspect   = OptionsAspect(options); \r\n    let optionPropertiesAspect = OptionPropertiesAspect(getText, getSelected, setSelected, getIsOptionDisabled);\r\n    let isChoiceSelectableAspect = IsChoiceSelectableAspect();\r\n    let createChoiceAspect        = CreateChoiceAspect(optionPropertiesAspect);\r\n    let setOptionSelectedAspect = SetOptionSelectedAspect(optionPropertiesAspect);\r\n    let optionToggleAspect  = OptionToggleAspect(setOptionSelectedAspect);\r\n    let createElementAspect = CreateElementAspect(name => window.document.createElement(name));\r\n    \r\n    let choicesDomFactory = ChoicesDomFactory(createElementAspect);\r\n    let staticDomFactory  = StaticDomFactory(choicesDomFactory, createElementAspect);\r\n    \r\n    let choicesCollection = ArrayFacade();\r\n    \r\n    let countableChoicesList = DoublyLinkedList(\r\n        (choice)=>choice.itemPrev, \r\n        (choice, v)=>choice.itemPrev=v, \r\n        (choice)=>choice.itemNext, \r\n        (choice, v)=>choice.itemNext=v\r\n    );\r\n    \r\n    let countableChoicesListInsertAspect = CountableChoicesListInsertAspect(countableChoicesList);\r\n\r\n    let choicesEnumerableAspect = ChoicesEnumerableAspect(countableChoicesList, (choice)=>choice.itemNext)\r\n    \r\n    let filteredChoicesList = DoublyLinkedList(\r\n        (choice)=>choice.filteredPrev, \r\n        (choice, v)=>choice.filteredPrev=v, \r\n        (choice)=>choice.filteredNext, \r\n        (choice, v)=>choice.filteredNext=v\r\n    );\r\n\r\n    \r\n    let emptyNavigateManager = NavigateManager(\r\n        countableChoicesList,\r\n        (choice)=>choice.itemPrev,\r\n        (choice)=>choice.itemNext \r\n        \r\n    ); \r\n    let filteredNavigateManager = NavigateManager(\r\n        filteredChoicesList, \r\n        (choice)=>choice.filteredPrev,\r\n        (choice)=>choice.filteredNext ); \r\n\r\n    let filterManagerAspect = FilterManagerAspect(\r\n        emptyNavigateManager,\r\n        filteredNavigateManager,\r\n        \r\n        filteredChoicesList, \r\n        choicesEnumerableAspect\r\n    );\r\n\r\n    let hoveredChoiceAspect = HoveredChoiceAspect()\r\n    let navigateAspect = NavigateAspect(hoveredChoiceAspect, \r\n        (down, hoveredChoice)=>filterManagerAspect.getNavigateManager().navigate(down, hoveredChoice));\r\n    let picks = Picks();\r\n    let choices = Choices(\r\n        choicesCollection,\r\n        ()=>countableChoicesList.reset(), \r\n        (c)=>countableChoicesList.remove(c),\r\n        (c, key)=>countableChoicesListInsertAspect.countableChoicesListInsert(c, key));\r\n\r\n    let aspects = {\r\n        environment, configuration, triggerAspect, onChangeAspect, componentPropertiesAspect, disposeAspect,\r\n        countableChoicesList, countableChoicesListInsertAspect,\r\n        optionsAspect, optionPropertiesAspect, createChoiceAspect, setOptionSelectedAspect, isChoiceSelectableAspect, optionToggleAspect, createElementAspect,\r\n        choicesDomFactory, staticDomFactory,\r\n\r\n        choicesCollection, choicesEnumerableAspect, \r\n        filteredChoicesList, filterManagerAspect, hoveredChoiceAspect, navigateAspect, picks, choices\r\n    }\r\n\r\n    plugStaticDom(plugins, aspects); // apply cssPatch to css, apply selectElement support;  \r\n\r\n    let {choicesDom, createStaticDom} = staticDomFactory.create(css)\r\n\r\n    let {staticDom, staticManager} = createStaticDom(element, containerClass)\r\n\r\n    // after this we can use staticDom in construtctor, this simplifies parameter passing a lot   \r\n\r\n    let filterDom = FilterDom(staticDom.disposablePicksElement, createElementAspect, css);\r\n    let popupAspect = PopupAspect(choicesDom.choicesElement, filterDom.filterInputElement, Popper);\r\n    let resetFilterListAspect = ResetFilterListAspect(filterDom, filterManagerAspect)\r\n    let manageableResetFilterListAspect =  ManageableResetFilterListAspect(filterDom, resetFilterListAspect)\r\n    let inputAspect = InputAspect(\r\n        filterDom,\r\n        filterManagerAspect, \r\n        /* setSelectedIfExactMatch */ \r\n        (text) => {\r\n            let wasSetEmpty = false;\r\n            if ( filterManagerAspect.getNavigateManager().getCount() == 1)\r\n            {\r\n                let fullMatchChoice =  filterManagerAspect.getNavigateManager().getHead();\r\n                if (fullMatchChoice.searchText == text)\r\n                {\r\n                    setOptionSelectedAspect.setOptionSelected(fullMatchChoice, true);\r\n                    filterDom.setEmpty();\r\n                    wasSetEmpty = true;\r\n                }\r\n            }\r\n            return wasSetEmpty;\r\n        }\r\n    );    \r\n\r\n    // TODO get picksDom  from staticDomFactory\r\n    let picksDom  = PicksDom(staticDom.picksElement, staticDom.disposablePicksElement, createElementAspect, css);\r\n    let focusInAspect = FocusInAspect(picksDom)\r\n    \r\n    // -----------\r\n    // TODO not real aspect, correct it\r\n    // actually this should be a builder of all events (wrapper or redesign)\r\n    let multiSelectInlineLayoutAspect =  MultiSelectInlineLayoutAspect(\r\n        window,\r\n        () => filterDom.setFocus(), \r\n        picksDom.picksElement, \r\n        choicesDom.choicesElement, \r\n        () => popupAspect.isChoicesVisible(),\r\n        (visible) => popupAspect.setChoicesVisible(visible),\r\n        () => hoveredChoiceAspect.resetHoveredChoice(), \r\n        (choice) => navigateAspect.hoverIn(choice),\r\n        (down) =>  navigateAspect.navigate(down),\r\n        () => manageableResetFilterListAspect.resetFilter(),\r\n        /*getNavigateManager*/() => filterManagerAspect.getNavigateManager(), \r\n        \r\n        /*onClick*/(event) => filterDom.setFocusIfNotTarget(event.target),\r\n        /*resetFocus*/() => focusInAspect.setFocusIn(false),\r\n        /*setFocus*/() => focusInAspect.setFocusIn(true),\r\n        /*alignToFilterInputItemLocation*/() => popupAspect.updatePopupLocation(),\r\n        /*toggleHovered*/ () => {\r\n            var wasToggled = false;\r\n            let hoveredChoice = hoveredChoiceAspect.getHoveredChoice(); \r\n            if (hoveredChoice){\r\n                wasToggled = optionToggleAspect.toggle(hoveredChoice); \r\n            }\r\n            return wasToggled;\r\n        },\r\n        // --------------------------------------------------------\r\n        filterDom,\r\n        /*onInput*/() => inputAspect.processInput()\r\n    );\r\n\r\n    // TODO: bind it declarative way\r\n    FilterAspect(\r\n        filterDom,\r\n        () => multiSelectInlineLayoutAspect.keyDownArrow(false), // arrow up\r\n        () => multiSelectInlineLayoutAspect.keyDownArrow(true),  // arrow down\r\n        /*onTabForEmpty*/() => multiSelectInlineLayoutAspect.hideChoices(),  // tab on empty\r\n        () => {\r\n            let p = picks.removePicksTail();\r\n            if (p)\r\n                popupAspect.updatePopupLocation();\r\n        }, // backspace - \"remove last\"\r\n\r\n        /*onTabToCompleate*/() => { \r\n            if (popupAspect.isChoicesVisible()) {\r\n                multiSelectInlineLayoutAspect.hoveredToSelected();\r\n            } \r\n        },\r\n        /*onEnterToCompleate*/() => { \r\n            if (popupAspect.isChoicesVisible()) {\r\n                multiSelectInlineLayoutAspect.hoveredToSelected();\r\n            } else {\r\n                if (filterManagerAspect.getNavigateManager().getCount()>0){\r\n                    multiSelectInlineLayoutAspect.showChoices();\r\n                }\r\n            }\r\n        },\r\n       \r\n        /*onKeyUpEsc*/() => {\r\n            multiSelectInlineLayoutAspect.hideChoices(); // always hide 1st\r\n            manageableResetFilterListAspect.resetFilter();\r\n        }, // esc keyup \r\n\r\n        // tab/enter \"compleate hovered\"\r\n        /*stopEscKeyDownPropogation*/() => popupAspect.isChoicesVisible()\r\n    );\r\n\r\n    let pickDomFactory = PickDomFactory(css, componentPropertiesAspect, optionPropertiesAspect);\r\n    let createPickAspect = BuildPickAspect(setOptionSelectedAspect, picks, picksDom, pickDomFactory);\r\n    let choiceDomFactory = ChoiceDomFactory(css, optionPropertiesAspect);\r\n    let buildChoiceAspect = BuildChoiceAspect( choicesDom, filterDom, choiceDomFactory, onChangeAspect, \r\n        optionToggleAspect, createPickAspect,\r\n        (c,e) => multiSelectInlineLayoutAspect.adoptChoiceElement(c,e),\r\n        (s) => multiSelectInlineLayoutAspect.handleOnRemoveButton(s)\r\n        )\r\n    let buildAndAttachChoiceAspect =  BuildAndAttachChoiceAspect(buildChoiceAspect);\r\n\r\n    let disabledComponentAspect = DisabledComponentAspect(componentPropertiesAspect, picks, picksDom, \r\n        (newIsComponentDisabled) => multiSelectInlineLayoutAspect.disableComponent(newIsComponentDisabled)\r\n    );\r\n    let appearanceAspect = AppearanceAspect(disabledComponentAspect);\r\n\r\n    let fillChoicesAspect = FillChoicesAspect(\r\n        window.document, \r\n        createChoiceAspect, \r\n        optionsAspect, \r\n        choices, \r\n        (choice) => buildAndAttachChoiceAspect.buildAndAttachChoice(choice)\r\n    );\r\n\r\n    let loadAspect = LoadAspect(fillChoicesAspect, appearanceAspect);\r\n\r\n    let updateDataAspect = UpdateDataAspect(\r\n        choicesDom, choices, picks, fillChoicesAspect,\r\n        /*before*/() => { \r\n            multiSelectInlineLayoutAspect.hideChoices();  // always hide 1st\r\n            manageableResetFilterListAspect.resetFilter();\r\n        }\r\n    );\r\n\r\n    aspects.pickDomFactory=pickDomFactory;\r\n    aspects.choiceDomFactory=choiceDomFactory;\r\n    aspects.staticDom=staticDom;\r\n    aspects.picksDom=picksDom;\r\n    aspects.choicesDom=choicesDom;\r\n    aspects.popupAspect=popupAspect;\r\n    aspects.staticManager=staticManager;\r\n\r\n    aspects.buildChoiceAspect=buildChoiceAspect;\r\n    aspects.buildAndAttachChoiceAspect=buildAndAttachChoiceAspect;\r\n    aspects.fillChoicesAspect=fillChoicesAspect;\r\n\r\n    aspects.createPickAspect=createPickAspect;\r\n    aspects.filterDom=filterDom;\r\n    aspects.inputAspect=inputAspect;\r\n    aspects.resetFilterListAspect=resetFilterListAspect;\r\n    aspects.manageableResetFilterListAspect=manageableResetFilterListAspect;\r\n\r\n    aspects.multiSelectInlineLayoutAspect=multiSelectInlineLayoutAspect;\r\n    aspects.focusInAspect=focusInAspect;\r\n    aspects.disabledComponentAspect=disabledComponentAspect;\r\n    aspects.appearanceAspect=appearanceAspect;\r\n\r\n    aspects.loadAspect=loadAspect;\r\n    aspects.updateDataAspect=updateDataAspect;\r\n\r\n    let pluginManager = PluginManager(plugins, aspects);\r\n        \r\n    let api = {component: \"BsMultiSelect.api\"} // key used in memory leak analyzes\r\n   \r\n    pluginManager.buildApi(api);\r\n\r\n    api.dispose = composeSync(\r\n        multiSelectInlineLayoutAspect.hideChoices,\r\n        disposeAspect.dispose,\r\n        pluginManager.dispose, \r\n        picks.dispose,\r\n        multiSelectInlineLayoutAspect.dispose,\r\n        choices.dispose,\r\n        staticManager.dispose, popupAspect.dispose, picksDom.dispose, filterDom.dispose );\r\n    \r\n    api.updateData = updateDataAspect.updateData;\r\n    api.update = () => {\r\n        updateDataAspect.updateData();\r\n        appearanceAspect.updateAppearance();\r\n    }\r\n    api.updateAppearance = appearanceAspect.updateAppearance\r\n    api.updateDisabled = disabledComponentAspect.updateDisabledComponent;\r\n\r\n    onInit?.(api, aspects);\r\n       \r\n    picksDom.pickFilterElement.appendChild(filterDom.filterInputElement);\r\n    picksDom.picksElement.appendChild(picksDom.pickFilterElement); \r\n    staticManager.appendToContainer();\r\n    popupAspect.init();\r\n    loadAspect.load();\r\n\r\n    return api;\r\n}\r\n"]}