{"version":3,"sources":["../src/BsMultiSelect.js"],"names":[],"mappings":"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","file":"BsMultiSelect.js","sourcesContent":["import $ from 'jquery'\r\nimport Popper from 'popper.js'\r\n\r\nimport {MultiSelect} from './MultiSelect'\r\nimport {LabelAdapter} from './LabelAdapter';\r\nimport {addToJQueryPrototype} from './AddToJQueryPrototype'\r\n\r\nimport {OptionsAdapterJson} from './OptionsAdapters';\r\n\r\n\r\nimport {pickContentGenerator} from './PickContentGenerator';\r\nimport {choiceContentGenerator} from './ChoiceContentGenerator';\r\nimport {staticContentGenerator} from './StaticContentGenerator';\r\n\r\nimport {createBsAppearance, adjustBsOptionAdapterConfiguration, pushIsValidClassToPicks, getLabelElement} from './BsAppearance';\r\n\r\nimport {cloneStylings, mergeStylings} from './ToolsStyling';\r\n\r\nimport {adjustLegacyConfiguration, injectConfigurationStyleValues, replaceConfigurationClassValues} from './BsMultiSelectDepricatedParameters'\r\n\r\nconst stylings = {\r\n    choices: 'dropdown-menu', // bs4, in bsmultiselect.scss as ul.dropdown-menu\r\n\r\n    choice_hover:  'hover',  //  not bs4, in scss as 'ul.dropdown-menu li.hover'\r\n    // TODO\r\n    choice_selected: '', // not used? should be used in OptionsPanel.js\r\n    choice_disabled: '', // not used? should be used in OptionsPanel.js\r\n\r\n    picks: 'form-control',  // bs4, in scss 'ul.form-control'\r\n    picks_focus: 'focus', // not bs4, in scss 'ul.form-control.focus'\r\n    picks_disabled: 'disabled', //  not bs4, in scss 'ul.form-control.disabled'\r\n    pick_disabled: '',  \r\n    \r\n    pickFilter: '', \r\n    filterInput: '',\r\n\r\n    // used in BsPickContentStylingCorrector\r\n    pick: 'badge', // bs4\r\n    pickContent_disabled: 'disabled', // not bs4, in scss 'ul.form-control li span.disabled'\r\n    pickButton: 'close', // bs4\r\n\r\n    // used in BsChoiceContentStylingCorrector\r\n    choice:  '',\r\n    choiceCheckBox_disabled: 'disabled', //  not bs4, in scss as 'ul.form-control li .custom-control-input.disabled ~ .custom-control-label'\r\n    choiceContent: 'custom-control custom-checkbox', // bs4\r\n    choiceCheckBox: 'custom-control-input', // bs4\r\n    choiceLabel: 'custom-control-label justify-content-start' // \r\n}\r\n\r\nconst compensation = {\r\n    choices: { listStyleType:'none'},\r\n    picks: { listStyleType:'none', display:'flex', flexWrap:'wrap'},\r\n    choice: 'px-2' ,  \r\n    choice_hover: 'text-primary bg-light', \r\n    filterInput: { \r\n        class: 'form-control', \r\n        style: {display:'flex', flexWrap:'wrap', listStyleType:'none', marginBottom: 0, height: 'auto'}\r\n    },\r\n\r\n    // used in StylingCorrector\r\n    picks_disabled: {backgroundColor: '#e9ecef'},\r\n\r\n    picks_focus: {borderColor: '#80bdff', boxShadow: '0 0 0 0.2rem rgba(0, 123, 255, 0.25)'},\r\n    picks_focus_valid: {boxShadow: '0 0 0 0.2rem rgba(40, 167, 69, 0.25)'},\r\n    picks_focus_invalid: {boxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)'},\r\n    \r\n    // used in BsAppearance\r\n    picks_def: {minHeight: 'calc(2.25rem + 2px)'},\r\n    picks_lg:  {minHeight: 'calc(2.875rem + 2px)'},\r\n    picks_sm:  {minHeight: 'calc(1.8125rem + 2px)'},\r\n    \r\n    // used in BsPickContentStylingCorrector\r\n    pick: {paddingLeft: '0px', lineHeight: '1.5em'},\r\n    pickButton: {fontSize:'1.5em', lineHeight: '.9em'},\r\n    pickContent_disabled: {opacity: '.65'}, // avoid opacity on pickElement's border\r\n    \r\n    // used in BsChoiceContentStylingCorrector\r\n    choiceLabel_disabled: {opacity: '.65'}  // more flexible than {color: '#6c757d'}\r\n}\r\n\r\n// 1) do not use css - classes  + styling js + prediction clases + compensation js\r\n// 2) use scss - classes only \r\n(\r\n    (window, $) => {\r\n        var defaults = {\r\n            useOwnCss : false,\r\n            containerClass : \"dashboardcode-bsmultiselect\",\r\n            stylings: stylings,\r\n            compensation: compensation,\r\n            placeholder: '',\r\n            staticContentGenerator : staticContentGenerator,\r\n            getLabelElement: getLabelElement,\r\n            pickContentGenerator: pickContentGenerator,\r\n            choiceContentGenerator : choiceContentGenerator,\r\n\r\n            buildConfiguration: null,\r\n            setSelected: (option, value)=> { option.selected = value; },\r\n\r\n            optionsAdapter: null,\r\n            options: null,\r\n            getDisabled: null,\r\n            getSize: null,\r\n            getIsValid: null,\r\n            getIsInvalid: null\r\n        };\r\n\r\n        function createPlugin(element, settings, onDispose){\r\n\r\n            if (typeof Popper === 'undefined') {\r\n                throw new Error(\"BsMultiSelect: Popper.js (https://popper.js.org) is required\")\r\n            }\r\n    \r\n            let configuration = $.extend({}, settings); // settings used per jQuery intialization, configuration per element\r\n            adjustLegacyConfiguration(configuration);            \r\n            let cfgStylings = configuration.stylings;\r\n            let cfgCompensation = configuration.compensation;\r\n            configuration.stylings = null;\r\n            configuration.compensation = null;\r\n            $.extend(settings, defaults);\r\n            configuration.stylings = cloneStylings(defaults.stylings); // TODO\r\n            configuration.compensation = cloneStylings(defaults.compensation); // TODO\r\n            //TODO: do something with cfgStylings and cfgCompensation\r\n\r\n            injectConfigurationStyleValues(configuration.stylings , configuration);\r\n            replaceConfigurationClassValues(configuration.stylings, configuration);\r\n\r\n            // --------------------------------------------------------------\r\n            var init = configuration.buildConfiguration(element, configuration);\r\n            // --------------------------------------------------------------\r\n            var stylings = configuration.stylings;\r\n\r\n            var useOwnCss = configuration.useOwnCss; // useOwnCss\r\n            if (!useOwnCss){\r\n                mergeStylings(stylings, configuration.compensation); // TODO merge\r\n            }\r\n            \r\n            let staticContent = configuration.staticContentGenerator(\r\n                element, (name)=>window.document.createElement(name), stylings, configuration.containerClass\r\n            );\r\n\r\n            let optionsAdapter = configuration.optionsAdapter;\r\n            if (!optionsAdapter)\r\n            {\r\n                var trigger = function(eventName){\r\n                    $(element).trigger(eventName);\r\n                }\r\n                \r\n                if (configuration.options){\r\n                    optionsAdapter = OptionsAdapterJson(\r\n                        configuration.options,\r\n                        configuration.getDisabled,\r\n                        configuration.getSize,\r\n                        configuration.getIsValid,\r\n                        configuration.getIsInvalid,\r\n                        trigger);\r\n\r\n                } \r\n                else  \r\n                {\r\n                    adjustBsOptionAdapterConfiguration(\r\n                        configuration,\r\n                        staticContent.selectElement, \r\n                        staticContent.containerElement\r\n                    )\r\n                    optionsAdapter = OptionsAdapterElement(\r\n                        staticContent.selectElement, \r\n                        configuration.getDisabled, \r\n                        configuration.getSize, \r\n                        configuration.getIsValid, \r\n                        configuration.getIsInvalid,\r\n                        trigger);\r\n                }\r\n            }\r\n\r\n            if (!useOwnCss)\r\n            {\r\n                pushIsValidClassToPicks(staticContent, stylings);\r\n            }\r\n\r\n            let labelAdapter = LabelAdapter(configuration.labelElement, staticContent.createInputId);\r\n\r\n            if (!configuration.placeholder)\r\n            {\r\n                configuration.placeholder = $(element).data(\"bsmultiselect-placeholder\");\r\n                if (!configuration.placeholder)\r\n                    configuration.placeholder = $(element).data(\"placeholder\");\r\n            }\r\n            \r\n            var bsAppearance =  createBsAppearance(staticContent.picksElement, configuration, optionsAdapter);\r\n\r\n            var onUpdate = () => {\r\n                bsAppearance.updateSize();\r\n                bsAppearance.updateIsValid();\r\n            }\r\n\r\n            let multiSelect = new MultiSelect(\r\n                optionsAdapter,\r\n                configuration.setSelected,\r\n                staticContent,\r\n                (option, pickElement) => configuration.pickContentGenerator(option, pickElement, stylings),\r\n                (option, choiceElement) => configuration.choiceContentGenerator(option, choiceElement, stylings),\r\n                //pickContentGeneratorInst,\r\n                //choiceContentGeneratorInst,\r\n                labelAdapter,\r\n                //createStylingComposite,\r\n                configuration.placeholder,\r\n                onUpdate,\r\n                onDispose,\r\n                Popper,\r\n                window);\r\n            \r\n            multiSelect.UpdateSize = bsAppearance.updateSize;\r\n            multiSelect.UpdateIsValid = bsAppearance.updateIsValid;\r\n            \r\n            if (init && init instanceof Function)\r\n                init(multiSelect);\r\n            \r\n            multiSelect.init();\r\n\r\n            return multiSelect;\r\n            }\r\n        addToJQueryPrototype('BsMultiSelect', createPlugin, defaults, $);\r\n    }\r\n)(window, $, Popper)\r\n"]}