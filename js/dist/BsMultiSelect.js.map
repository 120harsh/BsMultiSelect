{"version":3,"sources":["../src/BsMultiSelect.es8.js"],"names":[],"mappings":"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","file":"BsMultiSelect.js","sourcesContent":["import $ from 'jquery'\nimport Popper from 'popper.js'\nimport Bs4AdapterCss from './Bs4AdapterCss.es8'\nimport Bs4Adapter from './Bs4Adapter.es8'\n\n// TODO: try to find convinient way to declare private members. Is it convinient enough to move them into IIFE?\nconst BsMultiSelect = ((window, $, Popper) => {\n    const JQUERY_NO_CONFLICT = $.fn[pluginName];\n    const pluginName = 'dashboardCodeBsMultiSelect';\n    const dataKey = `plugin_${pluginName}`;\n\n    const defSelectedPanelStyleSys = {'display':'flex', 'flex-wrap':'wrap', 'list-style-type':'none'};  // remove bullets since this is ul\n    const defFilterInputStyleSys   = {'width':'2ch', 'border':'0', 'padding':'0', 'outline':'none', 'background-color':'transparent' };\n    const defDropDownMenuStyleSys  = {'list-style-type':'none'}; // remove bullets since this is ul\n\n    const defaults = {\n        doManageFocus:true,\n        useCss:false,\n        adapter:null\n    }\n\n    class Plugin {\n        constructor(selectElement, options, adapter) {\n            if (typeof Popper === 'undefined') {\n                throw new TypeError('DashboardCode BsMultiSelect require Popper.js (https://popper.js.org)')\n            }\n\n            // readonly\n            this.selectElement = selectElement;\n            this.options = $.extend({}, defaults, options);\n\n            if (adapter)\n                this.adapter = adapter;\n            else\n                this.adapter = this.options.useCss?new Bs4AdapterCss($, this.selectElement):new Bs4Adapter($, this.selectElement);\n            \n            this.container = null;\n            this.selectedPanel = null;\n            this.filterInputItem = null;\n            this.filterInput = null;\n            this.dropDownMenu = null;\n            this.popper = null;\n\n            // removable handlers\n            this.selectedPanelClick  = null;\n            this.documentMouseup   = null;\n            this.documentMousedown   = null;\n            this.documentMouseup2   = null;\n\n            // state\n            this.disabled=null;\n            this.filterInputItemOffsetLeft = null; // used to detect changes in input field position (by comparision with current value)\n            this.skipFocusout = false;\n            this.hoveredDropDownItem = null;\n            this.hoveredDropDownIndex = null;\n            this.hasDropDownVisible = false;\n            this.init();\n        }\n\n        updateDropDownPosition(force) {\n            let offsetLeft = this.filterInputItem.offsetLeft;\n            if (force || this.filterInputItemOffsetLeft!=offsetLeft){\n                this.popper.update();\n                this.filterInputItemOffsetLeft=offsetLeft;\n            }\n        }\n\n        hideDropDown() {\n            this.dropDownMenu.style.display = 'none';\n        }\n\n        showDropDown() {\n            this.dropDownMenu.style.display = 'block';\n        }\n\n        // Public methods\n        resetDropDownMenuHover() {\n            if (this.hoveredDropDownItem !== null) {\n                this.adapter.Hover($(this.hoveredDropDownItem), false);\n                this.hoveredDropDownItem = null;\n            }\n            this.hoveredDropDownIndex = null;\n        }\n\n        filterDropDownMenu() {\n            let text = this.filterInput.value.trim().toLowerCase();\n            let visible = 0;\n            $(this.dropDownMenu).find('LI').each((i, dropDownMenuItem) => {\n                let $dropDownMenuItem = $(dropDownMenuItem);\n                if (text == '') {\n                    $dropDownMenuItem.show();\n                    visible++;\n                }\n                else {\n                    let itemText = $dropDownMenuItem.data(\"option-text\");\n                    let isSelected = $dropDownMenuItem.data(\"option-selected\");\n                    if (!isSelected && itemText.indexOf(text)>=0) {\n                        $dropDownMenuItem.show();\n                        visible++;\n                    } else {\n                        $dropDownMenuItem.hide();\n                    }\n                }\n            });\n            this.hasDropDownVisible = visible > 0;\n            this.resetDropDownMenuHover();\n        }\n\n        clearFilterInput(updatePosition) {\n            if (this.filterInput.value) {\n                this.filterInput.value = '';\n                this.input(updatePosition);\n            }\n        }\n\n        closeDropDown() {\n            this.resetDropDownMenuHover();\n            this.clearFilterInput(true);\n            this.hideDropDown();\n        }\n\n        appendDropDownItem(optionElement) {\n            let optionId = optionElement.value;\n            let itemText = optionElement.text;\n            let isSelected = optionElement.selected;\n            let $dropDownItem = $(\"<LI/>\");\n            $dropDownItem.data(\"option-id\", optionId);\n            $dropDownItem.data(\"option-text\", itemText.toLowerCase());\n\n            let adoptDropDownItem = this.adapter.CreateDropDownItemContent($dropDownItem, optionId, itemText, isSelected)\n            $dropDownItem.appendTo(this.dropDownMenu);\n\n            let appendItem = () => {\n                $dropDownItem.data(\"option-selected\", true);\n                let $selectedItem = $(\"<LI/>\");\n                $selectedItem.data(\"option-id\", optionId);\n                optionElement.selected = true;\n                adoptDropDownItem(true);\n\n                let removeItem = () => {\n                    $dropDownItem.data(\"option-selected\", false);\n                    $dropDownItem.data(\"option-toggle\", appendItem);\n                    $selectedItem.data(\"option-remove\", null);\n                    $selectedItem.remove();\n                    optionElement.selected = false;\n                    adoptDropDownItem(false);\n                };\n                let removeItemAndCloseDropDown = () => {\n                    removeItem();\n                    this.closeDropDown();\n                };\n                this.adapter.CreateSelectedItemContent(\n                    $selectedItem,\n                    itemText,\n                    removeItemAndCloseDropDown,\n                    this.disabled\n                );\n                $selectedItem.insertBefore(this.filterInputItem);\n                $dropDownItem.data(\"option-toggle\", removeItem);\n                $selectedItem.data(\"option-remove\", removeItemAndCloseDropDown);\n                return $selectedItem;\n            }\n            $dropDownItem.data(\"option-toggle\", () => appendItem());\n            \n            if (isSelected) {\n                appendItem();\n            }\n            let manageHover = (event, isOn) => {\n                this.adapter.Hover($(event.target).closest(\"LI\"), isOn)\n            }\n            $dropDownItem.click(event => {\n                event.preventDefault();\n                event.stopPropagation();\n                let toggleItem = $(event.currentTarget).closest(\"LI\").data(\"option-toggle\");\n                toggleItem();\n                this.filterInput.focus();\n            }).mouseover(e => manageHover(e, true)).mouseout(e => manageHover(e, false));\n        }\n\n        keydownArrow(down) {\n            let visibleNodeListArray = $(this.dropDownMenu).find('LI:not([style*=\"display: none\"])').toArray();\n            if (visibleNodeListArray.length > 0) {\n                if (this.hasDropDownVisible) {\n                    this.updateDropDownPosition(true);\n                    this.showDropDown();\n                }\n                if (this.hoveredDropDownItem === null) {\n                    this.hoveredDropDownIndex = down ? 0 : visibleNodeListArray.length - 1;\n                }\n                else {\n                    this.adapter.Hover($(this.hoveredDropDownItem), false);\n                    if (down) {\n                        let newIndex = this.hoveredDropDownIndex + 1;\n                        this.hoveredDropDownIndex = newIndex < visibleNodeListArray.length ? newIndex : 0;\n                    } else {\n                        let newIndex = this.hoveredDropDownIndex - 1;\n                        this.hoveredDropDownIndex = newIndex >= 0 ? newIndex : visibleNodeListArray.length - 1;\n                    }\n                }\n                this.hoveredDropDownItem = visibleNodeListArray[this.hoveredDropDownIndex];\n                this.adapter.Hover($(this.hoveredDropDownItem), true);\n            }\n        }\n\n        input(forceUpdatePosition) {\n            this.filterInput.style.width = this.filterInput.value.length*1.3 + 2 + \"ch\";\n            this.filterDropDownMenu();\n            if (this.hasDropDownVisible) {\n                if (forceUpdatePosition) // ignore it if it is called from\n                    this.updateDropDownPosition(forceUpdatePosition); // we need it to support case when textbox changes its place because of line break (texbox grow with each key press)\n                this.showDropDown();\n            } else {\n                this.hideDropDown();\n            }\n        }\n\n        Update(){\n            let $selectedPanel = (this.selectedPanel);\n            this.adapter.UpdateIsValid($selectedPanel);\n            this.UpdateSizeImpl();\n            this.UpdateReadonlyImpl($(this.container), $selectedPanel, $(this.filterInput), $(this.dropDownMenu));\n        }\n\n        UpdateSize(){\n            this.adapter.UpdateSizeImpl($(this.selectedPanel));\n        }\n\n        UpdateReadonly(){\n            this.UpdateReadonlyImpl($(this.container), $(this.selectedPanel), $(this.filterInput), $(this.dropDownMenu));\n        }\n\n        UpdateSizeImpl($selectedPanel){\n            if (this.adapter.UpdateSize)\n                this.adapter.UpdateSize($selectedPanel);\n        }\n\n        UpdateReadonlyImpl($container, $selectedPanel, $filterInput, $dropDownMenu){\n            let disabled = this.selectElement.disabled;\n            if (this.disabled!==disabled){\n                if (disabled) {\n                    this.filterInput.style.display = \"none\";\n                    this.adapter.Enable($selectedPanel, false);\n\n                    $container.unbind(\"mousedown\", this.containerMousedown);\n                    $(window.document).unbind(\"mouseup\", this.documentMouseup);\n                    $(window.document).unbind(\"mouseup\", this.documentMouseup2);\n                    $selectedPanel.unbind(\"click\", this.selectedPanelClick);\n                } else {\n                    this.filterInput.style.display = \"inline-block\";\n                    this.adapter.Enable($selectedPanel, true);\n                    \n                    $selectedPanel.click(this.selectedPanelClick); // removable\n\n                    $dropDownMenu.click( event => event.stopPropagation());\n\n                    $dropDownMenu.mouseover(() => this.resetDropDownMenuHover());\n\n                    if (this.options.doManageFocus)\n                    {\n                        $filterInput.focusin(() => this.adapter.Focus($selectedPanel, true))\n                                    .focusout(() => { if (!this.skipFocusout)\n                                                        this.adapter.Focus($selectedPanel, false) });\n                        $container.mousedown(this.containerMousedown);  // removable\n                        $(window.document).mouseup(this.documentMouseup); // removable\n                    }\n\n                    $(window.document).mouseup(this.documentMouseup2); // removable\n                }\n                this.disabled=disabled;\n            }\n        }\n\n        init() {\n            let $hiddenSelect = $(this.selectElement);\n            $hiddenSelect.hide();\n\n            let $container = $(\"<DIV/>\");\n            this.container = $container.get(0);\n\n            let $selectedPanel = $(\"<UL/>\");\n            $selectedPanel.css(defSelectedPanelStyleSys);\n            \n            this.selectedPanel = $selectedPanel.get(0);\n            \n            $selectedPanel.appendTo(this.container);\n\n            let $filterInputItem = $('<LI/>');\n            this.filterInputItem = $filterInputItem.get(0)\n\n            $filterInputItem.appendTo(this.selectedPanel);\n\n            let $filterInput = $('<INPUT type=\"search\" autocomplete=\"off\">');\n            $filterInput.css(defFilterInputStyleSys);\n            $filterInput.appendTo(this.filterInputItem);\n            this.filterInput = $filterInput.get(0);\n\n            let $dropDownMenu = $(\"<UL/>\")\n                .css({\"display\":\"none\"})\n                .appendTo($container);\n            this.dropDownMenu = $dropDownMenu.get(0);\n            \n            // prevent heavy understandable styling error\n            $dropDownMenu.css(defDropDownMenuStyleSys);\n\n            // create handlers\n            this.documentMouseup = () => {\n                this.skipFocusout = false;\n            }\n    \n            this.documentMousedown = () => {\n                this.skipFocusout = true;\n            };\n\n            this.documentMouseup2 = event => {\n                if (!(this.container === event.target || $.contains(this.container, this.target))) {\n                    this.closeDropDown();\n                }\n            }\n\n            this.selectedPanelClick = event => {\n                if (event.target.nodeName != \"INPUT\")\n                    $(this.filterInput).val('').focus();\n                if (this.hasDropDownVisible && this.adapter.FilterClick(event)){\n                    this.updateDropDownPosition(true);\n                    this.showDropDown();\n                }\n            };\n\n\n            this.adapter.Init($container, $selectedPanel, $filterInputItem, $filterInput, $dropDownMenu);\n            $container.insertAfter($hiddenSelect);\n            \n            this.popper = new Popper(this.filterInput, this.dropDownMenu, {\n                placement: 'bottom-start',\n                modifiers: {\n                    preventOverflow: {enabled:false},\n                    hide: {enabled:false},\n                    flip: { enabled:false }\n                    }\n            });\n            this.adapter.UpdateIsValid($selectedPanel);\n            this.UpdateSizeImpl($selectedPanel);\n            this.UpdateReadonlyImpl($container, $selectedPanel, $filterInput, $dropDownMenu);\n\n            // some browsers (IE11) can change select value (as part of \"autocomplete\") after page is loaded but before \"ready\" event\n            $(document).ready(() => {\n                let selectOptions = $hiddenSelect.find('OPTION');\n                selectOptions.each(\n                    (index, optionElement) => {\n                        this.appendDropDownItem(optionElement);\n                    }\n                );\n                this.hasDropDownVisible = selectOptions.length > 0;\n                this.updateDropDownPosition(false);\n            });\n\n            $filterInput.on(\"keydown\", (event) => {\n                if (event.which == 38) {\n                    event.preventDefault();\n                    this.keydownArrow(false);\n                }\n                else if (event.which == 40) {\n                    event.preventDefault()\n                    this.keydownArrow(true);\n                }\n                else if (event.which == 13) {\n                    event.preventDefault();\n                }\n                else if (event.which == 9) {\n                    if (this.filterInput.value) {\n                        event.preventDefault();\n                    }\n                    else {\n                        this.closeDropDown();\n                    }\n                }\n                else {\n                    if (event.which == 8) {\n                        // NOTE: this will process backspace only if there are no text in the input field\n                        // If user will find this inconvinient, we will need to calculate something like this\n                        // this.isBackspaceAtStartPoint = (this.filterInput.selectionStart == 0 && this.filterInput.selectionEnd == 0);\n                        if (!this.filterInput.value)\n                        {\n                            let $penult = $(this.selectedPanel).find(\"LI:last\").prev();\n                            if ($penult.length){\n                                let removeItem = $penult.data(\"option-remove\");\n                                removeItem();\n                            }\n                            this.updateDropDownPosition(false);\n                        }\n                    }\n                    this.resetDropDownMenuHover();\n                }\n            });\n\n            $filterInput.on(\"keyup\", (event) => {\n                if (event.which == 13 || event.which == 9 ) {\n                    if (this.hoveredDropDownItem) {\n                        let $hoveredDropDownItem = $(this.hoveredDropDownItem);\n                        let toggleItem =  $hoveredDropDownItem.data(\"option-toggle\");\n                        toggleItem();\n                        this.closeDropDown();\n                    } else {\n                        let text = this.filterInput.value.trim().toLowerCase();\n                        let dropDownItems = this.dropDownMenu.querySelectorAll(\"LI\");\n                        let dropDownItem = null;\n                        for (let i = 0; i < dropDownItems.length; ++i) {\n                            let it = dropDownItems[i];\n                            if (it.textContent.trim().toLowerCase() == text)\n                            {\n                                dropDownItem=it;\n                                break;\n                            }\n                        }\n                        if (dropDownItem) {\n                            let $dropDownItem = $(dropDownItem);\n                            let isSelected = $dropDownItem.data(\"option-selected\");\n                            if (!isSelected){\n                                let toggle = $dropDownItem.data(\"option-toggle\");\n                                toggle();\n                            }\n                            this.clearFilterInput(true);\n                        }\n                    }\n                }\n                else if (event.which == 27) { // escape\n                    this.closeDropDown();\n                }\n            });\n\n            $filterInput.on('input', () => {\n                this.input(true);\n            });\n        }\n    }\n\n    function jQueryInterface(options) {\n        return this.each(function () {\n            let data = $(this).data(dataKey)\n\n            if (!data) {\n                if (/dispose|hide/.test(options)) {\n                    return;\n                }\n                const optionsObject = (typeof options === 'object')?options:null;\n                data = new Plugin(this, optionsObject);\n                $(this).data(dataKey, data);\n            }\n\n            if (typeof options === 'string') {\n                let methodName = options;\n                if (typeof data[methodName] === 'undefined') {\n                    throw new TypeError(`No method named \"${methodName}\"`)\n                }\n                data[methodName]()\n            }\n        })\n    }\n\n    $.fn[pluginName] = jQueryInterface;\n\n    // in case of mulitple $(this) it will return 1st element plugin instance\n    $.fn[pluginName.charAt(0).toUpperCase() + pluginName.slice(1)] = function () {\n        return $(this).data(\"plugin_\" + pluginName);\n    };\n\n    $.fn[pluginName].Constructor = Plugin;\n\n    $.fn[pluginName].noConflict = function () {\n        $.fn[pluginName] = JQUERY_NO_CONFLICT\n        return jQueryInterface;\n    }\n    return Plugin;\n})(window, $, Popper);\n\nexport default BsMultiSelect;\n"]}