{"version":3,"sources":["../src/BsMultiSelect.es8.js"],"names":[],"mappings":"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","file":"BsMultiSelect.js","sourcesContent":["import $ from 'jquery'\nimport Popper from 'popper.js'\nimport Bootstrap4Adapter from './Bootstrap4Adapter.es8'\n\n// TODO: try to find convinient way to declare private members. Is it convinient enough to move them into IIFE?\nconst BsMultiSelect = ((window, $, Popper) => {\n    const JQUERY_NO_CONFLICT = $.fn[pluginName];\n    const pluginName = 'dashboardCodeBsMultiSelect';\n    const dataKey = `plugin_${pluginName}`;\n\n    const defSelectedPanelClass = 'form-control';\n    const defSelectedPanelStyle = {'margin-bottom': '0'}; // 16 is for bootstrap reboot for UL\n    const defSelectedPanelStyleSys = {'display': 'flex', \"flex-wrap\": \"wrap\"};\n\n    const defFilterInputItemStyleSys = {'list-style-type':'none'}; \n    const defFilterInputStyleSys = {'width': '2ch', 'border': '0', 'padding': '0', 'outline': 'none'};\n    \n    const defDropDownMenuStyleSys =  {'list-style-type':'none'}; // ul usualy has bullets\n    const defaults = {\n        doManageFocus:true,\n        //usePopper: true,\n        selectedPanelDefMinHeight: 'calc(2.25rem + 2px)',\n        selectedPanelReadonlyBackgroundColor: '#e9ecef',\n        selectedPanelBoxShadow: '0 0 0 0.2rem rgba(0, 123, 255, 0.25)',\n        selectedPanelBorderColor: '#80bdff',\n        selectedPanelValidBoxShadow: ' 0 0 0 0.2rem rgba(40, 167, 69, 0.25)',\n        selectedPanelInvalidBoxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)',\n        filterInputColor: '#495057',\n        containerClass: 'dashboardcode-bsmultiselect',\n        dropDownMenuClass: 'dropdown-menu',\n        dropDownItemClass: 'px-2',\n        selectedPanelClass: '',\n        selectedPanelFocusClass : '',\n        selectedPanelReadonlyClass: '',\n        selectedItemClass: '', \n        removeSelectedItemButtonClass: '',\n        filterInputItemClass: '', \n        filterInputClass: ''\n    };\n\n    class Plugin {\n        constructor(element, options) {\n            if (typeof Popper === 'undefined') {\n                throw new TypeError('DashboardCode BsMultiSelect require Popper.js (https://popper.js.org)')\n            }\n\n            // readonly\n            this.hiddenSelect = element;\n            this.options = $.extend({}, defaults, options);\n            this.jQuery = $;\n            this.adapter = new Bootstrap4Adapter($, this.options, this.hiddenSelect);\n            \n            this.container = null;\n            this.dropDownMenu = null;\n            this.selectedPanel = null;\n            this.filterInput = null;\n            this.filterInputItem = null;\n            this.popper = null;\n\n            // state\n            this.filterInputItemOffsetLeft = null;\n            this.skipFocusout = false;\n            this.backspaceAtStartPoint = null;\n            this.selectedDropDownItem = null;\n            this.selectedDropDownIndex = null;\n            this.hasItems = false;\n\n            this.init();\n        }\n\n        updateDropDownPosition(force) {\n            let offsetLeft = this.filterInputItem.offsetLeft;\n            if (force || this.filterInputItemOffsetLeft!=offsetLeft){\n                this.popper.update();\n                this.filterInputItemOffsetLeft=offsetLeft;\n            }\n        }\n\n        hideDropDown() {\n            $(this.dropDownMenu).hide()\n        }\n\n        showDropDown() {\n            this.updateDropDownPosition(true);\n            $(this.dropDownMenu).show()\n        }\n\n        // Public methods\n        closeDropDown() {\n            this.resetSelectDropDownMenu();\n            this.clearFilterInput();\n            this.hideDropDown();\n            this.updateDropDownPosition();\n        }\n\n        clearFilterInput(updatePosition) {\n            if (this.filterInput.value != '') {\n                this.filterInput.value = '';\n                this.adoptFilterInputLength();\n                this.filterDropDownMenu();\n                if (updatePosition && this.hasItems) {\n                    this.updateDropDownPosition(false); \n                } \n            }\n        }\n\n        filterDropDownMenu() {\n            let text = this.filterInput.value.trim().toLowerCase();\n            let visible = 0;\n            $(this.dropDownMenu).find('LI').each((i, dropDownMenuItem) => {\n                let $dropDownMenuItem = $(dropDownMenuItem);\n                if (text == '') {\n                    $dropDownMenuItem.show();\n                    visible++;\n                }\n                else {\n                    let itemText = $dropDownMenuItem.data(\"option-text\");\n                    let isSelected = $dropDownMenuItem.data(\"option-selected\"); \n                    if (!isSelected && itemText.indexOf(text)>=0) {\n                        $dropDownMenuItem.show();\n                        visible++;\n                    } else {\n                        $dropDownMenuItem.hide();\n                    }\n                }\n            });\n            this.hasItems = visible > 0;\n            this.resetSelectDropDownMenu();\n        }\n\n        appendDropDownItem(optionElement) {\n            let optionId = optionElement.value;\n            let itemText = optionElement.text;\n            let isSelected = optionElement.selected;\n            let $dropDownItem = $(\"<li/>\");\n            $dropDownItem.data(\"option-id\", optionId);\n            $dropDownItem.data(\"option-text\", itemText.toLowerCase());\n\n            let adoptDropDownItem = this.adapter.CreateDropDownItemContent($dropDownItem, optionId, itemText, isSelected)\n            $dropDownItem.appendTo($(this.dropDownMenu));\n\n            let appendItem = () => {\n                $dropDownItem.data(\"option-selected\", true);\n                let $selectedItem = $(\"<li/>\");\n                $selectedItem.data(\"option-id\", optionId);\n                optionElement.selected = true;\n                adoptDropDownItem(true);\n\n                let removeItem = () => {\n                    $dropDownItem.data(\"option-selected\", false);\n                    $dropDownItem.data(\"option-toggle\", appendItem);\n                    $selectedItem.data(\"option-remove\", null);\n                    $selectedItem.remove();\n                    optionElement.selected = false;\n                    adoptDropDownItem(false);\n                };\n\n                this.adapter.CreateSelectedItemContent(\n                    $selectedItem, \n                    itemText, () => {\n                        removeItem();\n                        this.clearFilterInput(true);\n                        this.updateDropDownPosition(false);\n                        $(this.filterInput).focus();\n                });\n                $selectedItem.insertBefore(this.jQuery(this.filterInputItem));\n                $dropDownItem.data(\"option-toggle\", removeItem);\n                $selectedItem.data(\"option-remove\", removeItem);\n                return $selectedItem;\n            }\n            $dropDownItem.data(\"option-toggle\", () => appendItem());\n            \n            if (isSelected) {\n                appendItem();\n            }\n        }\n\n        adoptFilterInputLength() {\n            this.filterInput.style.width = this.filterInput.value.length*1.3 + 2 + \"ch\";\n        }\n\n        resetSelectDropDownMenu() {\n            if (this.selectedDropDownItem !== null) {\n                this.adapter.Hover($(this.selectedDropDownItem), false);\n                this.selectedDropDownItem = null;\n            }\n            this.selectedDropDownIndex = null;\n        }\n        \n        keydownArrow(down) {\n            let visibleNodeListArray = $(this.dropDownMenu).find('LI:not([style*=\"display: none\"])').toArray();\n            if (visibleNodeListArray.length > 0) {\n                if (this.hasItems) {\n                    this.showDropDown();\n                }\n                if (this.selectedDropDownItem === null) {\n                    this.selectedDropDownIndex = down ? 0 : visibleNodeListArray.length - 1;\n                }\n                else {\n                    // IE10-11 doesn't support multiple arguments in classList remove \n                    this.adapter.Hover($(this.selectedDropDownItem), false);\n                    if (down) {\n                        let newIndex = this.selectedDropDownIndex + 1;\n                        this.selectedDropDownIndex = newIndex < visibleNodeListArray.length ? newIndex : 0;\n                    } else {\n                        let newIndex = this.selectedDropDownIndex - 1;\n                        this.selectedDropDownIndex = newIndex >= 0 ? newIndex : visibleNodeListArray.length - 1;\n                    }\n                }\n                this.selectedDropDownItem = visibleNodeListArray[this.selectedDropDownIndex];\n                // IE10-11 doesn't support multiple arguments in classList add \n                this.adapter.Hover($(this.selectedDropDownItem), true);\n            }\n        }\n\n        init() {\n            let $hiddenSelect = $(this.hiddenSelect);\n            $hiddenSelect.hide();\n            let disabled = this.hiddenSelect.disabled;\n\n            let $container = $(\"<div/>\");\n            $container.addClass(this.options.containerClass);\n            $container.insertAfter($hiddenSelect);\n                \n            this.container = $container.get(0);\n\n            let $selectedPanel = $(\"<ul/>\");\n            $selectedPanel.css(defSelectedPanelStyleSys);\n            if (!this.options.selectedPanelClass){\n                $selectedPanel.addClass(defSelectedPanelClass);\n                $selectedPanel.css(defSelectedPanelStyle);\n                $selectedPanel.css({\"min-height\":this.options.selectedPanelMinHeight});\n            }\n            else\n                $selectedPanel.addClass(this.options.selectedPanelClass);\n            $selectedPanel.appendTo(this.container);\n            this.selectedPanel = $selectedPanel.get(0);\n            this.adapter.Init($selectedPanel);\n            \n\n            let $filterInputItem = $('<li/>');\n            this.filterInputItem = $filterInputItem.get(0)\n            $filterInputItem.css(defFilterInputItemStyleSys)\n\n            if (!this.options.filterInputItemClass)\n                $filterInputItem.addClass(this.options.filterInputItemClass)\n            \n            $filterInputItem.appendTo(this.selectedPanel);\n            \n\n            let $filterInput = $('<input type=\"search\" autocomplete=\"off\">');\n            if (!this.options.filterInputClass){\n                $filterInput.css(defFilterInputStyleSys);\n                $filterInput.css(\"color\", this.options.filterInputColor);\n            } else {\n                $filterInput.addClass(this.options.filterInputClass);\n            }\n            $filterInput.appendTo(this.filterInputItem);\n            this.filterInput = $filterInput.get(0);\n\n            let $dropDownMenu = $(\"<ul/>\")\n                .css({\"display\":\"none\"})\n                .appendTo($container);\n            this.dropDownMenu = $dropDownMenu.get(0);\n\n            $dropDownMenu.addClass(this.options.dropDownMenuClass);\n            // prevent heavy understandable styling error\n            $dropDownMenu.css(defDropDownMenuStyleSys);\n\n            this.popper = new Popper(this.filterInput, this.dropDownMenu, {\n                placement: 'bottom-start',\n                modifiers: {\n                    preventOverflow: {enabled:false},\n                    hide: {enabled:false},\n                    flip: { enabled:false }\n                    }\n            });\n            \n            // some browsers (IE11) can change select value (\"autocomplete\") after page is loaded but before \"ready\" event\n            $(document).ready(() => {\n                let selectOptions = $hiddenSelect.find('option');\n                selectOptions.each(\n                    (index, optionElement) => {\n                        this.appendDropDownItem(optionElement);\n                    }\n                );\n                this.hasItems = selectOptions.length > 0;\n                this.updateDropDownPosition(false);\n\n                $dropDownMenu.find('li').click(event => {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    let toggleItem = $(event.currentTarget).closest(\"LI\").data(\"option-toggle\");\n                    toggleItem();\n                    this.clearFilterInput(false); \n                    this.filterInput.focus(); \n                });\n\n                $dropDownMenu.find(\"li\").on(\"mouseover\", event => {\n                    this.adapter.Hover($(event.target).closest(\"li\"), true);\n                });\n\n                $dropDownMenu.find(\"li\").on(\"mouseout\", event => {\n                    this.adapter.Hover($(event.target).closest(\"li\"), false);\n                });\n\n                if (disabled) {\n                    this.filterInput.style.display = \"none\";\n                    this.adapter.Enable($(this.selectedPanel), false);\n                } else {\n                    this.filterInput.style.display = \"inline-block\";\n                    this.adapter.Enable($(this.selectedPanel), true);\n                    \n                    $selectedPanel.click((event) => {\n                        if (event.target.nodeName != \"INPUT\")\n                            $(this.filterInput).val('').focus();\n                        if (this.hasItems)\n                            if (this.adapter.FilterClick(event))\n                                this.showDropDown();\n                    });\n    \n                    $dropDownMenu.click((event) => {\n                        event.stopPropagation();\n                    });\n    \n                    $dropDownMenu.on(\"mouseover\", () => {\n                        this.resetSelectDropDownMenu();\n                    });\n    \n                    if (this.options.doManageFocus)\n                    {\n                        $filterInput.focusin(() => {\n                            this.adapter.Focus($selectedPanel, true);\n                        });\n    \n                        $filterInput.focusout(() => {\n                            if (!this.skipFocusout) {\n                                this.adapter.Focus($selectedPanel, false);\n                            }\n                        });\n    \n                        $container.mousedown(() => {\n                            this.skipFocusout = true;\n                        });\n    \n                        $(window.document).mouseup(() => {\n                            this.skipFocusout = false;\n                        });\n                    }\n    \n                    $(window.document).mouseup((event) => {\n                        if (!(this.container === event.target || $.contains(this.container, event.target))) {\n                            this.closeDropDown();\n                        }\n                    });\n                }\n            });\n\n            $filterInput.on(\"keydown\", (event) => {\n                if (event.which == 38) {\n                    event.preventDefault();\n                    this.keydownArrow(false);\n                }\n                else if (event.which == 40) {\n                    event.preventDefault()\n                    this.keydownArrow(true);\n                }\n                else if (event.which == 13) {\n                    event.preventDefault();\n                }\n                else if (event.which == 9) {\n                    if (this.filterInput.value) {\n                        event.preventDefault();\n                    }\n                    else {\n                        this.closeDropDown();\n                    }\n                }\n                else {\n                    if (event.which == 8) {\n                        // detect that backspace is at start of input field (this will be used at keydown)\n                        this.backspaceAtStartPoint = (this.filterInput.selectionStart == 0 && this.filterInput.selectionEnd == 0);\n                    }\n                    this.resetSelectDropDownMenu();\n                }\n            });\n\n            $filterInput.on(\"keyup\", (event) => {\n                if (event.which == 13 || event.which == 9 ) {\n                    if (this.selectedDropDownItem) {\n                        let $selectedDropDownItem = $(this.selectedDropDownItem);\n                        let toggleItem =  $selectedDropDownItem.data(\"option-toggle\");\n                        toggleItem();\n                        this.closeDropDown();\n                    } else {\n                        let text = this.filterInput.value.trim().toLowerCase();\n                        let dropDownItems = this.dropDownMenu.querySelectorAll(\"LI\");\n                        let dropDownItem = null;\n                        for (let i = 0; i < dropDownItems.length; ++i) {\n                            let it = dropDownItems[i];\n                            if (it.textContent.trim().toLowerCase() == text)\n                            {\n                                dropDownItem=it;\n                                break;\n                            }\n                        }\n                        if (dropDownItem) {\n                            let $dropDownItem = $(dropDownItem);\n                            let isSelected = $dropDownItem.data(\"option-selected\");\n                            if (!isSelected){\n                                let toggle = $dropDownItem.data(\"option-toggle\");\n                                toggle();\n                            }\n                            this.clearFilterInput(true);\n                        }\n                    }\n                } else if (event.which == 8) {\n                    if (this.filterInput.selectionEnd == 0 && this.filterInput.selectionStart == 0 && this.backspaceAtStartPoint) {\n                        let $penult = $(this.selectedPanel).find(\"LI:last\").prev();\n                        if ($penult.length){\n                            let removeItem = $penult.data(\"option-remove\");\n                            removeItem();\n                        }\n                    }\n                    this.backspaceAtStartPoint = null;\n                    //if ($dropDownMenu.is(':hidden'))\n                    this.updateDropDownPosition(false);\n                } else if (event.which == 27) { // escape\n                    this.closeDropDown();\n                }\n            });\n\n            // Set on change for filter input\n            $filterInput.on('input', () => { \n                this.adoptFilterInputLength();\n                this.filterDropDownMenu();\n                if (this.hasItems) {\n                    this.updateDropDownPosition(false); // we need it to support case when textbox changes its place because of line break (texbox grow with each key press)\n                    this.showDropDown();\n                } else {\n                    this.hideDropDown();\n                }\n            });\n        }\n    }\n\n    function jQueryInterface(options) {\n        return this.each(function () {\n            let data = $(this).data(dataKey)\n\n            if (!data) {\n                if (/dispose|hide/.test(options)) {\n                    return;\n                }\n                const optionsObject = (typeof options === 'object')?options:null;\n                data = new Plugin(this, optionsObject);\n                $(this).data(dataKey, data);\n            }\n\n            if (typeof options === 'string') {\n                let methodName = options;\n                if (typeof data[methodName] === 'undefined') {\n                    throw new TypeError(`No method named \"${methodName}\"`)\n                }\n                data[methodName]()\n            }\n        })\n    }\n\n    $.fn[pluginName] = jQueryInterface;\n\n    // in case of mulitple $(this) it will return 1st element plugin instance\n    $.fn[pluginName.charAt(0).toUpperCase() + pluginName.slice(1)] = function () {\n        return $(this).data(\"plugin_\" + pluginName);\n    };\n\n    $.fn[pluginName].Constructor = Plugin;\n\n    $.fn[pluginName].noConflict = function () {\n        $.fn[pluginName] = JQUERY_NO_CONFLICT\n        return jQueryInterface;\n    }\n    return Plugin;\n})(window, $, Popper);\n\nexport default BsMultiSelect;\n"]}