{"version":3,"sources":["../src/BsMultiSelect.js"],"names":[],"mappings":"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","file":"BsMultiSelect.js","sourcesContent":["import {MultiSelect} from './MultiSelect'\r\nimport {PluginManager} from './PluginManager'\r\n\r\nimport {composeSync, def} from './ToolsJs';\r\n\r\nimport {pickContentGenerator as defPickContentGenerator} from './PickContentGenerator';\r\nimport {choiceContentGenerator as defChoiceContentGenerator} from './ChoiceContentGenerator';\r\n\r\n\r\nimport {StaticDomFactory} from './StaticDomFactory';\r\n\r\nimport {StaticPicks} from './StaticPicks';\r\nimport {StaticDialog} from './StaticDialog';\r\nimport {StaticContent} from './StaticContent';\r\n\r\nimport {ComponentAspect} from './ComponentAspect';\r\nimport {DataSourceAspect} from './DataSourceAspect';\r\n\r\nimport {selectElementStaticDomGenerator, selectElementCompletedDomGenerator} from './plugins/SelectElementPlugin';\r\n\r\nexport function BsMultiSelect(element, environment, configuration, onInit){\r\n    var {Popper, window, plugins} = environment;\r\n    var trigger = (eventName)=> environment.trigger(element, eventName);\r\n    if (typeof Popper === 'undefined') {\r\n        throw new Error(\"BsMultiSelect: Popper.js (https://popper.js.org) is required\")\r\n    }\r\n\r\n    let { containerClass, css, \r\n          options, getDisabled,  \r\n          getSelected, setSelected, \r\n          getIsOptionDisabled,\r\n          common } = configuration;\r\n    \r\n    if (!common) \r\n        common = {}\r\n    let dataSourceAspect = DataSourceAspect(options, getSelected, setSelected, getIsOptionDisabled); \r\n    let componentAspect  = ComponentAspect(getDisabled, trigger);\r\n    common.getDisabled = componentAspect.getDisabled;\r\n    // --- --- --- --- ---         \r\n          \r\n    let staticContentGenerator = def(configuration.staticContentGenerator, StaticContent);\r\n    let createElement =  name=>window.document.createElement(name);\r\n    let pickContentGenerator = def(configuration.pickContentGenerator, defPickContentGenerator);\r\n    let choiceContentGenerator = def(configuration.choiceContentGenerator, defChoiceContentGenerator);\r\n    \r\n    let staticDomFactory = StaticDomFactory();\r\n    // --- --- --- --- --- \r\n    let origStaticDomGenerator = staticDomFactory.staticDomGenerator;\r\n    staticDomFactory.staticDomGenerator = (e,c) => selectElementStaticDomGenerator(origStaticDomGenerator, e, c);\r\n    \r\n    let staticDom = staticDomFactory.staticDomGenerator( element, containerClass)\r\n\r\n    let appendToContainer = (choicesElement) => staticDom.containerElement.appendChild(choicesElement);\r\n    let ownContainerElement = staticDom.containerElement?false:true;\r\n\r\n    var {attachPicksElement, detachPicksElement} = staticDomFactory.completedDomGenerator(staticDom, createElement);\r\n    \r\n    let selectElementContainerTools = selectElementCompletedDomGenerator(staticDom, containerClass, createElement);\r\n\r\n    if (!ownContainerElement && staticDom.selectElement){\r\n        appendToContainer = (choicesElement) => \r\n            staticDom.selectElement.parentNode.insertBefore(choicesElement, staticDom.selectElement.nextSibling);\r\n    }\r\n    // --- --- --- --- --- --- --- \r\n    var staticPicks = StaticPicks(staticDom.picksElement,  createElement, css);\r\n    if (detachPicksElement){\r\n        staticPicks.dispose = detachPicksElement;\r\n    }\r\n\r\n    var staticDialog = StaticDialog(createElement, css);\r\n    \r\n    var staticManager = {\r\n        appendToContainer(){\r\n            appendToContainer(staticDialog.choicesElement);\r\n            // add for SE && !ownContainerElement\r\n            attachPicksElement?.();\r\n        },\r\n        dispose(){\r\n            staticDialog.choicesElement.parentNode.removeChild(staticDialog.choicesElement);\r\n            staticPicks.dispose(); // already overrided for SE\r\n        },\r\n    };\r\n\r\n    let staticContent = staticContentGenerator(staticDom, staticPicks, staticDialog, Popper);\r\n    \r\n    staticContent.selectElementContainerTools=selectElementContainerTools;\r\n    // ---------------------------------------------------------------------------------------\r\n          \r\n    let pluginData = {window, configuration, staticDom, staticContent, staticManager, trigger, common,\r\n        dataSourceAspect,componentAspect\r\n    } // TODO replace common with staticContent (but staticContent should be splitted)\r\n    let pluginManager = PluginManager(plugins, pluginData);\r\n\r\n    var multiSelect = new MultiSelect(\r\n        dataSourceAspect,\r\n        componentAspect,\r\n        staticContent,\r\n        staticManager,\r\n        (pickElement) => pickContentGenerator(pickElement, common, css),\r\n        (choiceElement, toggle) => choiceContentGenerator(choiceElement, common, css, toggle),\r\n        window\r\n    );\r\n\r\n    pluginManager.afterConstructor(multiSelect);\r\n\r\n    multiSelect.dispose = composeSync(pluginManager.dispose, multiSelect.dispose.bind(multiSelect));\r\n    \r\n    onInit?.(multiSelect);\r\n   \r\n    multiSelect.init();\r\n    multiSelect.load();\r\n    return multiSelect;\r\n}\r\n\r\n// export function StaticContentFactory(staticDom, staticPicks, staticDialog, Popper) { \r\n//     let staticDomFactory = StaticDomFactory();\r\n//     // --- --- --- --- --- \r\n//     staticDomFactory.staticDomGenerator = (e,c) => selectElementStaticDomGenerator(staticDomFactory.staticDomGenerator, e, c);\r\n    \r\n//     let staticDom = staticDomFactory.staticDomGenerator( element, containerClass)\r\n\r\n//     let appendToContainer = (choicesElement) => staticDom.containerElement.appendChild(choicesElement);\r\n//     let ownContainerElement = staticDom.containerElement?false:true;\r\n\r\n//     var {attachPicksElement, detachPicksElement} = staticDomFactory.completedDomGenerator(staticDom, createElement);\r\n    \r\n//     let selectElementContainerTools = selectElementCompletedDomGenerator(staticDom, containerClass, createElement);\r\n\r\n//     if (!ownContainerElement && staticDom.selectElement){\r\n//         appendToContainer = (choicesElement) => \r\n//             staticDom.selectElement.parentNode.insertBefore(choicesElement, staticDom.selectElement.nextSibling);\r\n//     }\r\n//     // --- --- --- --- --- --- --- \r\n//     var staticPicks = StaticPicks(staticDom.picksElement,  createElement, css);\r\n//     if (detachPicksElement){\r\n//         staticPicks.dispose = detachPicksElement;\r\n//     }\r\n\r\n//     var staticDialog = StaticDialog(createElement, css);\r\n    \r\n//     var staticManager = {\r\n//         appendToContainer(){\r\n//             appendToContainer(staticDialog.choicesElement);\r\n//             // add for SE && !ownContainerElement\r\n//             attachPicksElement?.();\r\n//         },\r\n//         dispose(){\r\n//             staticDialog.choicesElement.parentNode.removeChild(staticDialog.choicesElement);\r\n//             staticPicks.dispose(); // already overrided for SE\r\n//         },\r\n//     };\r\n\r\n   \r\n//     return {\r\n//         staticDomFactory,\r\n//         createStaticManager(){\r\n//             let staticContent = staticContentGenerator(staticDom, staticPicks, staticDialog, Popper);\r\n//             //staticContent.selectElementContainerTools = selectElementContainerTools;\r\n//             return {\r\n//                 staticContent,\r\n//                 staticManager\r\n//             }\r\n//         }\r\n        \r\n//     }\r\n// }"]}