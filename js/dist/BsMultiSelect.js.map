{"version":3,"sources":["../src/BsMultiSelect.js"],"names":[],"mappings":"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","file":"BsMultiSelect.js","sourcesContent":["import $ from 'jquery'\r\n\r\nimport MultiSelect from './MultiSelect'\r\nimport LabelAdapter from './LabelAdapter';\r\nimport {OptionsAdapterJson,OptionsAdapterElement} from './OptionsAdapters';\r\n\r\nimport Bs4StylingMethodCss from './Bs4StylingMethodCss'\r\nimport Bs4StylingMethodJs from './Bs4StylingMethodJs'\r\nimport Bs4Styling from './Bs4Styling';\r\nimport AddToJQueryPrototype from './AddToJQueryPrototype'\r\n\r\nimport { Bs4SelectedItemContent, Bs4SelectedItemContentStylingMethodJs, Bs4SelectedItemContentStylingMethodCss} from './Bs4SelectedItemContent';\r\nimport { Bs4DropDownItemContent, Bs4DropDownItemContentStylingMethodJs, Bs4DropDownItemContentStylingMethodCss} from './Bs4DropDownItemContent';\r\nimport ContainerAdapter from './ContainerAdapter';\r\n\r\nfunction FindDirectChildByTagName(element, tagName){\r\n    var returnValue = null;\r\n    for (var i = 0; i<element.children.length;i++)\r\n    {\r\n        let tmp = element.children[i];\r\n        if (tmp.tagName==tagName)\r\n        {\r\n            returnValue = tmp;\r\n            break;\r\n        }\r\n    }\r\n    return returnValue;\r\n}\r\n\r\n(\r\n    (window, $) => {\r\n        AddToJQueryPrototype('BsMultiSelect',\r\n            (element, settings, onDispose) => {\r\n                let configuration = $.extend({}, settings); // settings used per jQuery intialization, configuration per element\r\n                if (configuration.preBuildConfiguration)\r\n                    configuration.preBuildConfiguration(element, configuration);\r\n                \r\n                let useCss = configuration.useCss;\r\n                let styling = configuration.styling;\r\n                if (!configuration.adapter)\r\n                {\r\n                    let stylingMethod = configuration.stylingMethod;\r\n                    if (!stylingMethod)\r\n                    {\r\n                        if (useCss)\r\n                            stylingMethod = Bs4StylingMethodCss(configuration);\r\n                        else\r\n                            stylingMethod = Bs4StylingMethodJs(configuration);\r\n                    }\r\n                    styling = Bs4Styling(stylingMethod, configuration, $);\r\n                }\r\n\r\n                let optionsAdapter = null;\r\n                let containerAdapter = null;\r\n                if (configuration.optionsAdapter)\r\n                    optionsAdapter = configuration.optionsAdapter;\r\n                else\r\n                {\r\n                    var createElement = function(name){\r\n                        return window.document.createElement(name);\r\n                    }\r\n                    var trigger = function(eventName){\r\n                        $(element).trigger(eventName);\r\n                    }\r\n                    if (configuration.options){\r\n                        optionsAdapter = OptionsAdapterJson(\r\n                            configuration.options,\r\n                            configuration.getDisabled,\r\n                            configuration.getIsValid,\r\n                            configuration.getIsInvalid,\r\n                            trigger );\r\n                        if (!configuration.createInputId)\r\n                            configuration.createInputId = () => `${configuration.containerClass}-generated-filter-${element.id}`;\r\n                        // find direct child by tagName\r\n                        var picksElement = FindDirectChildByTagName(element, \"UL\");\r\n                        containerAdapter = ContainerAdapter(createElement, null, element, picksElement);\r\n                    } \r\n                    else  \r\n                    {\r\n                        var selectElement = null;\r\n                        var containerElement = null;\r\n                        if (element.tagName==\"SELECT\")\r\n                            selectElement = element;\r\n                        else \r\n                        { \r\n                            selectElement = FindDirectChildByTagName(element, \"SELECT\");\r\n                            if (!selectElement)\r\n                                throw \"No SELECT element or options in configuraion found\";\r\n                            containerElement = element;\r\n                        }\r\n\r\n                        if (!containerElement && configuration.containerClass)\r\n                        {\r\n                            var $container = $(selectElement).closest('.'+configuration.containerClass);\r\n                            if ($container.length>0)\r\n                                containerElement =  $container.get(0);\r\n                        }\r\n\r\n\r\n                        if (!configuration.label)\r\n                        {\r\n                            let $formGroup = $(selectElement).closest('.form-group');\r\n                            if ($formGroup.length == 1) {\r\n                                let $label = $formGroup.find(`label[for=\"${selectElement.id}\"]`);\r\n                                if ($label.length>0)\r\n                                {   \r\n                                    let label = $label.get(0);\r\n                                    let forId = label.getAttribute('for');\r\n                                    if (forId == selectElement.id) {\r\n                                        configuration.label = label;\r\n                                    }\r\n                                }   \r\n                            }\r\n                        }\r\n                        var $form = $(selectElement).closest('form');\r\n                        var form = null;\r\n                        if ($form.length == 1) {\r\n                            form = $form.get(0);\r\n                        }\r\n                        \r\n                        if (!configuration.getDisabled) {\r\n                            var $fieldset = $(selectElement).closest('fieldset');\r\n                        \r\n                            if ($fieldset.length == 1) {\r\n                                var fieldset = $fieldset.get(0);\r\n                                configuration.getDisabled = () => selectElement.disabled || fieldset.disabled;\r\n                            }else{\r\n                                configuration.getDisabled = () => selectElement.disabled;\r\n                            }\r\n                        }\r\n                        optionsAdapter = OptionsAdapterElement(selectElement, configuration.getDisabled, trigger, form);\r\n\r\n                        if (!configuration.createInputId)\r\n                            configuration.createInputId = () => `${configuration.containerClass}-generated-input-${((selectElement.id)?selectElement.id:selectElement.name).toLowerCase()}-id`;\r\n\r\n                        \r\n                        var picksElement = null;\r\n                        if (containerElement)\r\n                            picksElement = FindDirectChildByTagName(containerElement, \"UL\");\r\n                        containerAdapter = ContainerAdapter(createElement, selectElement, containerElement, picksElement);\r\n                        \r\n                    }\r\n                }\r\n                let labelAdapter = LabelAdapter(configuration.label, configuration.createInputId);\r\n\r\n                let selectedItemContent = configuration.selectedItemContent;\r\n                if (!selectedItemContent){\r\n                    let selectedItemContentStylingMethod = configuration.selectedItemContentStylingMethod;\r\n                    if (!selectedItemContentStylingMethod)\r\n                    {\r\n                        if (useCss)\r\n                            selectedItemContentStylingMethod=Bs4SelectedItemContentStylingMethodCss(configuration, $);\r\n                        else\r\n                            selectedItemContentStylingMethod=Bs4SelectedItemContentStylingMethodJs(configuration, $);\r\n                    }\r\n                    selectedItemContent = Bs4SelectedItemContent(selectedItemContentStylingMethod, configuration, $);\r\n                }\r\n\r\n                let dropDownItemContent = configuration.bs4DropDownItemContent;\r\n                if (!dropDownItemContent){\r\n                    let dropDownItemContentStylingMethod = configuration.dropDownItemContentStylingMethod;\r\n                    if (useCss)\r\n                        dropDownItemContentStylingMethod=Bs4DropDownItemContentStylingMethodCss(configuration, $);\r\n                    else\r\n                        dropDownItemContentStylingMethod=Bs4DropDownItemContentStylingMethodJs(configuration, $);\r\n                    dropDownItemContent = Bs4DropDownItemContent(dropDownItemContentStylingMethod, configuration, $)\r\n                }\r\n\r\n                let createStylingComposite = function(container, selectedPanel, filterInputItem, filterInput, dropDownMenu){\r\n                    return {\r\n                        $container:$(container),\r\n                        $selectedPanel:$(selectedPanel),\r\n                        $filterInputItem:$(filterInputItem),\r\n                        $filterInput:$(filterInput),\r\n                        $dropDownMenu:$(dropDownMenu)\r\n                    };\r\n                }\r\n\r\n                let multiSelect = new MultiSelect(\r\n                    optionsAdapter,\r\n                    containerAdapter,\r\n                    styling,\r\n                    selectedItemContent,\r\n                    dropDownItemContent,\r\n                    labelAdapter,\r\n                    createStylingComposite,\r\n                    configuration,\r\n                    onDispose,\r\n                    window);\r\n                \r\n                if (configuration.postBuildConfiguration)\r\n                    configuration.postBuildConfiguration(element, multiSelect);\r\n                \r\n                multiSelect.init();\r\n                return multiSelect;\r\n            }, $);\r\n    }\r\n)(window, $)\r\n"]}