{"version":3,"file":"BsMultiSelect.js","sources":["../../js/src/BsMultiSelect.es8.js"],"sourcesContent":["import $ from 'jquery'\nimport Popper from 'popper.js'\n\n// TODO: try to find convinient way to declare private members. Is it convinient enough to move them into IIFE?\nconst BsMultiSelect = ((window, $, Popper) => {\n    const JQUERY_NO_CONFLICT = $.fn[pluginName];\n    const pluginName = 'dashboardCodeBsMultiSelect';\n    const dataKey = `plugin_${pluginName}`;\n\n    const defFilterInputItemStyleSys = {'display': 'block'};\n    const defSelectedPanelClass = 'form-control btn border';\n    const defFilterInputStyle = {'width': '2ch', 'border': '0', 'padding': '0', 'outline': 'none'};\n    const defSelectedPanelStyle = {'cursor': 'text', 'display': 'flex', \"flex-wrap\": \"wrap\", \"align-items\": \"center\", \"margin-bottom\": \"0px\"};\n    const defSelectedItemClass = 'badge';\n    const defSelectedItemStyle = {'padding-left': '0px', 'padding-bottom': '0px', 'display': 'flex', 'align-items': 'center'};\n    const defRemoveSelectedItemButtonClass = 'close';\n    const defRemoveSelectedItemButtonStyle = {'line-height': '1rem', 'font-size':'1.2rem'};\n    const defaults = {\n        items: [],\n        defaults: [],\n        //usePopper: true,\n        selectedPanelMinHeight: 'calc(2.25rem + 2px)',\n        selectedPanelReadonlyBackgroundColor: '#e9ecef',\n        selectedPanelValidBoxShadow: ' 0 0 0 0.2rem rgba(40, 167, 69, 0.25)',\n        selectedPanelInvalidBoxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)',\n        filterInputColor: '#495057',\n        containerClass: 'dashboardcode-bsmultiselect',\n        dropDownMenuClass: 'dropdown-menu',\n        dropDownItemClass: 'px-2',\n        selectedPanelClass: '',\n        selectedPanelReadonlyClass: '',\n        selectedItemClass: '', \n        removeSelectedItemButtonClass: '',\n        filterInputItemClass: '', \n        filterInputClass: ''\n    };\n\n    class Plugin {\n        constructor(element, options) {\n            if (typeof Popper === 'undefined') {\n                throw new TypeError('DashboardCode bsMultiSelect require Popper.js (https://popper.js.org)')\n            }\n\n            // readonly\n            this.element = element;\n            this.options = $.extend({}, defaults, options);\n            this.hiddenSelect = element;\n            this.container = null;\n            this.dropDownMenu = null;\n            this.selectedPanel = null;\n            this.filterInput = null;\n            this.filterInputItem = null;\n            this.popper = null;\n\n            // state\n            this.filterInputItemOffsetLeft = null;\n            this.skipFocusout = false;\n            this.backspaceAtStartPoint = null;\n            this.selectedDropDownItem = null;\n            this.selectedDropDownIndex = null;\n            this.hasItems = false;\n\n            this.init();\n        }\n\n        updateDropDownPosition(force) {\n            //if (this.options.usePopper) {\n            let offsetLeft = this.filterInputItem.offsetLeft;\n            if (force || this.filterInputItemOffsetLeft!=offsetLeft){\n                this.popper.update();\n                this.filterInputItemOffsetLeft=offsetLeft;\n            }\n            // } else {\n            //     $(this.dropDownMenu).dropdown('update');\n            // }\n        }\n\n        hideDropDown() {\n            //if (this.options.usePopper) {\n                $(this.dropDownMenu).hide()\n            // } else {\n            //     if ($(this.dropDownMenu).hasClass('show'))\n            //         $(this.dropDownMenu).dropdown('toggle');\n            // }\n        }\n\n        showDropDown() {\n                //if (this.options.usePopper) {\n                    this.updateDropDownPosition(true);\n                    $(this.dropDownMenu).show()\n                // } else {\n                //     if (!$(this.dropDownMenu).hasClass('show'))\n                //         $(this.dropDownMenu).dropdown('toggle');\n                // }\n        }\n\n        setCheck(optionId, isChecked) {\n            for (let i = 0; i < this.hiddenSelect.options.length; i += 1) {\n                let option = this.hiddenSelect.options[i];\n                if (option.value == optionId) {\n                    this.hiddenSelect.options[i].selected = isChecked;\n                    break;\n                }\n            }\n        }\n\n        // Public methods\n        getInputValue() {\n            return $(this.hiddenSelect).val();\n        }\n\n        closeDropDown() {\n            this.resetSelectDropDownMenu();\n            this.clearFilterInput();\n            this.hideDropDown();\n            this.updateDropDownPosition();\n        }\n\n        clearFilterInput(updatePosition) {\n            if (this.filterInput.value != '') {\n                this.filterInput.value = '';\n                this.adoptFilterInputLength();\n                this.filterDropDownMenu();\n                if (updatePosition && this.hasItems) {\n                    this.updateDropDownPosition(false); \n                } \n            }\n        }\n\n        filterDropDownMenu() {\n            let text = this.filterInput.value.trim();\n            let visible = 0;\n            $(this.dropDownMenu).find('li').each((i, item) => {\n                let $item = $(item);\n                if (text == '') {\n                    $item.show();\n                    visible++;\n                }\n                else {\n                    let itemText = $item.text();\n                    let $checkbox = $item.find('input[type=\"checkbox\"]');\n                    \n                    if (!$checkbox.prop('checked') && itemText.toLowerCase().indexOf(text.toLowerCase())>=0) {\n                        $item.show();\n                        visible++;\n                    } else {\n                        $item.hide();\n                    }\n                }\n            });\n            this.hasItems = visible > 0;\n            this.resetSelectDropDownMenu();\n        }\n\n        clickDropDownItem(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            let $menuItem = $(event.currentTarget).closest(\"LI\");\n            let optionId  = $menuItem.data(\"option-id\");\n            let $checkBox = $menuItem.find('input[type=\"checkbox\"]');\n            if ($checkBox.prop('checked')) {\n                let $selectedItem = $(this.selectedPanel).find(`li[data-option-id=\"${optionId}\"]`);\n                this.removeSelectedItem($selectedItem, optionId, $checkBox);\n            } else {\n                let itemText = $menuItem.find('label').text();\n                this.createAndAppendSelectedItem($checkBox, optionId, itemText);\n                $checkBox.prop('checked', true);\n            }\n            this.clearFilterInput(false);\n            this.filterInput.focus();\n        }\n        \n        appendDropDownItem(itemValue, itemText, isChecked) {\n            let optionId = itemValue;\n            let checkBoxId = `dashboardcode-bsmultiselect-${this.hiddenSelect.name.toLowerCase()}-generated-id-${optionId.toLowerCase()}`;\n            let checked = isChecked ? \"checked\" : \"\";\n            let $dropDownItem = $(\n                `<li data-option-id=\"${optionId}\">\n                    <div class=\"custom-control custom-checkbox\">\n                        <input type=\"checkbox\" class=\"custom-control-input\" id=\"${checkBoxId}\" ${checked}>\n                        <label class=\"custom-control-label\" for=\"${checkBoxId}\">${itemText}</label>\n                    </div>\n                 </li>`).addClass(this.options.dropDownItemClass).appendTo($(this.dropDownMenu));\n            \n            let $checkBox = $dropDownItem.find(`input[type=\"checkbox\"]`);\n            if (isChecked) {\n                this.createAndAppendSelectedItem($checkBox, optionId, itemText);\n            }\n        }\n        \n        createAndAppendSelectedItem($checkBox, optionId, itemText) {\n            let $selectedItem = $(`<li data-option-id=\"${optionId}\"><span>${itemText}</span></li>`);\n            if (!this.options.selectedItemClass){\n                $selectedItem.addClass(defSelectedItemClass);\n                $selectedItem.css(defSelectedItemStyle)\n            }else{\n                $selectedItem.addClass(this.options.selectedItemClass);\n            }\n                \n            $selectedItem.insertBefore($(this.filterInputItem));\n            let $buttom = $(\"<button aria-label='Close' tabIndex='-1' type='button'><span aria-hidden='true'>&times;</span></button>\");\n            if (!this.options.removeSelectedItemButtonClass){\n                $buttom.addClass(defRemoveSelectedItemButtonClass);\n                $buttom.css(defRemoveSelectedItemButtonStyle);\n            }\n            else{\n                $buttom.addClass(this.options.removeSelectedItemButtonClass)\n            }\n            \n            $buttom.appendTo($selectedItem); \n            this.setCheck(optionId, true);\n\n            $buttom.click(() => {\n                this.removeSelectedItem($selectedItem, optionId, $checkBox);\n                this.clearFilterInput(true);\n                this.updateDropDownPosition(false);\n                $(this.filterInput).focus();\n            });\n        }\n\n        adoptFilterInputLength() {\n            this.filterInput.style.width = this.filterInput.value.length*1.3 + 2 + \"ch\";\n        }\n\n        analyzeInputText() {\n            let text = this.filterInput.value.trim().toLowerCase();\n            let nodeList = this.dropDownMenu.querySelectorAll(\"LI\");\n            let item = null;\n            for (let i = 0; i < nodeList.length; ++i) {\n                let it = nodeList[i];\n                if (it.textContent.trim().toLowerCase() == text)\n                {\n                    item=it;\n                    break;\n                }\n            }\n            if (item) {\n                let $item = $(item);\n                let $checkBox = $item.find('input[type=\"checkbox\"]');\n                if (!$checkBox.prop('checked')) {\n                    let optionId = $item.data('option-id');\n                    let itemText = $item.find('label').text();\n                    this.createAndAppendSelectedItem($checkBox, optionId, itemText);\n                    $checkBox.prop('checked', true);\n                }\n                this.clearFilterInput(true);\n            }\n        }\n\n        resetSelectDropDownMenu() {\n            if (this.selectedDropDownItem !== null) {\n                this.selectedDropDownItem.classList.remove('bg-light');\n                this.selectedDropDownItem.classList.remove('text-primary');\n                this.selectedDropDownItem = null;\n            }\n            this.selectedDropDownIndex = null;\n        }\n        \n        keydownArrow(down) {\n            let visibleNodeListArray = $(this.dropDownMenu).find('LI:not([style*=\"display: none\"])').toArray();\n            if (visibleNodeListArray.length > 0) {\n                if (this.hasItems) {\n                    this.showDropDown();\n                }\n                if (this.selectedDropDownItem === null) {\n                    this.selectedDropDownIndex = down ? 0 : visibleNodeListArray.length - 1;\n                }\n                else {\n                    // IE10-11 doesn't support multiple arguments in classList remove \n                    this.selectedDropDownItem.classList.remove('bg-light');\n                    this.selectedDropDownItem.classList.remove('text-primary');\n                    if (down) {\n                        let newIndex = this.selectedDropDownIndex + 1;\n                        this.selectedDropDownIndex = newIndex < visibleNodeListArray.length ? newIndex : 0;\n                    } else {\n                        let newIndex = this.selectedDropDownIndex - 1;\n                        this.selectedDropDownIndex = newIndex >= 0 ? newIndex : visibleNodeListArray.length - 1;\n                    }\n                }\n                this.selectedDropDownItem = visibleNodeListArray[this.selectedDropDownIndex];\n                // IE10-11 doesn't support multiple arguments in classList add \n                this.selectedDropDownItem.classList.add('text-primary');\n                this.selectedDropDownItem.classList.add('bg-light');\n            }\n        }\n\n        removeSelectedItem($selectedItem, optionId, $checkBox) {\n            $selectedItem.remove();\n            this.setCheck(optionId, false);\n            $checkBox.prop('checked', false);\n        }\n\n        init() {\n            let $hiddenSelect = $(this.hiddenSelect);\n            $hiddenSelect.hide();\n            let disabled = this.hiddenSelect.disabled;\n\n            let $container = $(\"<div/>\");\n            $container.addClass(this.options.containerClass);\n            $container.insertAfter($hiddenSelect);\n                \n            this.container = $container.get(0);\n\n            let $selectedPanel = $(\"<ul/>\");\n\n            if (!this.options.selectedPanelClass){\n                $selectedPanel.addClass(defSelectedPanelClass);\n                $selectedPanel.css(defSelectedPanelStyle);\n                $selectedPanel.css(\"min-height\", this.options.selectedPanelMinHeight);\n            }\n            else\n                $selectedPanel.addClass(this.options.selectedPanelClass);\n            $selectedPanel.appendTo(this.container);\n            this.selectedPanel = $selectedPanel.get(0);\n\n            if ($hiddenSelect.hasClass(\"is-valid\")){\n                $selectedPanel.removeClass(\"border\");\n                $selectedPanel.addClass(\"is-valid\");\n                //$selectedPanel.removeClass(\"btn-outline-danger\");\n                //$selectedPanel.addClass(\"btn-outline-success\");\n            }\n            \n            if ($hiddenSelect.hasClass(\"is-invalid\")){\n                $selectedPanel.removeClass(\"border\");\n                $selectedPanel.addClass(\"is-invalid\");\n                //$selectedPanel.removeClass(\"btn-outline-success\");\n                //$selectedPanel.addClass(\"btn-outline-danger\");\n            }\n\n            let $filterInputItem = $('<li/>');\n            this.filterInputItem = $filterInputItem.get(0)\n            if (!this.options.filterInputItemClass)\n                $filterInputItem.css(defFilterInputItemStyleSys)\n            else\n                $filterInputItem.addClass(this.options.filterInputItemClass)\n            \n            $filterInputItem.appendTo(this.selectedPanel);\n            \n\n            let $filterInput = $('<input type=\"search\" autocomplete=\"off\">');\n            if (!this.options.filterInputClass){\n                $filterInput.css(defFilterInputStyle);\n                $filterInput.css(\"color\", this.options.filterInputColor);\n            } else {\n                $filterInput.addClass(this.options.filterInputClass);\n            }\n            $filterInput.appendTo(this.filterInputItem);\n            this.filterInput = $filterInput.get(0);\n\n            let $dropDownMenu = $(\"<ul/>\")\n                .css({\"display\":\"none\"})\n                .appendTo($container);\n            this.dropDownMenu = $dropDownMenu.get(0);\n\n            $dropDownMenu.addClass(this.options.dropDownMenuClass);\n            // prevent heavy understandable styling error\n            $dropDownMenu.css({\"list-style-type\":\"none\"});\n            //if (this.options.usePopper) {\n                this.popper = new Popper(this.filterInput, this.dropDownMenu, {\n                    placement: 'bottom-start',\n                    modifiers: {\n                        preventOverflow: {enabled:false},\n                        hide: {enabled:false},\n                        flip: { enabled:false }\n                     }\n                });\n            // } else {\n            //     $(this.dropDownMenu).addClass(\"dropdown dropdown-menu\")\n            //     $(this.dropDownMenu).data(\"\", \"\");\n            //     $(this.dropDownMenu).dropdown({\n            //         placement: 'bottom-start',\n            //         flip: false,\n            //         reference: this.filterInput\n            //     });\n            // }\n            \n            // some browsers (IE11) can change select value (\"autocomplet\") after page is loaded but before \"ready\" event\n            $(document).ready(() => {\n                if (!this.options.items) {\n                    this.options.items.forEach((item) => {\n                        let itemValue = item.value;\n                        let itemText = item.text;\n                        let isChecked = item.isChecked;\n                        this.appendDropDownItem(itemValue, itemText, isChecked);\n                    });\n                    this.hasItems = this.options.items.length > 0;\n                } else {\n                    let selectOptions = $hiddenSelect.find('option');\n                    selectOptions.each(\n                        (index, option) => {\n                            let itemValue = option.value;\n                            let itemText = option.text;\n                            let isChecked = option.selected;\n                            this.appendDropDownItem(itemValue, itemText, isChecked);\n                        }\n                    );\n                    this.hasItems = selectOptions.length > 0;\n                }\n                this.updateDropDownPosition(false);\n\n                $dropDownMenu.find('li').click(event => {\n                    this.clickDropDownItem(event);\n                });\n\n                $dropDownMenu.find(\"li\").on(\"mouseover\", event => {\n                    $(event.target).closest(\"li\").addClass('text-primary').addClass('bg-light')\n                });\n\n                $dropDownMenu.find(\"li\").on(\"mouseout\", event => {\n                    $(event.target).closest(\"li\").removeClass('text-primary').removeClass('bg-light')\n                });\n            });\n\n            if (disabled) {\n                this.filterInput.style.display = \"none\";\n                if(!this.options.selectedPanelReadonlyClass){\n                    $selectedPanel.css({\"background-color\": this.options.selectedPanelReadonlyBackgroundColor});\n                }else{\n                    $selectedPanel.addClass(this.options.selectedPanelReadonlyClass);\n                }\n                $selectedPanel.find('button').prop(\"disabled\", true);\n                $selectedPanel.addClass();\n            } else {\n                let inputId = this.hiddenSelect.id;\n                let $formGroup = $hiddenSelect.closest(\".form-group\");\n                if ($formGroup.length == 1) {\n                    let $label = $formGroup.find(`label[for=\"${inputId}\"]`);\n                    let f = $label.attr(\"for\");\n                    if (f == this.hiddenSelect.id) {\n                        this.filterInput.id = \"dashboardcode-bsmultiselect-generated-filter-id-\" + this.hiddenSelect.id;\n                        $label.attr(\"for\", this.filterInput.id);\n                    }\n                }\n\n                $dropDownMenu.click((event) => {\n                    event.stopPropagation();\n                });\n\n                $dropDownMenu.on(\"mouseover\", () => {\n                    this.resetSelectDropDownMenu();\n                });\n\n                $selectedPanel.click((event) => {\n                    if (event.target.nodeName != \"INPUT\")\n                        $(this.filterInput).val('').focus();\n                    if (!(event.target.nodeName == \"BUTTON\" || (event.target.nodeName == \"SPAN\" && event.target.parentElement.nodeName == \"BUTTON\")) && this.hasItems)\n                        this.showDropDown();\n                });\n\n\n                $filterInput.on(\"keydown\", (event) => {\n                    if (event.which == 38 || event.keyCode == 38) {\n                        event.preventDefault();\n                        this.keydownArrow(false);\n                    }\n                    else if (event.which == 40 || event.keyCode == 40) {\n                        event.preventDefault()\n                        this.keydownArrow(true);\n                    }\n                    else if (event.which == 13 || event.keyCode == 13) {\n                        event.preventDefault();\n                    }\n                    else if (event.which == 9 || event.keyCode == 9) {\n                        if (this.filterInput.value) {\n                            event.preventDefault();\n                        }\n                        else {\n                            this.closeDropDown();\n                        }\n                    }\n                    else {\n                        if (event.which == 8 || event.keyCode == 8) {\n                            // detect that backspace is at start of input field (this will be used at keydown)\n                            this.backspaceAtStartPoint = (this.filterInput.selectionStart == 0 && this.filterInput.selectionEnd == 0);\n                        }\n                        this.resetSelectDropDownMenu();\n                    }\n                });\n\n                $filterInput.on(\"keyup\", (event) => {\n                    if (event.which == 13 || event.keyCode == 13 || event.which == 9 || event.keyCode == 9) {\n                        if (this.selectedDropDownItem) {\n                            let $item = $(this.selectedDropDownItem);\n                            let $checkBox = $item.find('input[type=\"checkbox\"]');\n                            let optionId = $item.data('option-id');\n                            if (!$checkBox.prop('checked')) {\n                                let itemText = $item.find('label').text();\n                                this.createAndAppendSelectedItem($checkBox, optionId, itemText);\n                                $checkBox.prop('checked', true);\n                                this.resetSelectDropDownMenu();\n                            } else {\n                                let $selectedItem = $(this.selectedPanel).find(`LI[data-option-id=\"${optionId}\"]:first`);\n                                this.removeSelectedItem($selectedItem, optionId, $checkBox);\n                            }\n                            if (event.which == 13 || event.keyCode == 13) {\n                                this.closeDropDown();\n                            }\n                            //this.resetSelectDropDownMenu();\n                        } else {\n                            this.analyzeInputText();\n                        }\n                        if (event.which == 9 || event.keyCode == 9) {\n                            this.closeDropDown();\n                        }\n                    } else if (event.which == 8 || event.keyCode == 8) {\n                        let startPosition = this.filterInput.selectionStart;\n                        let endPosition = this.filterInput.selectionEnd;\n                        if (endPosition == 0 && startPosition == 0 && this.backspaceAtStartPoint) {\n                            let $selectedPanel = $(this.selectedPanel);\n                            let array = $selectedPanel.find(\"LI\").toArray();\n                            if (array.length >= 2) {\n                                let itemToDelete = array[array.length - 2];\n                                let $itemToDelete = $(itemToDelete);\n                                let optionId = $itemToDelete.data(\"option-id\");\n                                let $item = $dropDownMenu.find(`LI[data-option-id=\"${optionId}\"]:first`);\n                                let $checkBox = $item.find('input[type=\"checkbox\"]:first');\n                                let $selectedItem = $selectedPanel.find(`LI[data-option-id=\"${optionId}\"]:first`);\n                                this.removeSelectedItem($selectedItem, optionId, $checkBox);\n                            }\n                        }\n                        this.backspaceAtStartPoint = null;\n                        //if ($dropDownMenu.is(':hidden'))\n                        this.updateDropDownPosition(false);\n                    } else if (event.which == 27 || event.keyCode == 27) { // escape\n                        this.closeDropDown();\n                    }\n                });\n\n                // Set on change for filter input\n                $filterInput.on('input', () => { \n                    this.adoptFilterInputLength();\n                    this.filterDropDownMenu();\n                    if (this.hasItems) {\n                        this.updateDropDownPosition(false); // we need it to support case when textbox changes its place because of line break (texbox grow with each key press)\n                        this.showDropDown();\n                    } else {\n                        this.hideDropDown();\n                    }\n                });\n\n                $filterInput.focusin(() => {\n                    if ($selectedPanel.hasClass(\"is-valid\") &&  this.options.selectedPanelValidBoxShadow){\n                        $selectedPanel.css(\"box-shadow\", this.options.selectedPanelValidBoxShadow);              \n                    } else if ($selectedPanel.hasClass(\"is-invalid\") && this.options.selectedPanelInvalidBoxShadow){\n                        $selectedPanel.css(\"box-shadow\", this.options.selectedPanelInvalidBoxShadow);\n                    }\n                    $(this.selectedPanel).addClass(\"focus\");\n                });\n\n                $filterInput.focusout(() => {\n                    if (!this.skipFocusout) {\n                        $selectedPanel.css(\"box-shadow\", \"\" );                \n                        $(this.selectedPanel).removeClass(\"focus\");\n                    }\n                });\n\n                $container.mousedown(() => {\n                    this.skipFocusout = true;\n                });\n\n                $(window.document).mouseup((event) => {\n                    this.skipFocusout = false;\n                    if (!(this.container === event.target || $.contains(this.container, event.target))) {\n                        this.closeDropDown();\n                    }\n                });\n            }\n        }\n    }\n\n    function jQueryInterface(options) {\n        return this.each(function () {\n            let data = $(this).data(dataKey)\n\n            if (!data) {\n                if (/dispose|hide/.test(options)) {\n                    return;\n                }\n                const optionsObject = (typeof options === 'object')?options:null;\n                data = new Plugin(this, optionsObject);\n                $(this).data(dataKey, data);\n            }\n\n            if (typeof options === 'string') {\n                let methodName = options;\n                if (typeof data[methodName] === 'undefined') {\n                    throw new TypeError(`No method named \"${methodName}\"`)\n                }\n                data[methodName]()\n            }\n        })\n    }\n\n    $.fn[pluginName] = jQueryInterface;\n\n    // in case of mulitple $(this) it will return 1st element plugin instance\n    $.fn[pluginName.charAt(0).toUpperCase() + pluginName.slice(1)] = function () {\n        return $(this).data(\"plugin_\" + pluginName);\n    };\n\n    $.fn[pluginName].Constructor = Plugin;\n\n    $.fn[pluginName].noConflict = function () {\n        $.fn[pluginName] = JQUERY_NO_CONFLICT\n        return jQueryInterface;\n    }\n    return Plugin;\n})(window, $, Popper);\n\nexport default BsMultiSelect;\n"],"names":["BsMultiSelect","window","$","Popper","JQUERY_NO_CONFLICT","fn","pluginName","dataKey","defFilterInputItemStyleSys","defSelectedPanelClass","defFilterInputStyle","defSelectedPanelStyle","defSelectedItemClass","defSelectedItemStyle","defRemoveSelectedItemButtonClass","defRemoveSelectedItemButtonStyle","defaults","items","selectedPanelMinHeight","selectedPanelReadonlyBackgroundColor","selectedPanelValidBoxShadow","selectedPanelInvalidBoxShadow","filterInputColor","containerClass","dropDownMenuClass","dropDownItemClass","selectedPanelClass","selectedPanelReadonlyClass","selectedItemClass","removeSelectedItemButtonClass","filterInputItemClass","filterInputClass","Plugin","element","options","TypeError","extend","hiddenSelect","container","dropDownMenu","selectedPanel","filterInput","filterInputItem","popper","filterInputItemOffsetLeft","skipFocusout","backspaceAtStartPoint","selectedDropDownItem","selectedDropDownIndex","hasItems","init","updateDropDownPosition","force","offsetLeft","update","hideDropDown","hide","showDropDown","show","setCheck","optionId","isChecked","i","length","option","value","selected","getInputValue","val","closeDropDown","resetSelectDropDownMenu","clearFilterInput","updatePosition","adoptFilterInputLength","filterDropDownMenu","text","trim","visible","find","each","item","$item","itemText","$checkbox","prop","toLowerCase","indexOf","clickDropDownItem","event","preventDefault","stopPropagation","$menuItem","currentTarget","closest","data","$checkBox","$selectedItem","removeSelectedItem","createAndAppendSelectedItem","focus","appendDropDownItem","itemValue","checkBoxId","name","checked","$dropDownItem","addClass","appendTo","css","insertBefore","$buttom","click","style","width","analyzeInputText","nodeList","querySelectorAll","it","textContent","classList","remove","keydownArrow","down","visibleNodeListArray","toArray","newIndex","add","$hiddenSelect","disabled","$container","insertAfter","get","$selectedPanel","hasClass","removeClass","$filterInputItem","$filterInput","$dropDownMenu","placement","modifiers","preventOverflow","enabled","flip","document","ready","forEach","selectOptions","index","on","target","display","inputId","id","$formGroup","$label","f","attr","nodeName","parentElement","which","keyCode","selectionStart","selectionEnd","startPosition","endPosition","array","itemToDelete","$itemToDelete","focusin","focusout","mousedown","mouseup","contains","jQueryInterface","test","optionsObject","methodName","charAt","toUpperCase","slice","Constructor","noConflict"],"mappings":"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"}