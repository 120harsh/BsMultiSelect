{"version":3,"file":"BsMultiSelect.js","sources":["../../js/src/BsMultiSelect.es8.js"],"sourcesContent":["import $ from 'jquery'\nimport Popper from 'popper.js'\n\n// TODO: try to find convinient way to declare private members. Is it convinient enough to move them into IIFE?\nconst BsMultiSelect = ((window, $, Popper) => {\n    const JQUERY_NO_CONFLICT = $.fn[pluginName];\n    const pluginName = 'dashboardCodeBsMultiSelect';\n    const dataKey = `plugin_${pluginName}`;\n\n    const defFilterInputItemStyleSys = {'display': 'block'};\n    const defSelectedPanelClass = 'form-control btn border';\n    const defFilterInputStyle = {'width': '2ch', 'border': '0', 'padding': '0', 'outline': 'none'};\n    const defSelectedPanelStyle = {'cursor': 'text', 'display': 'flex', \"flex-wrap\": \"wrap\", \"align-items\": \"center\", \"margin-bottom\": \"0px\"};\n    const defSelectedItemClass = 'badge';\n    const defSelectedItemStyle = {'padding-left': '0px', 'display': 'flex', 'align-items': 'center'};\n    const defRemoveSelectedItemButtonClass = 'close';\n    const defRemoveSelectedItemButtonStyle = {'font-size': '100%'};\n    const defaults = {\n        items: [],\n        defaults: [],\n        //usePopper: true,\n        selectedPanelMinHeight: 'calc(2.25rem + 2px)',\n        selectedPanelReadonlyBackgroundColor: '#e9ecef',\n        selectedPanelValidBoxShadow: ' 0 0 0 0.2rem rgba(40, 167, 69, 0.25)',\n        selectedPanelInvalidBoxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)',\n        filterInputColor: '#495057',\n        containerClass: 'dashboardcode-bsmultiselect',\n        dropDownMenuClass: 'dropdown-menu',\n        dropDownItemClass: 'px-2',\n        selectedPanelClass: '',\n        selectedPanelReadonlyClass: '',\n        selectedItemClass: '', \n        removeSelectedItemButtonClass: '',\n        filterInputItemClass: '', \n        filterInputClass: ''\n    };\n\n    class Plugin {\n        constructor(element, options) {\n            if (typeof Popper === 'undefined') {\n                throw new TypeError('DashboardCode bsMultiSelect require Popper.js (https://popper.js.org)')\n            }\n\n            // readonly\n            this.element = element;\n            this.options = $.extend({}, defaults, options);\n            this.hiddenSelect = element;\n            this.container = null;\n            this.dropDownMenu = null;\n            this.selectedPanel = null;\n            this.filterInput = null;\n            this.filterInputItem = null;\n            this.popper = null;\n\n            // state\n            this.filterInputItemOffsetLeft = null;\n            this.skipFocusout = false;\n            this.backspaceAtStartPoint = null;\n            this.selectedDropDownItem = null;\n            this.selectedDropDownIndex = null;\n            this.hasItems = false;\n\n            this.init();\n        }\n\n        updateDropDownPosition() {\n            //if (this.options.usePopper) {\n            let offsetLeft = this.filterInputItem.offsetLeft;\n            if (this.filterInputItemOffsetLeft!=offsetLeft){\n                this.popper.update();\n                this.filterInputItemOffsetLeft=offsetLeft;\n            }\n            // } else {\n            //     $(this.dropDownMenu).dropdown('update');\n            // }\n        }\n\n        hideDropDown() {\n            //if (this.options.usePopper) {\n                $(this.dropDownMenu).removeClass('show')\n            // } else {\n            //     if ($(this.dropDownMenu).hasClass('show'))\n            //         $(this.dropDownMenu).dropdown('toggle');\n            // }\n        }\n\n        showDropDown() {\n                //if (this.options.usePopper) {\n                    $(this.dropDownMenu).addClass('show')\n                // } else {\n                //     if (!$(this.dropDownMenu).hasClass('show'))\n                //         $(this.dropDownMenu).dropdown('toggle');\n                // }\n        }\n\n        setCheck(optionId, isChecked) {\n            for (let i = 0; i < this.hiddenSelect.options.length; i += 1) {\n                let option = this.hiddenSelect.options[i];\n                if (option.value == optionId) {\n                    this.hiddenSelect.options[i].selected = isChecked;\n                    break;\n                }\n            }\n        }\n\n        // Public methods\n        getInputValue() {\n            return $(this.hiddenSelect).val();\n        }\n\n        closeDropDown() {\n            this.resetSelectDropDownMenu();\n            this.clearFilterInput();\n            this.hideDropDown();\n            this.updateDropDownPosition();\n        }\n\n        clearFilterInput() {\n            if (this.filterInput.value != '') {\n                this.filterInput.value = '';\n                this.filterDropDownMenu();\n                if (this.hasItems) {\n                    this.updateDropDownPosition(); \n                } \n            }\n        }\n\n        filterDropDownMenu() {\n            let text = this.filterInput.value.trim();\n            let visible = 0;\n            $(this.dropDownMenu).find('li').each((i, item) => {\n                let $item = $(item);\n                if (text == '') {\n                    $item.show();\n                    visible++;\n                }\n                else {\n                    let itemText = $item.text();\n                    let $checkbox = $item.find('input[type=\"checkbox\"]');\n                    \n                    if (!$checkbox.prop('checked') && itemText.toLowerCase().indexOf(text.toLowerCase())>=0) {\n                        $item.show();\n                        visible++;\n                    } else {\n                        $item.hide();\n                    }\n                }\n            });\n            this.hasItems = visible > 0;\n            this.resetSelectDropDownMenu();\n        }\n\n        clickDropDownItem(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            let $menuItem = $(event.currentTarget).closest(\"LI\");\n            let optionId  = $menuItem.data(\"option-id\");\n            let $checkBox = $menuItem.find('input[type=\"checkbox\"]');\n            if ($checkBox.prop('checked')) {\n                let $selectedItem = $(this.selectedPanel).find(`li[data-option-id=\"${optionId}\"]`);\n                this.removeSelectedItem($selectedItem, optionId, $checkBox);\n            } else {\n                let itemText = $menuItem.find('label').text();\n                this.createAndAppendSelectedItem($checkBox, optionId, itemText);\n                $checkBox.prop('checked', true);\n            }\n            this.clearFilterInput();\n            this.filterInput.focus();\n        }\n        \n        appendDropDownItem(itemValue, itemText, isChecked) {\n            let optionId = itemValue;\n            let checkBoxId = `dashboardcode-bsmultiselect-${this.hiddenSelect.name.toLowerCase()}-generated-id-${optionId.toLowerCase()}`;\n            let checked = isChecked ? \"checked\" : \"\";\n            let $dropDownItem = $(\n                `<li data-option-id=\"${optionId}\">\n                    <div class=\"custom-control custom-checkbox\">\n                        <input type=\"checkbox\" class=\"custom-control-input\" id=\"${checkBoxId}\" ${checked}>\n                        <label class=\"custom-control-label\" for=\"${checkBoxId}\">${itemText}</label>\n                    </div>\n                 </li>`).addClass(this.options.dropDownItemClass).appendTo($(this.dropDownMenu));\n            \n            let $checkBox = $dropDownItem.find(`input[type=\"checkbox\"]`);\n            if (isChecked) {\n                this.createAndAppendSelectedItem($checkBox, optionId, itemText);\n            }\n        }\n        \n        createAndAppendSelectedItem($checkBox, optionId, itemText) {\n            let $selectedItem = $(`<li data-option-id=\"${optionId}\"><span>${itemText}</span></li>`);\n            if (!this.options.selectedItemClass){\n                $selectedItem.addClass(defSelectedItemClass);\n                $selectedItem.css(defSelectedItemStyle)\n            }else{\n                $selectedItem.addClass(this.options.selectedItemClass);\n            }\n                \n            $selectedItem.insertBefore($(this.filterInputItem));\n            let $buttom = $(\"<button aria-label='Close' tabIndex='-1' type='button'><span aria-hidden='true'>&times;</span></button>\");\n            if (!this.options.removeSelectedItemButtonClass){\n                $buttom.addClass(defRemoveSelectedItemButtonClass);\n                $buttom.css(defRemoveSelectedItemButtonStyle);\n            }\n            else{\n                $buttom.addClass(this.options.removeSelectedItemButtonClass)\n            }\n            \n            $buttom.appendTo($selectedItem); \n            this.setCheck(optionId, true);\n\n            $buttom.click(() => {\n                this.removeSelectedItem($selectedItem, optionId, $checkBox)\n                this.updateDropDownPosition();\n                $(this.filterInput).focus();\n            });\n        }\n\n        adoptFilterInputLength() {\n            this.filterInput.style.width = this.filterInput.value.length*1.3 + 2 + \"ch\";\n        }\n\n        analyzeInputText() {\n            let text = this.filterInput.value.trim().toLowerCase();\n            let nodeList = this.dropDownMenu.querySelectorAll(\"LI\");\n            let item = null;\n            for (let i = 0; i < nodeList.length; ++i) {\n                let it = nodeList[i];\n                if (it.textContent.trim().toLowerCase() == text)\n                {\n                    item=it;\n                    break;\n                }\n            }\n            if (item) {\n                let $item = $(item);\n                let $checkBox = $item.find('input[type=\"checkbox\"]');\n                if (!$checkBox.prop('checked')) {\n                    let optionId = $item.data('option-id');\n                    let itemText = $item.find('label').text();\n                    this.createAndAppendSelectedItem($checkBox, optionId, itemText);\n                    $checkBox.prop('checked', true);\n                }\n                this.clearFilterInput();\n            }\n        }\n\n        resetSelectDropDownMenu() {\n            if (this.selectedDropDownItem !== null) {\n                this.selectedDropDownItem.classList.remove('bg-light');\n                this.selectedDropDownItem.classList.remove('text-primary');\n                this.selectedDropDownItem = null;\n            }\n            this.selectedDropDownIndex = null;\n        }\n        \n        keydownArrow(down) {\n            let visibleNodeListArray = $(this.dropDownMenu).find('LI:not([style*=\"display: none\"])').toArray();\n            if (visibleNodeListArray.length > 0) {\n                if (this.hasItems) {\n                    this.showDropDown();\n                }\n                if (this.selectedDropDownItem === null) {\n                    this.selectedDropDownIndex = down ? 0 : visibleNodeListArray.length - 1;\n                }\n                else {\n                    // IE10-11 doesn't support multiple arguments in classList remove \n                    this.selectedDropDownItem.classList.remove('bg-light');\n                    this.selectedDropDownItem.classList.remove('text-primary');\n                    if (down) {\n                        let newIndex = this.selectedDropDownIndex + 1;\n                        this.selectedDropDownIndex = newIndex < visibleNodeListArray.length ? newIndex : 0;\n                    } else {\n                        let newIndex = this.selectedDropDownIndex - 1;\n                        this.selectedDropDownIndex = newIndex >= 0 ? newIndex : visibleNodeListArray.length - 1;\n                    }\n                }\n                this.selectedDropDownItem = visibleNodeListArray[this.selectedDropDownIndex];\n                // IE10-11 doesn't support multiple arguments in classList add \n                this.selectedDropDownItem.classList.add('text-primary');\n                this.selectedDropDownItem.classList.add('bg-light');\n            }\n        }\n\n        removeSelectedItem($selectedItem, optionId, $checkBox) {\n            $selectedItem.remove();\n            this.setCheck(optionId, false);\n            $checkBox.prop('checked', false);\n        }\n\n        init() {\n            let $hiddenSelect = $(this.hiddenSelect);\n            $hiddenSelect.hide();\n            let disabled = this.hiddenSelect.disabled;\n\n            let $container = $(\"<div/>\");\n            if (!this.options.containerClass)\n                $container.addClass(this.options.containerClass);\n            $container.insertAfter($hiddenSelect);\n                \n            this.container = $container.get(0);\n\n            let $selectedPanel = $(\"<ul/>\");\n\n            if (!this.options.selectedPanelClass){\n                $selectedPanel.addClass(defSelectedPanelClass);\n                $selectedPanel.css(defSelectedPanelStyle);\n                $selectedPanel.css(\"min-height\", this.options.selectedPanelMinHeight);\n            }\n            else\n                $selectedPanel.addClass(this.options.selectedPanelClass);\n            $selectedPanel.appendTo(this.container);\n            this.selectedPanel = $selectedPanel.get(0);\n\n            if ($hiddenSelect.hasClass(\"is-valid\")){\n                $selectedPanel.removeClass(\"border\");\n                $selectedPanel.addClass(\"is-valid\");\n                //$selectedPanel.removeClass(\"btn-outline-danger\");\n                //$selectedPanel.addClass(\"btn-outline-success\");\n            }\n            \n            if ($hiddenSelect.hasClass(\"is-invalid\")){\n                $selectedPanel.removeClass(\"border\");\n                $selectedPanel.addClass(\"is-invalid\");\n                //$selectedPanel.removeClass(\"btn-outline-success\");\n                //$selectedPanel.addClass(\"btn-outline-danger\");\n            }\n\n            let $filterInputItem = $('<li/>');\n            this.filterInputItem = $filterInputItem.get(0)\n            if (!this.options.filterInputItemClass)\n                $filterInputItem.css(defFilterInputItemStyleSys)\n            else\n                $filterInputItem.addClass(this.options.filterInputItemClass)\n            \n            $filterInputItem.appendTo(this.selectedPanel);\n            \n\n            let $filterInput = $('<input type=\"search\" autocomplete=\"off\">');\n            if (!this.options.filterInputClass){\n                $filterInput.css(defFilterInputStyle);\n                $filterInput.css(\"color\", this.options.filterInputColor);\n            } else {\n                $filterInput.addClass(this.options.filterInputClass);\n            }\n            $filterInput.appendTo(this.filterInputItem);\n            this.filterInput = $filterInput.get(0);\n\n            let $dropDownMenu = $(\"<ul/>\").appendTo($container);\n            this.dropDownMenu = $dropDownMenu.get(0);\n\n            $dropDownMenu.addClass(this.options.dropDownMenuClass);\n            //if (this.options.usePopper) {\n                this.popper = new Popper(this.filterInput, this.dropDownMenu, {\n                    placement: 'bottom-start',\n                    modifiers: {\n                        flip: {\n                            behavior: ['left', 'right']\n                        }\n                    }\n                });\n            // } else {\n            //     $(this.dropDownMenu).addClass(\"dropdown dropdown-menu\")\n            //     $(this.dropDownMenu).data(\"\", \"\");\n            //     $(this.dropDownMenu).dropdown({\n            //         placement: 'bottom-start',\n            //         flip: false,\n            //         reference: this.filterInput\n            //     });\n            // }\n            \n            // some browsers (IE11) can change select value (\"autocomplet\") after page is loaded but before \"ready\" event\n            $(document).ready(() => {\n                if (!this.options.items) {\n                    this.options.items.forEach((item) => {\n                        let itemValue = item.value;\n                        let itemText = item.text;\n                        let isChecked = item.isChecked;\n                        this.appendDropDownItem(itemValue, itemText, isChecked);\n                    });\n                    this.hasItems = this.options.items.length > 0;\n                } else {\n                    let selectOptions = $hiddenSelect.find('option');\n                    selectOptions.each(\n                        (index, option) => {\n                            let itemValue = option.value;\n                            let itemText = option.text;\n                            let isChecked = option.selected;\n                            this.appendDropDownItem(itemValue, itemText, isChecked);\n                        }\n                    );\n                    this.hasItems = selectOptions.length > 0;\n                }\n                this.updateDropDownPosition();\n\n                $dropDownMenu.find('li').click(event => {\n                    this.clickDropDownItem(event);\n                });\n\n                $dropDownMenu.find(\"li\").on(\"mouseover\", event => {\n                    $(event.target).closest(\"li\").addClass('text-primary').addClass('bg-light')\n                });\n\n                $dropDownMenu.find(\"li\").on(\"mouseout\", event => {\n                    $(event.target).closest(\"li\").removeClass('text-primary').removeClass('bg-light')\n                });\n            });\n\n            if (disabled) {\n                this.filterInput.style.display = \"none\";\n                if(!this.options.selectedPanelReadonlyClass){\n                    $selectedPanel.css({\"background-color\": this.options.selectedPanelReadonlyBackgroundColor});\n                }else{\n                    $selectedPanel.addClass(this.options.selectedPanelReadonlyClass);\n                }\n                $selectedPanel.find('button').prop(\"disabled\", true);\n                $selectedPanel.addClass();\n            } else {\n                let inputId = this.hiddenSelect.id;\n                let $formGroup = $hiddenSelect.closest(\".form-group\");\n                if ($formGroup.length == 1) {\n                    let $label = $formGroup.find(`label[for=\"${inputId}\"]`);\n                    let f = $label.attr(\"for\");\n                    if (f == this.hiddenSelect.id) {\n                        this.filterInput.id = \"dashboardcode-bsmultiselect-generated-filter-id-\" + this.hiddenSelect.id;\n                        $label.attr(\"for\", this.filterInput.id);\n                    }\n                }\n\n                $dropDownMenu.click((event) => {\n                    event.stopPropagation();\n                });\n\n                $dropDownMenu.on(\"mouseover\", () => {\n                    this.resetSelectDropDownMenu();\n                });\n\n                $selectedPanel.click((event) => {\n                    if (event.target.nodeName != \"INPUT\")\n                        $(this.filterInput).val('').focus();\n                    if (!(event.target.nodeName == \"BUTTON\" || (event.target.nodeName == \"SPAN\" && event.target.parentElement.nodeName == \"BUTTON\")) && this.hasItems)\n                        this.showDropDown();\n                });\n\n\n                $filterInput.on(\"keydown\", (event) => {\n                    if (event.which == 38 || event.keyCode == 38) {\n                        event.preventDefault();\n                        this.keydownArrow(false);\n                    }\n                    else if (event.which == 40 || event.keyCode == 40) {\n                        event.preventDefault()\n                        this.keydownArrow(true);\n                    }\n                    else if (event.which == 13 || event.keyCode == 13) {\n                        event.preventDefault();\n                    }\n                    else if (event.which == 9 || event.keyCode == 9) {\n                        if (this.filterInput.value) {\n                            event.preventDefault();\n                        }\n                        else {\n                            this.closeDropDown();\n                        }\n                    }\n                    else {\n                        if (event.which == 8 || event.keyCode == 8) {\n                            // detect that backspace is at start of input field (this will be used at keydown)\n                            this.backspaceAtStartPoint = (this.filterInput.selectionStart == 0 && this.filterInput.selectionEnd == 0);\n                        }\n                        this.resetSelectDropDownMenu();\n                    }\n                });\n\n                $filterInput.on(\"keyup\", (event) => {\n                    if (event.which == 13 || event.keyCode == 13 || event.which == 9 || event.keyCode == 9) {\n                        if (this.selectedDropDownItem) {\n                            let $item = $(this.selectedDropDownItem);\n                            let $checkBox = $item.find('input[type=\"checkbox\"]');\n                            let optionId = $item.data('option-id');\n                            if (!$checkBox.prop('checked')) {\n                                let itemText = $item.find('label').text();\n                                this.createAndAppendSelectedItem($checkBox, optionId, itemText);\n                                $checkBox.prop('checked', true);\n                                this.filterInput.value = \"\";\n                            } else {\n                                let $selectedItem = $(this.selectedPanel).find(`LI[data-option-id=\"${optionId}\"]:first`);\n                                this.removeSelectedItem($selectedItem, optionId, $checkBox);\n                            }\n                            //this.resetSelectDropDownMenu();\n                        } else {\n                            this.analyzeInputText();\n                        }\n                        if (event.which == 9 || event.keyCode == 9) {\n                            this.closeDropDown();\n                        }\n                    } else if (event.which == 8 || event.keyCode == 8) {\n                        let startPosition = this.filterInput.selectionStart;\n                        let endPosition = this.filterInput.selectionEnd;\n                        if (endPosition == 0 && startPosition == 0 && this.backspaceAtStartPoint) {\n                            let $selectedPanel = $(this.selectedPanel);\n                            let array = $selectedPanel.find(\"LI\").toArray();\n                            if (array.length >= 2) {\n                                let itemToDelete = array[array.length - 2];\n                                let $itemToDelete = $(itemToDelete);\n                                let optionId = $itemToDelete.data(\"option-id\");\n                                let $item = $dropDownMenu.find(`LI[data-option-id=\"${optionId}\"]:first`);\n                                let $checkBox = $item.find('input[type=\"checkbox\"]:first');\n                                let $selectedItem = $selectedPanel.find(`LI[data-option-id=\"${optionId}\"]:first`);\n                                this.removeSelectedItem($selectedItem, optionId, $checkBox);\n                            }\n                        }\n                        this.backspaceAtStartPoint = null;\n                        if ($dropDownMenu.is(':hidden'))\n                            this.updateDropDownPosition();\n                    } else if (event.which == 27 || event.keyCode == 27) { // escape\n                        this.closeDropDown();\n                    }\n                });\n\n                // Set on change for filter input\n                $filterInput.on('input', () => { \n                    this.adoptFilterInputLength();\n                    this.filterDropDownMenu();\n                    if (this.hasItems) {\n                        this.updateDropDownPosition(); // we need it to support case when textbox changes its place because of line break (texbox grow with each key press)\n                        this.showDropDown();\n                    } else {\n                        this.hideDropDown();\n                    }\n                });\n\n                $filterInput.focusin(() => {\n                    if ($selectedPanel.hasClass(\"is-valid\") &&  this.options.selectedPanelValidBoxShadow){\n                        $selectedPanel.css(\"box-shadow\", this.options.selectedPanelValidBoxShadow);              \n                    } else if ($selectedPanel.hasClass(\"is-invalid\") && this.options.selectedPanelInvalidBoxShadow){\n                        $selectedPanel.css(\"box-shadow\", this.options.selectedPanelInvalidBoxShadow);\n                    }\n                    $(this.selectedPanel).addClass(\"focus\");\n                });\n\n                $filterInput.focusout(() => {\n                    if (!this.skipFocusout) {\n                        $selectedPanel.css(\"box-shadow\", \"\" );                \n                        $(this.selectedPanel).removeClass(\"focus\");\n                    }\n                });\n\n                $container.mousedown(() => {\n                    this.skipFocusout = true;\n                });\n\n                $(window.document).mouseup((event) => {\n                    this.skipFocusout = false;\n                    if (!(this.container === event.target || $.contains(this.container, event.target))) {\n                        this.closeDropDown();\n                    }\n                });\n            }\n        }\n    }\n\n    function jQueryInterface(options) {\n        return this.each(function () {\n            let data = $(this).data(dataKey)\n\n            if (!data) {\n                if (/dispose|hide/.test(options)) {\n                    return;\n                }\n                const optionsObject = (typeof options === 'object')?options:null;\n                data = new Plugin(this, optionsObject);\n                $(this).data(dataKey, data);\n            }\n\n            if (typeof options === 'string') {\n                let methodName = options;\n                if (typeof data[methodName] === 'undefined') {\n                    throw new TypeError(`No method named \"${methodName}\"`)\n                }\n                data[methodName]()\n            }\n        })\n    }\n\n    $.fn[pluginName] = jQueryInterface;\n\n    // in case of mulitple $(this) it will return 1st element plugin instance\n    $.fn[pluginName.charAt(0).toUpperCase() + pluginName.slice(1)] = function () {\n        return $(this).data(\"plugin_\" + pluginName);\n    };\n\n    $.fn[pluginName].Constructor = Plugin;\n\n    $.fn[pluginName].noConflict = function () {\n        $.fn[pluginName] = JQUERY_NO_CONFLICT\n        return jQueryInterface;\n    }\n    return Plugin;\n})(window, $, Popper);\n\nexport default BsMultiSelect;\n"],"names":["BsMultiSelect","window","$","Popper","JQUERY_NO_CONFLICT","fn","pluginName","dataKey","defFilterInputItemStyleSys","defSelectedPanelClass","defFilterInputStyle","defSelectedPanelStyle","defSelectedItemClass","defSelectedItemStyle","defRemoveSelectedItemButtonClass","defRemoveSelectedItemButtonStyle","defaults","items","selectedPanelMinHeight","selectedPanelReadonlyBackgroundColor","selectedPanelValidBoxShadow","selectedPanelInvalidBoxShadow","filterInputColor","containerClass","dropDownMenuClass","dropDownItemClass","selectedPanelClass","selectedPanelReadonlyClass","selectedItemClass","removeSelectedItemButtonClass","filterInputItemClass","filterInputClass","Plugin","element","options","TypeError","extend","hiddenSelect","container","dropDownMenu","selectedPanel","filterInput","filterInputItem","popper","filterInputItemOffsetLeft","skipFocusout","backspaceAtStartPoint","selectedDropDownItem","selectedDropDownIndex","hasItems","init","updateDropDownPosition","offsetLeft","update","hideDropDown","removeClass","showDropDown","addClass","setCheck","optionId","isChecked","i","length","option","value","selected","getInputValue","val","closeDropDown","resetSelectDropDownMenu","clearFilterInput","filterDropDownMenu","text","trim","visible","find","each","item","$item","show","itemText","$checkbox","prop","toLowerCase","indexOf","hide","clickDropDownItem","event","preventDefault","stopPropagation","$menuItem","currentTarget","closest","data","$checkBox","$selectedItem","removeSelectedItem","createAndAppendSelectedItem","focus","appendDropDownItem","itemValue","checkBoxId","name","checked","$dropDownItem","appendTo","css","insertBefore","$buttom","click","adoptFilterInputLength","style","width","analyzeInputText","nodeList","querySelectorAll","it","textContent","classList","remove","keydownArrow","down","visibleNodeListArray","toArray","newIndex","add","$hiddenSelect","disabled","$container","insertAfter","get","$selectedPanel","hasClass","$filterInputItem","$filterInput","$dropDownMenu","placement","modifiers","flip","behavior","document","ready","forEach","selectOptions","index","on","target","display","inputId","id","$formGroup","$label","f","attr","nodeName","parentElement","which","keyCode","selectionStart","selectionEnd","startPosition","endPosition","array","itemToDelete","$itemToDelete","is","focusin","focusout","mousedown","mouseup","contains","jQueryInterface","test","optionsObject","methodName","charAt","toUpperCase","slice","Constructor","noConflict"],"mappings":"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"}