{"version":3,"file":"BsMultiSelect.js","sources":["../../js/src/Tools.js","../../js/src/Bs4AdapterStylingMethodCss.js","../../js/src/Bs4AdapterStylingMethodJs.js","../../js/src/MultiSelect.js","../../js/src/AddToJQueryPrototype.js","../../js/src/Bs4Adapter.js","../../js/src/LabelAdapter.js","../../js/src/OptionsAdapters.js","../../js/src/Bs4SelectedItemContentFactory.js","../../js/src/Bs4DropDownItemContentFactory.js","../../js/src/BsMultiSelect.js"],"sourcesContent":["export function ExtendIfUndefined(destination, source) {\r\n    for (var property in source)\r\n        if (destination[property] === undefined)\r\n            destination[property] = source[property];\r\n}\r\n\r\nexport function ExtendIfUndefinedFluent(destination, source) {\r\n    ExtendIfUndefined(destination, source);\r\n    return destination;\r\n}","import  { ExtendIfUndefined } from './Tools';\r\n\r\nconst defaults = {\r\n    selectedPanelFocusClass : 'focus',\r\n    selectedPanelDisabledClass: 'disabled',\r\n    dropDownItemDisabledClass: 'disabled'\r\n};\r\n\r\nfunction Bs4AdapterStylingMethodCss(configuration){\r\n    ExtendIfUndefined(configuration, defaults);\r\n\r\n    return {\r\n        Enable($selectedPanel){\r\n            $selectedPanel.removeClass(configuration.selectedPanelDisabledClass)\r\n        },\r\n    \r\n        Disable($selectedPanel){\r\n            $selectedPanel.addClass(configuration.selectedPanelDisabledClass)\r\n        },\r\n    \r\n        FocusIn($selectedPanel){\r\n            $selectedPanel.addClass(configuration.selectedPanelFocusClass);\r\n        },\r\n    \r\n        FocusOut($selectedPanel){\r\n            $selectedPanel.removeClass(configuration.selectedPanelFocusClass);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Bs4AdapterStylingMethodCss;\r\n","import  { ExtendIfUndefined } from './Tools';\r\n\r\nconst defSelectedPanelStyle = {'margin-bottom': '0', 'height': 'auto'};\r\n\r\nconst defaults = {\r\n    selectedPanelDefMinHeight: 'calc(2.25rem + 2px)',\r\n    selectedPanelLgMinHeight:  'calc(2.875rem + 2px)',\r\n    selectedPanelSmMinHeight:  'calc(1.8125rem + 2px)',\r\n    selectedPanelDisabledBackgroundColor: '#e9ecef',\r\n    selectedPanelFocusBorderColor: '#80bdff',\r\n    selectedPanelFocusBoxShadow: '0 0 0 0.2rem rgba(0, 123, 255, 0.25)',\r\n    selectedPanelFocusValidBoxShadow: '0 0 0 0.2rem rgba(40, 167, 69, 0.25)',\r\n    selectedPanelFocusInvalidBoxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)',\r\n    filterInputColor: '#495057',\r\n    //selectedItemContentDisabledOpacity: '.65'\r\n};\r\n\r\nfunction Bs4AdapterStylingMethodJs(configuration){\r\n    ExtendIfUndefined(configuration, defaults);\r\n\r\n    return {\r\n        OnInit(dom){\r\n            dom.selectedPanel.css(defSelectedPanelStyle);\r\n            dom.filterInput.css(\"color\", configuration.filterInputColor);\r\n        },\r\n    \r\n        UpdateSize($selectedPanel){\r\n            if ($selectedPanel.hasClass(\"form-control-lg\")){\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelLgMinHeight);\r\n            } else if ($selectedPanel.hasClass(\"form-control-sm\")){\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelSmMinHeight);\r\n            } else {\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelDefMinHeight);\r\n            }\r\n        },\r\n    \r\n        Enable($selectedPanel){\r\n            $selectedPanel.css(\"background-color\", \"\")\r\n        },\r\n    \r\n        Disable($selectedPanel){\r\n            $selectedPanel.css(\"background-color\", configuration.selectedPanelDisabledBackgroundColor)\r\n        },\r\n    \r\n        FocusIn($selectedPanel){\r\n            if ($selectedPanel.hasClass(\"is-valid\")){\r\n                $selectedPanel.css(\"box-shadow\", configuration.selectedPanelFocusValidBoxShadow);\r\n            } else if ($selectedPanel.hasClass(\"is-invalid\")){\r\n                $selectedPanel.css(\"box-shadow\", configuration.selectedPanelFocusInvalidBoxShadow);\r\n            } else {\r\n                $selectedPanel\r\n                    .css(\"box-shadow\", configuration.selectedPanelFocusBoxShadow)\r\n                    .css(\"border-color\", configuration.selectedPanelFocusBorderColor);\r\n            }\r\n        },\r\n    \r\n        FocusOut($selectedPanel){\r\n                $selectedPanel.css(\"box-shadow\", \"\" ).css(\"border-color\", \"\")\r\n        },\r\n    }\r\n}\r\n\r\n\r\nexport default Bs4AdapterStylingMethodJs;\r\n","import Popper from 'popper.js'\r\n\r\nconst defSelectedPanelStyleSys = {'display':'flex', 'flex-wrap':'wrap', 'list-style-type':'none'};  // remove bullets since this is ul\r\nconst defFilterInputStyleSys   = {'width':'2ch', 'border':'0', 'padding':'0', 'outline':'none', 'background-color':'transparent' };\r\nconst defDropDownMenuStyleSys  = {'list-style-type':'none'}; // remove bullets since this is ul\r\n\r\n\r\n// jQuery used for:\r\n// $.extend, $.contains, $(\"<div>\"), $(function(){}) aka ready\r\n// $e.trigger, $e.unbind, $e.on; but namespaces are not used;\r\n// events: \"focusin\", \"focusout\", \"mouseover\", \"mouseout\", \"keydown\", \"keyup\", \"click\"\r\n// $e.show, $e.hide, $e.focus, $e.css\r\n// $e.appendTo, $e.remove, $e.find, $e.closest, $e.prev, $e.data, $e.val\r\n\r\nclass MultiSelect {\r\n    constructor(optionsAdapter, adapter, selectedItemContentFactory, dropDownItemContentFactory, labelAdapter, configuration, onDispose, window, $) {\r\n        if (typeof Popper === 'undefined') {\r\n            throw new TypeError('DashboardCode BsMultiSelect require Popper.js (https://popper.js.org)')\r\n        }\r\n        // readonly\r\n        this.optionsAdapter = optionsAdapter;\r\n        this.container = optionsAdapter.container; // part of published api\r\n        this.adapter = adapter;\r\n        this.labelAdapter=labelAdapter;\r\n        this.window = window;\r\n        this.document = window.document;\r\n        this.onDispose=onDispose;\r\n        this.$ = $;\r\n        \r\n        this.configuration = configuration;\r\n        \r\n        this.selectedPanel = null;\r\n        this.filterInputItem = null;\r\n        this.filterInput = null;\r\n        this.dropDownMenu = null;\r\n        this.popper = null;\r\n        this.getDisabled=null;\r\n        \r\n        // removable handlers\r\n        this.selectedPanelClick  = null;\r\n        this.documentMouseup = null;\r\n        this.containerMousedown = null;\r\n        this.documentMouseup2 = null;\r\n        \r\n        // state\r\n        this.disabled = null;\r\n        this.filterInputItemOffsetLeft = null; // used to detect changes in input field position (by comparision with current value)\r\n        this.skipFocusout = false;\r\n        this.hoveredDropDownItem = null;\r\n        this.hoveredDropDownIndex = null;\r\n        this.hasDropDownVisible = false;\r\n        this.selectedItemContentFactory=selectedItemContentFactory;\r\n        this.dropDownItemContentFactory=dropDownItemContentFactory;\r\n\r\n        // jquery adapters\r\n        this.$document = $(this.document);\r\n\r\n        \r\n        //optionsAdapter(this.fillContainer, this.init);\r\n        this.init();\r\n    }\r\n\r\n    updateDropDownPosition(force) {\r\n        let offsetLeft = this.filterInputItem.offsetLeft;\r\n        if (force || this.filterInputItemOffsetLeft!=offsetLeft){\r\n            this.popper.update();\r\n            this.filterInputItemOffsetLeft=offsetLeft;\r\n        }\r\n    }\r\n    hideDropDown() {\r\n        this.dropDownMenu.style.display = 'none';\r\n    }\r\n    showDropDown() {\r\n        this.dropDownMenu.style.display = 'block';\r\n    }\r\n    // Public methods\r\n    resetDropDownMenuHover() {\r\n        if (this.hoveredDropDownItem !== null) {\r\n            this.adapter.HoverOut(this.$(this.hoveredDropDownItem));\r\n            this.hoveredDropDownItem = null;\r\n            this.hoveredDropDownIndex = null;\r\n        }\r\n    }\r\n\r\n    filterDropDownMenu() {\r\n        let text = this.filterInput.value.trim().toLowerCase();\r\n        let visible = 0;\r\n        this.$(this.dropDownMenu).find('LI').each((i, dropDownMenuItem) => {\r\n            let $dropDownMenuItem = this.$(dropDownMenuItem);\r\n            if (text == '') {\r\n                $dropDownMenuItem.show();\r\n                visible++;\r\n            }\r\n            else {\r\n                let itemText = $dropDownMenuItem.data(\"option-text\");\r\n                let option = $dropDownMenuItem.data(\"option\");\r\n                if (!option.selected && !option.hidden && !option.disabled && itemText.indexOf(text)>=0) {\r\n                    $dropDownMenuItem.show();\r\n                    visible++;\r\n                } else {\r\n                    $dropDownMenuItem.hide();\r\n                }\r\n            }\r\n        });\r\n        this.hasDropDownVisible = visible > 0;\r\n        this.resetDropDownMenuHover();\r\n        if (visible == 1) {\r\n            let visibleNodeListArray = this.getVisibleNodeListArray();\r\n            this.hoverInInternal(visibleNodeListArray, 0)\r\n        }\r\n    }\r\n\r\n    clearFilterInput(updatePosition) {\r\n        if (this.filterInput.value) {\r\n            this.filterInput.value = '';\r\n            this.input(updatePosition);\r\n        }\r\n    }\r\n\r\n    closeDropDown() {\r\n        this.resetDropDownMenuHover();\r\n        this.clearFilterInput(true);\r\n        this.hideDropDown();\r\n    }\r\n    \r\n    appendDropDownItem(optionElement) {\r\n        let isHidden = optionElement.hidden;\r\n        let itemText = optionElement.text;\r\n        let $dropDownItem = this.$(\"<LI/>\").prop(\"hidden\", isHidden)\r\n        $dropDownItem.data(\"option-text\", itemText.toLowerCase()).appendTo(this.dropDownMenu);\r\n        $dropDownItem.data(\"option\", optionElement);\r\n        let dropDownItem = $dropDownItem.get(0);\r\n        \r\n        //let optionData = {\"optionId\":optionElement.value, \"itemText\": optionElement.text }\r\n        let adjustDropDownItem = this.dropDownItemContentFactory(dropDownItem, optionElement); \r\n        let isDisabled = optionElement.disabled;\r\n        let isSelected = optionElement.selected;\r\n\r\n        if (isSelected && isDisabled)\r\n            adjustDropDownItem.disabledStyle(true);\r\n        else if (isDisabled)\r\n            adjustDropDownItem.disable(isDisabled);\r\n       \r\n        adjustDropDownItem.onSelected(() => {\r\n            let toggleItem = $dropDownItem.data(\"option-toggle\");\r\n            toggleItem();\r\n            this.filterInput.focus();\r\n        });\r\n        \r\n        let selectItem = (doPublishEvents) => {\r\n            if (optionElement.hidden)\r\n                return;\r\n            let $selectedItem = this.$(\"<LI/>\");\r\n            let selectedItem = $selectedItem.get(0);\r\n            \r\n            let adjustPair =(isSelected, toggle, remove, disable) => {\r\n                optionElement.selected = isSelected;\r\n                adjustDropDownItem.select(isSelected);\r\n                $dropDownItem.data(\"option-toggle\", toggle);                    \r\n                $selectedItem.data(\"option-remove\", remove);\r\n                $selectedItem.data(\"option-disable\", disable);\r\n            }\r\n\r\n            let removeItem = () => {\r\n                adjustDropDownItem.disabledStyle(false);\r\n                adjustDropDownItem.disable(optionElement.disabled);\r\n                adjustPair(\r\n                    false, \r\n                    () => {\r\n                        if (optionElement.disabled)\r\n                            return;\r\n                        selectItem(true);\r\n                    }, \r\n                    null,\r\n                    null\r\n                    );\r\n                $selectedItem.remove();\r\n                this.optionsAdapter.triggerChange();\r\n            };\r\n            \r\n            // what is a problem with calling removeSelectedItem directly (not using  setTimeout(removeSelectedItem, 0)):\r\n            // consider situation \"MultiSelect\" on DROPDOWN (that should be closed on the click outside dropdown)\r\n            // therefore we aslo have document's click's handler where we decide to close or leave the DROPDOWN open.\r\n            // because of the event's bubling process removeSelectedItem runs first. \r\n            // that means the event's target element on which we click (the x button) will be removed from the DOM together with badge \r\n            // before we could analize is it belong to our dropdown or not.\r\n            // important 1: we can't just the stop propogation using stopPropogate because click outside dropdown on the similar \r\n            // component that use stopPropogation will not close dropdown (error, dropdown should be closed)\r\n            // important 2: we can't change the dropdown's event handler to leave dropdown open if event's target is null because of\r\n            // the situation described above: click outside dropdown on the same component.\r\n            // Alternatively it could be possible to use stopPropogate but together create custom click event setting new target that belomgs to DOM (e.g. panel)\r\n\r\n            let removeItemAndCloseDropDown = () => {\r\n                removeItem();\r\n                this.closeDropDown();\r\n            };\r\n\r\n            let onRemoveItemEvent = (jqEvent) => {\r\n                setTimeout( ()=> {  \r\n                    removeItem();\r\n                    this.closeDropDown();\r\n                }, 0);\r\n                this.ProcessedBySelectedItemContentEvent=jqEvent;\r\n            };\r\n\r\n            let bsSelectedItemContent = this.selectedItemContentFactory(\r\n                selectedItem,\r\n                optionElement,\r\n                onRemoveItemEvent\r\n            );\r\n            //bsSelectedItemContentList.push(bsSelectedItemContent);\r\n            bsSelectedItemContent.disable(this.disabled);\r\n            adjustPair(true, ()=>removeItem(), removeItemAndCloseDropDown, bsSelectedItemContent.disable);\r\n            $selectedItem.insertBefore(this.filterInputItem);\r\n            if (doPublishEvents){\r\n                this.optionsAdapter.triggerChange();\r\n            }\r\n        }\r\n\r\n        $dropDownItem\r\n            .mouseover(() => this.adapter.HoverIn($dropDownItem))\r\n            .mouseout(() => this.adapter.HoverOut($dropDownItem));\r\n        \r\n        if (optionElement.selected)\r\n            selectItem(false);\r\n        else\r\n            $dropDownItem.data(\"option-toggle\",  () => { \r\n                if (optionElement.disabled)\r\n                    return;\r\n                selectItem(true);\r\n            })\r\n    }\r\n    getVisibleNodeListArray(){\r\n        return this.$(this.dropDownMenu).find('LI:not([style*=\"display: none\"]):not(:hidden)').toArray();\r\n    }\r\n    hoverInInternal(visibleNodeListArray, index){\r\n        this.hoveredDropDownIndex = index;\r\n        this.hoveredDropDownItem = visibleNodeListArray[index];\r\n        this.adapter.HoverIn(this.$(this.hoveredDropDownItem));\r\n    }\r\n    keydownArrow(down) {\r\n        let visibleNodeListArray = this.getVisibleNodeListArray();\r\n        if (visibleNodeListArray.length > 0) {\r\n            if (this.hasDropDownVisible) {\r\n                this.updateDropDownPosition(true);\r\n                this.showDropDown();\r\n            }\r\n            let index;\r\n            if (this.hoveredDropDownItem === null) {\r\n                index = down ? 0 : visibleNodeListArray.length - 1;\r\n            }\r\n            else {\r\n                this.adapter.HoverOut(this.$(this.hoveredDropDownItem));\r\n                if (down) {\r\n                    let newIndex = this.hoveredDropDownIndex + 1;\r\n                    index = newIndex < visibleNodeListArray.length ? newIndex : 0;\r\n                } else {\r\n                    let newIndex = this.hoveredDropDownIndex - 1;\r\n                    index = newIndex >= 0 ? newIndex : visibleNodeListArray.length - 1;\r\n                }\r\n            }\r\n            this.hoverInInternal(visibleNodeListArray, index);\r\n        }\r\n    }\r\n    input(forceUpdatePosition) {\r\n        this.filterInput.style.width = this.filterInput.value.length*1.3 + 2 + \"ch\";\r\n        this.filterDropDownMenu();\r\n\r\n        if (this.hasDropDownVisible) {\r\n            if (forceUpdatePosition) // ignore it if it is called from\r\n                this.updateDropDownPosition(forceUpdatePosition); // we need it to support case when textbox changes its place because of line break (texbox grow with each key press)\r\n            this.showDropDown();\r\n        } else {\r\n            this.hideDropDown();\r\n        }\r\n    }\r\n    Update(){\r\n        let $selectedPanel = this.$(this.selectedPanel);\r\n        this.adapter.UpdateIsValid($selectedPanel, this.optionsAdapter.getIsValid(), this.optionsAdapter.getIsInvalid());\r\n        this.UpdateSizeImpl($selectedPanel);\r\n        this.UpdateDisabledImpl(this.$(this.optionsAdapter.container), $selectedPanel);\r\n    }\r\n    Dispose(){\r\n        if (this.onDispose)\r\n            this.onDispose();\r\n        \r\n        // removable handlers\r\n        this.$document.unbind(\"mouseup\", this.documentMouseup)\r\n                      .unbind(\"mouseup\", this.documentMouseup2);\r\n        \r\n        this.labelAdapter.dispose();\r\n        // if (this.adapter && this.adapter.Dispose) {\r\n        //     this.adapter.Dispose()\r\n        // }\r\n        if (this.popper !== null) {\r\n            this.popper.destroy()\r\n        }\r\n        \r\n        if (this.optionsAdapter.dispose) {\r\n            this.optionsAdapter.dispose();\r\n        }\r\n    }\r\n    UpdateSize(){\r\n        this.UpdateSizeImpl(this.$(this.selectedPanel));\r\n    }\r\n    UpdateDisabled(){\r\n        this.UpdateDisabledImpl(this.$(this.container), this.$(this.selectedPanel));\r\n    }\r\n    UpdateSizeImpl($selectedPanel){\r\n        if (this.adapter.UpdateSize)\r\n            this.adapter.UpdateSize($selectedPanel);\r\n    }\r\n    UpdateDisabledImpl($container, $selectedPanel){\r\n        let disabled = this.optionsAdapter.getDisabled();\r\n        if (this.disabled!==disabled){\r\n            if (disabled) {\r\n                this.filterInput.style.display = \"none\";\r\n                this.adapter.Disable($selectedPanel);\r\n                $selectedPanel.find('LI').each( \r\n                    function (i, e) {let disable = $(e).data(\"option-disable\"); if (disable!=null) disable(true); } );\r\n                    \r\n                $container.unbind(\"mousedown\", this.containerMousedown);\r\n                this.$document.unbind(\"mouseup\", this.documentMouseup);\r\n\r\n                $selectedPanel.unbind(\"click\", this.selectedPanelClick);\r\n                this.$document.unbind(\"mouseup\", this.documentMouseup2);\r\n                \r\n            } else {\r\n                this.filterInput.style.display = \"inline-block\";\r\n                this.adapter.Enable($selectedPanel);\r\n                $selectedPanel.find('LI').each( \r\n                    function (i, e) {let disable = $(e).data(\"option-disable\"); if (disable!=null) disable(false);} );\r\n\r\n                $container.mousedown(this.containerMousedown); // removable\r\n                this.$document.mouseup(this.documentMouseup);  // removable\r\n\r\n                $selectedPanel.click(this.selectedPanelClick); // removable\r\n                this.$document.mouseup(this.documentMouseup2); // removable\r\n            }\r\n            this.disabled=disabled;\r\n        }\r\n    }\r\n\r\n    init() {\r\n        let container = this.optionsAdapter.container;\r\n        let $container = this.$(container);\r\n        this.selectedPanel = this.document.createElement(\"ul\");\r\n        let $selectedPanel = this.$(this.selectedPanel);\r\n        $selectedPanel.css(defSelectedPanelStyleSys);\r\n        $selectedPanel.appendTo(container);\r\n        let $filterInputItem = this.$('<LI/>');\r\n        this.filterInputItem = $filterInputItem.get(0)\r\n        $filterInputItem.appendTo(this.selectedPanel);\r\n        let $filterInput = this.$('<INPUT type=\"search\" autocomplete=\"off\">');\r\n        this.filterInput = $filterInput.get(0);\r\n        $filterInput.css(defFilterInputStyleSys);\r\n        $filterInput.appendTo(this.filterInputItem);\r\n        \r\n        let $dropDownMenu = this.$(\"<UL/>\").css({\"display\":\"none\"});\r\n        $dropDownMenu.appendTo(container);\r\n        this.dropDownMenu = $dropDownMenu.get(0);\r\n        \r\n        // prevent heavy understandable styling error\r\n        $dropDownMenu.css(defDropDownMenuStyleSys);\r\n        // create handlers\r\n        this.documentMouseup = () => {\r\n            this.skipFocusout = false;\r\n        }\r\n\r\n        this.containerMousedown = () => {\r\n            this.skipFocusout = true;\r\n        };\r\n        this.documentMouseup2 = event => {\r\n            if (!(container === event.target || this.$.contains(container, event.target))) {\r\n                this.closeDropDown();\r\n            }\r\n        }\r\n        this.selectedPanelClick = jqEvent => {\r\n            if (jqEvent.target.nodeName != \"INPUT\")\r\n                this.$(this.filterInput).val('').focus();\r\n            if (this.hasDropDownVisible &&  (this.ProcessedBySelectedItemContentEvent==null || this.ProcessedBySelectedItemContentEvent.originalEvent!=jqEvent.originalEvent)){\r\n                this.updateDropDownPosition(true);\r\n                this.showDropDown();\r\n            }\r\n            this.ProcessedBySelectedItemContentEvent=null;\r\n        };\r\n        this.adapter.Init({\r\n            container:$container, selectedPanel:$selectedPanel,\r\n            filterInputItem:$filterInputItem, filterInput:$filterInput,\r\n            dropDownMenu:$dropDownMenu });\r\n        \r\n        this.labelAdapter.init($filterInput); \r\n\r\n        if (this.optionsAdapter.afterContainerFilled)\r\n            this.optionsAdapter.afterContainerFilled();\r\n        this.popper = new Popper(this.filterInput, this.dropDownMenu, {\r\n            placement: 'bottom-start',\r\n            modifiers: {\r\n                preventOverflow: {enabled:false},\r\n                hide: {enabled:false},\r\n                flip: {enabled:false}\r\n                }\r\n        });\r\n        \r\n        this.adapter.UpdateIsValid($selectedPanel, this.optionsAdapter.getIsValid(), this.optionsAdapter.getIsInvalid());\r\n        \r\n        this.UpdateSizeImpl($selectedPanel);\r\n        this.UpdateDisabledImpl($container, $selectedPanel);\r\n        // some browsers (IE11) can change select value (as part of \"autocomplete\") after page is loaded but before \"ready\" event\r\n        // FYI: $(() => { ...}) is jquery ready event shortcut\r\n        this.$(() => {\r\n            let options = this.optionsAdapter.options;\r\n            this.$.each(options,\r\n                (index, el) => {\r\n                    this.appendDropDownItem(el);\r\n                }\r\n            );\r\n            this.hasDropDownVisible = options.length > 0;\r\n            this.updateDropDownPosition(false);\r\n        });\r\n        // there was unmotivated stopPropagation call. commented out.\r\n        // $dropDownMenu.click(  event => { \r\n        //    event.stopPropagation();\r\n        // });\r\n        $dropDownMenu.mouseover(() => this.resetDropDownMenuHover());\r\n\r\n        $filterInput.focusin(() => this.adapter.FocusIn($selectedPanel))\r\n                    .focusout(() => {\r\n                            if (!this.skipFocusout)\r\n                                this.adapter.FocusOut($selectedPanel)\r\n                            });\r\n        $filterInput.on(\"keydown\", (event) => {\r\n            if ([38, 40, 13].indexOf(event.which)>=0 || (event.which == 9 && this.filterInput.value) ) {\r\n                event.preventDefault();\r\n            }\r\n\r\n            if (event.which == 38) {\r\n                this.keydownArrow(false);\r\n            }\r\n            else if (event.which == 40) {\r\n                if (this.hoveredDropDownItem === null && this.hasDropDownVisible) {\r\n                    this.showDropDown();\r\n                }\r\n                this.keydownArrow(true);\r\n            }\r\n            else if (event.which == 9) {\r\n                if (!this.filterInput.value) {\r\n                    this.closeDropDown();\r\n                }\r\n            }\r\n            else if (event.which == 8) {\r\n                // NOTE: this will process backspace only if there are no text in the input field\r\n                // If user will find this inconvinient, we will need to calculate something like this\r\n                // this.isBackspaceAtStartPoint = (this.filterInput.selectionStart == 0 && this.filterInput.selectionEnd == 0);\r\n                if (!this.filterInput.value)\r\n                {\r\n                    let $penult = this.$(this.selectedPanel).find(\"LI:last\").prev();\r\n                    if ($penult.length){\r\n                        let removeItem = $penult.data(\"option-remove\");\r\n                        removeItem();\r\n                    }\r\n                    this.updateDropDownPosition(false);\r\n                }\r\n            }\r\n\r\n            if ([38, 40, 13, 9].indexOf(event.which)==-1)\r\n                this.resetDropDownMenuHover();\r\n        });\r\n        $filterInput.on(\"keyup\", (event) => {\r\n            if (event.which == 13 || event.which == 9 ) {\r\n                if (this.hoveredDropDownItem) {\r\n                    let $hoveredDropDownItem = this.$(this.hoveredDropDownItem);\r\n                    let toggleItem =  $hoveredDropDownItem.data(\"option-toggle\");\r\n                    toggleItem();\r\n                    this.closeDropDown();\r\n                } else {\r\n                    let text = this.filterInput.value.trim().toLowerCase();\r\n                    let dropDownItems = this.dropDownMenu.querySelectorAll(\"LI\");\r\n                    let dropDownItem = null;\r\n                    for (let i = 0; i < dropDownItems.length; ++i) {\r\n                        let it = dropDownItems[i];\r\n                        if (it.textContent.trim().toLowerCase() == text)\r\n                        {\r\n                            dropDownItem=it;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (dropDownItem) {\r\n                        let $dropDownItem = this.$(dropDownItem);\r\n                        let option = $dropDownItem.data(\"option\");\r\n                        if (!option.selected){\r\n                            let toggle = $dropDownItem.data(\"option-toggle\");\r\n                            toggle();\r\n                        }\r\n                        this.clearFilterInput(true);\r\n                    }\r\n                }\r\n            }\r\n            else if (event.which == 27) { // escape\r\n                this.closeDropDown();\r\n            }\r\n        });\r\n        $filterInput.on('input', () => {\r\n            this.input(true);\r\n        });\r\n    }\r\n}\r\n\r\nexport default MultiSelect;\r\n","function AddToJQueryPrototype(pluginName, createPlugin, $){\r\n    const firstChar = pluginName.charAt(0);\r\n    const firstCharLower = firstChar.toLowerCase();\r\n    if (firstCharLower == firstChar) {\r\n        throw new TypeError(`Plugin name '${pluginName}' should be started from upper case char`)\r\n    }\r\n    const prototypableName = firstCharLower + pluginName.slice(1)\r\n    const noConflictPrototypable = $.fn[prototypableName];\r\n    const dataKey = `DashboardCode.${pluginName}`;\r\n\r\n    function prototypable(options) {\r\n        return this.each( function () {\r\n            let $e = $(this);\r\n            let instance = $e.data(dataKey)\r\n            let isMethodName = typeof options === 'string';\r\n            if (!instance) {\r\n                if (isMethodName && /Dispose/.test(options)) {\r\n                    return;\r\n                }\r\n                const optionsObject = (typeof options === 'object')?options:null;\r\n\r\n                instance = createPlugin(this, optionsObject,\r\n                    () => {\r\n                        $e.removeData(dataKey)\r\n                    });\r\n                $e.data(dataKey, instance);\r\n            }\r\n\r\n            if (isMethodName) {\r\n                let methodName = options;\r\n                if (typeof instance[methodName] === 'undefined') {\r\n                    throw new TypeError(`No method named '${methodName}'`)\r\n                }\r\n                instance[methodName]()\r\n            }\r\n        })\r\n    }\r\n\r\n    $.fn[prototypableName] = prototypable;\r\n\r\n    // pluginName with first capitalized letter - return plugin instance for 1st $selected item\r\n    $.fn[pluginName] = function () {\r\n        return $(this).data(dataKey);\r\n    };\r\n\r\n    $.fn[prototypableName].noConflict = function () {\r\n        $.fn[prototypableName] = noConflictPrototypable\r\n        return prototypable;\r\n    }\r\n}\r\n\r\nexport default AddToJQueryPrototype\r\n","import  { ExtendIfUndefinedFluent } from './Tools';\r\n\r\n// addClass, removeClass, css, siblings('label'), hasClass, find('BUTTON').prop(..)\r\nconst defaults = {\r\n    containerClass: 'dashboardcode-bsmultiselect',\r\n    dropDownMenuClass: 'dropdown-menu',\r\n    dropDownItemClass:  'px-2',\r\n    dropDownItemHoverClass: 'text-primary bg-light',\r\n    selectedPanelClass: 'form-control',\r\n    selectedItemClass: 'badge',\r\n    removeSelectedItemButtonClass: 'close',\r\n    filterInputItemClass: '',\r\n    filterInputClass: ''\r\n}\r\n\r\nclass Bs4Adapter {\r\n\r\n    constructor(stylingMethod, configuration){\r\n        this.stylingMethod = stylingMethod;\r\n        this.configuration = ExtendIfUndefinedFluent(configuration, defaults);\r\n    }\r\n   \r\n    Init(dom){\r\n        dom.container.addClass(this.configuration.containerClass);\r\n        dom.selectedPanel.addClass(this.configuration.selectedPanelClass);\r\n        dom.dropDownMenu.addClass(this.configuration.dropDownMenuClass);\r\n        dom.filterInputItem.addClass(this.configuration.filterInputItemClass);\r\n        dom.filterInput.addClass(this.configuration.filterInputClass);\r\n        if (this.stylingMethod.OnInit)\r\n            this.stylingMethod.OnInit(dom)\r\n    }\r\n\r\n    UpdateIsValid($selectedPanel, isValid, isInvalid){\r\n        if (isValid){\r\n            $selectedPanel.addClass(\"is-valid\");\r\n        }\r\n\r\n        if (isInvalid){\r\n            $selectedPanel.addClass(\"is-invalid\");\r\n        }\r\n    }\r\n\r\n    UpdateSize($selectedPanel){\r\n        if(this.stylingMethod.UpdateSize)\r\n            this.stylingMethod.UpdateSize($selectedPanel)\r\n    }\r\n\r\n    HoverIn($dropDownItem){\r\n        $dropDownItem.addClass(this.configuration.dropDownItemHoverClass);\r\n    }\r\n\r\n    HoverOut($dropDownItem){\r\n        $dropDownItem.removeClass(this.configuration.dropDownItemHoverClass);\r\n    }\r\n\r\n    Enable($selectedPanel){\r\n        this.stylingMethod.Enable($selectedPanel)\r\n    }\r\n\r\n    Disable($selectedPanel){\r\n        this.stylingMethod.Disable($selectedPanel)\r\n    }\r\n\r\n    FocusIn($selectedPanel){\r\n        this.stylingMethod.FocusIn($selectedPanel)\r\n    }\r\n\r\n    FocusOut($selectedPanel){\r\n        this.stylingMethod.FocusOut($selectedPanel)\r\n    }\r\n}\r\n\r\nexport default Bs4Adapter;\r\n","function LabelAdapter(label, createInputId){\r\n    var backupForId = label!=null?label.getAttribute('for'):null;\r\n    return {\r\n        init($filterInput) {\r\n            if (label!=null) {\r\n                var newForId = createInputId();\r\n                $filterInput.attr('id', newForId);\r\n                label.setAttribute('for',newForId);\r\n            }\r\n        },\r\n        dispose(){\r\n            if(backupForId)\r\n                label.setAttribute('for',backupForId);\r\n        }\r\n    }\r\n}\r\n\r\nexport default LabelAdapter;","function OptionsAdapterJson(container, options, getDisabled, getIsValid, getIsInvalid, $) {\r\n    var $container = $(container);\r\n    return {\r\n        container,\r\n        options,\r\n        dispose(){\r\n            while (container.firstChild) container.removeChild(container.firstChild);\r\n        },\r\n        triggerChange(){\r\n            $container.trigger( \"multiselect:change\" );\r\n        },\r\n        getDisabled(){\r\n            return getDisabled?getDisabled():false;\r\n        },\r\n        getIsValid(){\r\n            return getIsValid?getIsValid():false;\r\n        },\r\n        getIsInvalid(){\r\n            return getIsInvalid?getIsInvalid():false;\r\n        }\r\n    }\r\n}\r\n\r\nfunction OptionsAdapterElement(selectElement, $) {\r\n    var $selectElement = $(selectElement);\r\n    selectElement.style.display='none';\r\n    var container = document.createElement(\"div\");\r\n    var options = $selectElement.find('OPTION');;\r\n    return {\r\n        container,\r\n        options,\r\n        dispose(){\r\n            container.parentNode.removeChild(container);\r\n        },\r\n        afterContainerFilled(){\r\n            selectElement.parentNode.insertBefore(container, selectElement.nextSibling);\r\n        },\r\n        triggerChange(){\r\n            $selectElement.trigger('change');\r\n            $selectElement.trigger(\"multiselect:change\");\r\n        },\r\n        getDisabled(){\r\n            return selectElement.disabled;\r\n        },\r\n        getIsValid(){\r\n            return selectElement.classList.contains('is-valid');\r\n        },\r\n        getIsInvalid(){\r\n            return selectElement.classList.contains('is-invalid');\r\n        }\r\n    }\r\n}\r\n\r\nexport {OptionsAdapterJson, OptionsAdapterElement};\r\n","import  { ExtendIfUndefined } from './Tools';\r\n\r\nfunction Bs4SelectedItemContentStylingMethodCss(configuration) {\r\n    const defaults = {\r\n            selectedItemContentDisabledClass: 'disabled',\r\n    };\r\n    ExtendIfUndefined(configuration, defaults);\r\n\r\n    return {\r\n        disableSelectedItemContent($content){\r\n            $content.addClass(configuration.selectedItemContentDisabledClass )\r\n        }\r\n    }\r\n}\r\n\r\nconst defSelectedItemStyle = {'padding-left': '0px', 'line-height': '1.5em'};\r\nconst defRemoveSelectedItemButtonStyle = {'font-size':'1.5em', 'line-height': '.9em'};\r\n\r\nfunction Bs4SelectedItemContentStylingMethodJs(configuration) {\r\n        const defaults = {\r\n            selectedItemContentDisabledOpacity: '.65',\r\n        };\r\n        ExtendIfUndefined(configuration, defaults);\r\n    \r\n    return {\r\n        disableSelectedItemContent($content){\r\n            $content.css(\"opacity\", configuration.selectedItemContentDisabledOpacity )\r\n        },\r\n    \r\n        createSelectedItemContent($selectedItem, $button){\r\n            $selectedItem.css(defSelectedItemStyle);\r\n            if ($button)\r\n                $button.css(defRemoveSelectedItemButtonStyle);\r\n        }\r\n    }\r\n}\r\n\r\nfunction ComposeBs4SelectedItemContentFactory(stylingMethod, configuration, $) {\r\n        const defaults = {\r\n            selectedItemClass: 'badge',\r\n            removeSelectedItemButtonClass: 'close'\r\n        };\r\n        ExtendIfUndefined(configuration, defaults);\r\n        \r\n        return function (selectedItem, optionItem, removeSelectedItem){\r\n                let $selectedItem = $(selectedItem)\r\n                $selectedItem.addClass(configuration.selectedItemClass);\r\n                let $content = $(`<span/>`).text(optionItem.text);\r\n                $content.appendTo($selectedItem);\r\n                if (optionItem.disabled)\r\n                    stylingMethod.disableSelectedItemContent($content);\r\n                let $button = $('<button aria-label=\"Close\" tabIndex=\"-1\" type=\"button\"><span aria-hidden=\"true\">&times;</span></button>')\r\n                    // bs 'close' class that will be added to button set the float:right, therefore it impossible to configure no-warp policy \r\n                    // with .css(\"white-space\", \"nowrap\") or  .css(\"display\", \"inline-block\"); TODO: migrate to flex? \r\n                    .css(\"float\", \"none\").appendTo($selectedItem)\r\n                    .addClass(configuration.removeSelectedItemButtonClass) // bs close class set the float:right\r\n                    .on(\"click\", (jqEvent) => removeSelectedItem(jqEvent));\r\n                \r\n                if (stylingMethod.createSelectedItemContent)\r\n                    stylingMethod.createSelectedItemContent($selectedItem, $button);\r\n                return {\r\n                    disable(isDisabled){ $button.prop('disabled', isDisabled); }\r\n                };\r\n            }\r\n    \r\n}\r\n\r\nexport { ComposeBs4SelectedItemContentFactory, Bs4SelectedItemContentStylingMethodJs, Bs4SelectedItemContentStylingMethodCss};\r\n","import  { ExtendIfUndefined} from './Tools';\r\n\r\nfunction Bs4DropDownItemContentStylingMethodCss(configuration) {\r\n    const defaults = {\r\n            selectedItemContentDisabledClass: 'disabled',\r\n    };\r\n    ExtendIfUndefined(configuration, defaults);\r\n    return {\r\n        disabledStyle($checkBox, $checkBoxLabel, isDisbaled){\r\n            if (isDisbaled) \r\n                $checkBox.addClass(configuration.dropDownItemDisabledClass);\r\n            else\r\n                $checkBox.removeClass(configuration.dropDownItemDisabledClass);\r\n        }\r\n    }\r\n}\r\n\r\nfunction Bs4DropDownItemContentStylingMethodJs(configuration) {\r\n    const defaults = {\r\n            selectedItemContentDisabledOpacity: '.65',\r\n            dropdDownLabelDisabledColor: '#6c757d'\r\n    };\r\n    ExtendIfUndefined(configuration, defaults);\r\n    return{\r\n        disabledStyle($checkBox, $checkBoxLabel, isDisbaled){\r\n            $checkBoxLabel.css('color', isDisbaled?configuration.dropdDownLabelDisabledColor:'')\r\n        }\r\n    }\r\n}\r\n\r\nfunction ComposeBs4DropDownItemContentFactory(stylingMethod, configuration, $) {\r\n    const defaults = {\r\n            dropDownItemClass:  'px-2',\r\n    }\r\n    ExtendIfUndefined(configuration, defaults);\r\n    return function(dropDownItem, option){\r\n                let $dropDownItem = $(dropDownItem);\r\n                $dropDownItem.addClass(configuration.dropDownItemClass);\r\n                let $dropDownItemContent= $(`<div class=\"custom-control custom-checkbox\">\r\n                    <input type=\"checkbox\" class=\"custom-control-input\">\r\n                    <label class=\"custom-control-label\"></label>\r\n                </div>`);\r\n                $dropDownItemContent.appendTo(dropDownItem);\r\n                let $checkBox = $dropDownItemContent.find(`INPUT[type=\"checkbox\"]`);\r\n                let $checkBoxLabel = $dropDownItemContent.find(`label`);\r\n                $checkBoxLabel.text(option.text);\r\n\r\n                return { \r\n                    select(isSelected){ $checkBox.prop('checked', isSelected); }, \r\n                    disable(isDisabled){ $checkBox.prop('disabled', isDisabled); },\r\n                    disabledStyle(isDisbaled){ stylingMethod.disabledStyle($checkBox, $checkBoxLabel, isDisbaled); },\r\n                    onSelected(toggle) {\r\n                        $checkBox.on(\"change\", toggle)\r\n                        $dropDownItem.on(\"click\", event => {\r\n                            if (dropDownItem === event.target || $.contains(dropDownItem, event.target)) {\r\n                                toggle();\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n}\r\n\r\nexport { ComposeBs4DropDownItemContentFactory, Bs4DropDownItemContentStylingMethodJs, Bs4DropDownItemContentStylingMethodCss };","import $ from 'jquery'\r\nimport Bs4AdapterStylingMethodCss from './Bs4AdapterStylingMethodCss'\r\nimport Bs4AdapterStylingMethodJs from './Bs4AdapterStylingMethodJs'\r\nimport MultiSelect from './MultiSelect'\r\nimport AddToJQueryPrototype from './AddToJQueryPrototype'\r\nimport Bs4Adapter from './Bs4Adapter';\r\nimport LabelAdapter from './LabelAdapter';\r\n\r\nimport {OptionsAdapterJson,OptionsAdapterElement} from './OptionsAdapters';\r\n\r\nimport { ComposeBs4SelectedItemContentFactory, Bs4SelectedItemContentStylingMethodJs, Bs4SelectedItemContentStylingMethodCss} from './Bs4SelectedItemContentFactory';\r\nimport { ComposeBs4DropDownItemContentFactory, Bs4DropDownItemContentStylingMethodJs, Bs4DropDownItemContentStylingMethodCss } from './Bs4DropDownItemContentFactory';\r\n\r\n(\r\n    (window, $) => {\r\n        AddToJQueryPrototype('BsMultiSelect',\r\n            (element, settings, onDispose) => {\r\n                let configuration = $.extend({}, settings); // settings used per jQuery intialization, configuration per element\r\n                if (configuration.buildConfiguration)\r\n                    configuration.buildConfiguration(element, configuration);\r\n\r\n                let optionsAdapter = null;\r\n                if (configuration.optionsAdapter)\r\n                    optionsAdapter = configuration.optionsAdapter;\r\n                else\r\n                {\r\n                    if (configuration.options){\r\n                        optionsAdapter = OptionsAdapterJson(element, configuration.options, \r\n                            configuration.getDisabled, configuration.getIsValid, configuration.getIsInvalid,\r\n                            $ );\r\n                        if (!configuration.createInputId)\r\n                            configuration.createInputId=()=>`${configuration.containerClass}-generated-filter-${element.id}`;\r\n            \r\n                    }else {\r\n                        if (!configuration.label)\r\n                        {\r\n                            let $formGroup = $(element).closest('.form-group');\r\n                            if ($formGroup.length == 1) {\r\n                                let $label = $formGroup.find(`label[for=\"${element.id}\"]`);\r\n                                if ($label.length>0)\r\n                                {   \r\n                                    let label = $label.get(0);\r\n                                    let forId = label.getAttribute('for');\r\n                                    if (forId == element.id) {\r\n                                        configuration.label = label;\r\n                                    }\r\n                                }   \r\n                            }\r\n                        }\r\n                        optionsAdapter = OptionsAdapterElement(element, $);\r\n                        if (!configuration.createInputId)\r\n                            configuration.createInputId=()=>`${configuration.containerClass}-generated-input-${((element.id)?element.id:element.name).toLowerCase()}-id`;\r\n                    }\r\n                }\r\n\r\n                let labelAdapter = LabelAdapter(configuration.label, configuration.createInputId);\r\n\r\n                let adapter=null;\r\n                if (configuration.adapter)\r\n                    adapter = configuration.adapter;\r\n                else\r\n                {\r\n                    let stylingAdapter = configuration.useCss\r\n                        ? Bs4AdapterStylingMethodCss(configuration)\r\n                        : Bs4AdapterStylingMethodJs(configuration);\r\n                    adapter = new Bs4Adapter(stylingAdapter, configuration);\r\n                }\r\n\r\n                let stylingAdapter2 = configuration.useCss\r\n                    ? Bs4SelectedItemContentStylingMethodCss(configuration, $)\r\n                    : Bs4SelectedItemContentStylingMethodJs(configuration, $);\r\n                let stylingAdapter3 = configuration.useCss\r\n                    ? Bs4DropDownItemContentStylingMethodCss(configuration, $)\r\n                    : Bs4DropDownItemContentStylingMethodJs(configuration, $);\r\n                let bs4SelectedItemContent = ComposeBs4SelectedItemContentFactory(stylingAdapter2, configuration, $);\r\n                let bs4DropDownItemContent = ComposeBs4DropDownItemContentFactory(stylingAdapter3, configuration, $)\r\n\r\n                \r\n                let multiSelect = new MultiSelect(optionsAdapter, adapter, bs4SelectedItemContent, bs4DropDownItemContent, \r\n                    labelAdapter, configuration, onDispose, window, $);\r\n                return multiSelect;\r\n            }, $);\r\n    }\r\n)(window, $)\r\n"],"names":["ExtendIfUndefined","destination","source","property","undefined","ExtendIfUndefinedFluent","defaults","selectedPanelFocusClass","selectedPanelDisabledClass","dropDownItemDisabledClass","Bs4AdapterStylingMethodCss","configuration","Enable","$selectedPanel","removeClass","Disable","addClass","FocusIn","FocusOut","defSelectedPanelStyle","selectedPanelDefMinHeight","selectedPanelLgMinHeight","selectedPanelSmMinHeight","selectedPanelDisabledBackgroundColor","selectedPanelFocusBorderColor","selectedPanelFocusBoxShadow","selectedPanelFocusValidBoxShadow","selectedPanelFocusInvalidBoxShadow","filterInputColor","Bs4AdapterStylingMethodJs","OnInit","dom","selectedPanel","css","filterInput","UpdateSize","hasClass","defSelectedPanelStyleSys","defFilterInputStyleSys","defDropDownMenuStyleSys","MultiSelect","optionsAdapter","adapter","selectedItemContentFactory","dropDownItemContentFactory","labelAdapter","onDispose","window","$","Popper","TypeError","container","document","filterInputItem","dropDownMenu","popper","getDisabled","selectedPanelClick","documentMouseup","containerMousedown","documentMouseup2","disabled","filterInputItemOffsetLeft","skipFocusout","hoveredDropDownItem","hoveredDropDownIndex","hasDropDownVisible","$document","init","updateDropDownPosition","force","offsetLeft","update","hideDropDown","style","display","showDropDown","resetDropDownMenuHover","HoverOut","filterDropDownMenu","text","value","trim","toLowerCase","visible","find","each","i","dropDownMenuItem","$dropDownMenuItem","show","itemText","data","option","selected","hidden","indexOf","hide","visibleNodeListArray","getVisibleNodeListArray","hoverInInternal","clearFilterInput","updatePosition","input","closeDropDown","appendDropDownItem","optionElement","isHidden","$dropDownItem","prop","appendTo","dropDownItem","get","adjustDropDownItem","isDisabled","isSelected","disabledStyle","disable","onSelected","toggleItem","focus","selectItem","doPublishEvents","$selectedItem","selectedItem","adjustPair","toggle","remove","select","removeItem","triggerChange","removeItemAndCloseDropDown","onRemoveItemEvent","jqEvent","setTimeout","ProcessedBySelectedItemContentEvent","bsSelectedItemContent","insertBefore","mouseover","HoverIn","mouseout","toArray","index","keydownArrow","down","length","newIndex","forceUpdatePosition","width","Update","UpdateIsValid","getIsValid","getIsInvalid","UpdateSizeImpl","UpdateDisabledImpl","Dispose","unbind","dispose","destroy","UpdateDisabled","$container","e","mousedown","mouseup","click","createElement","$filterInputItem","$filterInput","$dropDownMenu","event","target","contains","nodeName","val","originalEvent","Init","afterContainerFilled","placement","modifiers","preventOverflow","enabled","flip","options","el","focusin","focusout","on","which","preventDefault","$penult","prev","$hoveredDropDownItem","dropDownItems","querySelectorAll","it","textContent","AddToJQueryPrototype","pluginName","createPlugin","firstChar","charAt","firstCharLower","prototypableName","slice","noConflictPrototypable","fn","dataKey","prototypable","$e","instance","isMethodName","test","optionsObject","removeData","methodName","noConflict","containerClass","dropDownMenuClass","dropDownItemClass","dropDownItemHoverClass","selectedPanelClass","selectedItemClass","removeSelectedItemButtonClass","filterInputItemClass","filterInputClass","Bs4Adapter","stylingMethod","isValid","isInvalid","LabelAdapter","label","createInputId","backupForId","getAttribute","newForId","attr","setAttribute","OptionsAdapterJson","firstChild","removeChild","trigger","OptionsAdapterElement","selectElement","$selectElement","parentNode","nextSibling","classList","Bs4SelectedItemContentStylingMethodCss","selectedItemContentDisabledClass","disableSelectedItemContent","$content","defSelectedItemStyle","defRemoveSelectedItemButtonStyle","Bs4SelectedItemContentStylingMethodJs","selectedItemContentDisabledOpacity","createSelectedItemContent","$button","ComposeBs4SelectedItemContentFactory","optionItem","removeSelectedItem","Bs4DropDownItemContentStylingMethodCss","$checkBox","$checkBoxLabel","isDisbaled","Bs4DropDownItemContentStylingMethodJs","dropdDownLabelDisabledColor","ComposeBs4DropDownItemContentFactory","$dropDownItemContent","element","settings","extend","buildConfiguration","id","$formGroup","closest","$label","forId","name","stylingAdapter","useCss","stylingAdapter2","stylingAdapter3","bs4SelectedItemContent","bs4DropDownItemContent","multiSelect"],"mappings":"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"}