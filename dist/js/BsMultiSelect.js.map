{"version":3,"file":"BsMultiSelect.js","sources":["../../js/src/Bootstrap4Adapter.es8.js","../../js/src/BsMultiSelect.es8.js"],"sourcesContent":["class Bootstrap4Adapter {\r\n\r\n    constructor(jQuery, options, hiddenSelect) {\r\n        this.jQuery=jQuery;\r\n        this.options=options;\r\n        this.hiddenSelect=hiddenSelect;\r\n    }\r\n\r\n    CreateSelectedItemContent($selectedItem, itemText, removeSelectedItem){\r\n        const defSelectedItemClass = 'badge';\r\n        const defSelectedItemStyle = {'padding-left': '0px', 'line-height': '1rem'};\r\n        const defRemoveSelectedItemButtonClass = 'close';\r\n        const defRemoveSelectedItemButtonStyle = {'line-height': '1rem', 'font-size':'1.3rem'};\r\n\r\n        if (!this.options.selectedItemClass){\r\n            $selectedItem.addClass(defSelectedItemClass);\r\n            $selectedItem.css(defSelectedItemStyle)\r\n        }else{\r\n            $selectedItem.addClass(this.options.selectedItemClass);\r\n        }\r\n            \r\n        let $text = this.jQuery(`<span>${itemText}</span>`)\r\n        let $buttom = this.jQuery('<button aria-label=\"Close\" tabIndex=\"-1\" type=\"button\"><span aria-hidden=\"true\">&times;</span></button>');\r\n\r\n        if (!this.options.removeSelectedItemButtonClass){\r\n            $buttom.addClass(defRemoveSelectedItemButtonClass);\r\n            $buttom.css(defRemoveSelectedItemButtonStyle);\r\n        }\r\n        else{\r\n            $buttom.addClass(this.options.removeSelectedItemButtonClass)\r\n        }\r\n        $buttom.click(() => {\r\n            removeSelectedItem();\r\n        });\r\n\r\n        $text.appendTo($selectedItem);\r\n        $buttom.appendTo($selectedItem); \r\n    }\r\n\r\n    CreateDropDownItemContent($dropDownItem, optionId, itemText, isSelected){\r\n        let checkBoxId = `${this.options.containerClass}-${this.hiddenSelect.name.toLowerCase()}-generated-id-${optionId.toLowerCase()}`;\r\n        let checked = isSelected ? \"checked\" : \"\";\r\n\r\n        let $dropDownItemContent= this.jQuery(`<div class=\"custom-control custom-checkbox\">\r\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"${checkBoxId}\" ${checked}>\r\n                <label class=\"custom-control-label\" for=\"${checkBoxId}\">${itemText}</label>\r\n        </div>`)\r\n        $dropDownItemContent.appendTo($dropDownItem);\r\n        $dropDownItem.addClass(this.options.dropDownItemClass)\r\n        let $checkBox = $dropDownItem.find(`INPUT[type=\"checkbox\"]`);\r\n        let adoptDropDownItem = (isSelected) => {\r\n            $checkBox.prop('checked', isSelected);\r\n        }\r\n        return adoptDropDownItem;\r\n    }\r\n\r\n    Init($selectedPanel){\r\n        let $hiddenSelect = this.jQuery(this.hiddenSelect);\r\n        if ($hiddenSelect.hasClass(\"is-valid\")){\r\n            $selectedPanel.addClass(\"is-valid\");\r\n        }\r\n        \r\n        if ($hiddenSelect.hasClass(\"is-invalid\")){\r\n            $selectedPanel.addClass(\"is-invalid\");\r\n        }\r\n    }\r\n\r\n    Enable($selectedPanel, isEnabled){\r\n        if(isEnabled){\r\n            let inputId = this.hiddenSelect.id;\r\n            let $formGroup = this.jQuery(this.hiddenSelect).closest('.form-group');\r\n            \r\n            if ($formGroup.length == 1) {\r\n                let $label = $formGroup.find(`label[for=\"${inputId}\"]`);\r\n                let f = $label.attr('for');\r\n                let $filterInput = $selectedPanel.find('input');\r\n                if (f == this.hiddenSelect.id) {\r\n                    let id = `${this.options.containerClass}-generated-filter-id-${this.hiddenSelect.id}`;\r\n                    $filterInput.attr('id', id);\r\n                    $label.attr('for', id);\r\n                }\r\n            }\r\n        }\r\n        else{\r\n            if(!this.options.selectedPanelReadonlyClass){\r\n                $selectedPanel.css({\"background-color\": this.options.selectedPanelReadonlyBackgroundColor});\r\n            }else{\r\n                $selectedPanel.addClass(this.options.selectedPanelReadonlyClass);\r\n            }\r\n            $selectedPanel.find('BUTTON').prop(\"disabled\", true);\r\n        }\r\n    }\r\n    Hover($li, isEnabled){\r\n        if (isEnabled)\r\n            $li.addClass('text-primary').addClass('bg-light');\r\n        else\r\n            $li.removeClass('text-primary').removeClass('bg-light');\r\n    }\r\n\r\n    FilterClick(event){\r\n        return !(event.target.nodeName == \"BUTTON\" || (event.target.nodeName == \"SPAN\" && event.target.parentElement.nodeName == \"BUTTON\"))\r\n    }\r\n\r\n    Focus($selectedPanel, isFocused){\r\n        if (isFocused){\r\n            if (this.options.selectedPanelFocusClass){\r\n                $selectedPanel.addClass(\"this.options.selectedPanelFocusClass\");\r\n            }\r\n            else\r\n            {\r\n                if ($selectedPanel.hasClass(\"is-valid\") &&  this.options.selectedPanelValidBoxShadow){\r\n                    $selectedPanel.css(\"box-shadow\", this.options.selectedPanelValidBoxShadow);              \r\n                } else if ($selectedPanel.hasClass(\"is-invalid\") && this.options.selectedPanelInvalidBoxShadow){\r\n                    $selectedPanel.css(\"box-shadow\", this.options.selectedPanelInvalidBoxShadow);\r\n                } else {\r\n                    $selectedPanel\r\n                        .css(\"box-shadow\", this.options.selectedPanelBoxShadow)\r\n                        .css(\"border-color\", this.options.selectedPanelBorderColor);\r\n                }\r\n            }\r\n\r\n        }else{\r\n            if (this.options.selectedPanelFocusClass){\r\n                $selectedPanel.removeClass(this.options.selectedPanelFocusClass);\r\n            } else {\r\n                $selectedPanel.css(\"box-shadow\", \"\" ).css(\"border-color\", \"\")\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Bootstrap4Adapter;","import $ from 'jquery'\nimport Popper from 'popper.js'\nimport Bootstrap4Adapter from './Bootstrap4Adapter.es8'\n\n// TODO: try to find convinient way to declare private members. Is it convinient enough to move them into IIFE?\nconst BsMultiSelect = ((window, $, Popper) => {\n    const JQUERY_NO_CONFLICT = $.fn[pluginName];\n    const pluginName = 'dashboardCodeBsMultiSelect';\n    const dataKey = `plugin_${pluginName}`;\n\n    const defSelectedPanelClass = 'form-control';\n    const defSelectedPanelStyle = {'margin-bottom': '0'}; // 16 is for bootstrap reboot for UL\n    const defSelectedPanelStyleSys = {'display': 'flex', \"flex-wrap\": \"wrap\"};\n\n    const defFilterInputItemStyleSys = {'list-style-type':'none'}; \n    const defFilterInputStyleSys = {'width': '2ch', 'border': '0', 'padding': '0', 'outline': 'none'};\n    \n    const defDropDownMenuStyleSys =  {'list-style-type':'none'}; // ul usualy has bullets\n    const defaults = {\n        doManageFocus:true,\n        //usePopper: true,\n        selectedPanelDefMinHeight: 'calc(2.25rem + 2px)',\n        selectedPanelReadonlyBackgroundColor: '#e9ecef',\n        selectedPanelBoxShadow: '0 0 0 0.2rem rgba(0, 123, 255, 0.25)',\n        selectedPanelBorderColor: '#80bdff',\n        selectedPanelValidBoxShadow: ' 0 0 0 0.2rem rgba(40, 167, 69, 0.25)',\n        selectedPanelInvalidBoxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)',\n        filterInputColor: '#495057',\n        containerClass: 'dashboardcode-bsmultiselect',\n        dropDownMenuClass: 'dropdown-menu',\n        dropDownItemClass: 'px-2',\n        selectedPanelClass: '',\n        selectedPanelFocusClass : '',\n        selectedPanelReadonlyClass: '',\n        selectedItemClass: '', \n        removeSelectedItemButtonClass: '',\n        filterInputItemClass: '', \n        filterInputClass: ''\n    };\n\n    class Plugin {\n        constructor(element, options) {\n            if (typeof Popper === 'undefined') {\n                throw new TypeError('DashboardCode BsMultiSelect require Popper.js (https://popper.js.org)')\n            }\n\n            // readonly\n            this.hiddenSelect = element;\n            this.options = $.extend({}, defaults, options);\n            this.jQuery = $;\n            this.adapter = new Bootstrap4Adapter($, this.options, this.hiddenSelect);\n            \n            this.container = null;\n            this.dropDownMenu = null;\n            this.selectedPanel = null;\n            this.filterInput = null;\n            this.filterInputItem = null;\n            this.popper = null;\n\n            // state\n            this.filterInputItemOffsetLeft = null;\n            this.skipFocusout = false;\n            this.backspaceAtStartPoint = null;\n            this.selectedDropDownItem = null;\n            this.selectedDropDownIndex = null;\n            this.hasItems = false;\n\n            this.init();\n        }\n\n        updateDropDownPosition(force) {\n            let offsetLeft = this.filterInputItem.offsetLeft;\n            if (force || this.filterInputItemOffsetLeft!=offsetLeft){\n                this.popper.update();\n                this.filterInputItemOffsetLeft=offsetLeft;\n            }\n        }\n\n        hideDropDown() {\n            $(this.dropDownMenu).hide()\n        }\n\n        showDropDown() {\n            this.updateDropDownPosition(true);\n            $(this.dropDownMenu).show()\n        }\n\n        setHiddenSelectOptionSelected(optionId, isChecked) {\n            for (let i = 0; i < this.hiddenSelect.options.length; i += 1) {\n                let option = this.hiddenSelect.options[i];\n                if (option.value == optionId) {\n                    this.hiddenSelect.options[i].selected = isChecked;\n                    break;\n                }\n            }\n        }\n\n        // Public methods\n        getInputValue() {\n            return $(this.hiddenSelect).val();\n        }\n\n        closeDropDown() {\n            this.resetSelectDropDownMenu();\n            this.clearFilterInput();\n            this.hideDropDown();\n            this.updateDropDownPosition();\n        }\n\n        clearFilterInput(updatePosition) {\n            if (this.filterInput.value != '') {\n                this.filterInput.value = '';\n                this.adoptFilterInputLength();\n                this.filterDropDownMenu();\n                if (updatePosition && this.hasItems) {\n                    this.updateDropDownPosition(false); \n                } \n            }\n        }\n\n        filterDropDownMenu() {\n            let text = this.filterInput.value.trim().toLowerCase();\n            let visible = 0;\n            $(this.dropDownMenu).find('LI').each((i, dropDownMenuItem) => {\n                let $dropDownMenuItem = $(dropDownMenuItem);\n                if (text == '') {\n                    $dropDownMenuItem.show();\n                    visible++;\n                }\n                else {\n                    let itemText = $dropDownMenuItem.data(\"option-text\");\n                    let isSelected = $dropDownMenuItem.data(\"option-selected\"); \n                    if (!isSelected && itemText.indexOf(text)>=0) {\n                        $dropDownMenuItem.show();\n                        visible++;\n                    } else {\n                        $dropDownMenuItem.hide();\n                    }\n                }\n            });\n            this.hasItems = visible > 0;\n            this.resetSelectDropDownMenu();\n        }\n\n        clickDropDownItem(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            let toggleItem = $(event.currentTarget).closest(\"LI\").data(\"option-toggle\");\n            toggleItem();\n            this.clearFilterInput(false); \n            this.filterInput.focus(); \n        }\n        \n        appendDropDownItem(optionElement) {\n            let optionId = optionElement.value;\n            let itemText = optionElement.text;\n            let isSelected = optionElement.selected;\n            let $dropDownItem = $(\"<li/>\");\n            $dropDownItem.data(\"option-id\", optionId);\n            $dropDownItem.data(\"option-text\", itemText.toLowerCase());\n\n            let adoptDropDownItem = this.adapter.CreateDropDownItemContent($dropDownItem, optionId, itemText, isSelected)\n            $dropDownItem.appendTo($(this.dropDownMenu));\n\n            let appendItem = () => {\n                $dropDownItem.data(\"option-selected\", true);\n                let $selectedItem = $(\"<li/>\");\n                $selectedItem.data(\"option-id\", optionId);\n                optionElement.selected = true;\n                adoptDropDownItem(true);\n\n                let removeItem = () => {\n                    $dropDownItem.data(\"option-selected\", false);\n                    $dropDownItem.data(\"option-toggle\", appendItem);\n                    $selectedItem.data(\"option-remove\", null);\n                    $selectedItem.remove();\n                    optionElement.selected = false;\n                    adoptDropDownItem(false);\n                };\n\n                this.adapter.CreateSelectedItemContent(\n                    $selectedItem, \n                    itemText, () => {\n                        removeItem();\n                        this.clearFilterInput(true);\n                        this.updateDropDownPosition(false);\n                        $(this.filterInput).focus();\n                });\n                $selectedItem.insertBefore(this.jQuery(this.filterInputItem));\n                $dropDownItem.data(\"option-toggle\", removeItem);\n                $selectedItem.data(\"option-remove\", removeItem);\n                return $selectedItem;\n            }\n            $dropDownItem.data(\"option-toggle\", () => appendItem());\n            \n            if (isSelected) {\n                appendItem();\n            }\n        }\n\n        adoptFilterInputLength() {\n            this.filterInput.style.width = this.filterInput.value.length*1.3 + 2 + \"ch\";\n        }\n\n        analyzeInputText() {\n            let text = this.filterInput.value.trim().toLowerCase();\n            let dropDownItems = this.dropDownMenu.querySelectorAll(\"LI\");\n            let dropDownItem = null;\n            for (let i = 0; i < dropDownItems.length; ++i) {\n                let it = dropDownItems[i];\n                if (it.textContent.trim().toLowerCase() == text)\n                {\n                    dropDownItem=it;\n                    break;\n                }\n            }\n            if (dropDownItem) {\n                let $dropDownItem = $(dropDownItem);\n                let isSelected = $dropDownItem.data(\"option-selected\");\n                if (!isSelected){\n                    let toggle = $dropDownItem.data(\"option-toggle\");\n                    toggle();\n                }\n                this.clearFilterInput(true);\n            }\n        }\n\n        resetSelectDropDownMenu() {\n            if (this.selectedDropDownItem !== null) {\n                this.adapter.Hover($(this.selectedDropDownItem), false);\n                this.selectedDropDownItem = null;\n            }\n            this.selectedDropDownIndex = null;\n        }\n        \n        keydownArrow(down) {\n            let visibleNodeListArray = $(this.dropDownMenu).find('LI:not([style*=\"display: none\"])').toArray();\n            if (visibleNodeListArray.length > 0) {\n                if (this.hasItems) {\n                    this.showDropDown();\n                }\n                if (this.selectedDropDownItem === null) {\n                    this.selectedDropDownIndex = down ? 0 : visibleNodeListArray.length - 1;\n                }\n                else {\n                    // IE10-11 doesn't support multiple arguments in classList remove \n                    this.adapter.Hover($(this.selectedDropDownItem), false);\n                    if (down) {\n                        let newIndex = this.selectedDropDownIndex + 1;\n                        this.selectedDropDownIndex = newIndex < visibleNodeListArray.length ? newIndex : 0;\n                    } else {\n                        let newIndex = this.selectedDropDownIndex - 1;\n                        this.selectedDropDownIndex = newIndex >= 0 ? newIndex : visibleNodeListArray.length - 1;\n                    }\n                }\n                this.selectedDropDownItem = visibleNodeListArray[this.selectedDropDownIndex];\n                // IE10-11 doesn't support multiple arguments in classList add \n                this.adapter.Hover($(this.selectedDropDownItem), true);\n            }\n        }\n\n        init() {\n            let $hiddenSelect = $(this.hiddenSelect);\n            $hiddenSelect.hide();\n            let disabled = this.hiddenSelect.disabled;\n\n            let $container = $(\"<div/>\");\n            $container.addClass(this.options.containerClass);\n            $container.insertAfter($hiddenSelect);\n                \n            this.container = $container.get(0);\n\n            let $selectedPanel = $(\"<ul/>\");\n            $selectedPanel.css(defSelectedPanelStyleSys);\n            if (!this.options.selectedPanelClass){\n                $selectedPanel.addClass(defSelectedPanelClass);\n                $selectedPanel.css(defSelectedPanelStyle);\n                $selectedPanel.css({\"min-height\":this.options.selectedPanelMinHeight});\n            }\n            else\n                $selectedPanel.addClass(this.options.selectedPanelClass);\n            $selectedPanel.appendTo(this.container);\n            this.selectedPanel = $selectedPanel.get(0);\n            this.adapter.Init($selectedPanel);\n            \n\n            let $filterInputItem = $('<li/>');\n            this.filterInputItem = $filterInputItem.get(0)\n            $filterInputItem.css(defFilterInputItemStyleSys)\n\n            if (!this.options.filterInputItemClass)\n                $filterInputItem.addClass(this.options.filterInputItemClass)\n            \n            $filterInputItem.appendTo(this.selectedPanel);\n            \n\n            let $filterInput = $('<input type=\"search\" autocomplete=\"off\">');\n            if (!this.options.filterInputClass){\n                $filterInput.css(defFilterInputStyleSys);\n                $filterInput.css(\"color\", this.options.filterInputColor);\n            } else {\n                $filterInput.addClass(this.options.filterInputClass);\n            }\n            $filterInput.appendTo(this.filterInputItem);\n            this.filterInput = $filterInput.get(0);\n\n            let $dropDownMenu = $(\"<ul/>\")\n                .css({\"display\":\"none\"})\n                .appendTo($container);\n            this.dropDownMenu = $dropDownMenu.get(0);\n\n            $dropDownMenu.addClass(this.options.dropDownMenuClass);\n            // prevent heavy understandable styling error\n            $dropDownMenu.css(defDropDownMenuStyleSys);\n\n            this.popper = new Popper(this.filterInput, this.dropDownMenu, {\n                placement: 'bottom-start',\n                modifiers: {\n                    preventOverflow: {enabled:false},\n                    hide: {enabled:false},\n                    flip: { enabled:false }\n                    }\n            });\n            \n            // some browsers (IE11) can change select value (\"autocomplet\") after page is loaded but before \"ready\" event\n            $(document).ready(() => {\n                let selectOptions = $hiddenSelect.find('option');\n                selectOptions.each(\n                    (index, optionElement) => {\n                        this.appendDropDownItem(optionElement);\n                    }\n                );\n                this.hasItems = selectOptions.length > 0;\n                this.updateDropDownPosition(false);\n\n                $dropDownMenu.find('li').click(event => {\n                    this.clickDropDownItem(event);\n                });\n\n                $dropDownMenu.find(\"li\").on(\"mouseover\", event => {\n                    this.adapter.Hover($(event.target).closest(\"li\"), true);\n                });\n\n                $dropDownMenu.find(\"li\").on(\"mouseout\", event => {\n                    this.adapter.Hover($(event.target).closest(\"li\"), false);\n                });\n            });\n\n            if (disabled) {\n                this.filterInput.style.display = \"none\";\n                this.adapter.Enable($(this.selectedPanel), false);\n            } else {\n                this.filterInput.style.display = \"inline-block\";\n                this.adapter.Enable($(this.selectedPanel), true);\n                \n                $dropDownMenu.click((event) => {\n                    event.stopPropagation();\n                });\n\n                $dropDownMenu.on(\"mouseover\", () => {\n                    this.resetSelectDropDownMenu();\n                });\n\n                $selectedPanel.click((event) => {\n                    if (event.target.nodeName != \"INPUT\")\n                        $(this.filterInput).val('').focus();\n                    if (this.hasItems)\n                        if (this.adapter.FilterClick(event))\n                            this.showDropDown();\n                });\n\n                $filterInput.on(\"keydown\", (event) => {\n                    if (event.which == 38) {\n                        event.preventDefault();\n                        this.keydownArrow(false);\n                    }\n                    else if (event.which == 40) {\n                        event.preventDefault()\n                        this.keydownArrow(true);\n                    }\n                    else if (event.which == 13) {\n                        event.preventDefault();\n                    }\n                    else if (event.which == 9) {\n                        if (this.filterInput.value) {\n                            event.preventDefault();\n                        }\n                        else {\n                            this.closeDropDown();\n                        }\n                    }\n                    else {\n                        if (event.which == 8) {\n                            // detect that backspace is at start of input field (this will be used at keydown)\n                            this.backspaceAtStartPoint = (this.filterInput.selectionStart == 0 && this.filterInput.selectionEnd == 0);\n                        }\n                        this.resetSelectDropDownMenu();\n                    }\n                });\n\n                $filterInput.on(\"keyup\", (event) => {\n                    if (event.which == 13 || event.which == 9 ) {\n                        if (this.selectedDropDownItem) {\n                            let $selectedDropDownItem = $(this.selectedDropDownItem);\n                            let toggleItem =  $selectedDropDownItem.data(\"option-toggle\");\n                            toggleItem();\n                            this.closeDropDown();\n                        } else {\n                            this.analyzeInputText();\n                        }\n                    } else if (event.which == 8) {\n                        if (this.filterInput.selectionEnd == 0 && this.filterInput.selectionStart == 0 && this.backspaceAtStartPoint) {\n                            let $penult = $(this.selectedPanel).find(\"LI:last\").prev();\n                            if ($penult.length){\n                                let removeItem = $penult.data(\"option-remove\");\n                                removeItem();\n                            }\n                        }\n                        this.backspaceAtStartPoint = null;\n                        //if ($dropDownMenu.is(':hidden'))\n                        this.updateDropDownPosition(false);\n                    } else if (event.which == 27) { // escape\n                        this.closeDropDown();\n                    }\n                });\n\n                // Set on change for filter input\n                $filterInput.on('input', () => { \n                    this.adoptFilterInputLength();\n                    this.filterDropDownMenu();\n                    if (this.hasItems) {\n                        this.updateDropDownPosition(false); // we need it to support case when textbox changes its place because of line break (texbox grow with each key press)\n                        this.showDropDown();\n                    } else {\n                        this.hideDropDown();\n                    }\n                });\n\n                if (this.options.doManageFocus)\n                {\n                    $filterInput.focusin(() => {\n                        this.adapter.Focus($selectedPanel, true);\n                    });\n\n                    $filterInput.focusout(() => {\n                        if (!this.skipFocusout) {\n                            this.adapter.Focus($selectedPanel, false);\n                        }\n                    });\n\n                    $container.mousedown(() => {\n                        this.skipFocusout = true;\n                    });\n\n                    $(window.document).mouseup(() => {\n                        this.skipFocusout = false;\n                    });\n                }\n\n                $(window.document).mouseup((event) => {\n                    if (!(this.container === event.target || $.contains(this.container, event.target))) {\n                        this.closeDropDown();\n                    }\n                });\n            }\n        }\n    }\n\n    function jQueryInterface(options) {\n        return this.each(function () {\n            let data = $(this).data(dataKey)\n\n            if (!data) {\n                if (/dispose|hide/.test(options)) {\n                    return;\n                }\n                const optionsObject = (typeof options === 'object')?options:null;\n                data = new Plugin(this, optionsObject);\n                $(this).data(dataKey, data);\n            }\n\n            if (typeof options === 'string') {\n                let methodName = options;\n                if (typeof data[methodName] === 'undefined') {\n                    throw new TypeError(`No method named \"${methodName}\"`)\n                }\n                data[methodName]()\n            }\n        })\n    }\n\n    $.fn[pluginName] = jQueryInterface;\n\n    // in case of mulitple $(this) it will return 1st element plugin instance\n    $.fn[pluginName.charAt(0).toUpperCase() + pluginName.slice(1)] = function () {\n        return $(this).data(\"plugin_\" + pluginName);\n    };\n\n    $.fn[pluginName].Constructor = Plugin;\n\n    $.fn[pluginName].noConflict = function () {\n        $.fn[pluginName] = JQUERY_NO_CONFLICT\n        return jQueryInterface;\n    }\n    return Plugin;\n})(window, $, Popper);\n\nexport default BsMultiSelect;\n"],"names":["Bootstrap4Adapter","jQuery","options","hiddenSelect","CreateSelectedItemContent","$selectedItem","itemText","removeSelectedItem","defSelectedItemClass","defSelectedItemStyle","defRemoveSelectedItemButtonClass","defRemoveSelectedItemButtonStyle","selectedItemClass","addClass","css","$text","$buttom","removeSelectedItemButtonClass","click","appendTo","CreateDropDownItemContent","$dropDownItem","optionId","isSelected","checkBoxId","containerClass","name","toLowerCase","checked","$dropDownItemContent","dropDownItemClass","$checkBox","find","adoptDropDownItem","prop","Init","$selectedPanel","$hiddenSelect","hasClass","Enable","isEnabled","inputId","id","$formGroup","closest","length","$label","f","attr","$filterInput","selectedPanelReadonlyClass","selectedPanelReadonlyBackgroundColor","Hover","$li","removeClass","FilterClick","event","target","nodeName","parentElement","Focus","isFocused","selectedPanelFocusClass","selectedPanelValidBoxShadow","selectedPanelInvalidBoxShadow","selectedPanelBoxShadow","selectedPanelBorderColor","BsMultiSelect","window","$","Popper","JQUERY_NO_CONFLICT","fn","pluginName","dataKey","defSelectedPanelClass","defSelectedPanelStyle","defSelectedPanelStyleSys","defFilterInputItemStyleSys","defFilterInputStyleSys","defDropDownMenuStyleSys","defaults","doManageFocus","selectedPanelDefMinHeight","filterInputColor","dropDownMenuClass","selectedPanelClass","filterInputItemClass","filterInputClass","Plugin","element","TypeError","extend","adapter","container","dropDownMenu","selectedPanel","filterInput","filterInputItem","popper","filterInputItemOffsetLeft","skipFocusout","backspaceAtStartPoint","selectedDropDownItem","selectedDropDownIndex","hasItems","init","updateDropDownPosition","force","offsetLeft","update","hideDropDown","hide","showDropDown","show","setHiddenSelectOptionSelected","isChecked","i","option","value","selected","getInputValue","val","closeDropDown","resetSelectDropDownMenu","clearFilterInput","updatePosition","adoptFilterInputLength","filterDropDownMenu","text","trim","visible","each","dropDownMenuItem","$dropDownMenuItem","data","indexOf","clickDropDownItem","preventDefault","stopPropagation","toggleItem","currentTarget","focus","appendDropDownItem","optionElement","appendItem","removeItem","remove","insertBefore","style","width","analyzeInputText","dropDownItems","querySelectorAll","dropDownItem","it","textContent","toggle","keydownArrow","down","visibleNodeListArray","toArray","newIndex","disabled","$container","insertAfter","get","selectedPanelMinHeight","$filterInputItem","$dropDownMenu","placement","modifiers","preventOverflow","enabled","flip","document","ready","selectOptions","index","on","display","which","selectionStart","selectionEnd","$selectedDropDownItem","$penult","prev","focusin","focusout","mousedown","mouseup","contains","jQueryInterface","test","optionsObject","methodName","charAt","toUpperCase","slice","Constructor","noConflict"],"mappings":"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"}