{"version":3,"file":"BsMultiSelect.js","sources":["../../js/src/MultiSelect.js","../../js/src/LabelAdapter.js","../../js/src/OptionsAdapters.js","../../js/src/Tools.js","../../js/src/Bs4StylingMethodCss.js","../../js/src/Bs4StylingMethodJs.js","../../js/src/Bs4Styling.js","../../js/src/AddToJQueryPrototype.js","../../js/src/Bs4SelectedItemContent.js","../../js/src/Bs4DropDownItemContent.js","../../js/src/BsMultiSelect.js"],"sourcesContent":["import Popper from 'popper.js'\r\n\r\nfunction defSelectedPanelStyleSys(s) {s.display='flex'; s.flexWrap='wrap'; s.listStyleType='none'};  // remove bullets since this is ul\r\nfunction defFilterInputStyleSys(s) {s.width='2ch'; s.border='0'; s.padding='0'; s.outline='none'; s.backgroundColor='transparent' };\r\nfunction defDropDownMenuStyleSys(s) {s.listStyleType='none'}; // remove bullets since this is ul\r\n\r\n\r\n// jQuery used for:\r\n// $.contains, $(\"<div>\"), $(function(){}) aka ready\r\n// $e.unbind, $e.on; but namespaces are not used;\r\n// events: \"focusin\", \"focusout\", \"mouseover\", \"mouseout\", \"keydown\", \"keyup\", \"click\"\r\n// $e.show, $e.hide, $e.focus, $e.css\r\n// $e.appendTo, $e.remove, $e.find, $e.closest, $e.prev, $e.data, $e.val\r\n\r\nclass MultiSelect {\r\n    constructor(optionsAdapter, styling, selectedItemContentFactory, dropDownItemContentFactory, labelAdapter, \r\n        createStylingComposite,\r\n        configuration, onDispose, window, $) {\r\n        if (typeof Popper === 'undefined') {\r\n            throw new TypeError('DashboardCode BsMultiSelect require Popper.js (https://popper.js.org)')\r\n        }\r\n        // readonly\r\n        this.optionsAdapter = optionsAdapter;\r\n        this.container = optionsAdapter.container; // part of published api\r\n        this.styling = styling;\r\n        this.labelAdapter=labelAdapter;\r\n        this.window = window;\r\n        this.document = window.document;\r\n        this.onDispose=onDispose;\r\n        this.createStylingComposite=createStylingComposite;\r\n        \r\n        this.configuration = configuration;\r\n        \r\n        this.selectedPanel = null;\r\n        this.filterInputItem = null;\r\n        this.filterInput = null;\r\n        this.dropDownMenu = null;\r\n        this.popper = null;\r\n        this.getDisabled=null;\r\n        this.stylingComposite = null;\r\n\r\n        // removable handlers\r\n        this.selectedPanelClick  = null;\r\n        this.documentMouseup = null;\r\n        this.containerMousedown = null;\r\n        this.documentMouseup2 = null;\r\n        \r\n        // state\r\n        this.disabled = null;\r\n        this.filterInputItemOffsetLeft = null; // used to detect changes in input field position (by comparision with current value)\r\n        this.skipFocusout = false;\r\n        this.hoveredDropDownItem = null;\r\n        this.hoveredDropDownIndex = null;\r\n        this.hasDropDownVisible = false;\r\n        this.selectedItemContentFactory=selectedItemContentFactory;\r\n        this.dropDownItemContentFactory=dropDownItemContentFactory;\r\n\r\n        // jquery adapters\r\n        this.$ = $;\r\n        \r\n        //optionsAdapter(this.fillContainer, this.init);\r\n        this.init();\r\n    }\r\n\r\n    updateDropDownPosition(force) {\r\n        let offsetLeft = this.filterInputItem.offsetLeft;\r\n        if (force || this.filterInputItemOffsetLeft!=offsetLeft){\r\n            this.popper.update();\r\n            this.filterInputItemOffsetLeft=offsetLeft;\r\n        }\r\n    }\r\n    hideDropDown() {\r\n        this.dropDownMenu.style.display = 'none';\r\n    }\r\n    showDropDown() {\r\n        this.dropDownMenu.style.display = 'block';\r\n    }\r\n    // Public methods\r\n    resetDropDownMenuHover() {\r\n        if (this.hoveredDropDownItem !== null) {\r\n            this.styling.HoverOut(this.hoveredDropDownItem);\r\n            this.hoveredDropDownItem = null;\r\n            this.hoveredDropDownIndex = null;\r\n        }\r\n    }\r\n\r\n    filterDropDownMenu() {\r\n        let text = this.filterInput.value.trim().toLowerCase();\r\n        let visible = 0;\r\n        var dropDownMenuItems = this.dropDownMenu.getElementsByTagName('LI');\r\n        for(let i=0;i<dropDownMenuItems.length; i++)\r\n        {\r\n            let dropDownMenuItem = dropDownMenuItems[i];\r\n            \r\n            if (text == '') {\r\n                dropDownMenuItem.style.display='block';\r\n                visible++;\r\n            }\r\n            else {\r\n                //let $dropDownMenuItem = this.$(dropDownMenuItem);\r\n                let itemText = dropDownMenuItem.MultiSelectData.optionText; //$dropDownMenuItem.data(\"option-text\");\r\n                let option = dropDownMenuItem.MultiSelectData.option;//$dropDownMenuItem.data(\"option\");\r\n                if (!option.selected && !option.hidden && !option.disabled && itemText.indexOf(text)>=0) {\r\n                    dropDownMenuItem.style.display='block';\r\n                    visible++;\r\n                } else {\r\n                    dropDownMenuItem.style.display='none';\r\n                }\r\n            }\r\n        }\r\n        this.hasDropDownVisible = visible > 0;\r\n        this.resetDropDownMenuHover();\r\n        if (visible == 1) {\r\n            let visibleNodeListArray = this.getVisibleNodeListArray();\r\n            this.hoverInInternal(visibleNodeListArray, 0)\r\n        }\r\n    }\r\n\r\n    clearFilterInput(updatePosition) {\r\n        if (this.filterInput.value) {\r\n            this.filterInput.value = '';\r\n            this.input(updatePosition);\r\n        }\r\n    }\r\n\r\n    closeDropDown() {\r\n        this.resetDropDownMenuHover();\r\n        this.clearFilterInput(true);\r\n        this.hideDropDown();\r\n    }\r\n    \r\n    appendDropDownItem(optionElement) {\r\n        let isHidden = optionElement.hidden;\r\n        let itemText = optionElement.text;\r\n        //let $dropDownItem = this.$(\"<LI/>\").prop(\"hidden\", isHidden)\r\n        //let dropDownItem = $dropDownItem.get(0);\r\n        //let dropDownItem = \r\n        var dropDownItem=this.document.createElement('LI');\r\n        dropDownItem.hidden=isHidden;\r\n        \r\n        var MultiSelectData={\r\n            optionText: itemText.toLowerCase(), \r\n            option:optionElement, \r\n            optionToggle:null,\r\n            optionRemove:null,\r\n            optionDisable:null,\r\n        };\r\n        dropDownItem.MultiSelectData=MultiSelectData;\r\n        //this.$(dropDownItem).data(\"option-text\", itemText.toLowerCase())\r\n            \r\n        //this.$(dropDownItem).data(\"option\", optionElement);\r\n        this.dropDownMenu.appendChild(dropDownItem); \r\n        \r\n        \r\n        let adjustDropDownItem = this.dropDownItemContentFactory(dropDownItem, optionElement); \r\n        let isDisabled = optionElement.disabled;\r\n        let isSelected = optionElement.selected;\r\n\r\n        if (isSelected && isDisabled)\r\n            adjustDropDownItem.disabledStyle(true);\r\n        else if (isDisabled)\r\n            adjustDropDownItem.disable(isDisabled);\r\n       \r\n        adjustDropDownItem.onSelected(() => {\r\n            let toggleItem = dropDownItem.MultiSelectData.optionToggle; // this.$(dropDownItem).data(\"option-toggle\");\r\n            toggleItem();\r\n            this.filterInput.focus();\r\n        });\r\n        \r\n        let selectItem = (doPublishEvents) => {\r\n            if (optionElement.hidden)\r\n                return;\r\n            var selectedItem = this.document.createElement('LI');\r\n            selectedItem.MultiSelectData=MultiSelectData;\r\n            let adjustPair =(isSelected, toggle, remove, disable) => {\r\n                optionElement.selected = isSelected;\r\n                adjustDropDownItem.select(isSelected);\r\n                MultiSelectData.optionToggle=toggle; //this.$(dropDownItem).data(\"option-toggle\", toggle);                    \r\n                MultiSelectData.optionRemove=remove;\r\n                MultiSelectData.optionDisable=disable;\r\n            }\r\n\r\n            let removeItem = () => {\r\n                adjustDropDownItem.disabledStyle(false);\r\n                adjustDropDownItem.disable(optionElement.disabled);\r\n                adjustPair(\r\n                    false, \r\n                    () => {\r\n                        if (optionElement.disabled)\r\n                            return;\r\n                        selectItem(true);\r\n                    }, \r\n                    null,\r\n                    null\r\n                    );\r\n                selectedItem.parentNode.removeChild(selectedItem);\r\n                this.optionsAdapter.triggerChange();\r\n            };\r\n            \r\n            // what is a problem with calling removeSelectedItem directly (not using  setTimeout(removeSelectedItem, 0)):\r\n            // consider situation \"MultiSelect\" on DROPDOWN (that should be closed on the click outside dropdown)\r\n            // therefore we aslo have document's click's handler where we decide to close or leave the DROPDOWN open.\r\n            // because of the event's bubling process removeSelectedItem runs first. \r\n            // that means the event's target element on which we click (the x button) will be removed from the DOM together with badge \r\n            // before we could analize is it belong to our dropdown or not.\r\n            // important 1: we can't just the stop propogation using stopPropogate because click outside dropdown on the similar \r\n            // component that use stopPropogation will not close dropdown (error, dropdown should be closed)\r\n            // important 2: we can't change the dropdown's event handler to leave dropdown open if event's target is null because of\r\n            // the situation described above: click outside dropdown on the same component.\r\n            // Alternatively it could be possible to use stopPropogate but together create custom click event setting new target that belomgs to DOM (e.g. panel)\r\n\r\n            let removeItemAndCloseDropDown = () => {\r\n                removeItem();\r\n                this.closeDropDown();\r\n            };\r\n\r\n            let onRemoveItemEvent = (jqEvent) => {\r\n                setTimeout( ()=> {  \r\n                    removeItem();\r\n                    this.closeDropDown();\r\n                }, 0);\r\n                this.ProcessedBySelectedItemContentEvent=jqEvent;\r\n            };\r\n\r\n            let bsSelectedItemContent = this.selectedItemContentFactory(\r\n                selectedItem,\r\n                optionElement,\r\n                onRemoveItemEvent\r\n            );\r\n            //bsSelectedItemContentList.push(bsSelectedItemContent);\r\n            bsSelectedItemContent.disable(this.disabled);\r\n            adjustPair(true, ()=>removeItem(), removeItemAndCloseDropDown, bsSelectedItemContent.disable);\r\n            //$selectedItem.insertBefore(this.filterInputItem);\r\n            this.selectedPanel.insertBefore(selectedItem, this.filterInputItem);\r\n            if (doPublishEvents){\r\n                this.optionsAdapter.triggerChange();\r\n            }\r\n        }\r\n\r\n        this.$(dropDownItem)\r\n            .mouseover(() => this.styling.HoverIn(dropDownItem))\r\n            .mouseout(() => this.styling.HoverOut(dropDownItem));\r\n        \r\n        if (optionElement.selected)\r\n            selectItem(false);\r\n        else\r\n            MultiSelectData.optionToggle= () => { \r\n                if (optionElement.disabled)\r\n                    return;\r\n                selectItem(true);\r\n            }\r\n    }\r\n    getVisibleNodeListArray(){\r\n        return this.$(this.dropDownMenu).find('LI:not([style*=\"display: none\"]):not(:hidden)').toArray();\r\n    }\r\n    hoverInInternal(visibleNodeListArray, index){\r\n        this.hoveredDropDownIndex = index;\r\n        this.hoveredDropDownItem = visibleNodeListArray[index];\r\n        this.styling.HoverIn(this.hoveredDropDownItem);\r\n    }\r\n    keydownArrow(down) {\r\n        let visibleNodeListArray = this.getVisibleNodeListArray();\r\n        if (visibleNodeListArray.length > 0) {\r\n            if (this.hasDropDownVisible) {\r\n                this.updateDropDownPosition(true);\r\n                this.showDropDown();\r\n            }\r\n            let index;\r\n            if (this.hoveredDropDownItem === null) {\r\n                index = down ? 0 : visibleNodeListArray.length - 1;\r\n            }\r\n            else {\r\n                this.styling.HoverOut(this.hoveredDropDownItem);\r\n                if (down) {\r\n                    let newIndex = this.hoveredDropDownIndex + 1;\r\n                    index = newIndex < visibleNodeListArray.length ? newIndex : 0;\r\n                } else {\r\n                    let newIndex = this.hoveredDropDownIndex - 1;\r\n                    index = newIndex >= 0 ? newIndex : visibleNodeListArray.length - 1;\r\n                }\r\n            }\r\n            this.hoverInInternal(visibleNodeListArray, index);\r\n        }\r\n    }\r\n    input(forceUpdatePosition) {\r\n        this.filterInput.style.width = this.filterInput.value.length*1.3 + 2 + \"ch\";\r\n        this.filterDropDownMenu();\r\n\r\n        if (this.hasDropDownVisible) {\r\n            if (forceUpdatePosition) // ignore it if it is called from\r\n                this.updateDropDownPosition(forceUpdatePosition); // we need it to support case when textbox changes its place because of line break (texbox grow with each key press)\r\n            this.showDropDown();\r\n        } else {\r\n            this.hideDropDown();\r\n        }\r\n    }\r\n    Update(){\r\n        this.styling.UpdateIsValid(this.stylingComposite, this.optionsAdapter.getIsValid(), this.optionsAdapter.getIsInvalid());\r\n        this.UpdateSize();\r\n        this.UpdateDisabled();\r\n    }\r\n    Dispose(){\r\n        if (this.onDispose)\r\n            this.onDispose(); // primary used to remove from jQuery tables\r\n        \r\n        // removable handlers\r\n        this.$(this.document).unbind(\"mouseup\", this.documentMouseup)\r\n                      .unbind(\"mouseup\", this.documentMouseup2);\r\n        \r\n        this.labelAdapter.dispose();\r\n        \r\n        if (this.popper !== null) {\r\n            this.popper.destroy()\r\n        }\r\n        \r\n        if (this.optionsAdapter.dispose) {\r\n            this.optionsAdapter.dispose();\r\n        }\r\n    }\r\n    UpdateSize(){\r\n        if (this.styling.UpdateSize)\r\n            this.styling.UpdateSize(this.stylingComposite);\r\n    }\r\n\r\n    UpdateDisabled(){\r\n        let disabled = this.optionsAdapter.getDisabled();\r\n        let itarate = (isDisabled)=>{\r\n            let selectedPanelItems = this.selectedPanel.getElementsByTagName('LI'); // TODO : improove\r\n            for(let i =0; i<selectedPanelItems.length; i++)\r\n            {\r\n                let selectedPanelItem = selectedPanelItems[i];\r\n                if (selectedPanelItem.MultiSelectData)\r\n                    selectedPanelItem.MultiSelectData.optionDisable(isDisabled); \r\n            }\r\n        }\r\n        if (this.disabled!==disabled){\r\n            if (disabled) {\r\n                this.filterInput.style.display = \"none\";\r\n                this.styling.Disable(this.stylingComposite);\r\n                itarate(true);\r\n                    \r\n                this.$(this.container).unbind(\"mousedown\", this.containerMousedown);\r\n                this.$(this.document).unbind(\"mouseup\", this.documentMouseup);\r\n\r\n                this.$(this.selectedPanel).unbind(\"click\", this.selectedPanelClick);\r\n                this.$(this.document).unbind(\"mouseup\", this.documentMouseup2);\r\n            } else {\r\n                this.filterInput.style.display = \"inline-block\";\r\n                this.styling.Enable(this.stylingComposite);\r\n                itarate(false);\r\n\r\n                this.$(this.container).mousedown(this.containerMousedown); // removable\r\n                this.$(this.document).mouseup(this.documentMouseup);  // removable\r\n\r\n                this.$(this.selectedPanel).click(this.selectedPanelClick); // removable\r\n                this.$(this.document).mouseup(this.documentMouseup2); // removable\r\n            }\r\n            this.disabled=disabled;\r\n        }\r\n    }\r\n\r\n    init() {\r\n        let container = this.optionsAdapter.container;\r\n        this.selectedPanel = this.document.createElement('UL');\r\n        defSelectedPanelStyleSys(this.selectedPanel.style); \r\n        container.appendChild(this.selectedPanel);\r\n        \r\n        this.filterInputItem = this.document.createElement('LI');\r\n        this.selectedPanel.appendChild(this.filterInputItem);\r\n        \r\n        this.filterInput = document.createElement('INPUT'); //$filterInput.get(0);\r\n        this.filterInput.setAttribute(\"type\",\"search\");\r\n        this.filterInput.setAttribute(\"autocomplete\",\"off\");\r\n        \r\n        defFilterInputStyleSys(this.filterInput.style);\r\n        this.filterInputItem.appendChild(this.filterInput);\r\n\r\n        this.dropDownMenu = document.createElement('UL');\r\n        this.dropDownMenu.style.display=\"none\";\r\n        this.container.appendChild(this.dropDownMenu);\r\n        \r\n        // prevent heavy understandable styling error\r\n        defDropDownMenuStyleSys(this.dropDownMenu.style);\r\n       \r\n        this.documentMouseup = () => {\r\n            this.skipFocusout = false;\r\n        }\r\n\r\n        this.containerMousedown = () => {\r\n            this.skipFocusout = true;\r\n        };\r\n        this.documentMouseup2 = event => {\r\n            if (!(container === event.target || container.contains(event.target))) { // IE8+\r\n                this.closeDropDown();\r\n            }\r\n        }\r\n        this.selectedPanelClick = jqEvent => {\r\n            if (jqEvent.target.nodeName != \"INPUT\") // TODO: should be improoved\r\n            {   this.filterInput.value='';\r\n                this.filterInput.focus();\r\n                // event.preventDefault()  // TODO: should I use preventDefault this ?  click can move focus...\r\n            }\r\n            if (this.hasDropDownVisible &&  (this.ProcessedBySelectedItemContentEvent==null || this.ProcessedBySelectedItemContentEvent.originalEvent!=jqEvent.originalEvent)){\r\n                this.updateDropDownPosition(true);\r\n                this.showDropDown();\r\n            }\r\n            this.ProcessedBySelectedItemContentEvent=null;\r\n        };\r\n        this.stylingComposite = this.createStylingComposite(container, this.selectedPanel,\r\n            this.filterInputItem, this.filterInput, this.dropDownMenu);\r\n        \r\n        \r\n        this.styling.Init(this.stylingComposite);\r\n        \r\n        this.labelAdapter.init(this.filterInput); \r\n\r\n        if (this.optionsAdapter.afterContainerFilled)\r\n            this.optionsAdapter.afterContainerFilled();\r\n        this.popper = new Popper(this.filterInput, this.dropDownMenu, {\r\n            placement: 'bottom-start',\r\n            modifiers: {\r\n                preventOverflow: {enabled:false},\r\n                hide: {enabled:false},\r\n                flip: {enabled:false}\r\n                }\r\n        });\r\n        \r\n        this.styling.UpdateIsValid(this.stylingComposite, this.optionsAdapter.getIsValid(), this.optionsAdapter.getIsInvalid());\r\n        \r\n        this.UpdateSize();\r\n        this.UpdateDisabled();\r\n        \r\n        let createDropDownItems = ()=>{\r\n            let options = this.optionsAdapter.options;\r\n            for(let i =0; i<options.length; i++) {\r\n                this.appendDropDownItem(options[i]);\r\n            }\r\n            this.hasDropDownVisible = options.length > 0;\r\n            this.updateDropDownPosition(false);\r\n        }\r\n        // some browsers (IE11) can change select value (as part of \"autocomplete\") after page is loaded but before \"ready\" event\r\n        if (this.document.readyState != 'loading'){\r\n            createDropDownItems();\r\n        } else {\r\n            this.document.addEventListener('DOMContentLoaded', createDropDownItems); // IE9+\r\n        }\r\n        // there was unmotivated stopPropagation call. commented out.\r\n        // $dropDownMenu.click(  event => { \r\n        //    event.stopPropagation();\r\n        // });\r\n        this.$(this.dropDownMenu).mouseover(() => this.resetDropDownMenuHover());\r\n\r\n        this.$(this.filterInput).focusin(() => this.styling.FocusIn(this.stylingComposite))\r\n                    .focusout(() => {\r\n                            if (!this.skipFocusout)\r\n                                this.styling.FocusOut(this.stylingComposite)\r\n                            });\r\n        this.$(this.filterInput).on(\"keydown\", (event) => {\r\n            if ([38, 40, 13].indexOf(event.which)>=0 || (event.which == 9 && this.filterInput.value) ) {\r\n                event.preventDefault();\r\n            }\r\n\r\n            if (event.which == 38) {\r\n                this.keydownArrow(false);\r\n            }\r\n            else if (event.which == 40) {\r\n                if (this.hoveredDropDownItem === null && this.hasDropDownVisible) {\r\n                    this.showDropDown();\r\n                }\r\n                this.keydownArrow(true);\r\n            }\r\n            else if (event.which == 9) {\r\n                if (!this.filterInput.value) {\r\n                    this.closeDropDown();\r\n                }\r\n            }\r\n            else if (event.which == 8) {\r\n                // NOTE: this will process backspace only if there are no text in the input field\r\n                // If user will find this inconvinient, we will need to calculate something like this\r\n                // this.isBackspaceAtStartPoint = (this.filterInput.selectionStart == 0 && this.filterInput.selectionEnd == 0);\r\n                if (!this.filterInput.value)\r\n                {\r\n                    let penultSelectedItem = this.filterInputItem.previousElementSibling; // IE9+\r\n                    if (penultSelectedItem && penultSelectedItem.MultiSelectData){\r\n                        penultSelectedItem.MultiSelectData.optionRemove();\r\n                    }\r\n                    this.updateDropDownPosition(false);\r\n                }\r\n            }\r\n\r\n            if ([38, 40, 13, 9].indexOf(event.which)==-1)\r\n                this.resetDropDownMenuHover();\r\n        });\r\n        this.$(this.filterInput).on(\"keyup\", (event) => {\r\n            if (event.which == 13 || event.which == 9 ) {\r\n                if (this.hoveredDropDownItem) {\r\n                    this.hoveredDropDownItem.MultiSelectData.optionToggle();\r\n                    this.closeDropDown();\r\n                } else {\r\n                    let text = this.filterInput.value.trim().toLowerCase();\r\n                    let dropDownItems = this.dropDownMenu.querySelectorAll(\"LI\");\r\n                    let dropDownItem = null;\r\n                    for (let i = 0; i < dropDownItems.length; ++i) {\r\n                        let it = dropDownItems[i];\r\n                        if (it.textContent.trim().toLowerCase() == text)\r\n                        {\r\n                            dropDownItem=it;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (dropDownItem) {\r\n                        let option = dropDownItem.MultiSelectData.option;\r\n                        if (!option.selected){\r\n                            dropDownItem.MultiSelectData.optionToggle();\r\n                        }\r\n                        this.clearFilterInput(true);\r\n                    }\r\n                }\r\n            }\r\n            else if (event.which == 27) { // escape\r\n                this.closeDropDown();\r\n            }\r\n        });\r\n        this.$(this.filterInput).on('input', () => {\r\n            this.input(true);\r\n        });\r\n    }\r\n}\r\n\r\nexport default MultiSelect;\r\n","function LabelAdapter(label, createInputId){\r\n    var backupedFor = null; // state saved between init and dispose\r\n    return {\r\n        init(filterInput) {\r\n            if (label) {\r\n                backupedFor = label.getAttribute('for');\r\n                var newId = createInputId();\r\n                filterInput.setAttribute('id', newId);\r\n                label.setAttribute('for',newId);\r\n            }\r\n        },\r\n        dispose(){\r\n            if(backupedFor)\r\n                label.setAttribute('for',backupedFor);\r\n        }\r\n    }\r\n}\r\n\r\nexport default LabelAdapter;","function OptionsAdapterJson(container, options, getDisabled, getIsValid, getIsInvalid, trigger) {\r\n    return {\r\n        container,\r\n        options,\r\n        dispose(){\r\n            while (container.firstChild) container.removeChild(container.firstChild);\r\n        },\r\n        triggerChange(){\r\n            trigger('multiselect:change');\r\n        },\r\n        getDisabled(){\r\n            return getDisabled?getDisabled():false;\r\n        },\r\n        getIsValid(){\r\n            return getIsValid?getIsValid():false;\r\n        },\r\n        getIsInvalid(){\r\n            return getIsInvalid?getIsInvalid():false;\r\n        }\r\n    }\r\n}\r\n\r\nfunction OptionsAdapterElement(selectElement, trigger) {\r\n    selectElement.style.display='none';\r\n    var container = document.createElement('div');\r\n    var options = selectElement.getElementsByTagName('OPTION');\r\n    return {\r\n        container,\r\n        options,\r\n        dispose(){\r\n            container.parentNode.removeChild(container);\r\n        },\r\n        afterContainerFilled(){\r\n            selectElement.parentNode.insertBefore(container, selectElement.nextSibling);\r\n        },\r\n        triggerChange(){\r\n            trigger('change');\r\n            trigger('multiselect:change');\r\n        },\r\n        getDisabled(){\r\n            return selectElement.disabled;\r\n        },\r\n        getIsValid(){\r\n            return selectElement.classList.contains('is-valid');\r\n        },\r\n        getIsInvalid(){\r\n            return selectElement.classList.contains('is-invalid');\r\n        }\r\n    }\r\n}\r\n\r\nexport {OptionsAdapterJson, OptionsAdapterElement};\r\n","export function ExtendIfUndefined(destination, source) {\r\n    for (var property in source)\r\n        if (destination[property] === undefined)\r\n            destination[property] = source[property];\r\n}\r\n\r\nexport function ExtendIfUndefinedFluent(destination, source) {\r\n    ExtendIfUndefined(destination, source);\r\n    return destination;\r\n}","import  { ExtendIfUndefined } from './Tools';\r\n\r\nconst defaults = {\r\n    selectedPanelFocusClass : 'focus',\r\n    selectedPanelDisabledClass: 'disabled',\r\n    dropDownItemDisabledClass: 'disabled'\r\n};\r\n\r\nfunction Bs4StylingMethodCss(configuration){\r\n    ExtendIfUndefined(configuration, defaults);\r\n\r\n    return {\r\n        Enable($selectedPanel){\r\n            $selectedPanel.removeClass(configuration.selectedPanelDisabledClass)\r\n        },\r\n    \r\n        Disable($selectedPanel){\r\n            $selectedPanel.addClass(configuration.selectedPanelDisabledClass)\r\n        },\r\n    \r\n        FocusIn($selectedPanel){\r\n            $selectedPanel.addClass(configuration.selectedPanelFocusClass);\r\n        },\r\n    \r\n        FocusOut($selectedPanel){\r\n            $selectedPanel.removeClass(configuration.selectedPanelFocusClass);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Bs4StylingMethodCss;\r\n","import  { ExtendIfUndefined } from './Tools';\r\n\r\nconst defSelectedPanelStyle = {'margin-bottom': '0', 'height': 'auto'};\r\n\r\nconst defaults = {\r\n    selectedPanelDefMinHeight: 'calc(2.25rem + 2px)',\r\n    selectedPanelLgMinHeight:  'calc(2.875rem + 2px)',\r\n    selectedPanelSmMinHeight:  'calc(1.8125rem + 2px)',\r\n    selectedPanelDisabledBackgroundColor: '#e9ecef',\r\n    selectedPanelFocusBorderColor: '#80bdff',\r\n    selectedPanelFocusBoxShadow: '0 0 0 0.2rem rgba(0, 123, 255, 0.25)',\r\n    selectedPanelFocusValidBoxShadow: '0 0 0 0.2rem rgba(40, 167, 69, 0.25)',\r\n    selectedPanelFocusInvalidBoxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)',\r\n    filterInputColor: '#495057',\r\n    //selectedItemContentDisabledOpacity: '.65'\r\n};\r\n\r\nfunction Bs4StylingMethodJs(configuration){\r\n    ExtendIfUndefined(configuration, defaults);\r\n\r\n    return {\r\n        OnInit(composite){\r\n            composite.$selectedPanel.css(defSelectedPanelStyle);\r\n            composite.$filterInput.css(\"color\", configuration.filterInputColor);\r\n        },\r\n    \r\n        UpdateSize($selectedPanel){\r\n            if ($selectedPanel.hasClass(\"form-control-lg\")){\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelLgMinHeight);\r\n            } else if ($selectedPanel.hasClass(\"form-control-sm\")){\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelSmMinHeight);\r\n            } else {\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelDefMinHeight);\r\n            }\r\n        },\r\n    \r\n        Enable($selectedPanel){\r\n            $selectedPanel.css(\"background-color\", \"\")\r\n        },\r\n    \r\n        Disable($selectedPanel){\r\n            $selectedPanel.css(\"background-color\", configuration.selectedPanelDisabledBackgroundColor)\r\n        },\r\n    \r\n        FocusIn($selectedPanel){\r\n            if ($selectedPanel.hasClass(\"is-valid\")){\r\n                $selectedPanel.css(\"box-shadow\", configuration.selectedPanelFocusValidBoxShadow);\r\n            } else if ($selectedPanel.hasClass(\"is-invalid\")){\r\n                $selectedPanel.css(\"box-shadow\", configuration.selectedPanelFocusInvalidBoxShadow);\r\n            } else {\r\n                $selectedPanel\r\n                    .css(\"box-shadow\", configuration.selectedPanelFocusBoxShadow)\r\n                    .css(\"border-color\", configuration.selectedPanelFocusBorderColor);\r\n            }\r\n        },\r\n    \r\n        FocusOut($selectedPanel){\r\n                $selectedPanel.css(\"box-shadow\", \"\" ).css(\"border-color\", \"\")\r\n        },\r\n    }\r\n}\r\n\r\n\r\nexport default Bs4StylingMethodJs;\r\n","import  { ExtendIfUndefined } from './Tools';\r\n\r\n// addClass, removeClass, css, siblings('label'), hasClass, find('BUTTON').prop(..)\r\nconst defaults = {\r\n    containerClass: 'dashboardcode-bsmultiselect',\r\n    dropDownMenuClass: 'dropdown-menu',\r\n    dropDownItemClass:  'px-2',\r\n    dropDownItemHoverClass: 'text-primary bg-light',\r\n    selectedPanelClass: 'form-control',\r\n    selectedItemClass: 'badge',\r\n    removeSelectedItemButtonClass: 'close',\r\n    filterInputItemClass: '',\r\n    filterInputClass: ''\r\n}\r\n\r\nfunction Bs4Styling(stylingMethod, configuration, $) {\r\n    ExtendIfUndefined(configuration, defaults);\r\n\r\n    return{\r\n        Init(composite){\r\n            composite.$container.addClass(configuration.containerClass);\r\n            composite.$selectedPanel.addClass(configuration.selectedPanelClass);\r\n            composite.$dropDownMenu.addClass(configuration.dropDownMenuClass);\r\n            composite.$filterInputItem.addClass(configuration.filterInputItemClass);\r\n            composite.$filterInput.addClass(configuration.filterInputClass);\r\n            if (stylingMethod.OnInit)\r\n                stylingMethod.OnInit(composite)\r\n        },\r\n\r\n        UpdateIsValid(composite, isValid, isInvalid){\r\n            if (isValid)\r\n                composite.$selectedPanel.addClass('is-valid');\r\n\r\n            if (isInvalid)\r\n                composite.$selectedPanel.addClass('is-invalid');\r\n        },\r\n\r\n        UpdateSize(composite){\r\n            if(stylingMethod.UpdateSize)\r\n               stylingMethod.UpdateSize(composite.$selectedPanel)\r\n        },\r\n\r\n        Enable(composite){\r\n            stylingMethod.Enable(composite.$selectedPanel)\r\n        },\r\n\r\n        Disable(composite){\r\n            stylingMethod.Disable(composite.$selectedPanel)\r\n        },\r\n\r\n        FocusIn(composite){\r\n            stylingMethod.FocusIn(composite.$selectedPanel)\r\n        },\r\n\r\n        FocusOut(composite){\r\n            stylingMethod.FocusOut(composite.$selectedPanel)\r\n        },\r\n\r\n        HoverIn(dropDownItem){\r\n            $(dropDownItem).addClass(configuration.dropDownItemHoverClass);\r\n        },\r\n\r\n        HoverOut(dropDownItem){\r\n            $(dropDownItem).removeClass(configuration.dropDownItemHoverClass);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Bs4Styling;\r\n","function AddToJQueryPrototype(pluginName, createPlugin, $){\r\n    const firstChar = pluginName.charAt(0);\r\n    const firstCharLower = firstChar.toLowerCase();\r\n    if (firstCharLower == firstChar) {\r\n        throw new TypeError(`Plugin name '${pluginName}' should be started from upper case char`)\r\n    }\r\n    const prototypableName = firstCharLower + pluginName.slice(1)\r\n    const noConflictPrototypable = $.fn[prototypableName];\r\n    const dataKey = `DashboardCode.${pluginName}`;\r\n\r\n    function prototypable(options) {\r\n        return this.each( function () {\r\n            let $e = $(this);\r\n            let instance = $e.data(dataKey)\r\n            let isMethodName = typeof options === 'string';\r\n            if (!instance) {\r\n                if (isMethodName && /Dispose/.test(options)) {\r\n                    return;\r\n                }\r\n                const optionsObject = (typeof options === 'object')?options:null;\r\n\r\n                instance = createPlugin(this, optionsObject,\r\n                    () => {\r\n                        $e.removeData(dataKey)\r\n                    });\r\n                $e.data(dataKey, instance);\r\n            }\r\n\r\n            if (isMethodName) {\r\n                let methodName = options;\r\n                if (typeof instance[methodName] === 'undefined') {\r\n                    throw new TypeError(`No method named '${methodName}'`)\r\n                }\r\n                instance[methodName]()\r\n            }\r\n        })\r\n    }\r\n\r\n    $.fn[prototypableName] = prototypable;\r\n\r\n    // pluginName with first capitalized letter - return plugin instance for 1st $selected item\r\n    $.fn[pluginName] = function () {\r\n        return $(this).data(dataKey);\r\n    };\r\n\r\n    $.fn[prototypableName].noConflict = function () {\r\n        $.fn[prototypableName] = noConflictPrototypable\r\n        return prototypable;\r\n    }\r\n}\r\n\r\nexport default AddToJQueryPrototype\r\n","import  { ExtendIfUndefined } from './Tools';\r\n\r\nfunction Bs4SelectedItemContentStylingMethodCss(configuration) {\r\n    const defaults = {\r\n            selectedItemContentDisabledClass: 'disabled',\r\n    };\r\n    ExtendIfUndefined(configuration, defaults);\r\n\r\n    return {\r\n        disableSelectedItemContent($content){\r\n            $content.addClass(configuration.selectedItemContentDisabledClass )\r\n        }\r\n    }\r\n}\r\n\r\nconst defSelectedItemStyle = {'padding-left': '0px', 'line-height': '1.5em'};\r\nconst defRemoveSelectedItemButtonStyle = {'font-size':'1.5em', 'line-height': '.9em'};\r\n\r\nfunction Bs4SelectedItemContentStylingMethodJs(configuration) {\r\n    const defaults = {\r\n       selectedItemContentDisabledOpacity: '.65',\r\n    };\r\n    ExtendIfUndefined(configuration, defaults);\r\n    \r\n    return {\r\n        disableSelectedItemContent($content){\r\n            $content.css(\"opacity\", configuration.selectedItemContentDisabledOpacity )\r\n        },\r\n    \r\n        createSelectedItemContent($selectedItem, $button){\r\n            $selectedItem.css(defSelectedItemStyle);\r\n            if ($button)\r\n                $button.css(defRemoveSelectedItemButtonStyle);\r\n        }\r\n    }\r\n}\r\n\r\nfunction Bs4SelectedItemContent(stylingMethod, configuration, $) {\r\n        const defaults = {\r\n            selectedItemClass: 'badge',\r\n            removeSelectedItemButtonClass: 'close'\r\n        };\r\n        ExtendIfUndefined(configuration, defaults);\r\n        \r\n        return function (selectedItem, optionItem, removeSelectedItem){\r\n                let $selectedItem = $(selectedItem)\r\n                $selectedItem.addClass(configuration.selectedItemClass);\r\n                let $content = $(`<span/>`).text(optionItem.text);\r\n                $content.appendTo($selectedItem);\r\n                if (optionItem.disabled)\r\n                    stylingMethod.disableSelectedItemContent($content);\r\n                let $button = $('<button aria-label=\"Close\" tabIndex=\"-1\" type=\"button\"><span aria-hidden=\"true\">&times;</span></button>')\r\n                    // bs 'close' class that will be added to button set the float:right, therefore it impossible to configure no-warp policy \r\n                    // with .css(\"white-space\", \"nowrap\") or  .css(\"display\", \"inline-block\"); TODO: migrate to flex? \r\n                    .css(\"float\", \"none\").appendTo($selectedItem)\r\n                    .addClass(configuration.removeSelectedItemButtonClass) // bs close class set the float:right\r\n                    .on(\"click\", (jqEvent) => removeSelectedItem(jqEvent));\r\n                \r\n                if (stylingMethod.createSelectedItemContent)\r\n                    stylingMethod.createSelectedItemContent($selectedItem, $button);\r\n                return {\r\n                    disable(isDisabled){ $button.prop('disabled', isDisabled); }\r\n                };\r\n            }\r\n    \r\n}\r\n\r\nexport { Bs4SelectedItemContent as Bs4SelectedItemContent, Bs4SelectedItemContentStylingMethodJs, Bs4SelectedItemContentStylingMethodCss};\r\n","import  { ExtendIfUndefined} from './Tools';\r\n\r\nfunction Bs4DropDownItemContentStylingMethodCss(configuration) {\r\n    const defaults = {\r\n            selectedItemContentDisabledClass: 'disabled',\r\n    };\r\n    ExtendIfUndefined(configuration, defaults);\r\n    return {\r\n        disabledStyle($checkBox, $checkBoxLabel, isDisbaled){\r\n            if (isDisbaled) \r\n                $checkBox.addClass(configuration.dropDownItemDisabledClass);\r\n            else\r\n                $checkBox.removeClass(configuration.dropDownItemDisabledClass);\r\n        }\r\n    }\r\n}\r\n\r\nfunction Bs4DropDownItemContentStylingMethodJs(configuration) {\r\n    const defaults = {\r\n            selectedItemContentDisabledOpacity: '.65',\r\n            dropdDownLabelDisabledColor: '#6c757d'\r\n    };\r\n    ExtendIfUndefined(configuration, defaults);\r\n    return{\r\n        disabledStyle($checkBox, $checkBoxLabel, isDisbaled){\r\n            $checkBoxLabel.css('color', isDisbaled?configuration.dropdDownLabelDisabledColor:'')\r\n        }\r\n    }\r\n}\r\n\r\nfunction Bs4DropDownItemContent(stylingMethod, configuration, $) {\r\n    const defaults = {\r\n            dropDownItemClass:  'px-2',\r\n    }\r\n    ExtendIfUndefined(configuration, defaults);\r\n    return function(dropDownItem, option){\r\n                let $dropDownItem = $(dropDownItem);\r\n                $dropDownItem.addClass(configuration.dropDownItemClass);\r\n                let $dropDownItemContent= $(`<div class=\"custom-control custom-checkbox\">\r\n                    <input type=\"checkbox\" class=\"custom-control-input\">\r\n                    <label class=\"custom-control-label\"></label>\r\n                </div>`);\r\n                $dropDownItemContent.appendTo(dropDownItem);\r\n                let $checkBox = $dropDownItemContent.find(`INPUT[type=\"checkbox\"]`);\r\n                let $checkBoxLabel = $dropDownItemContent.find(`label`);\r\n                $checkBoxLabel.text(option.text);\r\n\r\n                return { \r\n                    select(isSelected){ $checkBox.prop('checked', isSelected); }, \r\n                    disable(isDisabled){ $checkBox.prop('disabled', isDisabled); },\r\n                    disabledStyle(isDisbaled){ stylingMethod.disabledStyle($checkBox, $checkBoxLabel, isDisbaled); },\r\n                    onSelected(toggle) {\r\n                        $checkBox.on(\"change\", toggle)\r\n                        $dropDownItem.on(\"click\", event => {\r\n                            if (dropDownItem === event.target || $.contains(dropDownItem, event.target)) {\r\n                                toggle();\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n}\r\n\r\nexport { Bs4DropDownItemContent, Bs4DropDownItemContentStylingMethodJs, Bs4DropDownItemContentStylingMethodCss };","import $ from 'jquery'\r\n\r\nimport MultiSelect from './MultiSelect'\r\nimport LabelAdapter from './LabelAdapter';\r\nimport {OptionsAdapterJson,OptionsAdapterElement} from './OptionsAdapters';\r\n\r\nimport Bs4StylingMethodCss from './Bs4StylingMethodCss'\r\nimport Bs4StylingMethodJs from './Bs4StylingMethodJs'\r\nimport Bs4Styling from './Bs4Styling';\r\nimport AddToJQueryPrototype from './AddToJQueryPrototype'\r\n\r\nimport { Bs4SelectedItemContent, Bs4SelectedItemContentStylingMethodJs, Bs4SelectedItemContentStylingMethodCss} from './Bs4SelectedItemContent';\r\nimport { Bs4DropDownItemContent, Bs4DropDownItemContentStylingMethodJs, Bs4DropDownItemContentStylingMethodCss } from './Bs4DropDownItemContent';\r\n\r\n(\r\n    (window, $) => {\r\n        AddToJQueryPrototype('BsMultiSelect',\r\n            (element, settings, onDispose) => {\r\n                let configuration = $.extend({}, settings); // settings used per jQuery intialization, configuration per element\r\n                if (configuration.buildConfiguration)\r\n                    configuration.buildConfiguration(element, configuration);\r\n                var $element= $(element);\r\n                let optionsAdapter = null;\r\n                if (configuration.optionsAdapter)\r\n                    optionsAdapter = configuration.optionsAdapter;\r\n                else\r\n                {\r\n                    var trigger = function(eventName){\r\n                        $element.trigger(eventName);\r\n                    }\r\n                    if (configuration.options){\r\n                        optionsAdapter = OptionsAdapterJson(element, configuration.options, \r\n                            configuration.getDisabled, configuration.getIsValid, configuration.getIsInvalid,\r\n                            trigger );\r\n                        if (!configuration.createInputId)\r\n                            configuration.createInputId=()=>`${configuration.containerClass}-generated-filter-${element.id}`;\r\n            \r\n                    }else {\r\n                        if (!configuration.label)\r\n                        {\r\n                            let $formGroup = $(element).closest('.form-group');\r\n                            if ($formGroup.length == 1) {\r\n                                let $label = $formGroup.find(`label[for=\"${element.id}\"]`);\r\n                                if ($label.length>0)\r\n                                {   \r\n                                    let label = $label.get(0);\r\n                                    let forId = label.getAttribute('for');\r\n                                    if (forId == element.id) {\r\n                                        configuration.label = label;\r\n                                    }\r\n                                }   \r\n                            }\r\n                        }\r\n                        optionsAdapter = OptionsAdapterElement(element, trigger);\r\n                        if (!configuration.createInputId)\r\n                            configuration.createInputId=()=>`${configuration.containerClass}-generated-input-${((element.id)?element.id:element.name).toLowerCase()}-id`;\r\n                    }\r\n                }\r\n\r\n                let labelAdapter = LabelAdapter(configuration.label, configuration.createInputId);\r\n\r\n                let adapter=null;\r\n                if (configuration.adapter)\r\n                    adapter = configuration.adapter;\r\n                else\r\n                {\r\n                    let stylingMethod = configuration.useCss\r\n                        ? Bs4StylingMethodCss(configuration)\r\n                        : Bs4StylingMethodJs(configuration);\r\n                    adapter = Bs4Styling(stylingMethod, configuration, $);\r\n                }\r\n\r\n                let stylingAdapter2 = configuration.useCss\r\n                    ? Bs4SelectedItemContentStylingMethodCss(configuration, $)\r\n                    : Bs4SelectedItemContentStylingMethodJs(configuration, $);\r\n                let stylingAdapter3 = configuration.useCss\r\n                    ? Bs4DropDownItemContentStylingMethodCss(configuration, $)\r\n                    : Bs4DropDownItemContentStylingMethodJs(configuration, $);\r\n                let bs4SelectedItemContent = Bs4SelectedItemContent(stylingAdapter2, configuration, $);\r\n                let bs4DropDownItemContent = Bs4DropDownItemContent(stylingAdapter3, configuration, $)\r\n\r\n                let createStylingComposite = function(container, selectedPanel, filterInputItem, filterInput, dropDownMenu){\r\n                    return {\r\n                        $container:$(container), $selectedPanel:$(selectedPanel),\r\n                        $filterInputItem:$(filterInputItem), $filterInput:$(filterInput),\r\n                        $dropDownMenu:$(dropDownMenu)\r\n                        };\r\n                }\r\n                let multiSelect = new MultiSelect(optionsAdapter, adapter, bs4SelectedItemContent, bs4DropDownItemContent, \r\n                    labelAdapter, createStylingComposite, configuration, onDispose, window, $);\r\n                return multiSelect;\r\n            }, $);\r\n    }\r\n)(window, $)\r\n"],"names":["defSelectedPanelStyleSys","s","display","flexWrap","listStyleType","defFilterInputStyleSys","width","border","padding","outline","backgroundColor","defDropDownMenuStyleSys","MultiSelect","optionsAdapter","styling","selectedItemContentFactory","dropDownItemContentFactory","labelAdapter","createStylingComposite","configuration","onDispose","window","$","Popper","TypeError","container","document","selectedPanel","filterInputItem","filterInput","dropDownMenu","popper","getDisabled","stylingComposite","selectedPanelClick","documentMouseup","containerMousedown","documentMouseup2","disabled","filterInputItemOffsetLeft","skipFocusout","hoveredDropDownItem","hoveredDropDownIndex","hasDropDownVisible","init","updateDropDownPosition","force","offsetLeft","update","hideDropDown","style","showDropDown","resetDropDownMenuHover","HoverOut","filterDropDownMenu","text","value","trim","toLowerCase","visible","dropDownMenuItems","getElementsByTagName","i","length","dropDownMenuItem","itemText","MultiSelectData","optionText","option","selected","hidden","indexOf","visibleNodeListArray","getVisibleNodeListArray","hoverInInternal","clearFilterInput","updatePosition","input","closeDropDown","appendDropDownItem","optionElement","isHidden","dropDownItem","createElement","optionToggle","optionRemove","optionDisable","appendChild","adjustDropDownItem","isDisabled","isSelected","disabledStyle","disable","onSelected","toggleItem","focus","selectItem","doPublishEvents","selectedItem","adjustPair","toggle","remove","select","removeItem","parentNode","removeChild","triggerChange","removeItemAndCloseDropDown","onRemoveItemEvent","jqEvent","setTimeout","ProcessedBySelectedItemContentEvent","bsSelectedItemContent","insertBefore","mouseover","HoverIn","mouseout","find","toArray","index","keydownArrow","down","newIndex","forceUpdatePosition","Update","UpdateIsValid","getIsValid","getIsInvalid","UpdateSize","UpdateDisabled","Dispose","unbind","dispose","destroy","itarate","selectedPanelItems","selectedPanelItem","Disable","Enable","mousedown","mouseup","click","setAttribute","event","target","contains","nodeName","originalEvent","Init","afterContainerFilled","placement","modifiers","preventOverflow","enabled","hide","flip","createDropDownItems","options","readyState","addEventListener","focusin","FocusIn","focusout","FocusOut","on","which","preventDefault","penultSelectedItem","previousElementSibling","dropDownItems","querySelectorAll","it","textContent","LabelAdapter","label","createInputId","backupedFor","getAttribute","newId","OptionsAdapterJson","trigger","firstChild","OptionsAdapterElement","selectElement","nextSibling","classList","ExtendIfUndefined","destination","source","property","undefined","defaults","selectedPanelFocusClass","selectedPanelDisabledClass","dropDownItemDisabledClass","Bs4StylingMethodCss","$selectedPanel","removeClass","addClass","defSelectedPanelStyle","selectedPanelDefMinHeight","selectedPanelLgMinHeight","selectedPanelSmMinHeight","selectedPanelDisabledBackgroundColor","selectedPanelFocusBorderColor","selectedPanelFocusBoxShadow","selectedPanelFocusValidBoxShadow","selectedPanelFocusInvalidBoxShadow","filterInputColor","Bs4StylingMethodJs","OnInit","composite","css","$filterInput","hasClass","containerClass","dropDownMenuClass","dropDownItemClass","dropDownItemHoverClass","selectedPanelClass","selectedItemClass","removeSelectedItemButtonClass","filterInputItemClass","filterInputClass","Bs4Styling","stylingMethod","$container","$dropDownMenu","$filterInputItem","isValid","isInvalid","AddToJQueryPrototype","pluginName","createPlugin","firstChar","charAt","firstCharLower","prototypableName","slice","noConflictPrototypable","fn","dataKey","prototypable","each","$e","instance","data","isMethodName","test","optionsObject","removeData","methodName","noConflict","Bs4SelectedItemContentStylingMethodCss","selectedItemContentDisabledClass","disableSelectedItemContent","$content","defSelectedItemStyle","defRemoveSelectedItemButtonStyle","Bs4SelectedItemContentStylingMethodJs","selectedItemContentDisabledOpacity","createSelectedItemContent","$selectedItem","$button","Bs4SelectedItemContent","optionItem","removeSelectedItem","appendTo","prop","Bs4DropDownItemContentStylingMethodCss","$checkBox","$checkBoxLabel","isDisbaled","Bs4DropDownItemContentStylingMethodJs","dropdDownLabelDisabledColor","Bs4DropDownItemContent","$dropDownItem","$dropDownItemContent","element","settings","extend","buildConfiguration","$element","eventName","id","$formGroup","closest","$label","get","forId","name","adapter","useCss","stylingAdapter2","stylingAdapter3","bs4SelectedItemContent","bs4DropDownItemContent","multiSelect"],"mappings":";;;;;;;;;;;;;;IAEA,SAASA,wBAAT,CAAkCC,CAAlC,EAAqC;IAACA,EAAAA,CAAC,CAACC,OAAF,GAAU,MAAV;IAAkBD,EAAAA,CAAC,CAACE,QAAF,GAAW,MAAX;IAAmBF,EAAAA,CAAC,CAACG,aAAF,GAAgB,MAAhB;IAAuB;;IAClG,SAASC,sBAAT,CAAgCJ,CAAhC,EAAmC;IAACA,EAAAA,CAAC,CAACK,KAAF,GAAQ,KAAR;IAAeL,EAAAA,CAAC,CAACM,MAAF,GAAS,GAAT;IAAcN,EAAAA,CAAC,CAACO,OAAF,GAAU,GAAV;IAAeP,EAAAA,CAAC,CAACQ,OAAF,GAAU,MAAV;IAAkBR,EAAAA,CAAC,CAACS,eAAF,GAAkB,aAAlB;IAAiC;;IACnI,SAASC,uBAAT,CAAiCV,CAAjC,EAAoC;IAACA,EAAAA,CAAC,CAACG,aAAF,GAAgB,MAAhB;IAAuB;IAG5D;IACA;IACA;IACA;IACA;IACA;;QAEMQ;;;IACF,uBAAYC,cAAZ,EAA4BC,OAA5B,EAAqCC,0BAArC,EAAiEC,0BAAjE,EAA6FC,YAA7F,EACIC,sBADJ,EAEIC,aAFJ,EAEmBC,SAFnB,EAE8BC,MAF9B,EAEsCC,CAFtC,EAEyC;IACrC,QAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;IAC/B,YAAM,IAAIC,SAAJ,CAAc,uEAAd,CAAN;IACH,KAHoC;;;IAKrC,SAAKX,cAAL,GAAsBA,cAAtB;IACA,SAAKY,SAAL,GAAiBZ,cAAc,CAACY,SAAhC,CANqC;;IAOrC,SAAKX,OAAL,GAAeA,OAAf;IACA,SAAKG,YAAL,GAAkBA,YAAlB;IACA,SAAKI,MAAL,GAAcA,MAAd;IACA,SAAKK,QAAL,GAAgBL,MAAM,CAACK,QAAvB;IACA,SAAKN,SAAL,GAAeA,SAAf;IACA,SAAKF,sBAAL,GAA4BA,sBAA5B;IAEA,SAAKC,aAAL,GAAqBA,aAArB;IAEA,SAAKQ,aAAL,GAAqB,IAArB;IACA,SAAKC,eAAL,GAAuB,IAAvB;IACA,SAAKC,WAAL,GAAmB,IAAnB;IACA,SAAKC,YAAL,GAAoB,IAApB;IACA,SAAKC,MAAL,GAAc,IAAd;IACA,SAAKC,WAAL,GAAiB,IAAjB;IACA,SAAKC,gBAAL,GAAwB,IAAxB,CAtBqC;;IAyBrC,SAAKC,kBAAL,GAA2B,IAA3B;IACA,SAAKC,eAAL,GAAuB,IAAvB;IACA,SAAKC,kBAAL,GAA0B,IAA1B;IACA,SAAKC,gBAAL,GAAwB,IAAxB,CA5BqC;;IA+BrC,SAAKC,QAAL,GAAgB,IAAhB;IACA,SAAKC,yBAAL,GAAiC,IAAjC,CAhCqC;;IAiCrC,SAAKC,YAAL,GAAoB,KAApB;IACA,SAAKC,mBAAL,GAA2B,IAA3B;IACA,SAAKC,oBAAL,GAA4B,IAA5B;IACA,SAAKC,kBAAL,GAA0B,KAA1B;IACA,SAAK5B,0BAAL,GAAgCA,0BAAhC;IACA,SAAKC,0BAAL,GAAgCA,0BAAhC,CAtCqC;;IAyCrC,SAAKM,CAAL,GAASA,CAAT,CAzCqC;;IA4CrC,SAAKsB,IAAL;IACH;;;;aAEDC,yBAAA,gCAAuBC,KAAvB,EAA8B;IAC1B,QAAIC,UAAU,GAAG,KAAKnB,eAAL,CAAqBmB,UAAtC;;IACA,QAAID,KAAK,IAAI,KAAKP,yBAAL,IAAgCQ,UAA7C,EAAwD;IACpD,WAAKhB,MAAL,CAAYiB,MAAZ;IACA,WAAKT,yBAAL,GAA+BQ,UAA/B;IACH;IACJ;;aACDE,eAAA,wBAAe;IACX,SAAKnB,YAAL,CAAkBoB,KAAlB,CAAwBhD,OAAxB,GAAkC,MAAlC;IACH;;aACDiD,eAAA,wBAAe;IACX,SAAKrB,YAAL,CAAkBoB,KAAlB,CAAwBhD,OAAxB,GAAkC,OAAlC;IACH;;;aAEDkD,yBAAA,kCAAyB;IACrB,QAAI,KAAKX,mBAAL,KAA6B,IAAjC,EAAuC;IACnC,WAAK3B,OAAL,CAAauC,QAAb,CAAsB,KAAKZ,mBAA3B;IACA,WAAKA,mBAAL,GAA2B,IAA3B;IACA,WAAKC,oBAAL,GAA4B,IAA5B;IACH;IACJ;;aAEDY,qBAAA,8BAAqB;IACjB,QAAIC,IAAI,GAAG,KAAK1B,WAAL,CAAiB2B,KAAjB,CAAuBC,IAAvB,GAA8BC,WAA9B,EAAX;IACA,QAAIC,OAAO,GAAG,CAAd;IACA,QAAIC,iBAAiB,GAAG,KAAK9B,YAAL,CAAkB+B,oBAAlB,CAAuC,IAAvC,CAAxB;;IACA,SAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACF,iBAAiB,CAACG,MAAhC,EAAwCD,CAAC,EAAzC,EACA;IACI,UAAIE,gBAAgB,GAAGJ,iBAAiB,CAACE,CAAD,CAAxC;;IAEA,UAAIP,IAAI,IAAI,EAAZ,EAAgB;IACZS,QAAAA,gBAAgB,CAACd,KAAjB,CAAuBhD,OAAvB,GAA+B,OAA/B;IACAyD,QAAAA,OAAO;IACV,OAHD,MAIK;IACD;IACA,YAAIM,QAAQ,GAAGD,gBAAgB,CAACE,eAAjB,CAAiCC,UAAhD,CAFC;;IAGD,YAAIC,MAAM,GAAGJ,gBAAgB,CAACE,eAAjB,CAAiCE,MAA9C,CAHC;;IAID,YAAI,CAACA,MAAM,CAACC,QAAR,IAAoB,CAACD,MAAM,CAACE,MAA5B,IAAsC,CAACF,MAAM,CAAC9B,QAA9C,IAA0D2B,QAAQ,CAACM,OAAT,CAAiBhB,IAAjB,KAAwB,CAAtF,EAAyF;IACrFS,UAAAA,gBAAgB,CAACd,KAAjB,CAAuBhD,OAAvB,GAA+B,OAA/B;IACAyD,UAAAA,OAAO;IACV,SAHD,MAGO;IACHK,UAAAA,gBAAgB,CAACd,KAAjB,CAAuBhD,OAAvB,GAA+B,MAA/B;IACH;IACJ;IACJ;;IACD,SAAKyC,kBAAL,GAA0BgB,OAAO,GAAG,CAApC;IACA,SAAKP,sBAAL;;IACA,QAAIO,OAAO,IAAI,CAAf,EAAkB;IACd,UAAIa,oBAAoB,GAAG,KAAKC,uBAAL,EAA3B;IACA,WAAKC,eAAL,CAAqBF,oBAArB,EAA2C,CAA3C;IACH;IACJ;;aAEDG,mBAAA,0BAAiBC,cAAjB,EAAiC;IAC7B,QAAI,KAAK/C,WAAL,CAAiB2B,KAArB,EAA4B;IACxB,WAAK3B,WAAL,CAAiB2B,KAAjB,GAAyB,EAAzB;IACA,WAAKqB,KAAL,CAAWD,cAAX;IACH;IACJ;;aAEDE,gBAAA,yBAAgB;IACZ,SAAK1B,sBAAL;IACA,SAAKuB,gBAAL,CAAsB,IAAtB;IACA,SAAK1B,YAAL;IACH;;aAED8B,qBAAA,4BAAmBC,aAAnB,EAAkC;IAAA;;IAC9B,QAAIC,QAAQ,GAAGD,aAAa,CAACV,MAA7B;IACA,QAAIL,QAAQ,GAAGe,aAAa,CAACzB,IAA7B,CAF8B;IAI9B;IACA;;IACA,QAAI2B,YAAY,GAAC,KAAKxD,QAAL,CAAcyD,aAAd,CAA4B,IAA5B,CAAjB;IACAD,IAAAA,YAAY,CAACZ,MAAb,GAAoBW,QAApB;IAEA,QAAIf,eAAe,GAAC;IAChBC,MAAAA,UAAU,EAAEF,QAAQ,CAACP,WAAT,EADI;IAEhBU,MAAAA,MAAM,EAACY,aAFS;IAGhBI,MAAAA,YAAY,EAAC,IAHG;IAIhBC,MAAAA,YAAY,EAAC,IAJG;IAKhBC,MAAAA,aAAa,EAAC;IALE,KAApB;IAOAJ,IAAAA,YAAY,CAAChB,eAAb,GAA6BA,eAA7B,CAhB8B;IAmB9B;;IACA,SAAKpC,YAAL,CAAkByD,WAAlB,CAA8BL,YAA9B;IAGA,QAAIM,kBAAkB,GAAG,KAAKxE,0BAAL,CAAgCkE,YAAhC,EAA8CF,aAA9C,CAAzB;IACA,QAAIS,UAAU,GAAGT,aAAa,CAAC1C,QAA/B;IACA,QAAIoD,UAAU,GAAGV,aAAa,CAACX,QAA/B;IAEA,QAAIqB,UAAU,IAAID,UAAlB,EACID,kBAAkB,CAACG,aAAnB,CAAiC,IAAjC,EADJ,KAEK,IAAIF,UAAJ,EACDD,kBAAkB,CAACI,OAAnB,CAA2BH,UAA3B;IAEJD,IAAAA,kBAAkB,CAACK,UAAnB,CAA8B,YAAM;IAChC,UAAIC,UAAU,GAAGZ,YAAY,CAAChB,eAAb,CAA6BkB,YAA9C,CADgC;;IAEhCU,MAAAA,UAAU;;IACV,MAAA,KAAI,CAACjE,WAAL,CAAiBkE,KAAjB;IACH,KAJD;;IAMA,QAAIC,UAAU,GAAG,SAAbA,UAAa,CAACC,eAAD,EAAqB;IAClC,UAAIjB,aAAa,CAACV,MAAlB,EACI;;IACJ,UAAI4B,YAAY,GAAG,KAAI,CAACxE,QAAL,CAAcyD,aAAd,CAA4B,IAA5B,CAAnB;;IACAe,MAAAA,YAAY,CAAChC,eAAb,GAA6BA,eAA7B;;IACA,UAAIiC,UAAU,GAAE,SAAZA,UAAY,CAACT,UAAD,EAAaU,MAAb,EAAqBC,MAArB,EAA6BT,OAA7B,EAAyC;IACrDZ,QAAAA,aAAa,CAACX,QAAd,GAAyBqB,UAAzB;IACAF,QAAAA,kBAAkB,CAACc,MAAnB,CAA0BZ,UAA1B;IACAxB,QAAAA,eAAe,CAACkB,YAAhB,GAA6BgB,MAA7B,CAHqD;;IAIrDlC,QAAAA,eAAe,CAACmB,YAAhB,GAA6BgB,MAA7B;IACAnC,QAAAA,eAAe,CAACoB,aAAhB,GAA8BM,OAA9B;IACH,OAND;;IAQA,UAAIW,UAAU,GAAG,SAAbA,UAAa,GAAM;IACnBf,QAAAA,kBAAkB,CAACG,aAAnB,CAAiC,KAAjC;IACAH,QAAAA,kBAAkB,CAACI,OAAnB,CAA2BZ,aAAa,CAAC1C,QAAzC;IACA6D,QAAAA,UAAU,CACN,KADM,EAEN,YAAM;IACF,cAAInB,aAAa,CAAC1C,QAAlB,EACI;IACJ0D,UAAAA,UAAU,CAAC,IAAD,CAAV;IACH,SANK,EAON,IAPM,EAQN,IARM,CAAV;IAUAE,QAAAA,YAAY,CAACM,UAAb,CAAwBC,WAAxB,CAAoCP,YAApC;;IACA,QAAA,KAAI,CAACrF,cAAL,CAAoB6F,aAApB;IACH,OAfD,CAbkC;IA+BlC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;;IAEA,UAAIC,0BAA0B,GAAG,SAA7BA,0BAA6B,GAAM;IACnCJ,QAAAA,UAAU;;IACV,QAAA,KAAI,CAACzB,aAAL;IACH,OAHD;;IAKA,UAAI8B,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,OAAD,EAAa;IACjCC,QAAAA,UAAU,CAAE,YAAK;IACbP,UAAAA,UAAU;;IACV,UAAA,KAAI,CAACzB,aAAL;IACH,SAHS,EAGP,CAHO,CAAV;IAIA,QAAA,KAAI,CAACiC,mCAAL,GAAyCF,OAAzC;IACH,OAND;;IAQA,UAAIG,qBAAqB,GAAG,KAAI,CAACjG,0BAAL,CACxBmF,YADwB,EAExBlB,aAFwB,EAGxB4B,iBAHwB,CAA5B,CAvDkC;;;IA6DlCI,MAAAA,qBAAqB,CAACpB,OAAtB,CAA8B,KAAI,CAACtD,QAAnC;IACA6D,MAAAA,UAAU,CAAC,IAAD,EAAO;IAAA,eAAII,UAAU,EAAd;IAAA,OAAP,EAAyBI,0BAAzB,EAAqDK,qBAAqB,CAACpB,OAA3E,CAAV,CA9DkC;;IAgElC,MAAA,KAAI,CAACjE,aAAL,CAAmBsF,YAAnB,CAAgCf,YAAhC,EAA8C,KAAI,CAACtE,eAAnD;;IACA,UAAIqE,eAAJ,EAAoB;IAChB,QAAA,KAAI,CAACpF,cAAL,CAAoB6F,aAApB;IACH;IACJ,KApED;;IAsEA,SAAKpF,CAAL,CAAO4D,YAAP,EACKgC,SADL,CACe;IAAA,aAAM,KAAI,CAACpG,OAAL,CAAaqG,OAAb,CAAqBjC,YAArB,CAAN;IAAA,KADf,EAEKkC,QAFL,CAEc;IAAA,aAAM,KAAI,CAACtG,OAAL,CAAauC,QAAb,CAAsB6B,YAAtB,CAAN;IAAA,KAFd;IAIA,QAAIF,aAAa,CAACX,QAAlB,EACI2B,UAAU,CAAC,KAAD,CAAV,CADJ,KAGI9B,eAAe,CAACkB,YAAhB,GAA8B,YAAM;IAChC,UAAIJ,aAAa,CAAC1C,QAAlB,EACI;IACJ0D,MAAAA,UAAU,CAAC,IAAD,CAAV;IACH,KAJD;IAKP;;aACDvB,0BAAA,mCAAyB;IACrB,WAAO,KAAKnD,CAAL,CAAO,KAAKQ,YAAZ,EAA0BuF,IAA1B,CAA+B,+CAA/B,EAAgFC,OAAhF,EAAP;IACH;;aACD5C,kBAAA,yBAAgBF,oBAAhB,EAAsC+C,KAAtC,EAA4C;IACxC,SAAK7E,oBAAL,GAA4B6E,KAA5B;IACA,SAAK9E,mBAAL,GAA2B+B,oBAAoB,CAAC+C,KAAD,CAA/C;IACA,SAAKzG,OAAL,CAAaqG,OAAb,CAAqB,KAAK1E,mBAA1B;IACH;;aACD+E,eAAA,sBAAaC,IAAb,EAAmB;IACf,QAAIjD,oBAAoB,GAAG,KAAKC,uBAAL,EAA3B;;IACA,QAAID,oBAAoB,CAACT,MAArB,GAA8B,CAAlC,EAAqC;IACjC,UAAI,KAAKpB,kBAAT,EAA6B;IACzB,aAAKE,sBAAL,CAA4B,IAA5B;IACA,aAAKM,YAAL;IACH;;IACD,UAAIoE,KAAJ;;IACA,UAAI,KAAK9E,mBAAL,KAA6B,IAAjC,EAAuC;IACnC8E,QAAAA,KAAK,GAAGE,IAAI,GAAG,CAAH,GAAOjD,oBAAoB,CAACT,MAArB,GAA8B,CAAjD;IACH,OAFD,MAGK;IACD,aAAKjD,OAAL,CAAauC,QAAb,CAAsB,KAAKZ,mBAA3B;;IACA,YAAIgF,IAAJ,EAAU;IACN,cAAIC,QAAQ,GAAG,KAAKhF,oBAAL,GAA4B,CAA3C;IACA6E,UAAAA,KAAK,GAAGG,QAAQ,GAAGlD,oBAAoB,CAACT,MAAhC,GAAyC2D,QAAzC,GAAoD,CAA5D;IACH,SAHD,MAGO;IACH,cAAIA,SAAQ,GAAG,KAAKhF,oBAAL,GAA4B,CAA3C;;IACA6E,UAAAA,KAAK,GAAGG,SAAQ,IAAI,CAAZ,GAAgBA,SAAhB,GAA2BlD,oBAAoB,CAACT,MAArB,GAA8B,CAAjE;IACH;IACJ;;IACD,WAAKW,eAAL,CAAqBF,oBAArB,EAA2C+C,KAA3C;IACH;IACJ;;aACD1C,QAAA,eAAM8C,mBAAN,EAA2B;IACvB,SAAK9F,WAAL,CAAiBqB,KAAjB,CAAuB5C,KAAvB,GAA+B,KAAKuB,WAAL,CAAiB2B,KAAjB,CAAuBO,MAAvB,GAA8B,GAA9B,GAAoC,CAApC,GAAwC,IAAvE;IACA,SAAKT,kBAAL;;IAEA,QAAI,KAAKX,kBAAT,EAA6B;IACzB,UAAIgF,mBAAJ;IACI,aAAK9E,sBAAL,CAA4B8E,mBAA5B,EAFqB;;IAGzB,WAAKxE,YAAL;IACH,KAJD,MAIO;IACH,WAAKF,YAAL;IACH;IACJ;;aACD2E,SAAA,kBAAQ;IACJ,SAAK9G,OAAL,CAAa+G,aAAb,CAA2B,KAAK5F,gBAAhC,EAAkD,KAAKpB,cAAL,CAAoBiH,UAApB,EAAlD,EAAoF,KAAKjH,cAAL,CAAoBkH,YAApB,EAApF;IACA,SAAKC,UAAL;IACA,SAAKC,cAAL;IACH;;aACDC,UAAA,mBAAS;IACL,QAAI,KAAK9G,SAAT,EACI,KAAKA,SAAL,GAFC;IAIL;;IACA,SAAKE,CAAL,CAAO,KAAKI,QAAZ,EAAsByG,MAAtB,CAA6B,SAA7B,EAAwC,KAAKhG,eAA7C,EACegG,MADf,CACsB,SADtB,EACiC,KAAK9F,gBADtC;IAGA,SAAKpB,YAAL,CAAkBmH,OAAlB;;IAEA,QAAI,KAAKrG,MAAL,KAAgB,IAApB,EAA0B;IACtB,WAAKA,MAAL,CAAYsG,OAAZ;IACH;;IAED,QAAI,KAAKxH,cAAL,CAAoBuH,OAAxB,EAAiC;IAC7B,WAAKvH,cAAL,CAAoBuH,OAApB;IACH;IACJ;;aACDJ,aAAA,sBAAY;IACR,QAAI,KAAKlH,OAAL,CAAakH,UAAjB,EACI,KAAKlH,OAAL,CAAakH,UAAb,CAAwB,KAAK/F,gBAA7B;IACP;;aAEDgG,iBAAA,0BAAgB;IAAA;;IACZ,QAAI3F,QAAQ,GAAG,KAAKzB,cAAL,CAAoBmB,WAApB,EAAf;;IACA,QAAIsG,OAAO,GAAG,SAAVA,OAAU,CAAC7C,UAAD,EAAc;IACxB,UAAI8C,kBAAkB,GAAG,MAAI,CAAC5G,aAAL,CAAmBkC,oBAAnB,CAAwC,IAAxC,CAAzB,CADwB;;;IAExB,WAAI,IAAIC,CAAC,GAAE,CAAX,EAAcA,CAAC,GAACyE,kBAAkB,CAACxE,MAAnC,EAA2CD,CAAC,EAA5C,EACA;IACI,YAAI0E,iBAAiB,GAAGD,kBAAkB,CAACzE,CAAD,CAA1C;IACA,YAAI0E,iBAAiB,CAACtE,eAAtB,EACIsE,iBAAiB,CAACtE,eAAlB,CAAkCoB,aAAlC,CAAgDG,UAAhD;IACP;IACJ,KARD;;IASA,QAAI,KAAKnD,QAAL,KAAgBA,QAApB,EAA6B;IACzB,UAAIA,QAAJ,EAAc;IACV,aAAKT,WAAL,CAAiBqB,KAAjB,CAAuBhD,OAAvB,GAAiC,MAAjC;IACA,aAAKY,OAAL,CAAa2H,OAAb,CAAqB,KAAKxG,gBAA1B;IACAqG,QAAAA,OAAO,CAAC,IAAD,CAAP;IAEA,aAAKhH,CAAL,CAAO,KAAKG,SAAZ,EAAuB0G,MAAvB,CAA8B,WAA9B,EAA2C,KAAK/F,kBAAhD;IACA,aAAKd,CAAL,CAAO,KAAKI,QAAZ,EAAsByG,MAAtB,CAA6B,SAA7B,EAAwC,KAAKhG,eAA7C;IAEA,aAAKb,CAAL,CAAO,KAAKK,aAAZ,EAA2BwG,MAA3B,CAAkC,OAAlC,EAA2C,KAAKjG,kBAAhD;IACA,aAAKZ,CAAL,CAAO,KAAKI,QAAZ,EAAsByG,MAAtB,CAA6B,SAA7B,EAAwC,KAAK9F,gBAA7C;IACH,OAVD,MAUO;IACH,aAAKR,WAAL,CAAiBqB,KAAjB,CAAuBhD,OAAvB,GAAiC,cAAjC;IACA,aAAKY,OAAL,CAAa4H,MAAb,CAAoB,KAAKzG,gBAAzB;IACAqG,QAAAA,OAAO,CAAC,KAAD,CAAP;IAEA,aAAKhH,CAAL,CAAO,KAAKG,SAAZ,EAAuBkH,SAAvB,CAAiC,KAAKvG,kBAAtC,EALG;;IAMH,aAAKd,CAAL,CAAO,KAAKI,QAAZ,EAAsBkH,OAAtB,CAA8B,KAAKzG,eAAnC,EANG;;IAQH,aAAKb,CAAL,CAAO,KAAKK,aAAZ,EAA2BkH,KAA3B,CAAiC,KAAK3G,kBAAtC,EARG;;IASH,aAAKZ,CAAL,CAAO,KAAKI,QAAZ,EAAsBkH,OAAtB,CAA8B,KAAKvG,gBAAnC,EATG;IAUN;;IACD,WAAKC,QAAL,GAAcA,QAAd;IACH;IACJ;;aAEDM,OAAA,gBAAO;IAAA;;IACH,QAAInB,SAAS,GAAG,KAAKZ,cAAL,CAAoBY,SAApC;IACA,SAAKE,aAAL,GAAqB,KAAKD,QAAL,CAAcyD,aAAd,CAA4B,IAA5B,CAArB;IACAnF,IAAAA,wBAAwB,CAAC,KAAK2B,aAAL,CAAmBuB,KAApB,CAAxB;IACAzB,IAAAA,SAAS,CAAC8D,WAAV,CAAsB,KAAK5D,aAA3B;IAEA,SAAKC,eAAL,GAAuB,KAAKF,QAAL,CAAcyD,aAAd,CAA4B,IAA5B,CAAvB;IACA,SAAKxD,aAAL,CAAmB4D,WAAnB,CAA+B,KAAK3D,eAApC;IAEA,SAAKC,WAAL,GAAmBH,QAAQ,CAACyD,aAAT,CAAuB,OAAvB,CAAnB,CATG;;IAUH,SAAKtD,WAAL,CAAiBiH,YAAjB,CAA8B,MAA9B,EAAqC,QAArC;IACA,SAAKjH,WAAL,CAAiBiH,YAAjB,CAA8B,cAA9B,EAA6C,KAA7C;IAEAzI,IAAAA,sBAAsB,CAAC,KAAKwB,WAAL,CAAiBqB,KAAlB,CAAtB;IACA,SAAKtB,eAAL,CAAqB2D,WAArB,CAAiC,KAAK1D,WAAtC;IAEA,SAAKC,YAAL,GAAoBJ,QAAQ,CAACyD,aAAT,CAAuB,IAAvB,CAApB;IACA,SAAKrD,YAAL,CAAkBoB,KAAlB,CAAwBhD,OAAxB,GAAgC,MAAhC;IACA,SAAKuB,SAAL,CAAe8D,WAAf,CAA2B,KAAKzD,YAAhC,EAlBG;;IAqBHnB,IAAAA,uBAAuB,CAAC,KAAKmB,YAAL,CAAkBoB,KAAnB,CAAvB;;IAEA,SAAKf,eAAL,GAAuB,YAAM;IACzB,MAAA,MAAI,CAACK,YAAL,GAAoB,KAApB;IACH,KAFD;;IAIA,SAAKJ,kBAAL,GAA0B,YAAM;IAC5B,MAAA,MAAI,CAACI,YAAL,GAAoB,IAApB;IACH,KAFD;;IAGA,SAAKH,gBAAL,GAAwB,UAAA0G,KAAK,EAAI;IAC7B,UAAI,EAAEtH,SAAS,KAAKsH,KAAK,CAACC,MAApB,IAA8BvH,SAAS,CAACwH,QAAV,CAAmBF,KAAK,CAACC,MAAzB,CAAhC,CAAJ,EAAuE;IAAE;IACrE,QAAA,MAAI,CAAClE,aAAL;IACH;IACJ,KAJD;;IAKA,SAAK5C,kBAAL,GAA0B,UAAA2E,OAAO,EAAI;IACjC,UAAIA,OAAO,CAACmC,MAAR,CAAeE,QAAf,IAA2B,OAA/B;IACA;IAAI,UAAA,MAAI,CAACrH,WAAL,CAAiB2B,KAAjB,GAAuB,EAAvB;;IACA,UAAA,MAAI,CAAC3B,WAAL,CAAiBkE,KAAjB,GADJ;;IAGC;;IACD,UAAI,MAAI,CAACpD,kBAAL,KAA6B,MAAI,CAACoE,mCAAL,IAA0C,IAA1C,IAAkD,MAAI,CAACA,mCAAL,CAAyCoC,aAAzC,IAAwDtC,OAAO,CAACsC,aAA/I,CAAJ,EAAkK;IAC9J,QAAA,MAAI,CAACtG,sBAAL,CAA4B,IAA5B;;IACA,QAAA,MAAI,CAACM,YAAL;IACH;;IACD,MAAA,MAAI,CAAC4D,mCAAL,GAAyC,IAAzC;IACH,KAXD;;IAYA,SAAK9E,gBAAL,GAAwB,KAAKf,sBAAL,CAA4BO,SAA5B,EAAuC,KAAKE,aAA5C,EACpB,KAAKC,eADe,EACE,KAAKC,WADP,EACoB,KAAKC,YADzB,CAAxB;IAIA,SAAKhB,OAAL,CAAasI,IAAb,CAAkB,KAAKnH,gBAAvB;IAEA,SAAKhB,YAAL,CAAkB2B,IAAlB,CAAuB,KAAKf,WAA5B;IAEA,QAAI,KAAKhB,cAAL,CAAoBwI,oBAAxB,EACI,KAAKxI,cAAL,CAAoBwI,oBAApB;IACJ,SAAKtH,MAAL,GAAc,IAAIR,MAAJ,CAAW,KAAKM,WAAhB,EAA6B,KAAKC,YAAlC,EAAgD;IAC1DwH,MAAAA,SAAS,EAAE,cAD+C;IAE1DC,MAAAA,SAAS,EAAE;IACPC,QAAAA,eAAe,EAAE;IAACC,UAAAA,OAAO,EAAC;IAAT,SADV;IAEPC,QAAAA,IAAI,EAAE;IAACD,UAAAA,OAAO,EAAC;IAAT,SAFC;IAGPE,QAAAA,IAAI,EAAE;IAACF,UAAAA,OAAO,EAAC;IAAT;IAHC;IAF+C,KAAhD,CAAd;IASA,SAAK3I,OAAL,CAAa+G,aAAb,CAA2B,KAAK5F,gBAAhC,EAAkD,KAAKpB,cAAL,CAAoBiH,UAApB,EAAlD,EAAoF,KAAKjH,cAAL,CAAoBkH,YAApB,EAApF;IAEA,SAAKC,UAAL;IACA,SAAKC,cAAL;;IAEA,QAAI2B,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAI;IAC1B,UAAIC,OAAO,GAAG,MAAI,CAAChJ,cAAL,CAAoBgJ,OAAlC;;IACA,WAAI,IAAI/F,CAAC,GAAE,CAAX,EAAcA,CAAC,GAAC+F,OAAO,CAAC9F,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;IACjC,QAAA,MAAI,CAACiB,kBAAL,CAAwB8E,OAAO,CAAC/F,CAAD,CAA/B;IACH;;IACD,MAAA,MAAI,CAACnB,kBAAL,GAA0BkH,OAAO,CAAC9F,MAAR,GAAiB,CAA3C;;IACA,MAAA,MAAI,CAAClB,sBAAL,CAA4B,KAA5B;IACH,KAPD,CAvEG;;;IAgFH,QAAI,KAAKnB,QAAL,CAAcoI,UAAd,IAA4B,SAAhC,EAA0C;IACtCF,MAAAA,mBAAmB;IACtB,KAFD,MAEO;IACH,WAAKlI,QAAL,CAAcqI,gBAAd,CAA+B,kBAA/B,EAAmDH,mBAAnD,EADG;IAEN,KApFE;IAsFH;IACA;IACA;;;IACA,SAAKtI,CAAL,CAAO,KAAKQ,YAAZ,EAA0BoF,SAA1B,CAAoC;IAAA,aAAM,MAAI,CAAC9D,sBAAL,EAAN;IAAA,KAApC;IAEA,SAAK9B,CAAL,CAAO,KAAKO,WAAZ,EAAyBmI,OAAzB,CAAiC;IAAA,aAAM,MAAI,CAAClJ,OAAL,CAAamJ,OAAb,CAAqB,MAAI,CAAChI,gBAA1B,CAAN;IAAA,KAAjC,EACaiI,QADb,CACsB,YAAM;IACR,UAAI,CAAC,MAAI,CAAC1H,YAAV,EACI,MAAI,CAAC1B,OAAL,CAAaqJ,QAAb,CAAsB,MAAI,CAAClI,gBAA3B;IACH,KAJrB;IAKA,SAAKX,CAAL,CAAO,KAAKO,WAAZ,EAAyBuI,EAAzB,CAA4B,SAA5B,EAAuC,UAACrB,KAAD,EAAW;IAC9C,UAAI,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAaxE,OAAb,CAAqBwE,KAAK,CAACsB,KAA3B,KAAmC,CAAnC,IAAyCtB,KAAK,CAACsB,KAAN,IAAe,CAAf,IAAoB,MAAI,CAACxI,WAAL,CAAiB2B,KAAlF,EAA2F;IACvFuF,QAAAA,KAAK,CAACuB,cAAN;IACH;;IAED,UAAIvB,KAAK,CAACsB,KAAN,IAAe,EAAnB,EAAuB;IACnB,QAAA,MAAI,CAAC7C,YAAL,CAAkB,KAAlB;IACH,OAFD,MAGK,IAAIuB,KAAK,CAACsB,KAAN,IAAe,EAAnB,EAAuB;IACxB,YAAI,MAAI,CAAC5H,mBAAL,KAA6B,IAA7B,IAAqC,MAAI,CAACE,kBAA9C,EAAkE;IAC9D,UAAA,MAAI,CAACQ,YAAL;IACH;;IACD,QAAA,MAAI,CAACqE,YAAL,CAAkB,IAAlB;IACH,OALI,MAMA,IAAIuB,KAAK,CAACsB,KAAN,IAAe,CAAnB,EAAsB;IACvB,YAAI,CAAC,MAAI,CAACxI,WAAL,CAAiB2B,KAAtB,EAA6B;IACzB,UAAA,MAAI,CAACsB,aAAL;IACH;IACJ,OAJI,MAKA,IAAIiE,KAAK,CAACsB,KAAN,IAAe,CAAnB,EAAsB;IACvB;IACA;IACA;IACA,YAAI,CAAC,MAAI,CAACxI,WAAL,CAAiB2B,KAAtB,EACA;IACI,cAAI+G,kBAAkB,GAAG,MAAI,CAAC3I,eAAL,CAAqB4I,sBAA9C,CADJ;;IAEI,cAAID,kBAAkB,IAAIA,kBAAkB,CAACrG,eAA7C,EAA6D;IACzDqG,YAAAA,kBAAkB,CAACrG,eAAnB,CAAmCmB,YAAnC;IACH;;IACD,UAAA,MAAI,CAACxC,sBAAL,CAA4B,KAA5B;IACH;IACJ;;IAED,UAAI,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,CAAb,EAAgB0B,OAAhB,CAAwBwE,KAAK,CAACsB,KAA9B,KAAsC,CAAC,CAA3C,EACI,MAAI,CAACjH,sBAAL;IACP,KAnCD;IAoCA,SAAK9B,CAAL,CAAO,KAAKO,WAAZ,EAAyBuI,EAAzB,CAA4B,OAA5B,EAAqC,UAACrB,KAAD,EAAW;IAC5C,UAAIA,KAAK,CAACsB,KAAN,IAAe,EAAf,IAAqBtB,KAAK,CAACsB,KAAN,IAAe,CAAxC,EAA4C;IACxC,YAAI,MAAI,CAAC5H,mBAAT,EAA8B;IAC1B,UAAA,MAAI,CAACA,mBAAL,CAAyByB,eAAzB,CAAyCkB,YAAzC;;IACA,UAAA,MAAI,CAACN,aAAL;IACH,SAHD,MAGO;IACH,cAAIvB,IAAI,GAAG,MAAI,CAAC1B,WAAL,CAAiB2B,KAAjB,CAAuBC,IAAvB,GAA8BC,WAA9B,EAAX;;IACA,cAAI+G,aAAa,GAAG,MAAI,CAAC3I,YAAL,CAAkB4I,gBAAlB,CAAmC,IAAnC,CAApB;;IACA,cAAIxF,YAAY,GAAG,IAAnB;;IACA,eAAK,IAAIpB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2G,aAAa,CAAC1G,MAAlC,EAA0C,EAAED,CAA5C,EAA+C;IAC3C,gBAAI6G,EAAE,GAAGF,aAAa,CAAC3G,CAAD,CAAtB;;IACA,gBAAI6G,EAAE,CAACC,WAAH,CAAenH,IAAf,GAAsBC,WAAtB,MAAuCH,IAA3C,EACA;IACI2B,cAAAA,YAAY,GAACyF,EAAb;IACA;IACH;IACJ;;IACD,cAAIzF,YAAJ,EAAkB;IACd,gBAAId,MAAM,GAAGc,YAAY,CAAChB,eAAb,CAA6BE,MAA1C;;IACA,gBAAI,CAACA,MAAM,CAACC,QAAZ,EAAqB;IACjBa,cAAAA,YAAY,CAAChB,eAAb,CAA6BkB,YAA7B;IACH;;IACD,YAAA,MAAI,CAACT,gBAAL,CAAsB,IAAtB;IACH;IACJ;IACJ,OAxBD,MAyBK,IAAIoE,KAAK,CAACsB,KAAN,IAAe,EAAnB,EAAuB;IAAE;IAC1B,QAAA,MAAI,CAACvF,aAAL;IACH;IACJ,KA7BD;IA8BA,SAAKxD,CAAL,CAAO,KAAKO,WAAZ,EAAyBuI,EAAzB,CAA4B,OAA5B,EAAqC,YAAM;IACvC,MAAA,MAAI,CAACvF,KAAL,CAAW,IAAX;IACH,KAFD;IAGH;;;;;IC9gBL,SAASgG,YAAT,CAAsBC,KAAtB,EAA6BC,aAA7B,EAA2C;IACvC,MAAIC,WAAW,GAAG,IAAlB,CADuC;;IAEvC,SAAO;IACHpI,IAAAA,IADG,gBACEf,WADF,EACe;IACd,UAAIiJ,KAAJ,EAAW;IACPE,QAAAA,WAAW,GAAGF,KAAK,CAACG,YAAN,CAAmB,KAAnB,CAAd;IACA,YAAIC,KAAK,GAAGH,aAAa,EAAzB;IACAlJ,QAAAA,WAAW,CAACiH,YAAZ,CAAyB,IAAzB,EAA+BoC,KAA/B;IACAJ,QAAAA,KAAK,CAAChC,YAAN,CAAmB,KAAnB,EAAyBoC,KAAzB;IACH;IACJ,KARE;IASH9C,IAAAA,OATG,qBASM;IACL,UAAG4C,WAAH,EACIF,KAAK,CAAChC,YAAN,CAAmB,KAAnB,EAAyBkC,WAAzB;IACP;IAZE,GAAP;IAcH;;IChBD,SAASG,kBAAT,CAA4B1J,SAA5B,EAAuCoI,OAAvC,EAAgD7H,YAAhD,EAA6D8F,WAA7D,EAAyEC,aAAzE,EAAuFqD,OAAvF,EAAgG;IAC5F,SAAO;IACH3J,IAAAA,SAAS,EAATA,SADG;IAEHoI,IAAAA,OAAO,EAAPA,OAFG;IAGHzB,IAAAA,OAHG,qBAGM;IACL,aAAO3G,SAAS,CAAC4J,UAAjB;IAA6B5J,QAAAA,SAAS,CAACgF,WAAV,CAAsBhF,SAAS,CAAC4J,UAAhC;IAA7B;IACH,KALE;IAMH3E,IAAAA,aANG,2BAMY;IACX0E,MAAAA,OAAO,CAAC,oBAAD,CAAP;IACH,KARE;IASHpJ,IAAAA,WATG,yBASU;IACT,aAAOA,YAAW,GAACA,YAAW,EAAZ,GAAe,KAAjC;IACH,KAXE;IAYH8F,IAAAA,UAZG,wBAYS;IACR,aAAOA,WAAU,GAACA,WAAU,EAAX,GAAc,KAA/B;IACH,KAdE;IAeHC,IAAAA,YAfG,0BAeW;IACV,aAAOA,aAAY,GAACA,aAAY,EAAb,GAAgB,KAAnC;IACH;IAjBE,GAAP;IAmBH;;IAED,SAASuD,qBAAT,CAA+BC,aAA/B,EAA8CH,OAA9C,EAAuD;IACnDG,EAAAA,aAAa,CAACrI,KAAd,CAAoBhD,OAApB,GAA4B,MAA5B;IACA,MAAIuB,SAAS,GAAGC,QAAQ,CAACyD,aAAT,CAAuB,KAAvB,CAAhB;IACA,MAAI0E,OAAO,GAAG0B,aAAa,CAAC1H,oBAAd,CAAmC,QAAnC,CAAd;IACA,SAAO;IACHpC,IAAAA,SAAS,EAATA,SADG;IAEHoI,IAAAA,OAAO,EAAPA,OAFG;IAGHzB,IAAAA,OAHG,qBAGM;IACL3G,MAAAA,SAAS,CAAC+E,UAAV,CAAqBC,WAArB,CAAiChF,SAAjC;IACH,KALE;IAMH4H,IAAAA,oBANG,kCAMmB;IAClBkC,MAAAA,aAAa,CAAC/E,UAAd,CAAyBS,YAAzB,CAAsCxF,SAAtC,EAAiD8J,aAAa,CAACC,WAA/D;IACH,KARE;IASH9E,IAAAA,aATG,2BASY;IACX0E,MAAAA,OAAO,CAAC,QAAD,CAAP;IACAA,MAAAA,OAAO,CAAC,oBAAD,CAAP;IACH,KAZE;IAaHpJ,IAAAA,WAbG,yBAaU;IACT,aAAOuJ,aAAa,CAACjJ,QAArB;IACH,KAfE;IAgBHwF,IAAAA,UAhBG,wBAgBS;IACR,aAAOyD,aAAa,CAACE,SAAd,CAAwBxC,QAAxB,CAAiC,UAAjC,CAAP;IACH,KAlBE;IAmBHlB,IAAAA,YAnBG,0BAmBW;IACV,aAAOwD,aAAa,CAACE,SAAd,CAAwBxC,QAAxB,CAAiC,YAAjC,CAAP;IACH;IArBE,GAAP;IAuBH;;ICjDM,SAASyC,iBAAT,CAA2BC,WAA3B,EAAwCC,MAAxC,EAAgD;IACnD,OAAK,IAAIC,QAAT,IAAqBD,MAArB;IACI,QAAID,WAAW,CAACE,QAAD,CAAX,KAA0BC,SAA9B,EACIH,WAAW,CAACE,QAAD,CAAX,GAAwBD,MAAM,CAACC,QAAD,CAA9B;IAFR;IAGH;;ICFD,IAAME,QAAQ,GAAG;IACbC,EAAAA,uBAAuB,EAAG,OADb;IAEbC,EAAAA,0BAA0B,EAAE,UAFf;IAGbC,EAAAA,yBAAyB,EAAE;IAHd,CAAjB;;IAMA,SAASC,mBAAT,CAA6BhL,aAA7B,EAA2C;IACvCuK,EAAAA,iBAAiB,CAACvK,aAAD,EAAgB4K,QAAhB,CAAjB;IAEA,SAAO;IACHrD,IAAAA,MADG,kBACI0D,cADJ,EACmB;IAClBA,MAAAA,cAAc,CAACC,WAAf,CAA2BlL,aAAa,CAAC8K,0BAAzC;IACH,KAHE;IAKHxD,IAAAA,OALG,mBAKK2D,cALL,EAKoB;IACnBA,MAAAA,cAAc,CAACE,QAAf,CAAwBnL,aAAa,CAAC8K,0BAAtC;IACH,KAPE;IASHhC,IAAAA,OATG,mBASKmC,cATL,EASoB;IACnBA,MAAAA,cAAc,CAACE,QAAf,CAAwBnL,aAAa,CAAC6K,uBAAtC;IACH,KAXE;IAaH7B,IAAAA,QAbG,oBAaMiC,cAbN,EAaqB;IACpBA,MAAAA,cAAc,CAACC,WAAf,CAA2BlL,aAAa,CAAC6K,uBAAzC;IACH;IAfE,GAAP;IAiBH;;IC1BD,IAAMO,qBAAqB,GAAG;IAAC,mBAAiB,GAAlB;IAAuB,YAAU;IAAjC,CAA9B;IAEA,IAAMR,UAAQ,GAAG;IACbS,EAAAA,yBAAyB,EAAE,qBADd;IAEbC,EAAAA,wBAAwB,EAAG,sBAFd;IAGbC,EAAAA,wBAAwB,EAAG,uBAHd;IAIbC,EAAAA,oCAAoC,EAAE,SAJzB;IAKbC,EAAAA,6BAA6B,EAAE,SALlB;IAMbC,EAAAA,2BAA2B,EAAE,sCANhB;IAObC,EAAAA,gCAAgC,EAAE,sCAPrB;IAQbC,EAAAA,kCAAkC,EAAE,sCARvB;IASbC,EAAAA,gBAAgB,EAAE,SATL;;IAAA,CAAjB;;IAaA,SAASC,kBAAT,CAA4B9L,aAA5B,EAA0C;IACtCuK,EAAAA,iBAAiB,CAACvK,aAAD,EAAgB4K,UAAhB,CAAjB;IAEA,SAAO;IACHmB,IAAAA,MADG,kBACIC,SADJ,EACc;IACbA,MAAAA,SAAS,CAACf,cAAV,CAAyBgB,GAAzB,CAA6Bb,qBAA7B;IACAY,MAAAA,SAAS,CAACE,YAAV,CAAuBD,GAAvB,CAA2B,OAA3B,EAAoCjM,aAAa,CAAC6L,gBAAlD;IACH,KAJE;IAMHhF,IAAAA,UANG,sBAMQoE,cANR,EAMuB;IACtB,UAAIA,cAAc,CAACkB,QAAf,CAAwB,iBAAxB,CAAJ,EAA+C;IAC3ClB,QAAAA,cAAc,CAACgB,GAAf,CAAmB,YAAnB,EAAiCjM,aAAa,CAACsL,wBAA/C;IACH,OAFD,MAEO,IAAIL,cAAc,CAACkB,QAAf,CAAwB,iBAAxB,CAAJ,EAA+C;IAClDlB,QAAAA,cAAc,CAACgB,GAAf,CAAmB,YAAnB,EAAiCjM,aAAa,CAACuL,wBAA/C;IACH,OAFM,MAEA;IACHN,QAAAA,cAAc,CAACgB,GAAf,CAAmB,YAAnB,EAAiCjM,aAAa,CAACqL,yBAA/C;IACH;IACJ,KAdE;IAgBH9D,IAAAA,MAhBG,kBAgBI0D,cAhBJ,EAgBmB;IAClBA,MAAAA,cAAc,CAACgB,GAAf,CAAmB,kBAAnB,EAAuC,EAAvC;IACH,KAlBE;IAoBH3E,IAAAA,OApBG,mBAoBK2D,cApBL,EAoBoB;IACnBA,MAAAA,cAAc,CAACgB,GAAf,CAAmB,kBAAnB,EAAuCjM,aAAa,CAACwL,oCAArD;IACH,KAtBE;IAwBH1C,IAAAA,OAxBG,mBAwBKmC,cAxBL,EAwBoB;IACnB,UAAIA,cAAc,CAACkB,QAAf,CAAwB,UAAxB,CAAJ,EAAwC;IACpClB,QAAAA,cAAc,CAACgB,GAAf,CAAmB,YAAnB,EAAiCjM,aAAa,CAAC2L,gCAA/C;IACH,OAFD,MAEO,IAAIV,cAAc,CAACkB,QAAf,CAAwB,YAAxB,CAAJ,EAA0C;IAC7ClB,QAAAA,cAAc,CAACgB,GAAf,CAAmB,YAAnB,EAAiCjM,aAAa,CAAC4L,kCAA/C;IACH,OAFM,MAEA;IACHX,QAAAA,cAAc,CACTgB,GADL,CACS,YADT,EACuBjM,aAAa,CAAC0L,2BADrC,EAEKO,GAFL,CAES,cAFT,EAEyBjM,aAAa,CAACyL,6BAFvC;IAGH;IACJ,KAlCE;IAoCHzC,IAAAA,QApCG,oBAoCMiC,cApCN,EAoCqB;IAChBA,MAAAA,cAAc,CAACgB,GAAf,CAAmB,YAAnB,EAAiC,EAAjC,EAAsCA,GAAtC,CAA0C,cAA1C,EAA0D,EAA1D;IACP;IAtCE,GAAP;IAwCH;;ICzDD,IAAMrB,UAAQ,GAAG;IACbwB,EAAAA,cAAc,EAAE,6BADH;IAEbC,EAAAA,iBAAiB,EAAE,eAFN;IAGbC,EAAAA,iBAAiB,EAAG,MAHP;IAIbC,EAAAA,sBAAsB,EAAE,uBAJX;IAKbC,EAAAA,kBAAkB,EAAE,cALP;IAMbC,EAAAA,iBAAiB,EAAE,OANN;IAObC,EAAAA,6BAA6B,EAAE,OAPlB;IAQbC,EAAAA,oBAAoB,EAAE,EART;IASbC,EAAAA,gBAAgB,EAAE;IATL,CAAjB;;IAYA,SAASC,UAAT,CAAoBC,aAApB,EAAmC9M,aAAnC,EAAkDG,CAAlD,EAAqD;IACjDoK,EAAAA,iBAAiB,CAACvK,aAAD,EAAgB4K,UAAhB,CAAjB;IAEA,SAAM;IACF3C,IAAAA,IADE,gBACG+D,SADH,EACa;IACXA,MAAAA,SAAS,CAACe,UAAV,CAAqB5B,QAArB,CAA8BnL,aAAa,CAACoM,cAA5C;IACAJ,MAAAA,SAAS,CAACf,cAAV,CAAyBE,QAAzB,CAAkCnL,aAAa,CAACwM,kBAAhD;IACAR,MAAAA,SAAS,CAACgB,aAAV,CAAwB7B,QAAxB,CAAiCnL,aAAa,CAACqM,iBAA/C;IACAL,MAAAA,SAAS,CAACiB,gBAAV,CAA2B9B,QAA3B,CAAoCnL,aAAa,CAAC2M,oBAAlD;IACAX,MAAAA,SAAS,CAACE,YAAV,CAAuBf,QAAvB,CAAgCnL,aAAa,CAAC4M,gBAA9C;IACA,UAAIE,aAAa,CAACf,MAAlB,EACIe,aAAa,CAACf,MAAd,CAAqBC,SAArB;IACP,KATC;IAWFtF,IAAAA,aAXE,yBAWYsF,SAXZ,EAWuBkB,OAXvB,EAWgCC,SAXhC,EAW0C;IACxC,UAAID,OAAJ,EACIlB,SAAS,CAACf,cAAV,CAAyBE,QAAzB,CAAkC,UAAlC;IAEJ,UAAIgC,SAAJ,EACInB,SAAS,CAACf,cAAV,CAAyBE,QAAzB,CAAkC,YAAlC;IACP,KAjBC;IAmBFtE,IAAAA,UAnBE,sBAmBSmF,SAnBT,EAmBmB;IACjB,UAAGc,aAAa,CAACjG,UAAjB,EACGiG,aAAa,CAACjG,UAAd,CAAyBmF,SAAS,CAACf,cAAnC;IACN,KAtBC;IAwBF1D,IAAAA,MAxBE,kBAwBKyE,SAxBL,EAwBe;IACbc,MAAAA,aAAa,CAACvF,MAAd,CAAqByE,SAAS,CAACf,cAA/B;IACH,KA1BC;IA4BF3D,IAAAA,OA5BE,mBA4BM0E,SA5BN,EA4BgB;IACdc,MAAAA,aAAa,CAACxF,OAAd,CAAsB0E,SAAS,CAACf,cAAhC;IACH,KA9BC;IAgCFnC,IAAAA,OAhCE,mBAgCMkD,SAhCN,EAgCgB;IACdc,MAAAA,aAAa,CAAChE,OAAd,CAAsBkD,SAAS,CAACf,cAAhC;IACH,KAlCC;IAoCFjC,IAAAA,QApCE,oBAoCOgD,SApCP,EAoCiB;IACfc,MAAAA,aAAa,CAAC9D,QAAd,CAAuBgD,SAAS,CAACf,cAAjC;IACH,KAtCC;IAwCFjF,IAAAA,OAxCE,mBAwCMjC,YAxCN,EAwCmB;IACjB5D,MAAAA,CAAC,CAAC4D,YAAD,CAAD,CAAgBoH,QAAhB,CAAyBnL,aAAa,CAACuM,sBAAvC;IACH,KA1CC;IA4CFrK,IAAAA,QA5CE,oBA4CO6B,YA5CP,EA4CoB;IAClB5D,MAAAA,CAAC,CAAC4D,YAAD,CAAD,CAAgBmH,WAAhB,CAA4BlL,aAAa,CAACuM,sBAA1C;IACH;IA9CC,GAAN;IAgDH;;IClED,SAASa,oBAAT,CAA8BC,UAA9B,EAA0CC,YAA1C,EAAwDnN,CAAxD,EAA0D;IACtD,MAAMoN,SAAS,GAAGF,UAAU,CAACG,MAAX,CAAkB,CAAlB,CAAlB;IACA,MAAMC,cAAc,GAAGF,SAAS,CAAChL,WAAV,EAAvB;;IACA,MAAIkL,cAAc,IAAIF,SAAtB,EAAiC;IAC7B,UAAM,IAAIlN,SAAJ,mBAA8BgN,UAA9B,8CAAN;IACH;;IACD,MAAMK,gBAAgB,GAAGD,cAAc,GAAGJ,UAAU,CAACM,KAAX,CAAiB,CAAjB,CAA1C;IACA,MAAMC,sBAAsB,GAAGzN,CAAC,CAAC0N,EAAF,CAAKH,gBAAL,CAA/B;IACA,MAAMI,OAAO,sBAAoBT,UAAjC;;IAEA,WAASU,YAAT,CAAsBrF,OAAtB,EAA+B;IAC3B,WAAO,KAAKsF,IAAL,CAAW,YAAY;IAC1B,UAAIC,EAAE,GAAG9N,CAAC,CAAC,IAAD,CAAV;IACA,UAAI+N,QAAQ,GAAGD,EAAE,CAACE,IAAH,CAAQL,OAAR,CAAf;IACA,UAAIM,YAAY,GAAG,OAAO1F,OAAP,KAAmB,QAAtC;;IACA,UAAI,CAACwF,QAAL,EAAe;IACX,YAAIE,YAAY,IAAI,UAAUC,IAAV,CAAe3F,OAAf,CAApB,EAA6C;IACzC;IACH;;IACD,YAAM4F,aAAa,GAAI,OAAO5F,OAAP,KAAmB,QAApB,GAA8BA,OAA9B,GAAsC,IAA5D;IAEAwF,QAAAA,QAAQ,GAAGZ,YAAY,CAAC,IAAD,EAAOgB,aAAP,EACnB,YAAM;IACFL,UAAAA,EAAE,CAACM,UAAH,CAAcT,OAAd;IACH,SAHkB,CAAvB;IAIAG,QAAAA,EAAE,CAACE,IAAH,CAAQL,OAAR,EAAiBI,QAAjB;IACH;;IAED,UAAIE,YAAJ,EAAkB;IACd,YAAII,UAAU,GAAG9F,OAAjB;;IACA,YAAI,OAAOwF,QAAQ,CAACM,UAAD,CAAf,KAAgC,WAApC,EAAiD;IAC7C,gBAAM,IAAInO,SAAJ,uBAAkCmO,UAAlC,OAAN;IACH;;IACDN,QAAAA,QAAQ,CAACM,UAAD,CAAR;IACH;IACJ,KAxBM,CAAP;IAyBH;;IAEDrO,EAAAA,CAAC,CAAC0N,EAAF,CAAKH,gBAAL,IAAyBK,YAAzB,CAtCsD;;IAyCtD5N,EAAAA,CAAC,CAAC0N,EAAF,CAAKR,UAAL,IAAmB,YAAY;IAC3B,WAAOlN,CAAC,CAAC,IAAD,CAAD,CAAQgO,IAAR,CAAaL,OAAb,CAAP;IACH,GAFD;;IAIA3N,EAAAA,CAAC,CAAC0N,EAAF,CAAKH,gBAAL,EAAuBe,UAAvB,GAAoC,YAAY;IAC5CtO,IAAAA,CAAC,CAAC0N,EAAF,CAAKH,gBAAL,IAAyBE,sBAAzB;IACA,WAAOG,YAAP;IACH,GAHD;IAIH;;IC/CD,SAASW,sCAAT,CAAgD1O,aAAhD,EAA+D;IAC3D,MAAM4K,QAAQ,GAAG;IACT+D,IAAAA,gCAAgC,EAAE;IADzB,GAAjB;IAGApE,EAAAA,iBAAiB,CAACvK,aAAD,EAAgB4K,QAAhB,CAAjB;IAEA,SAAO;IACHgE,IAAAA,0BADG,sCACwBC,QADxB,EACiC;IAChCA,MAAAA,QAAQ,CAAC1D,QAAT,CAAkBnL,aAAa,CAAC2O,gCAAhC;IACH;IAHE,GAAP;IAKH;;IAED,IAAMG,oBAAoB,GAAG;IAAC,kBAAgB,KAAjB;IAAwB,iBAAe;IAAvC,CAA7B;IACA,IAAMC,gCAAgC,GAAG;IAAC,eAAY,OAAb;IAAsB,iBAAe;IAArC,CAAzC;;IAEA,SAASC,qCAAT,CAA+ChP,aAA/C,EAA8D;IAC1D,MAAM4K,QAAQ,GAAG;IACdqE,IAAAA,kCAAkC,EAAE;IADtB,GAAjB;IAGA1E,EAAAA,iBAAiB,CAACvK,aAAD,EAAgB4K,QAAhB,CAAjB;IAEA,SAAO;IACHgE,IAAAA,0BADG,sCACwBC,QADxB,EACiC;IAChCA,MAAAA,QAAQ,CAAC5C,GAAT,CAAa,SAAb,EAAwBjM,aAAa,CAACiP,kCAAtC;IACH,KAHE;IAKHC,IAAAA,yBALG,qCAKuBC,aALvB,EAKsCC,OALtC,EAK8C;IAC7CD,MAAAA,aAAa,CAAClD,GAAd,CAAkB6C,oBAAlB;IACA,UAAIM,OAAJ,EACIA,OAAO,CAACnD,GAAR,CAAY8C,gCAAZ;IACP;IATE,GAAP;IAWH;;IAED,SAASM,sBAAT,CAAgCvC,aAAhC,EAA+C9M,aAA/C,EAA8DG,CAA9D,EAAiE;IACzD,MAAMyK,QAAQ,GAAG;IACb6B,IAAAA,iBAAiB,EAAE,OADN;IAEbC,IAAAA,6BAA6B,EAAE;IAFlB,GAAjB;IAIAnC,EAAAA,iBAAiB,CAACvK,aAAD,EAAgB4K,QAAhB,CAAjB;IAEA,SAAO,UAAU7F,YAAV,EAAwBuK,UAAxB,EAAoCC,kBAApC,EAAuD;IACtD,QAAIJ,aAAa,GAAGhP,CAAC,CAAC4E,YAAD,CAArB;IACAoK,IAAAA,aAAa,CAAChE,QAAd,CAAuBnL,aAAa,CAACyM,iBAArC;IACA,QAAIoC,QAAQ,GAAG1O,CAAC,WAAD,CAAaiC,IAAb,CAAkBkN,UAAU,CAAClN,IAA7B,CAAf;IACAyM,IAAAA,QAAQ,CAACW,QAAT,CAAkBL,aAAlB;IACA,QAAIG,UAAU,CAACnO,QAAf,EACI2L,aAAa,CAAC8B,0BAAd,CAAyCC,QAAzC;IACJ,QAAIO,OAAO,GAAGjP,CAAC,CAAC,yGAAD,CAAD;IAEV;IAFU,KAGT8L,GAHS,CAGL,OAHK,EAGI,MAHJ,EAGYuD,QAHZ,CAGqBL,aAHrB,EAIThE,QAJS,CAIAnL,aAAa,CAAC0M,6BAJd;IAAA,KAKTzD,EALS,CAKN,OALM,EAKG,UAACvD,OAAD;IAAA,aAAa6J,kBAAkB,CAAC7J,OAAD,CAA/B;IAAA,KALH,CAAd;IAOA,QAAIoH,aAAa,CAACoC,yBAAlB,EACIpC,aAAa,CAACoC,yBAAd,CAAwCC,aAAxC,EAAuDC,OAAvD;IACJ,WAAO;IACH3K,MAAAA,OADG,mBACKH,UADL,EACgB;IAAE8K,QAAAA,OAAO,CAACK,IAAR,CAAa,UAAb,EAAyBnL,UAAzB;IAAuC;IADzD,KAAP;IAGH,GAnBL;IAqBP;;IC/DD,SAASoL,sCAAT,CAAgD1P,aAAhD,EAA+D;IAC3D,MAAM4K,QAAQ,GAAG;IACT+D,IAAAA,gCAAgC,EAAE;IADzB,GAAjB;IAGApE,EAAAA,iBAAiB,CAACvK,aAAD,EAAgB4K,QAAhB,CAAjB;IACA,SAAO;IACHpG,IAAAA,aADG,yBACWmL,SADX,EACsBC,cADtB,EACsCC,UADtC,EACiD;IAChD,UAAIA,UAAJ,EACIF,SAAS,CAACxE,QAAV,CAAmBnL,aAAa,CAAC+K,yBAAjC,EADJ,KAGI4E,SAAS,CAACzE,WAAV,CAAsBlL,aAAa,CAAC+K,yBAApC;IACP;IANE,GAAP;IAQH;;IAED,SAAS+E,qCAAT,CAA+C9P,aAA/C,EAA8D;IAC1D,MAAM4K,QAAQ,GAAG;IACTqE,IAAAA,kCAAkC,EAAE,KAD3B;IAETc,IAAAA,2BAA2B,EAAE;IAFpB,GAAjB;IAIAxF,EAAAA,iBAAiB,CAACvK,aAAD,EAAgB4K,QAAhB,CAAjB;IACA,SAAM;IACFpG,IAAAA,aADE,yBACYmL,SADZ,EACuBC,cADvB,EACuCC,UADvC,EACkD;IAChDD,MAAAA,cAAc,CAAC3D,GAAf,CAAmB,OAAnB,EAA4B4D,UAAU,GAAC7P,aAAa,CAAC+P,2BAAf,GAA2C,EAAjF;IACH;IAHC,GAAN;IAKH;;IAED,SAASC,sBAAT,CAAgClD,aAAhC,EAA+C9M,aAA/C,EAA8DG,CAA9D,EAAiE;IAC7D,MAAMyK,QAAQ,GAAG;IACT0B,IAAAA,iBAAiB,EAAG;IADX,GAAjB;IAGA/B,EAAAA,iBAAiB,CAACvK,aAAD,EAAgB4K,QAAhB,CAAjB;IACA,SAAO,UAAS7G,YAAT,EAAuBd,MAAvB,EAA8B;IACzB,QAAIgN,aAAa,GAAG9P,CAAC,CAAC4D,YAAD,CAArB;IACAkM,IAAAA,aAAa,CAAC9E,QAAd,CAAuBnL,aAAa,CAACsM,iBAArC;IACA,QAAI4D,oBAAoB,GAAE/P,CAAC,4NAA3B;IAIA+P,IAAAA,oBAAoB,CAACV,QAArB,CAA8BzL,YAA9B;IACA,QAAI4L,SAAS,GAAGO,oBAAoB,CAAChK,IAArB,4BAAhB;IACA,QAAI0J,cAAc,GAAGM,oBAAoB,CAAChK,IAArB,SAArB;IACA0J,IAAAA,cAAc,CAACxN,IAAf,CAAoBa,MAAM,CAACb,IAA3B;IAEA,WAAO;IACH+C,MAAAA,MADG,kBACIZ,UADJ,EACe;IAAEoL,QAAAA,SAAS,CAACF,IAAV,CAAe,SAAf,EAA0BlL,UAA1B;IAAwC,OADzD;IAEHE,MAAAA,OAFG,mBAEKH,UAFL,EAEgB;IAAEqL,QAAAA,SAAS,CAACF,IAAV,CAAe,UAAf,EAA2BnL,UAA3B;IAAyC,OAF3D;IAGHE,MAAAA,aAHG,yBAGWqL,UAHX,EAGsB;IAAE/C,QAAAA,aAAa,CAACtI,aAAd,CAA4BmL,SAA5B,EAAuCC,cAAvC,EAAuDC,UAAvD;IAAqE,OAH7F;IAIHnL,MAAAA,UAJG,sBAIQO,MAJR,EAIgB;IACf0K,QAAAA,SAAS,CAAC1G,EAAV,CAAa,QAAb,EAAuBhE,MAAvB;IACAgL,QAAAA,aAAa,CAAChH,EAAd,CAAiB,OAAjB,EAA0B,UAAArB,KAAK,EAAI;IAC/B,cAAI7D,YAAY,KAAK6D,KAAK,CAACC,MAAvB,IAAiC1H,CAAC,CAAC2H,QAAF,CAAW/D,YAAX,EAAyB6D,KAAK,CAACC,MAA/B,CAArC,EAA6E;IACzE5C,YAAAA,MAAM;IACT;IACJ,SAJD;IAKH;IAXE,KAAP;IAaH,GAzBT;IA0BH;;IC/CD,CACI,UAAC/E,MAAD,EAASC,CAAT,EAAe;IACXiN,EAAAA,oBAAoB,CAAC,eAAD,EAChB,UAAC+C,OAAD,EAAUC,QAAV,EAAoBnQ,SAApB,EAAkC;IAC9B,QAAID,aAAa,GAAGG,CAAC,CAACkQ,MAAF,CAAS,EAAT,EAAaD,QAAb,CAApB,CAD8B;;IAE9B,QAAIpQ,aAAa,CAACsQ,kBAAlB,EACItQ,aAAa,CAACsQ,kBAAd,CAAiCH,OAAjC,EAA0CnQ,aAA1C;IACJ,QAAIuQ,QAAQ,GAAEpQ,CAAC,CAACgQ,OAAD,CAAf;IACA,QAAIzQ,cAAc,GAAG,IAArB;IACA,QAAIM,aAAa,CAACN,cAAlB,EACIA,cAAc,GAAGM,aAAa,CAACN,cAA/B,CADJ,KAGA;IACI,UAAIuK,OAAO,GAAG,SAAVA,OAAU,CAASuG,SAAT,EAAmB;IAC7BD,QAAAA,QAAQ,CAACtG,OAAT,CAAiBuG,SAAjB;IACH,OAFD;;IAGA,UAAIxQ,aAAa,CAAC0I,OAAlB,EAA0B;IACtBhJ,QAAAA,cAAc,GAAGsK,kBAAkB,CAACmG,OAAD,EAAUnQ,aAAa,CAAC0I,OAAxB,EAC/B1I,aAAa,CAACa,WADiB,EACJb,aAAa,CAAC2G,UADV,EACsB3G,aAAa,CAAC4G,YADpC,EAE/BqD,OAF+B,CAAnC;IAGA,YAAI,CAACjK,aAAa,CAAC4J,aAAnB,EACI5J,aAAa,CAAC4J,aAAd,GAA4B;IAAA,iBAAO5J,aAAa,CAACoM,cAArB,0BAAwD+D,OAAO,CAACM,EAAhE;IAAA,SAA5B;IAEP,OAPD,MAOM;IACF,YAAI,CAACzQ,aAAa,CAAC2J,KAAnB,EACA;IACI,cAAI+G,UAAU,GAAGvQ,CAAC,CAACgQ,OAAD,CAAD,CAAWQ,OAAX,CAAmB,aAAnB,CAAjB;;IACA,cAAID,UAAU,CAAC9N,MAAX,IAAqB,CAAzB,EAA4B;IACxB,gBAAIgO,MAAM,GAAGF,UAAU,CAACxK,IAAX,kBAA8BiK,OAAO,CAACM,EAAtC,SAAb;;IACA,gBAAIG,MAAM,CAAChO,MAAP,GAAc,CAAlB,EACA;IACI,kBAAI+G,KAAK,GAAGiH,MAAM,CAACC,GAAP,CAAW,CAAX,CAAZ;IACA,kBAAIC,KAAK,GAAGnH,KAAK,CAACG,YAAN,CAAmB,KAAnB,CAAZ;;IACA,kBAAIgH,KAAK,IAAIX,OAAO,CAACM,EAArB,EAAyB;IACrBzQ,gBAAAA,aAAa,CAAC2J,KAAd,GAAsBA,KAAtB;IACH;IACJ;IACJ;IACJ;;IACDjK,QAAAA,cAAc,GAAGyK,qBAAqB,CAACgG,OAAD,EAAUlG,OAAV,CAAtC;IACA,YAAI,CAACjK,aAAa,CAAC4J,aAAnB,EACI5J,aAAa,CAAC4J,aAAd,GAA4B;IAAA,iBAAO5J,aAAa,CAACoM,cAArB,yBAAuD,CAAE+D,OAAO,CAACM,EAAT,GAAaN,OAAO,CAACM,EAArB,GAAwBN,OAAO,CAACY,IAAjC,EAAuCxO,WAAvC,EAAvD;IAAA,SAA5B;IACP;IACJ;IAED,QAAIzC,YAAY,GAAG4J,YAAY,CAAC1J,aAAa,CAAC2J,KAAf,EAAsB3J,aAAa,CAAC4J,aAApC,CAA/B;IAEA,QAAIoH,OAAO,GAAC,IAAZ;IACA,QAAIhR,aAAa,CAACgR,OAAlB,EACIA,OAAO,GAAGhR,aAAa,CAACgR,OAAxB,CADJ,KAGA;IACI,UAAIlE,aAAa,GAAG9M,aAAa,CAACiR,MAAd,GACdjG,mBAAmB,CAAChL,aAAD,CADL,GAEd8L,kBAAkB,CAAC9L,aAAD,CAFxB;IAGAgR,MAAAA,OAAO,GAAGnE,UAAU,CAACC,aAAD,EAAgB9M,aAAhB,EAA+BG,CAA/B,CAApB;IACH;IAED,QAAI+Q,eAAe,GAAGlR,aAAa,CAACiR,MAAd,GAChBvC,sCAAsC,CAAC1O,aAAD,AAAA,CADtB,GAEhBgP,qCAAqC,CAAChP,aAAD,AAAA,CAF3C;IAGA,QAAImR,eAAe,GAAGnR,aAAa,CAACiR,MAAd,GAChBvB,sCAAsC,CAAC1P,aAAD,AAAA,CADtB,GAEhB8P,qCAAqC,CAAC9P,aAAD,AAAA,CAF3C;IAGA,QAAIoR,sBAAsB,GAAG/B,sBAAsB,CAAC6B,eAAD,EAAkBlR,aAAlB,EAAiCG,CAAjC,CAAnD;IACA,QAAIkR,sBAAsB,GAAGrB,sBAAsB,CAACmB,eAAD,EAAkBnR,aAAlB,EAAiCG,CAAjC,CAAnD;;IAEA,QAAIJ,sBAAsB,GAAG,SAAzBA,sBAAyB,CAASO,SAAT,EAAoBE,aAApB,EAAmCC,eAAnC,EAAoDC,WAApD,EAAiEC,YAAjE,EAA8E;IACvG,aAAO;IACHoM,QAAAA,UAAU,EAAC5M,CAAC,CAACG,SAAD,CADT;IACsB2K,QAAAA,cAAc,EAAC9K,CAAC,CAACK,aAAD,CADtC;IAEHyM,QAAAA,gBAAgB,EAAC9M,CAAC,CAACM,eAAD,CAFf;IAEkCyL,QAAAA,YAAY,EAAC/L,CAAC,CAACO,WAAD,CAFhD;IAGHsM,QAAAA,aAAa,EAAC7M,CAAC,CAACQ,YAAD;IAHZ,OAAP;IAKH,KAND;;IAOA,QAAI2Q,WAAW,GAAG,IAAI7R,WAAJ,CAAgBC,cAAhB,EAAgCsR,OAAhC,EAAyCI,sBAAzC,EAAiEC,sBAAjE,EACdvR,YADc,EACAC,sBADA,EACwBC,aADxB,EACuCC,SADvC,EACkDC,MADlD,EAC0DC,CAD1D,CAAlB;IAEA,WAAOmR,WAAP;IACH,GA3Ee,EA2EbnR,CA3Ea,CAApB;IA4EH,CA9EL,EA+EED,MA/EF,EA+EUC,CA/EV;;;;"}