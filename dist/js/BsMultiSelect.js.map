{"version":3,"file":"BsMultiSelect.js","sources":["../../src/BsMultiSelect.es8.js"],"sourcesContent":["import $ from 'jquery'\r\nimport Popper from 'popper.js'\r\n\r\n// TODO: \r\n// 2) require polyfill Element.closest polyfill IE 11\r\n// 3) require multiple classList.add polyfill IE 11\r\n\r\n// IIFE to declare private members\r\nconst BsMultiSelect = ((window, $, Popper) => {\r\n    const JQUERY_NO_CONFLICT = $.fn[pluginName];\r\n    const pluginName = \"dashboardCodeBsMultiSelect\";\r\n    const dataKey = \"plugin_\" + pluginName;\r\n    const defaults = {\r\n        items: [],\r\n        defaults: [],\r\n        usePopper: true,\r\n        selectedPanelMinHeight: \"calc(2.25rem + 2px)\",\r\n        selectedPanelReadonlyBackgroundColor: \"#e9ecef\",\r\n        filterInputColor: \"#495057\",\r\n\r\n        containerClass: \"dashboardcode-bsmultiselect\",\r\n        dropDownMenuClass: \"dropdown-menu\",\r\n        dropDownItemClass: \"px-2\",\r\n\r\n        selectedPanelClass: \"form-control btn border\",\r\n        selectedPanelStyle: { \"min-height\": \"calc(2.25rem + 2px)\" },\r\n        selectedPanelStyleSys: { \"cursor\": \"text\", \"display\": \"flex\", \"flex-wrap\": \"wrap\", \"align-items\": \"center\", \"margin-bottom\": \"0px\" }, \r\n        \r\n        selectedPanelReadonlyStyle: { \"background-color\":\"#e9ecef\"},\r\n        \r\n        selectedItemClass: \"badge\", \r\n        selectedItemStyle: { \"padding-left\": \"0px\"},\r\n        selectedItemStyleSys: { \"display\": \"flex\", \"align-items\": \"center\" },\r\n        \r\n        removeSelectedItemButtonClass: \"close\",\r\n        removeSelectedItemButtonStyle: { \"font-size\": \"100%\" }, \r\n        \r\n        filterInputItemClass: \"\", \r\n        filterInputItemStyle: {},\r\n        filterInputItemStyleSys: {\"display\": \"block\"},\r\n        \r\n        filterInputClass: \"\",\r\n        filterInputStyle: { \"color\": \"#495057\" },\r\n        filterInputStyleSys: { \"width\": \"2ch\", \"border\": \"0\", \"padding\": \"0\", \"outline\": \"none\", }\r\n    };\r\n\r\n    class Plugin {\r\n        constructor(element, options) {\r\n            if (typeof Popper === 'undefined') {\r\n                throw new TypeError('DashboardCode bsMultiSelect require Popper.js (https://popper.js.org)')\r\n            }\r\n\r\n            // readonly\r\n            this.element = element;\r\n            this.options = $.extend({}, defaults, options);\r\n            this.input = element;\r\n            this.container = null;\r\n            this.dropDownMenu = null;\r\n            this.selectedPanel = null;\r\n            this.filterInput = null;\r\n            this.filterInputItem = null;\r\n            this.popper = null;\r\n\r\n            // state\r\n            this.skipFocusout = false;\r\n            this.backspaceAtStartPoint = null;\r\n            this.selectedDropDownItem = null;\r\n            this.selectedDropDownIndex = null;\r\n            this.hasItems = false;\r\n\r\n            this.init();\r\n        }\r\n\r\n        updateDropDownPosition() {\r\n            //console.log(\"updateDropDownPosition\");\r\n            if (this.options.usePopper) {\r\n                this.popper.update();\r\n            } else {\r\n                $(this.dropDownMenu).dropdown('update');\r\n            }\r\n        }\r\n\r\n        hideDropDown() {\r\n            if (this.options.usePopper) {\r\n                //console.log(\"popper remove show\");\r\n                $(this.dropDownMenu).removeClass('show')\r\n            } else {\r\n                if ($(this.dropDownMenu).hasClass('show'))\r\n                    $(this.dropDownMenu).dropdown('toggle');\r\n            }\r\n        }\r\n\r\n        showDropDown() {\r\n            if (this.hasItems) {\r\n                if (this.options.usePopper) {\r\n                    //console.log(\"popper add show\");\r\n                    $(this.dropDownMenu).addClass('show')\r\n                } else {\r\n                    if (!$(this.dropDownMenu).hasClass('show'))\r\n                        $(this.dropDownMenu).dropdown('toggle');\r\n                }\r\n            }\r\n        }\r\n\r\n        setCheck(optionId, isChecked) {\r\n            for (var i = 0; i < this.input.options.length; i += 1) {\r\n                var option = this.input.options[i];\r\n                if (option.value == optionId) {\r\n                    this.input.options[i].selected = isChecked;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        // Public methods\r\n        getInputValue() {\r\n            return $(this.input).val();\r\n        }\r\n\r\n        closeDropDown() {\r\n            this.clearFilterInput();\r\n            this.hideDropDown();\r\n            this.updateDropDownPosition();\r\n        }\r\n\r\n\r\n        clearFilterInput() {\r\n            if (this.filterInput.value != '') {\r\n                this.filterInput.value = '';\r\n                this.filterDropDownMenu();\r\n                if (this.hasItems) {\r\n                    this.updateDropDownPosition(); \r\n                } \r\n            }\r\n        }\r\n\r\n        filterDropDownMenu() {\r\n            var text = this.filterInput.value.trim();\r\n            var visible = 0;\r\n            $(this.dropDownMenu).find('li').each(function () {\r\n                var $item = $(this);\r\n                if (text == \"\") {\r\n                    $item.show();\r\n                    visible++;\r\n                }\r\n                else {\r\n                    var itemText = $item.text();\r\n                    var $checkbox = $item.find('input[type=\"checkbox\"]');\r\n                    \r\n                    if (!$checkbox.prop('checked') && itemText.toLowerCase().includes(text.toLowerCase())) {\r\n                        $item.show();\r\n                        visible++;\r\n                    } else {\r\n                        $item.hide();\r\n                    }\r\n                }\r\n            });\r\n            this.hasItems = (visible > 0);\r\n            this.resetSelectDropDownMenu();\r\n        }\r\n\r\n        clickDropDownItem(event) {\r\n            //console.log(\"filter & stopPropagation\");\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n\r\n            var menuItem = event.currentTarget.closest(\"LI\");\r\n            var $menuItem = $(menuItem);\r\n            var optionId = $menuItem.data(\"option-id\");\r\n            var $checkBox = $menuItem.find('input[type=\"checkbox\"]');\r\n            if ($checkBox.prop('checked')) {\r\n                var $selectedItem = $(this.selectedPanel).find(`li[data-option-id=\"${optionId}\"]`);\r\n                this.removeSelectedItem($selectedItem, optionId, $checkBox);\r\n            } else {\r\n                var itemText = $menuItem.find('label').text();\r\n                this.createAndAppendSelectedItem($checkBox, optionId, itemText);\r\n                $checkBox.prop('checked', true);\r\n            }\r\n            this.clearFilterInput();\r\n            $(this.filterInput).focus();\r\n        }\r\n\r\n        \r\n        appendDropDownItem(itemValue, itemText, isChecked) {\r\n            var optionId = itemValue;\r\n            var checkBoxId = `dashboardcode-bsmultiselect-${this.input.name.toLowerCase()}-generated-id-${optionId.toLowerCase()}`;\r\n            var checked = isChecked ? \"checked\" : \"\";\r\n            var $dropDownItem = $(\r\n                `<li data-option-id=\"${optionId}\">\r\n                    <div class=\"custom-control custom-checkbox\">\r\n                        <input type=\"checkbox\" class=\"custom-control-input\" id=\"${checkBoxId}\" ${checked}>\r\n                        <label class=\"custom-control-label\" for=\"${checkBoxId}\">${itemText}</label>\r\n                    </div>\r\n                 </li>`).addClass(this.options.dropDownItemClass).appendTo($(this.dropDownMenu));\r\n\r\n            var $checkBox = $dropDownItem.find(`input[type=\"checkbox\"]`);\r\n            if (isChecked) {\r\n                this.createAndAppendSelectedItem($checkBox, optionId, itemText);\r\n            }\r\n        }\r\n        \r\n        createAndAppendSelectedItem($checkBox, optionId, itemText) {\r\n            var $selectedItem = $(`<li data-option-id=\"${optionId}\"><span>${itemText}</span></li>`)\r\n                .css(this.options.selectedItemStyleSys)\r\n                .css(this.options.selectedItemStyle)\r\n                .addClass(this.options.selectedItemClass) \r\n                .insertBefore($(this.filterInputItem));\r\n            var $buttom = $(\"<button aria-label='Close' tabIndex='-1' type='button'><span aria-hidden='true'>&times;</span></button>\")\r\n                .css(this.options.removeSelectedItemButtonStyle)\r\n                .addClass(this.options.removeSelectedItemButtonClass)\r\n                .appendTo($selectedItem); \r\n            this.setCheck(optionId, true);\r\n\r\n            $buttom.click((event) => {\r\n                this.removeSelectedItem($selectedItem, optionId, $checkBox)\r\n                this.updateDropDownPosition();\r\n                $(this.filterInput).focus();\r\n            });\r\n        }\r\n\r\n        adoptFilterInputLength() {\r\n            this.filterInput.style.width = this.filterInput.value.length*1.3 + 2 + \"ch\";\r\n        }\r\n\r\n        analyzeInputText() {\r\n            var text = this.filterInput.value.trim().toLowerCase();\r\n            var item = [...this.dropDownMenu.querySelectorAll(\"LI\")]\r\n                .find(i => i.textContent.trim().toLowerCase() == text);\r\n            if (item != undefined) {\r\n                var $item = $(item);\r\n                var $checkBox = $item.find('input[type=\"checkbox\"]');\r\n                if (!$checkBox.prop('checked')) {\r\n                    var optionId = $item.data('option-id');\r\n                    var itemText = $item.find('label').text();\r\n                    this.createAndAppendSelectedItem($checkBox, optionId, itemText);\r\n                    $checkBox.prop('checked', true);\r\n\r\n                }\r\n                this.clearFilterInput();\r\n            }\r\n        }\r\n\r\n        resetSelectDropDownMenu() {\r\n            if (this.selectedDropDownItem != null) {\r\n                // IE11 doesn't support remove('text-primary', bg-light' )\r\n                this.selectedDropDownItem.classList.remove('bg-light');\r\n                this.selectedDropDownItem.classList.remove('text-primary');\r\n                this.selectedDropDownItem = null;\r\n            }\r\n            this.selectedDropDownIndex = null;\r\n        }\r\n        \r\n        keydownArrow(down) {\r\n            var items = [...this.dropDownMenu.querySelectorAll('LI:not([style*=\"display: none\"]')];\r\n            if (items.length > 0) {\r\n                this.showDropDown();\r\n                if (this.selectedDropDownItem == null) {\r\n                    \r\n                    this.selectedDropDownIndex = (down) ? 0 : items.length - 1;\r\n                }\r\n                else {\r\n                    // IE11 doesn't support remove('text-primary', bg-light' )\r\n                    this.selectedDropDownItem.classList.remove('bg-light');\r\n                    this.selectedDropDownItem.classList.remove('text-primary');\r\n                    if (down) {\r\n                        var newIndex = this.selectedDropDownIndex + 1;\r\n                        this.selectedDropDownIndex = (newIndex < items.length) ? newIndex : 0;\r\n                    } else {\r\n                        var newIndex = this.selectedDropDownIndex - 1;\r\n                        this.selectedDropDownIndex = (newIndex >= 0) ? newIndex : items.length - 1;\r\n                    }\r\n                }\r\n                this.selectedDropDownItem = items[this.selectedDropDownIndex];\r\n                // IE11 doesn't support add('text-primary', bg-light' )\r\n                this.selectedDropDownItem.classList.add('text-primary');\r\n                this.selectedDropDownItem.classList.add('bg-light' );\r\n                \r\n            }\r\n        }\r\n\r\n        removeSelectedItem($selectedItem, optionId, $checkBox) {\r\n            $selectedItem.remove();\r\n            this.setCheck(optionId, false);\r\n            $checkBox.prop('checked', false);\r\n        }\r\n\r\n        init() {\r\n            var $input = $(this.input);\r\n            $input.hide();\r\n            var disabled = this.input.disabled;\r\n\r\n            var $container = $(\"<div/>\")\r\n                .addClass(this.options.containerClass)\r\n                .insertAfter($input);\r\n                \r\n            this.container = $container.get(0);\r\n\r\n            var $selectedPanel = $(\"<ul/>\")\r\n                .addClass(this.options.selectedPanelClass)\r\n                .css(this.options.selectedPanelStyleSys)\r\n                .css(this.options.selectedPanelStyle)\r\n                .appendTo($container);\r\n            this.selectedPanel = $selectedPanel.get(0);\r\n\r\n            var $filterInputItem = $('<li/>')\r\n                .css(this.options.filterInputItemStyleSys)\r\n                .css(this.options.filterInputItemStyle)\r\n                .addClass(this.options.filterInputItemClass)\r\n                .appendTo($selectedPanel);\r\n            this.filterInputItem = $filterInputItem.get(0)\r\n\r\n            var $filterInput = $('<input type=\"search\" autocomplete=\"off\">')\r\n                .css(this.options.filterInputStyleSys)\r\n                .css(this.options.filterInputStyle)\r\n                .addClass(this.options.filterInputClass)\r\n                .appendTo($filterInputItem);\r\n            this.filterInput = $filterInput.get(0)\r\n\r\n            var $dropDownMenu = $(\"<ul/>\").appendTo($container);\r\n            this.dropDownMenu = $dropDownMenu.get(0);\r\n\r\n            $dropDownMenu.addClass(this.options.dropDownMenuClass);\r\n            if (this.options.usePopper) {\r\n                this.popper = new Popper(this.filterInput, this.dropDownMenu, {\r\n                    placement: 'bottom-start',\r\n                    modifiers: {\r\n                        flip: {\r\n                            behavior: ['left', 'right']\r\n                        },\r\n                    },\r\n                });\r\n            } else {\r\n                $(this.dropDownMenu).addClass(\"dropdown dropdown-menu\")\r\n                $(this.dropDownMenu).data(\"\", \"\");\r\n                $(this.dropDownMenu).dropdown({\r\n                    placement: 'bottom-start',\r\n                    flip: false,\r\n                    reference: this.filterInput\r\n                });\r\n            }\r\n\r\n            if (this.options.items == null) {\r\n                this.options.items.forEach(item => {\r\n                    var itemValue = item['value'];\r\n                    var itemText = item['text'];\r\n                    var isChecked = item['isChecked'];\r\n                    this.appendDropDownItem(itemValue, itemText, isChecked);\r\n                });\r\n                this.hasItems = options.items.length > 0;\r\n            } else {\r\n                var selectOptions = $input.find('option');\r\n                selectOptions.each(\r\n                    (index, option) => {\r\n                        var itemValue = option.value;\r\n                        var itemText = option.text;\r\n                        var isChecked = option.selected;\r\n                        this.appendDropDownItem(itemValue, itemText, isChecked);\r\n                    }\r\n                );\r\n                this.hasItems = selectOptions.length > 0;\r\n            }\r\n            if (disabled) {\r\n                this.filterInput.style.display = \"none\";\r\n                $selectedPanel.css(this.options.selectedPanelReadonlyStyle);\r\n                $selectedPanel.find('button').prop(\"disabled\", true);\r\n                $selectedPanel.addClass();\r\n            } else {\r\n                var inputId = this.input.id;\r\n                var formGroup = this.input.closest(\".form-group\");\r\n                if (formGroup != null) {\r\n                    var label = formGroup.querySelector(`label[for=\"${inputId}\"]`);\r\n                    var f = $(label).attr(\"for\");\r\n                    if ( f == this.input.id) {\r\n                        this.filterInput.id = \"dashboardcode-bsmultiselect-generated-filter-id-\" + this.input.id;\r\n                        label.setAttribute(\"for\", this.filterInput.id);\r\n                    }\r\n                }\r\n\r\n                this.updateDropDownPosition();\r\n\r\n                $dropDownMenu.click(event => {\r\n                    //console.log('dropDownMenu click - stopPropagation')\r\n                    event.stopPropagation();\r\n                });\r\n\r\n                $dropDownMenu.find('li').click((event) => {\r\n                    this.clickDropDownItem(event);\r\n                });\r\n\r\n                $dropDownMenu.on(\"mouseover\", (event) => {\r\n                    this.resetSelectDropDownMenu();\r\n                });\r\n\r\n                $dropDownMenu.find(\"li\").on(\"mouseover\", (event) => {\r\n                    event.target.closest(\"li\").classList.add('text-primary');\r\n                    event.target.closest(\"li\").classList.add('bg-light');\r\n                });\r\n\r\n                $dropDownMenu.find(\"li\").on(\"mouseout\", (event) => {\r\n                    event.target.closest(\"li\").classList.remove('text-primary');\r\n                    event.target.closest(\"li\").classList.remove('bg-light');\r\n                });\r\n\r\n                $selectedPanel.click((event) => {\r\n                    //console.log('selectedPanel click ' + event.target.nodeName);\r\n                    if (event.target.nodeName != \"INPUT\")\r\n                        $(this.filterInput).val('').focus();\r\n                    if (!(event.target.nodeName == \"BUTTON\" || (event.target.nodeName == \"SPAN\" && event.target.parentElement.nodeName == \"BUTTON\")))\r\n                        this.showDropDown();\r\n                });\r\n\r\n\r\n                $filterInput.on(\"keydown\", (event) => {\r\n                    if (event.which == 38 || event.keyCode == 38) {\r\n                        event.preventDefault();\r\n                        this.keydownArrow(false);\r\n                    }\r\n                    else if (event.which == 40 || event.keyCode == 40) {\r\n                        event.preventDefault()\r\n                        this.keydownArrow(true);\r\n                    }\r\n                    else if (event.which == 13 || event.keyCode == 13 || event.which == 9 || event.keyCode == 9) {\r\n                        event.preventDefault();\r\n                    }\r\n                    else {\r\n                        if (event.which == 8 || event.keyCode == 8) {\r\n                            // detect that backspace is at start of input field (this will be used at keydown)\r\n                            this.backspaceAtStartPoint = (this.filterInput.selectionStart == 0 && this.filterInput.selectionEnd == 0);\r\n                        }\r\n                        this.resetSelectDropDownMenu();\r\n                    }\r\n                });\r\n\r\n                $filterInput.on(\"keyup\", (event) => {\r\n                    if (event.which == 13 || event.keyCode == 13 || event.which == 9 || event.keyCode == 9) {\r\n                        if (this.selectedDropDownItem != null) {\r\n                            var $item = $(this.selectedDropDownItem);\r\n                            var $checkBox = $item.find('input[type=\"checkbox\"]');\r\n                            var optionId = $item.data('option-id');\r\n                            if (!$checkBox.prop('checked')) {\r\n                                var itemText = $item.find('label').text();\r\n                                this.createAndAppendSelectedItem($checkBox, optionId, itemText);\r\n                                $checkBox.prop('checked', true);\r\n                                this.filterInput.value = \"\";\r\n                            } else {\r\n                                var $selectedItem = $(this.selectedPanel).find(`li[data-option-id=\"${optionId}\"]`);\r\n                                this.removeSelectedItem($selectedItem, optionId, $checkBox);\r\n                            }\r\n                            //this.resetSelectDropDownMenu();\r\n                        } else {\r\n                            this.analyzeInputText();\r\n                        }\r\n                    } else if (event.which == 8 || event.keyCode == 8) {\r\n                        var startPosition = this.filterInput.selectionStart;\r\n                        var endPosition = this.filterInput.selectionEnd;\r\n                        if (endPosition == 0 && startPosition == 0 && this.backspaceAtStartPoint) {\r\n                            var array = [...this.selectedPanel.querySelectorAll(\"LI\")];\r\n                            if (array.length >= 2) {\r\n                                var itemToDelete = array[array.length - 2];\r\n                                var $itemToDelete = $(itemToDelete);\r\n                                var optionId = $itemToDelete.data(\"option-id\");\r\n                                var item = [...this.dropDownMenu.querySelectorAll(\"LI\")]\r\n                                    .find(i => i.dataset.optionId == optionId);\r\n                                var $item = $(item);\r\n                                var $checkBox = $item.find('input[type=\"checkbox\"]');\r\n                                var $selectedItem = $(this.selectedPanel).find(`li[data-option-id=\"${optionId}\"]`);\r\n                                this.removeSelectedItem($selectedItem, optionId, $checkBox);\r\n                            }\r\n                        }\r\n                        this.backspaceAtStartPoint = null;\r\n                    } else if (event.which == 27 || event.keyCode == 27) { // escape\r\n                        this.closeDropDown();\r\n                    }\r\n\r\n                });\r\n\r\n                // Set on change for filter input\r\n                $filterInput.on('input', (event) => { // keyup focus\r\n                    //console.log('filterInput input');\r\n                    this.adoptFilterInputLength();\r\n                    this.filterDropDownMenu();\r\n                    if (this.hasItems) {\r\n                        this.updateDropDownPosition(); // support case when textbox can change its place because of line break (texbox grow with each key press)\r\n                        this.showDropDown();\r\n                    } else {\r\n                        this.hideDropDown();\r\n                    }\r\n                });\r\n\r\n                $filterInput.focusin((event) => {\r\n                    $(this.selectedPanel).addClass(\"focus\");\r\n                });\r\n\r\n                $filterInput.focusout((event) => {\r\n                    if (!this.skipFocusout)\r\n                        $(this.selectedPanel).removeClass(\"focus\");\r\n                });\r\n\r\n                $container.mousedown((event) => {\r\n                    this.skipFocusout = true;\r\n\r\n                });\r\n\r\n                $(window.document).mouseup((event) => {\r\n                    this.skipFocusout = false;\r\n                    if (!(this.container === event.target || this.container.contains(event.target))) {\r\n                        //console.log(\"document mouseup outside container\");\r\n                        this.closeDropDown();\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    var jQueryInterface = function (options) {\r\n        return this.each(function () {\r\n            let data = $(this).data(dataKey)\r\n\r\n            if (!data) {\r\n                if (/dispose|hide/.test(options)) {\r\n                    return;\r\n                }\r\n                else {\r\n                    const optionsObject = (typeof options === 'object')? options:null;\r\n                    data = new Plugin(this, optionsObject);\r\n                    $(this).data(dataKey, data);\r\n                }\r\n            }\r\n\r\n            if (typeof options === 'string') {\r\n                var methodName = options;\r\n                if (typeof data[methodName] === 'undefined') {\r\n                    throw new TypeError(`No method named \"${methodName}\"`)\r\n                }\r\n                data[methodName]()\r\n            }\r\n        })\r\n    }\r\n\r\n    $.fn[pluginName] = jQueryInterface;\r\n\r\n    // in case of mulitple $(this) it will return 1st element plugin instance\r\n    $.fn[pluginName.charAt(0).toUpperCase() + pluginName.slice(1)] = function (options) {\r\n        return $(this).data(\"plugin_\" + pluginName);\r\n    };\r\n\r\n    $.fn[pluginName].Constructor = Plugin;\r\n\r\n    $.fn[pluginName].noConflict = function () {\r\n        $.fn[pluginName] = JQUERY_NO_CONFLICT\r\n        return jQueryInterface;\r\n    }\r\n    return Plugin;\r\n})(window, $, Popper);\r\n\r\nexport default BsMultiSelect;\r\n"],"names":["BsMultiSelect","window","$","Popper","JQUERY_NO_CONFLICT","fn","pluginName","dataKey","defaults","items","usePopper","selectedPanelMinHeight","selectedPanelReadonlyBackgroundColor","filterInputColor","containerClass","dropDownMenuClass","dropDownItemClass","selectedPanelClass","selectedPanelStyle","selectedPanelStyleSys","selectedPanelReadonlyStyle","selectedItemClass","selectedItemStyle","selectedItemStyleSys","removeSelectedItemButtonClass","removeSelectedItemButtonStyle","filterInputItemClass","filterInputItemStyle","filterInputItemStyleSys","filterInputClass","filterInputStyle","filterInputStyleSys","Plugin","element","options","TypeError","extend","input","container","dropDownMenu","selectedPanel","filterInput","filterInputItem","popper","skipFocusout","backspaceAtStartPoint","selectedDropDownItem","selectedDropDownIndex","hasItems","init","update","dropdown","removeClass","hasClass","addClass","optionId","isChecked","i","length","option","value","selected","val","clearFilterInput","hideDropDown","updateDropDownPosition","filterDropDownMenu","text","trim","visible","find","each","$item","show","itemText","$checkbox","prop","toLowerCase","includes","hide","resetSelectDropDownMenu","event","preventDefault","stopPropagation","menuItem","currentTarget","closest","$menuItem","data","$checkBox","$selectedItem","removeSelectedItem","createAndAppendSelectedItem","focus","itemValue","checkBoxId","name","checked","$dropDownItem","appendTo","css","insertBefore","$buttom","setCheck","click","style","width","item","querySelectorAll","textContent","undefined","classList","remove","down","showDropDown","newIndex","add","$input","disabled","$container","insertAfter","get","$selectedPanel","$filterInputItem","$filterInput","$dropDownMenu","placement","modifiers","flip","behavior","reference","forEach","appendDropDownItem","selectOptions","index","display","inputId","id","formGroup","label","querySelector","f","attr","setAttribute","clickDropDownItem","on","target","nodeName","parentElement","which","keyCode","keydownArrow","selectionStart","selectionEnd","analyzeInputText","startPosition","endPosition","array","itemToDelete","$itemToDelete","dataset","closeDropDown","adoptFilterInputLength","focusin","focusout","mousedown","document","mouseup","contains","jQueryInterface","test","optionsObject","methodName","charAt","toUpperCase","slice","Constructor","noConflict"],"mappings":"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"}