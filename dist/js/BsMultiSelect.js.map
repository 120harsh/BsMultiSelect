{"version":3,"file":"BsMultiSelect.js","sources":["../../js/src/Tools.js","../../js/src/Bs4AdapterCss.js","../../js/src/Bs4AdapterJs.js","../../js/src/MultiSelect.js","../../js/src/AddToJQueryPrototype.js","../../js/src/Bs4Adapter.js","../../js/src/OptionsAdapters.js","../../js/src/Bs4SelectedItemContent.js","../../js/src/Bs4DropDownItemContent.js","../../js/src/BsMultiSelect.js"],"sourcesContent":["export function ExtendIfUndefined(destination, source) {\r\n    for (var property in source)\r\n        if (destination[property] === undefined)\r\n            destination[property] = source[property];\r\n}\r\n\r\nexport function ExtendIfUndefinedFluent(destination, source) {\r\n    ExtendIfUndefined(destination, source);\r\n    return destination;\r\n}","import  { ExtendIfUndefined } from './Tools';\r\n\r\nconst defaults = {\r\n    selectedPanelFocusClass : 'focus',\r\n    selectedPanelDisabledClass: 'disabled',\r\n    dropDownItemDisabledClass: 'disabled'\r\n};\r\n\r\nfunction StylingBs4AdapterCss(configuration){\r\n    ExtendIfUndefined(configuration, defaults);\r\n\r\n    return {\r\n        Enable($selectedPanel){\r\n            $selectedPanel.removeClass(configuration.selectedPanelDisabledClass)\r\n        },\r\n    \r\n        Disable($selectedPanel){\r\n            $selectedPanel.addClass(configuration.selectedPanelDisabledClass)\r\n        },\r\n    \r\n        FocusIn($selectedPanel){\r\n            $selectedPanel.addClass(configuration.selectedPanelFocusClass);\r\n        },\r\n    \r\n        FocusOut($selectedPanel){\r\n            $selectedPanel.removeClass(configuration.selectedPanelFocusClass);\r\n        }\r\n    }\r\n}\r\n\r\nexport default StylingBs4AdapterCss;\r\n","import  { ExtendIfUndefined } from './Tools';\r\n\r\nconst defSelectedPanelStyle = {'margin-bottom': '0', 'height': 'auto'};\r\n\r\nconst defaults = {\r\n    selectedPanelDefMinHeight: 'calc(2.25rem + 2px)',\r\n    selectedPanelLgMinHeight:  'calc(2.875rem + 2px)',\r\n    selectedPanelSmMinHeight:  'calc(1.8125rem + 2px)',\r\n    selectedPanelDisabledBackgroundColor: '#e9ecef',\r\n    selectedPanelFocusBorderColor: '#80bdff',\r\n    selectedPanelFocusBoxShadow: '0 0 0 0.2rem rgba(0, 123, 255, 0.25)',\r\n    selectedPanelFocusValidBoxShadow: '0 0 0 0.2rem rgba(40, 167, 69, 0.25)',\r\n    selectedPanelFocusInvalidBoxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)',\r\n    filterInputColor: '#495057',\r\n    //selectedItemContentDisabledOpacity: '.65'\r\n};\r\n\r\nfunction StylingBs4AdapterJs(configuration){\r\n    return {\r\n        OnInit(dom){\r\n            dom.selectedPanel.css(defSelectedPanelStyle);\r\n            dom.filterInput.css(\"color\", configuration.filterInputColor);\r\n        },\r\n    \r\n        UpdateSize($selectedPanel){\r\n            if ($selectedPanel.hasClass(\"form-control-lg\")){\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelLgMinHeight);\r\n            } else if ($selectedPanel.hasClass(\"form-control-sm\")){\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelSmMinHeight);\r\n            } else {\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelDefMinHeight);\r\n            }\r\n        },\r\n    \r\n        Enable($selectedPanel){\r\n            $selectedPanel.css({\"background-color\": \"\"})\r\n        },\r\n    \r\n        Disable($selectedPanel){\r\n            $selectedPanel.css({\"background-color\": configuration.selectedPanelDisabledBackgroundColor})\r\n        },\r\n    \r\n        FocusIn($selectedPanel){\r\n            if ($selectedPanel.hasClass(\"is-valid\")){\r\n                $selectedPanel.css(\"box-shadow\", configuration.selectedPanelFocusValidBoxShadow);\r\n            } else if ($selectedPanel.hasClass(\"is-invalid\")){\r\n                $selectedPanel.css(\"box-shadow\", configuration.selectedPanelFocusInvalidBoxShadow);\r\n            } else {\r\n                $selectedPanel\r\n                    .css(\"box-shadow\", configuration.selectedPanelFocusBoxShadow)\r\n                    .css(\"border-color\", configuration.selectedPanelFocusBorderColor);\r\n            }\r\n        },\r\n    \r\n        FocusOut($selectedPanel){\r\n                $selectedPanel.css(\"box-shadow\", \"\" ).css(\"border-color\", \"\")\r\n        },\r\n    }\r\n}\r\n\r\n\r\nexport default StylingBs4AdapterJs;\r\n","import Popper from 'popper.js'\r\n\r\nconst defSelectedPanelStyleSys = {'display':'flex', 'flex-wrap':'wrap', 'list-style-type':'none'};  // remove bullets since this is ul\r\nconst defFilterInputStyleSys   = {'width':'2ch', 'border':'0', 'padding':'0', 'outline':'none', 'background-color':'transparent' };\r\nconst defDropDownMenuStyleSys  = {'list-style-type':'none'}; // remove bullets since this is ul\r\n\r\n// jQuery used for:\r\n// $.extend, $.contains, $(\"<div>\"), $(function(){}) aka ready\r\n// $e.trigger, $e.unbind, $e.on; but namespaces are not used;\r\n// events: \"focusin\", \"focusout\", \"mouseover\", \"mouseout\", \"keydown\", \"keyup\", \"click\"\r\n// $e.show, $e.hide, $e.focus, $e.css\r\n// $e.appendTo, $e.remove, $e.find, $e.closest, $e.prev, $e.data, $e.val\r\n\r\nclass MultiSelect {\r\n    constructor(optionsAdapter, adapter, bs4SelectedItemContent, bs4DropDownItemContent, configuration, onDispose, window, $) {\r\n        if (typeof Popper === 'undefined') {\r\n            throw new TypeError('DashboardCode BsMultiSelect require Popper.js (https://popper.js.org)')\r\n        }\r\n        // readonly\r\n        this.adapter = adapter;\r\n        \r\n        this.window = window;\r\n        this.document = window.document;\r\n        this.onDispose=onDispose;\r\n        this.$ = $;\r\n        \r\n        this.configuration = configuration;\r\n        \r\n        this.container = null;\r\n        this.selectedPanel = null;\r\n        this.filterInputItem = null;\r\n        this.filterInput = null;\r\n        this.dropDownMenu = null;\r\n        this.popper = null;\r\n        this.getDisabled=null;\r\n        \r\n        // removable handlers\r\n        this.selectedPanelClick  = null;\r\n        this.documentMouseup = null;\r\n        this.containerMousedown = null;\r\n        this.documentMouseup2 = null;\r\n        \r\n        // state\r\n        this.disabled = null;\r\n        this.filterInputItemOffsetLeft = null; // used to detect changes in input field position (by comparision with current value)\r\n        this.skipFocusout = false;\r\n        this.hoveredDropDownItem = null;\r\n        this.hoveredDropDownIndex = null;\r\n        this.hasDropDownVisible = false;\r\n        this.bs4SelectedItemContent=bs4SelectedItemContent;\r\n        this.bs4DropDownItemContent=bs4DropDownItemContent;\r\n\r\n        // jquery adapters\r\n        this.$document= $(this.document);\r\n\r\n        optionsAdapter(this);\r\n        \r\n    }\r\n    updateDropDownPosition(force) {\r\n        let offsetLeft = this.filterInputItem.offsetLeft;\r\n        if (force || this.filterInputItemOffsetLeft!=offsetLeft){\r\n            this.popper.update();\r\n            this.filterInputItemOffsetLeft=offsetLeft;\r\n        }\r\n    }\r\n    hideDropDown() {\r\n        this.dropDownMenu.style.display = 'none';\r\n    }\r\n    showDropDown() {\r\n        this.dropDownMenu.style.display = 'block';\r\n    }\r\n    // Public methods\r\n    resetDropDownMenuHover() {\r\n        if (this.hoveredDropDownItem !== null) {\r\n            this.adapter.HoverOut(this.$(this.hoveredDropDownItem));\r\n            this.hoveredDropDownItem = null;\r\n            this.hoveredDropDownIndex = null;\r\n        }\r\n    }\r\n\r\n    filterDropDownMenu() {\r\n        let text = this.filterInput.value.trim().toLowerCase();\r\n        let visible = 0;\r\n        this.$(this.dropDownMenu).find('LI').each((i, dropDownMenuItem) => {\r\n            let $dropDownMenuItem = this.$(dropDownMenuItem);\r\n            if (text == '') {\r\n                $dropDownMenuItem.show();\r\n                visible++;\r\n            }\r\n            else {\r\n                let itemText = $dropDownMenuItem.data(\"option-text\");\r\n                let option = $dropDownMenuItem.data(\"option\");\r\n                if (!option.selected && !option.hidden && !option.disabled && itemText.indexOf(text)>=0) {\r\n                    $dropDownMenuItem.show();\r\n                    visible++;\r\n                } else {\r\n                    $dropDownMenuItem.hide();\r\n                }\r\n            }\r\n        });\r\n        this.hasDropDownVisible = visible > 0;\r\n        this.resetDropDownMenuHover();\r\n        if (visible == 1) {\r\n            let visibleNodeListArray = this.getVisibleNodeListArray();\r\n            this.hoverInInternal(visibleNodeListArray, 0)\r\n        }\r\n    }\r\n\r\n    clearFilterInput(updatePosition) {\r\n        if (this.filterInput.value) {\r\n            this.filterInput.value = '';\r\n            this.input(updatePosition);\r\n        }\r\n    }\r\n\r\n    closeDropDown() {\r\n        this.resetDropDownMenuHover();\r\n        this.clearFilterInput(true);\r\n        this.hideDropDown();\r\n    }\r\n    \r\n    appendDropDownItem(optionElement, onChange) {\r\n        let isHidden = optionElement.hidden;\r\n        let itemText = optionElement.text;\r\n        let $dropDownItem = this.$(\"<LI/>\").prop(\"hidden\", isHidden)\r\n        $dropDownItem.data(\"option-text\", itemText.toLowerCase()).appendTo(this.dropDownMenu);\r\n        $dropDownItem.data(\"option\", optionElement);\r\n        let dropDownItem = $dropDownItem.get(0);\r\n        \r\n        //let optionData = {\"optionId\":optionElement.value, \"itemText\": optionElement.text }\r\n        let adjustDropDownItem = this.bs4DropDownItemContent.CreateDropDownItemContent(dropDownItem, optionElement); \r\n        let isDisabled = optionElement.disabled;\r\n        let isSelected = optionElement.selected;\r\n\r\n        if (isSelected && isDisabled)\r\n            adjustDropDownItem.disabledStyle(true);\r\n        else if (isDisabled)\r\n            adjustDropDownItem.disable(isDisabled);\r\n       \r\n        adjustDropDownItem.onSelected(() => {\r\n            let toggleItem = $dropDownItem.data(\"option-toggle\");\r\n            toggleItem();\r\n            this.filterInput.focus();\r\n        });\r\n        \r\n        let selectItem = (doPublishEvents) => {\r\n            if (optionElement.hidden)\r\n                return;\r\n            let $selectedItem = this.$(\"<LI/>\");\r\n            let selectedItem = $selectedItem.get(0);\r\n            \r\n            let adjustPair =(isSelected, toggle, remove, disable) => {\r\n                optionElement.selected = isSelected;\r\n                adjustDropDownItem.select(isSelected);\r\n                $dropDownItem.data(\"option-toggle\", toggle);                    \r\n                $selectedItem.data(\"option-remove\", remove);\r\n                $selectedItem.data(\"option-disable\", disable);\r\n            }\r\n\r\n            let removeItem = () => {\r\n                adjustDropDownItem.disabledStyle(false);\r\n                adjustDropDownItem.disable(optionElement.disabled);\r\n                adjustPair(\r\n                    false, \r\n                    () => {\r\n                        if (optionElement.disabled)\r\n                            return;\r\n                        selectItem(true);\r\n                    }, \r\n                    null,\r\n                    null\r\n                    );\r\n                $selectedItem.remove();\r\n                onChange();\r\n            };\r\n            \r\n            // what is a problem with calling removeSelectedItem directly (not using  setTimeout(removeSelectedItem, 0)):\r\n            // consider situation \"MultiSelect\" on DROPDOWN (that should be closed on the click outside dropdown)\r\n            // therefore we aslo have document's click's handler where we decide to close or leave the DROPDOWN open.\r\n            // because of the event's bubling process removeSelectedItem runs first. \r\n            // that means the event's target element on which we click (the x button) will be removed from the DOM together with badge \r\n            // before we could analize is it belong to our dropdown or not.\r\n            // important 1: we can't just the stop propogation using stopPropogate because click outside dropdown on the similar \r\n            // component that use stopPropogation will not close dropdown (error, dropdown should be closed)\r\n            // important 2: we can't change the dropdown's event handler to leave dropdown open if event's target is null because of\r\n            // the situation described above: click outside dropdown on the same component.\r\n            // Alternatively it could be possible to use stopPropogate but together create custom click event setting new target that belomgs to DOM (e.g. panel)\r\n\r\n            let removeItemAndCloseDropDown = () => {\r\n                removeItem();\r\n                this.closeDropDown();\r\n            };\r\n\r\n            let onRemoveItemEvent = (jqEvent) => {\r\n                setTimeout( ()=> {  \r\n                    removeItem();\r\n                    this.closeDropDown();\r\n                }, 0);\r\n                this.ProcessedBySelectedItemContentEvent=jqEvent;\r\n            };\r\n\r\n            let bsSelectedItemContent = this.bs4SelectedItemContent.CreateSelectedItemContent(\r\n                selectedItem,\r\n                optionElement,\r\n                onRemoveItemEvent\r\n            );\r\n            //bsSelectedItemContentList.push(bsSelectedItemContent);\r\n            bsSelectedItemContent.disable(this.disabled);\r\n            adjustPair(true, ()=>removeItem(), removeItemAndCloseDropDown, bsSelectedItemContent.disable);\r\n            $selectedItem.insertBefore(this.filterInputItem);\r\n            if (doPublishEvents){\r\n                onChange();\r\n            }\r\n        }\r\n\r\n        $dropDownItem\r\n            .mouseover(() => this.adapter.HoverIn($dropDownItem))\r\n            .mouseout(() => this.adapter.HoverOut($dropDownItem));\r\n        \r\n        if (optionElement.selected)\r\n            selectItem(false);\r\n        else\r\n            $dropDownItem.data(\"option-toggle\",  () => { \r\n                if (optionElement.disabled)\r\n                    return;\r\n                selectItem(true);\r\n            })\r\n    }\r\n    getVisibleNodeListArray(){\r\n        return this.$(this.dropDownMenu).find('LI:not([style*=\"display: none\"]):not(:hidden)').toArray();\r\n    }\r\n    hoverInInternal(visibleNodeListArray, index){\r\n        this.hoveredDropDownIndex = index;\r\n        this.hoveredDropDownItem = visibleNodeListArray[index];\r\n        this.adapter.HoverIn(this.$(this.hoveredDropDownItem));\r\n    }\r\n    keydownArrow(down) {\r\n        let visibleNodeListArray = this.getVisibleNodeListArray();\r\n        if (visibleNodeListArray.length > 0) {\r\n            if (this.hasDropDownVisible) {\r\n                this.updateDropDownPosition(true);\r\n                this.showDropDown();\r\n            }\r\n            let index;\r\n            if (this.hoveredDropDownItem === null) {\r\n                index = down ? 0 : visibleNodeListArray.length - 1;\r\n            }\r\n            else {\r\n                this.adapter.HoverOut(this.$(this.hoveredDropDownItem));\r\n                if (down) {\r\n                    let newIndex = this.hoveredDropDownIndex + 1;\r\n                    index = newIndex < visibleNodeListArray.length ? newIndex : 0;\r\n                } else {\r\n                    let newIndex = this.hoveredDropDownIndex - 1;\r\n                    index = newIndex >= 0 ? newIndex : visibleNodeListArray.length - 1;\r\n                }\r\n            }\r\n            this.hoverInInternal(visibleNodeListArray, index);\r\n        }\r\n    }\r\n    input(forceUpdatePosition) {\r\n        this.filterInput.style.width = this.filterInput.value.length*1.3 + 2 + \"ch\";\r\n        this.filterDropDownMenu();\r\n\r\n        if (this.hasDropDownVisible) {\r\n            if (forceUpdatePosition) // ignore it if it is called from\r\n                this.updateDropDownPosition(forceUpdatePosition); // we need it to support case when textbox changes its place because of line break (texbox grow with each key press)\r\n            this.showDropDown();\r\n        } else {\r\n            this.hideDropDown();\r\n        }\r\n    }\r\n    Update(){\r\n        let $selectedPanel = this.$(this.selectedPanel);\r\n        this.adapter.UpdateIsValid($selectedPanel);\r\n        this.UpdateSizeImpl($selectedPanel);\r\n        this.UpdateDisabledImpl(this.$(this.container), $selectedPanel);\r\n    }\r\n    Dispose(){\r\n        if (this.onDispose)\r\n            this.onDispose();\r\n        \r\n        // removable handlers\r\n        this.$document.unbind(\"mouseup\", this.documentMouseup)\r\n                      .unbind(\"mouseup\", this.documentMouseup2);\r\n        \r\n        if (this.adapter !== null) {\r\n            this.adapter.Dispose()\r\n        }\r\n        if (this.popper !== null) {\r\n            this.popper.destroy()\r\n        }\r\n        \r\n        if (this.removeContainer) {\r\n            this.removeContainer();\r\n        }\r\n    }\r\n    UpdateSize(){\r\n        this.UpdateSizeImpl(this.$(this.selectedPanel));\r\n    }\r\n    UpdateDisabled(){\r\n        this.UpdateDisabledImpl(this.$(this.container), this.$(this.selectedPanel));\r\n    }\r\n    UpdateSizeImpl($selectedPanel){\r\n        if (this.adapter.UpdateSize)\r\n            this.adapter.UpdateSize($selectedPanel);\r\n    }\r\n    UpdateDisabledImpl($container, $selectedPanel){\r\n        let disabled = this.getDisabled();\r\n        if (this.disabled!==disabled){\r\n            if (disabled) {\r\n                this.filterInput.style.display = \"none\";\r\n                this.adapter.Disable($selectedPanel);\r\n                $selectedPanel.find('LI').each( \r\n                    function (i, e) {let disable = $(e).data(\"option-disable\"); if (disable!=null) disable(true); } );\r\n                    \r\n                $container.unbind(\"mousedown\", this.containerMousedown);\r\n                this.$document.unbind(\"mouseup\", this.documentMouseup);\r\n\r\n                $selectedPanel.unbind(\"click\", this.selectedPanelClick);\r\n                this.$document.unbind(\"mouseup\", this.documentMouseup2);\r\n                \r\n            } else {\r\n                this.filterInput.style.display = \"inline-block\";\r\n                this.adapter.Enable($selectedPanel);\r\n                $selectedPanel.find('LI').each( \r\n                    function (i, e) {let disable = $(e).data(\"option-disable\"); if (disable!=null) disable(false);} );\r\n\r\n                $container.mousedown(this.containerMousedown); // removable\r\n                this.$document.mouseup(this.documentMouseup);  // removable\r\n\r\n                $selectedPanel.click(this.selectedPanelClick); // removable\r\n                this.$document.mouseup(this.documentMouseup2); // removable\r\n            }\r\n            this.disabled=disabled;\r\n        }\r\n    }\r\n    fillContainer(container, removeContainer){\r\n        this.container=container;\r\n        this.removeContainer=removeContainer;\r\n        let $container = this.$(container);\r\n        this.selectedPanel = this.document.createElement(\"ul\");\r\n        let $selectedPanel = this.$(this.selectedPanel);\r\n        $selectedPanel.css(defSelectedPanelStyleSys);\r\n        $selectedPanel.appendTo(container);\r\n        let $filterInputItem = this.$('<LI/>');\r\n        this.filterInputItem = $filterInputItem.get(0)\r\n        $filterInputItem.appendTo(this.selectedPanel);\r\n        let $filterInput = this.$('<INPUT type=\"search\" autocomplete=\"off\">');\r\n        this.filterInput = $filterInput.get(0);\r\n        $filterInput.css(defFilterInputStyleSys);\r\n        $filterInput.appendTo(this.filterInputItem);\r\n        \r\n        let $dropDownMenu = this.$(\"<UL/>\").css({\"display\":\"none\"});\r\n        $dropDownMenu.appendTo(container);\r\n        this.dropDownMenu = $dropDownMenu.get(0);\r\n        \r\n        // prevent heavy understandable styling error\r\n        $dropDownMenu.css(defDropDownMenuStyleSys);\r\n        // create handlers\r\n        this.documentMouseup = () => {\r\n            this.skipFocusout = false;\r\n        }\r\n\r\n        this.containerMousedown = () => {\r\n            this.skipFocusout = true;\r\n        };\r\n        this.documentMouseup2 = event => {\r\n            if (!(container === event.target || this.$.contains(container, event.target))) {\r\n                this.closeDropDown();\r\n            }\r\n        }\r\n        this.selectedPanelClick = jqEvent => {\r\n            if (jqEvent.target.nodeName != \"INPUT\")\r\n                this.$(this.filterInput).val('').focus();\r\n            if (this.hasDropDownVisible &&  (this.ProcessedBySelectedItemContentEvent==null || this.ProcessedBySelectedItemContentEvent.originalEvent!=jqEvent.originalEvent)){\r\n                this.updateDropDownPosition(true);\r\n                this.showDropDown();\r\n            }\r\n            this.ProcessedBySelectedItemContentEvent=null;\r\n        };\r\n        this.adapter.Init({\r\n            container:$container, selectedPanel:$selectedPanel,\r\n            filterInputItem:$filterInputItem, filterInput:$filterInput,\r\n            dropDownMenu:$dropDownMenu });\r\n        return {$container, $selectedPanel, $dropDownMenu, $filterInput};\r\n    }\r\n\r\n    init($container, $selectedPanel, $dropDownMenu, $filterInput, onChange, getOptions, getDisabled) {\r\n        this.getDisabled=getDisabled;\r\n        this.popper = new Popper(this.filterInput, this.dropDownMenu, {\r\n            placement: 'bottom-start',\r\n            modifiers: {\r\n                preventOverflow: {enabled:false},\r\n                hide: {enabled:false},\r\n                flip: {enabled:false}\r\n                }\r\n        });\r\n        \r\n        this.adapter.UpdateIsValid($selectedPanel);\r\n        \r\n        this.UpdateSizeImpl($selectedPanel);\r\n        this.UpdateDisabledImpl($container, $selectedPanel);\r\n        // some browsers (IE11) can change select value (as part of \"autocomplete\") after page is loaded but before \"ready\" event\r\n        // FYI: $(() => { ...}) is jquery ready event shortcut\r\n        this.$(() => {\r\n            let options = getOptions();\r\n            this.$.each(options,\r\n                (index, el) => {\r\n                    this.appendDropDownItem(el, onChange);\r\n                }\r\n            );\r\n            this.hasDropDownVisible = options.length > 0;\r\n            this.updateDropDownPosition(false);\r\n        });\r\n        // there was unmotivated stopPropagation call. commented out.\r\n        // $dropDownMenu.click(  event => { \r\n        //    event.stopPropagation();\r\n        // });\r\n        $dropDownMenu.mouseover(() => this.resetDropDownMenuHover());\r\n\r\n        $filterInput.focusin(() => this.adapter.FocusIn($selectedPanel))\r\n                    .focusout(() => {\r\n                            if (!this.skipFocusout)\r\n                                this.adapter.FocusOut($selectedPanel)\r\n                            });\r\n        $filterInput.on(\"keydown\", (event) => {\r\n            if ([38, 40, 13].indexOf(event.which)>=0 || (event.which == 9 && this.filterInput.value) ) {\r\n                event.preventDefault();\r\n            }\r\n\r\n            if (event.which == 38) {\r\n                this.keydownArrow(false);\r\n            }\r\n            else if (event.which == 40) {\r\n                if (this.hoveredDropDownItem === null && this.hasDropDownVisible) {\r\n                    this.showDropDown();\r\n                }\r\n                this.keydownArrow(true);\r\n            }\r\n            else if (event.which == 9) {\r\n                if (!this.filterInput.value) {\r\n                    this.closeDropDown();\r\n                }\r\n            }\r\n            else if (event.which == 8) {\r\n                // NOTE: this will process backspace only if there are no text in the input field\r\n                // If user will find this inconvinient, we will need to calculate something like this\r\n                // this.isBackspaceAtStartPoint = (this.filterInput.selectionStart == 0 && this.filterInput.selectionEnd == 0);\r\n                if (!this.filterInput.value)\r\n                {\r\n                    let $penult = this.$(this.selectedPanel).find(\"LI:last\").prev();\r\n                    if ($penult.length){\r\n                        let removeItem = $penult.data(\"option-remove\");\r\n                        removeItem();\r\n                    }\r\n                    this.updateDropDownPosition(false);\r\n                }\r\n            }\r\n\r\n            if ([38, 40, 13, 9].indexOf(event.which)==-1)\r\n                this.resetDropDownMenuHover();\r\n        });\r\n        $filterInput.on(\"keyup\", (event) => {\r\n            if (event.which == 13 || event.which == 9 ) {\r\n                if (this.hoveredDropDownItem) {\r\n                    let $hoveredDropDownItem = this.$(this.hoveredDropDownItem);\r\n                    let toggleItem =  $hoveredDropDownItem.data(\"option-toggle\");\r\n                    toggleItem();\r\n                    this.closeDropDown();\r\n                } else {\r\n                    let text = this.filterInput.value.trim().toLowerCase();\r\n                    let dropDownItems = this.dropDownMenu.querySelectorAll(\"LI\");\r\n                    let dropDownItem = null;\r\n                    for (let i = 0; i < dropDownItems.length; ++i) {\r\n                        let it = dropDownItems[i];\r\n                        if (it.textContent.trim().toLowerCase() == text)\r\n                        {\r\n                            dropDownItem=it;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (dropDownItem) {\r\n                        let $dropDownItem = this.$(dropDownItem);\r\n                        let option = $dropDownItem.data(\"option\");\r\n                        if (!option.selected){\r\n                            let toggle = $dropDownItem.data(\"option-toggle\");\r\n                            toggle();\r\n                        }\r\n                        this.clearFilterInput(true);\r\n                    }\r\n                }\r\n            }\r\n            else if (event.which == 27) { // escape\r\n                this.closeDropDown();\r\n            }\r\n        });\r\n        $filterInput.on('input', () => {\r\n            this.input(true);\r\n        });\r\n    }\r\n}\r\n\r\nexport default MultiSelect;\r\n","function AddToJQueryPrototype(pluginName, createPlugin, $){\r\n    const firstChar = pluginName.charAt(0);\r\n    const firstCharLower = firstChar.toLowerCase();\r\n    if (firstCharLower == firstChar) {\r\n        throw new TypeError(`Plugin name '${pluginName}' should be started from upper case char`)\r\n    }\r\n    const prototypableName = firstCharLower + pluginName.slice(1)\r\n    const noConflictPrototypable = $.fn[prototypableName];\r\n    const dataKey = `DashboardCode.${pluginName}`;\r\n\r\n    function prototypable(options) {\r\n        return this.each( function () {\r\n            let $e = $(this);\r\n            let instance = $e.data(dataKey)\r\n            let isMethodName = typeof options === 'string';\r\n            if (!instance) {\r\n                if (isMethodName && /Dispose/.test(options)) {\r\n                    return;\r\n                }\r\n                const optionsObject = (typeof options === 'object')?options:null;\r\n\r\n                instance = createPlugin(this, optionsObject,\r\n                    () => {\r\n                        $e.removeData(dataKey)\r\n                    });\r\n                $e.data(dataKey, instance);\r\n            }\r\n\r\n            if (isMethodName) {\r\n                let methodName = options;\r\n                if (typeof instance[methodName] === 'undefined') {\r\n                    throw new TypeError(`No method named '${methodName}'`)\r\n                }\r\n                instance[methodName]()\r\n            }\r\n        })\r\n    }\r\n\r\n    $.fn[prototypableName] = prototypable;\r\n\r\n    // pluginName with first capitalized letter - return plugin instance for 1st $selected item\r\n    $.fn[pluginName] = function () {\r\n        return $(this).data(dataKey);\r\n    };\r\n\r\n    $.fn[prototypableName].noConflict = function () {\r\n        $.fn[prototypableName] = noConflictPrototypable\r\n        return prototypable;\r\n    }\r\n}\r\n\r\nexport default AddToJQueryPrototype\r\n","import  { ExtendIfUndefinedFluent } from './Tools';\r\n\r\n// addClass, removeClass, css, siblings('label'), hasClass, find('BUTTON').prop(..)\r\nconst defaults = {\r\n    containerClass: 'dashboardcode-bsmultiselect',\r\n    dropDownMenuClass: 'dropdown-menu',\r\n    dropDownItemClass:  'px-2',\r\n    dropDownItemHoverClass: 'text-primary bg-light',\r\n    selectedPanelClass: 'form-control',\r\n    selectedItemClass: 'badge',\r\n    removeSelectedItemButtonClass: 'close',\r\n    filterInputItemClass: '',\r\n    filterInputClass: ''\r\n}\r\n\r\nclass Bs4Adapter {\r\n\r\n    constructor(stylingAdapter, configuration, $){\r\n        this.stylingAdapter = stylingAdapter;\r\n        this.configuration = ExtendIfUndefinedFluent(configuration, defaults);\r\n        this.$ = $;\r\n        this.bs4LabelDispose = null;\r\n    }\r\n   \r\n    Init(dom){\r\n        dom.container.addClass(this.configuration.containerClass);\r\n        dom.selectedPanel.addClass(this.configuration.selectedPanelClass);\r\n        dom.dropDownMenu.addClass(this.configuration.dropDownMenuClass);\r\n        dom.filterInputItem.addClass(this.configuration.filterInputItemClass);\r\n        dom.filterInput.addClass(this.configuration.filterInputClass);\r\n        if (this.stylingAdapter.OnInit)\r\n            this.stylingAdapter.OnInit(dom)\r\n        //this.bs4LabelDispose = this.handleLabel(dom.filterInput);\r\n    }\r\n\r\n    // handleLabel($filterInput){\r\n    //     var label = this.configuration.label;\r\n    //     if (label!=null) {\r\n    //         var newForId = this.configuration.createInputId();\r\n    //         var backupForId =  label.getAttribute('for');\r\n    //         $filterInput.attr('id', newForId);\r\n    //         label.setAttribute('for',newForId);\r\n    //         return () => {\r\n    //             label.setAttribute('for',backupForId);\r\n    //         }\r\n    //     }\r\n    //     return null;\r\n    // }\r\n\r\n    // Dispose(){\r\n    //     if (this.bs4LabelDispose)\r\n    //         this.bs4LabelDispose();\r\n    // }\r\n\r\n    UpdateIsValid($selectedPanel){\r\n        if (this.configuration.getIsValid()){\r\n            $selectedPanel.addClass(\"is-valid\");\r\n        }\r\n\r\n        if (this.configuration.getIsInvalid()){\r\n            $selectedPanel.addClass(\"is-invalid\");\r\n        }\r\n    }\r\n\r\n    UpdateSize($selectedPanel){\r\n        if(this.stylingAdapter.UpdateSize)\r\n            this.stylingAdapter.UpdateSize($selectedPanel)\r\n    }\r\n\r\n    HoverIn($dropDownItem){\r\n        $dropDownItem.addClass(this.configuration.dropDownItemHoverClass);\r\n    }\r\n\r\n    HoverOut($dropDownItem){\r\n        $dropDownItem.removeClass(this.configuration.dropDownItemHoverClass);\r\n    }\r\n\r\n    Enable($selectedPanel){\r\n        this.stylingAdapter.Enable($selectedPanel)\r\n    }\r\n\r\n    Disable($selectedPanel){\r\n        this.stylingAdapter.Disable($selectedPanel)\r\n    }\r\n\r\n    FocusIn($selectedPanel){\r\n        this.stylingAdapter.FocusIn($selectedPanel)\r\n    }\r\n\r\n    FocusOut($selectedPanel){\r\n        this.stylingAdapter.FocusOut($selectedPanel)\r\n    }\r\n}\r\n\r\nexport default Bs4Adapter;\r\n","import { ExtendIfUndefined } from './Tools';\r\n\r\nconst defaults = {\r\n    getIsValid(){return false},\r\n    getIsInvalid(){return false},\r\n    label:null\r\n}\r\n\r\nfunction OptionsAdapterJson(container, configuration) {\r\n        ExtendIfUndefined(configuration, defaults);\r\n\r\n        return function(ms){\r\n            let {$container, $selectedPanel, $dropDownMenu, $filterInput} = ms.fillContainer(container,\r\n                ()=> {\r\n                    while (container.firstChild) container.removeChild(container.firstChild);\r\n                });\r\n            ms.init($container, $selectedPanel, $dropDownMenu, $filterInput, \r\n                () => {\r\n                    $container.trigger( \"multiselect:change\" );\r\n                }, \r\n                () => configuration.options, \r\n                configuration.hasOwnProperty(\"getDisabled\")?configuration.getDisabled:()=>true);\r\n        }\r\n}\r\n\r\nfunction OptionsAdapterElement(selectElement, configuration, $) {\r\n    ExtendIfUndefined(configuration, defaults);\r\n    var $selectElement = $(selectElement);\r\n    return function (ms){\r\n        selectElement.style.display='none';\r\n        let container = document.createElement(\"div\");\r\n\r\n        let {$container, $selectedPanel, $dropDownMenu, $filterInput} = ms.fillContainer(container, \r\n            ()=>container.parentNode.removeChild(container));\r\n        $container.insertAfter(selectElement);\r\n        ms.init($container, $selectedPanel, $dropDownMenu, $filterInput, \r\n            () => {\r\n                $selectElement.trigger('change');\r\n                $selectElement.trigger( \"multiselect:change\" );\r\n            }, \r\n            () => $selectElement.find('OPTION'), \r\n            () => selectElement.disabled);\r\n    }\r\n}\r\n\r\nexport {OptionsAdapterJson, OptionsAdapterElement};\r\n","import  { ExtendIfUndefined, ExtendIfUndefinedFluent } from './Tools';\r\n\r\nclass Bs4SelectedItemContentCss {\r\n    constructor(configuration) {\r\n        const defaults = {\r\n            selectedItemContentDisabledClass: 'disabled',\r\n        };\r\n        this.configuration=ExtendIfUndefinedFluent(configuration, defaults);\r\n    }\r\n\r\n    DisableSelectedItemContent($content){\r\n        $content.addClass(this.configuration.selectedItemContentDisabledClass )\r\n    }\r\n}\r\n\r\nconst defSelectedItemStyle = {'padding-left': '0px', 'line-height': '1.5em'};\r\nconst defRemoveSelectedItemButtonStyle = {'font-size':'1.5em', 'line-height': '.9em'};\r\n\r\nclass Bs4SelectedItemContentJs {\r\n    constructor(configuration) {\r\n        const defaults = {\r\n            selectedItemContentDisabledOpacity: '.65',\r\n        };\r\n        this.configuration=ExtendIfUndefinedFluent(configuration, defaults);\r\n    }\r\n\r\n    DisableSelectedItemContent($content){\r\n        $content.css(\"opacity\", this.configuration.selectedItemContentDisabledOpacity )\r\n    }\r\n    \r\n    CreateSelectedItemContent($selectedItem, $button){\r\n        $selectedItem.css(defSelectedItemStyle);\r\n        if ($button)\r\n            $button.css(defRemoveSelectedItemButtonStyle);\r\n    }\r\n}\r\n\r\nclass Bs4SelectedItemContent {\r\n\r\n    constructor(stylingAdapter, configuration, $){\r\n        const defaults = {\r\n            selectedItemClass: 'badge',\r\n            removeSelectedItemButtonClass: 'close'\r\n        };\r\n        ExtendIfUndefined(configuration, defaults);\r\n        this.stylingAdapter = stylingAdapter;\r\n        this.$ = $;\r\n        \r\n        if (configuration.createSelectedItemContent)\r\n            this.createSelectedItemContent = configuration.createSelectedItemContent;\r\n        else\r\n            this.createSelectedItemContent = (selectedItem, optionItem, removeSelectedItem) => {\r\n                let $selectedItem = $(selectedItem)\r\n                $selectedItem.addClass(configuration.selectedItemClass);\r\n                let $content = this.$(`<span/>`).text(optionItem.text);\r\n                $content.appendTo($selectedItem);\r\n                if (optionItem.disabled)\r\n                    this.stylingAdapter.DisableSelectedItemContent($content);\r\n                let $button = this.$('<button aria-label=\"Close\" tabIndex=\"-1\" type=\"button\"><span aria-hidden=\"true\">&times;</span></button>')\r\n                    // bs 'close' class that will be added to button set the float:right, therefore it impossible to configure no-warp policy \r\n                    // with .css(\"white-space\", \"nowrap\") or  .css(\"display\", \"inline-block\"); TODO: migrate to flex? \r\n                    .css(\"float\", \"none\").appendTo($selectedItem)\r\n                    .addClass(configuration.removeSelectedItemButtonClass) // bs close class set the float:right\r\n                    .on(\"click\", (jqEvent) => removeSelectedItem(jqEvent));\r\n                \r\n                if (this.stylingAdapter.CreateSelectedItemContent)\r\n                    this.stylingAdapter.CreateSelectedItemContent($selectedItem, $button);\r\n                return {\r\n                    disable(isDisabled){ $button.prop('disabled', isDisabled); }\r\n                };\r\n            }\r\n    }\r\n\r\n    CreateSelectedItemContent(selectedItem, optionItem, removeSelectedItem, skipProcessingEvent){\r\n        return this.createSelectedItemContent(selectedItem, optionItem, removeSelectedItem, skipProcessingEvent);\r\n    }\r\n\r\n}\r\n\r\nexport { Bs4SelectedItemContent, Bs4SelectedItemContentJs, Bs4SelectedItemContentCss };\r\n","import  { ExtendIfUndefined, ExtendIfUndefinedFluent } from './Tools';\r\n\r\nclass Bs4DropDownItemContentCss {\r\n    constructor(configuration) {\r\n        const defaults = {\r\n            selectedItemContentDisabledClass: 'disabled',\r\n        };\r\n        this.configuration=ExtendIfUndefinedFluent(configuration, defaults);\r\n    }\r\n\r\n    DisabledStyle($checkBox, $checkBoxLabel, isDisbaled){\r\n        if (isDisbaled) \r\n            $checkBox.addClass(this.configuration.dropDownItemDisabledClass);\r\n        else\r\n            $checkBox.removeClass(this.configuration.dropDownItemDisabledClass);\r\n    }\r\n}\r\n\r\nclass Bs4DropDownItemContentJs {\r\n    constructor(configuration) {\r\n        const defaults = {\r\n            selectedItemContentDisabledOpacity: '.65',\r\n            dropdDownLabelDisabledColor: '#6c757d'\r\n        };\r\n        this.configuration=ExtendIfUndefinedFluent(configuration, defaults);\r\n    }\r\n\r\n    DisabledStyle($checkBox, $checkBoxLabel, isDisbaled){\r\n        $checkBoxLabel.css('color', isDisbaled?this.configuration.dropdDownLabelDisabledColor:'')\r\n    }\r\n}\r\n\r\n// addClass, removeClass, css, siblings('label'), hasClass, find('BUTTON').prop(..)\r\nclass Bs4DropDownItemContent {\r\n\r\n    constructor(stylingAdapter, configuration, $){\r\n        const defaults = {\r\n            dropDownItemClass:  'px-2',\r\n        }\r\n        ExtendIfUndefined(configuration, defaults);\r\n        this.$ = $;\r\n        this.stylingAdapter = stylingAdapter;\r\n\r\n        this.createDropDownItemContent = (dropDownItem, option) => {\r\n            let $dropDownItem = $(dropDownItem);\r\n            $dropDownItem.addClass(configuration.dropDownItemClass);\r\n            let $dropDownItemContent= this.$(`<div class=\"custom-control custom-checkbox\">\r\n                <input type=\"checkbox\" class=\"custom-control-input\">\r\n                <label class=\"custom-control-label\"></label>\r\n            </div>`);\r\n            $dropDownItemContent.appendTo(dropDownItem);\r\n            let $checkBox = $dropDownItemContent.find(`INPUT[type=\"checkbox\"]`);\r\n            let $checkBoxLabel = $dropDownItemContent.find(`label`);\r\n            $checkBoxLabel.text(option.text);\r\n\r\n            return { \r\n                select(isSelected){ $checkBox.prop('checked', isSelected); }, \r\n                disable(isDisabled){ $checkBox.prop('disabled', isDisabled); },\r\n                disabledStyle(isDisbaled){ stylingAdapter.DisabledStyle($checkBox, $checkBoxLabel, isDisbaled); },\r\n                onSelected(toggle) {\r\n                        $checkBox.on(\"change\", toggle)\r\n                        $dropDownItem.on(\"click\", event => {\r\n                            if (dropDownItem === event.target || $.contains(dropDownItem, event.target)) {\r\n                                toggle();\r\n                            }\r\n                        })\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // ------------------------------------------------------------------------------------------------\r\n    CreateDropDownItemContent(dropDownItem, option){\r\n        return this.createDropDownItemContent(dropDownItem, option);\r\n    }\r\n }\r\n\r\nexport { Bs4DropDownItemContent, Bs4DropDownItemContentJs, Bs4DropDownItemContentCss };","import $ from 'jquery'\r\nimport StylingBs4AdapterCss from './Bs4AdapterCss'\r\nimport StylingBs4AdapterJs from './Bs4AdapterJs'\r\nimport MultiSelect from './MultiSelect'\r\nimport AddToJQueryPrototype from './AddToJQueryPrototype'\r\nimport Bs4Adapter from './Bs4Adapter';\r\nimport {OptionsAdapterJson,OptionsAdapterElement} from './OptionsAdapters';\r\n\r\nimport { Bs4SelectedItemContent, Bs4SelectedItemContentJs, Bs4SelectedItemContentCss } from './Bs4SelectedItemContent';\r\nimport { Bs4DropDownItemContent, Bs4DropDownItemContentJs, Bs4DropDownItemContentCss } from './Bs4DropDownItemContent';\r\n\r\n(\r\n    (window, $) => {\r\n        AddToJQueryPrototype('BsMultiSelect',\r\n            (element, settings, onDispose) => {\r\n                let configuration = $.extend({}, settings); // settings used per jQuery intialization, configuration per element\r\n                if (configuration.buildConfiguration)\r\n                    configuration.buildConfiguration(element, configuration);\r\n\r\n                let optionsAdapter = null;\r\n                if (configuration.optionsAdapter)\r\n                    optionsAdapter = configuration.optionsAdapter;\r\n                else\r\n                {\r\n                    if (configuration.options){\r\n                        optionsAdapter = OptionsAdapterJson(element, configuration);\r\n                        if (!configuration.createInputId)\r\n                            configuration.createInputId=()=>`${configuration.containerClass}-generated-filter-${element.id}`;\r\n            \r\n                    }else {\r\n                        configuration.getIsValid=()=>element.classList.contains('is-valid');\r\n                        configuration.getIsInvalid=()=>element.classList.contains('is-invalid');\r\n                        if (!configuration.label)\r\n                        {\r\n                            let $formGroup = $(element).closest('.form-group');\r\n                            if ($formGroup.length == 1) {\r\n                                let $label = $formGroup.find(`label[for=\"${element.id}\"]`);\r\n                                if ($label.length>0)\r\n                                {   \r\n                                    let label = $label.get(0);\r\n                                    let forId = label.getAttribute('for');\r\n                                    if (forId == element.id) {\r\n                                        configuration.label = label;\r\n                                    }\r\n                                }   \r\n                            }\r\n                        }\r\n                        optionsAdapter = OptionsAdapterElement(element, configuration, $);\r\n                        if (!configuration.createInputId)\r\n                            configuration.createInputId=()=>`${configuration.containerClass}-generated-input-${((element.id)?element.id:element.name).toLowerCase()}-id`;\r\n                    }\r\n                }\r\n\r\n                let adapter=null;\r\n                if (configuration.adapter)\r\n                    adapter = configuration.adapter;\r\n                else\r\n                {\r\n                    let stylingAdapter = configuration.useCss\r\n                        ? StylingBs4AdapterCss(configuration)\r\n                        : StylingBs4AdapterJs(configuration);\r\n                    adapter = new Bs4Adapter(stylingAdapter, configuration, $);\r\n                }\r\n\r\n                // configuration.createSelectedItemContent = function(selectedItem, optionItem, removeSelectedItem){\r\n                //     let $selectedItem = $(selectedItem)\r\n                //     $selectedItem.addClass(configuration.selectedItemClass);\r\n                //     let $content = this.$(`<span/>`).text(optionItem.text);\r\n                //     $content.appendTo($selectedItem);\r\n                //     if (optionItem.disabled)\r\n                //         this.stylingAdapter.DisableSelectedItemContent($content);\r\n                    \r\n                //     if (this.stylingAdapter.CreateSelectedItemContent)\r\n                //         this.stylingAdapter.CreateSelectedItemContent($selectedItem, null);\r\n                //     return {\r\n                //          disable(isDisabled){  }\r\n                //     };\r\n                // }\r\n\r\n                let stylingAdapter2 = configuration.useCss\r\n                    ? new Bs4SelectedItemContentCss(configuration, $)\r\n                    : new Bs4SelectedItemContentJs(configuration, $);\r\n                let stylingAdapter3 = configuration.useCss\r\n                    ? new Bs4DropDownItemContentCss(configuration, $)\r\n                    : new Bs4DropDownItemContentJs(configuration, $);\r\n                let bs4SelectedItemContent = new Bs4SelectedItemContent(stylingAdapter2, configuration, $);\r\n                let bs4DropDownItemContent = new Bs4DropDownItemContent(stylingAdapter3, configuration, $)\r\n\r\n                \r\n\r\n                let multiSelect = new MultiSelect(optionsAdapter, adapter, bs4SelectedItemContent, bs4DropDownItemContent, configuration, onDispose, window, $);\r\n                return multiSelect;\r\n            }, $);\r\n    }\r\n)(window, $)\r\n"],"names":["ExtendIfUndefined","destination","source","property","undefined","ExtendIfUndefinedFluent","defaults","selectedPanelFocusClass","selectedPanelDisabledClass","dropDownItemDisabledClass","StylingBs4AdapterCss","configuration","Enable","$selectedPanel","removeClass","Disable","addClass","FocusIn","FocusOut","defSelectedPanelStyle","StylingBs4AdapterJs","OnInit","dom","selectedPanel","css","filterInput","filterInputColor","UpdateSize","hasClass","selectedPanelLgMinHeight","selectedPanelSmMinHeight","selectedPanelDefMinHeight","selectedPanelDisabledBackgroundColor","selectedPanelFocusValidBoxShadow","selectedPanelFocusInvalidBoxShadow","selectedPanelFocusBoxShadow","selectedPanelFocusBorderColor","defSelectedPanelStyleSys","defFilterInputStyleSys","defDropDownMenuStyleSys","MultiSelect","optionsAdapter","adapter","bs4SelectedItemContent","bs4DropDownItemContent","onDispose","window","$","Popper","TypeError","document","container","filterInputItem","dropDownMenu","popper","getDisabled","selectedPanelClick","documentMouseup","containerMousedown","documentMouseup2","disabled","filterInputItemOffsetLeft","skipFocusout","hoveredDropDownItem","hoveredDropDownIndex","hasDropDownVisible","$document","updateDropDownPosition","force","offsetLeft","update","hideDropDown","style","display","showDropDown","resetDropDownMenuHover","HoverOut","filterDropDownMenu","text","value","trim","toLowerCase","visible","find","each","i","dropDownMenuItem","$dropDownMenuItem","show","itemText","data","option","selected","hidden","indexOf","hide","visibleNodeListArray","getVisibleNodeListArray","hoverInInternal","clearFilterInput","updatePosition","input","closeDropDown","appendDropDownItem","optionElement","onChange","isHidden","$dropDownItem","prop","appendTo","dropDownItem","get","adjustDropDownItem","CreateDropDownItemContent","isDisabled","isSelected","disabledStyle","disable","onSelected","toggleItem","focus","selectItem","doPublishEvents","$selectedItem","selectedItem","adjustPair","toggle","remove","select","removeItem","removeItemAndCloseDropDown","onRemoveItemEvent","jqEvent","setTimeout","ProcessedBySelectedItemContentEvent","bsSelectedItemContent","CreateSelectedItemContent","insertBefore","mouseover","HoverIn","mouseout","toArray","index","keydownArrow","down","length","newIndex","forceUpdatePosition","width","Update","UpdateIsValid","UpdateSizeImpl","UpdateDisabledImpl","Dispose","unbind","destroy","removeContainer","UpdateDisabled","$container","e","mousedown","mouseup","click","fillContainer","createElement","$filterInputItem","$filterInput","$dropDownMenu","event","target","contains","nodeName","val","originalEvent","Init","init","getOptions","placement","modifiers","preventOverflow","enabled","flip","options","el","focusin","focusout","on","which","preventDefault","$penult","prev","$hoveredDropDownItem","dropDownItems","querySelectorAll","it","textContent","AddToJQueryPrototype","pluginName","createPlugin","firstChar","charAt","firstCharLower","prototypableName","slice","noConflictPrototypable","fn","dataKey","prototypable","$e","instance","isMethodName","test","optionsObject","removeData","methodName","noConflict","containerClass","dropDownMenuClass","dropDownItemClass","dropDownItemHoverClass","selectedPanelClass","selectedItemClass","removeSelectedItemButtonClass","filterInputItemClass","filterInputClass","Bs4Adapter","stylingAdapter","bs4LabelDispose","getIsValid","getIsInvalid","label","OptionsAdapterJson","ms","firstChild","removeChild","trigger","hasOwnProperty","OptionsAdapterElement","selectElement","$selectElement","parentNode","insertAfter","Bs4SelectedItemContentCss","selectedItemContentDisabledClass","DisableSelectedItemContent","$content","defSelectedItemStyle","defRemoveSelectedItemButtonStyle","Bs4SelectedItemContentJs","selectedItemContentDisabledOpacity","$button","Bs4SelectedItemContent","createSelectedItemContent","optionItem","removeSelectedItem","skipProcessingEvent","Bs4DropDownItemContentCss","DisabledStyle","$checkBox","$checkBoxLabel","isDisbaled","Bs4DropDownItemContentJs","dropdDownLabelDisabledColor","Bs4DropDownItemContent","createDropDownItemContent","$dropDownItemContent","element","settings","extend","buildConfiguration","createInputId","id","classList","$formGroup","closest","$label","forId","getAttribute","name","useCss","stylingAdapter2","stylingAdapter3","multiSelect"],"mappings":"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"}