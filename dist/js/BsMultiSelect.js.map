{"version":3,"file":"BsMultiSelect.js","sources":["../../js/src/BsMultiSelect.es8.js"],"sourcesContent":["import $ from 'jquery'\nimport Popper from 'popper.js'\n\n// TODO: try to find convinient way to declare private members. Is it convinient enough to move them into IIFE?\nconst BsMultiSelect = ((window, $, Popper) => {\n    const JQUERY_NO_CONFLICT = $.fn[pluginName];\n    const pluginName = 'dashboardCodeBsMultiSelect';\n    const dataKey = `plugin_${pluginName}`;\n\n    const defFilterInputItemStyleSys = {'display': 'block'};\n    const defSelectedPanelClass = 'form-control btn border';\n    const defFilterInputStyle = {'width': '2ch', 'border': '0', 'padding': '0', 'outline': 'none'};\n    const defSelectedPanelStyle = {'cursor': 'text', 'display': 'flex', \"flex-wrap\": \"wrap\", \"align-items\": \"center\", \"margin-bottom\": \"0px\"};\n    const defSelectedItemClass = 'badge';\n    const defSelectedItemStyle = {'padding-left': '0px', 'display': 'flex', 'align-items': 'center'};\n    const defRemoveSelectedItemButtonClass = 'close';\n    const defRemoveSelectedItemButtonStyle = {'font-size': '100%'};\n    const defaults = {\n        items: [],\n        defaults: [],\n        //usePopper: true,\n        selectedPanelMinHeight: 'calc(2.25rem + 2px)',\n        selectedPanelReadonlyBackgroundColor: '#e9ecef',\n        selectedPanelValidBoxShadow: ' 0 0 0 0.2rem rgba(40, 167, 69, 0.25)',\n        selectedPanelInvalidBoxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)',\n        filterInputColor: '#495057',\n        containerClass: 'dashboardcode-bsmultiselect',\n        dropDownMenuClass: 'dropdown-menu',\n        dropDownItemClass: 'px-2',\n        selectedPanelClass: '',\n        selectedPanelReadonlyClass: '',\n        selectedItemClass: '', \n        removeSelectedItemButtonClass: '',\n        filterInputItemClass: '', \n        filterInputClass: ''\n    };\n\n    class Plugin {\n        constructor(element, options) {\n            if (typeof Popper === 'undefined') {\n                throw new TypeError('DashboardCode bsMultiSelect require Popper.js (https://popper.js.org)')\n            }\n\n            // readonly\n            this.element = element;\n            this.options = $.extend({}, defaults, options);\n            this.input = element;\n            this.container = null;\n            this.dropDownMenu = null;\n            this.selectedPanel = null;\n            this.filterInput = null;\n            this.filterInputItem = null;\n            this.popper = null;\n\n            // state\n            this.skipFocusout = false;\n            this.backspaceAtStartPoint = null;\n            this.selectedDropDownItem = null;\n            this.selectedDropDownIndex = null;\n            this.hasItems = false;\n\n            this.init();\n        }\n\n        updateDropDownPosition() {\n            //console.log('updateDropDownPosition');\n            //if (this.options.usePopper) {\n                this.popper.update();\n            // } else {\n            //     $(this.dropDownMenu).dropdown('update');\n            // }\n        }\n\n        hideDropDown() {\n            //if (this.options.usePopper) {\n                //console.log('popper remove show');\n                $(this.dropDownMenu).removeClass('show')\n            // } else {\n            //     if ($(this.dropDownMenu).hasClass('show'))\n            //         $(this.dropDownMenu).dropdown('toggle');\n            // }\n        }\n\n        showDropDown() {\n            if (this.hasItems) {\n                //if (this.options.usePopper) {\n                    //console.log('popper add show');\n                    $(this.dropDownMenu).addClass('show')\n                // } else {\n                //     if (!$(this.dropDownMenu).hasClass('show'))\n                //         $(this.dropDownMenu).dropdown('toggle');\n                // }\n            }\n        }\n\n        setCheck(optionId, isChecked) {\n            for (let i = 0; i < this.input.options.length; i += 1) {\n                let option = this.input.options[i];\n                if (option.value == optionId) {\n                    this.input.options[i].selected = isChecked;\n                    break;\n                }\n            }\n        }\n\n        // Public methods\n        getInputValue() {\n            return $(this.input).val();\n        }\n\n        closeDropDown() {\n            this.resetSelectDropDownMenu();\n            this.clearFilterInput();\n            this.hideDropDown();\n            this.updateDropDownPosition();\n        }\n\n\n        clearFilterInput() {\n            if (this.filterInput.value != '') {\n                this.filterInput.value = '';\n                this.filterDropDownMenu();\n                if (this.hasItems) {\n                    this.updateDropDownPosition(); \n                } \n            }\n        }\n\n        filterDropDownMenu() {\n            let text = this.filterInput.value.trim();\n            let visible = 0;\n            $(this.dropDownMenu).find('li').each((i, item) => {\n                let $item = $(item);\n                if (text == '') {\n                    $item.show();\n                    visible++;\n                }\n                else {\n                    let itemText = $item.text();\n                    let $checkbox = $item.find('input[type=\"checkbox\"]');\n                    \n                    if (!$checkbox.prop('checked') && itemText.toLowerCase().indexOf(text.toLowerCase())>=0) {\n                        $item.show();\n                        visible++;\n                    } else {\n                        $item.hide();\n                    }\n                }\n            });\n            this.hasItems = visible > 0;\n            this.resetSelectDropDownMenu();\n        }\n\n        clickDropDownItem(event) {\n            // console.log(\"filter & stopPropagation\");\n            event.preventDefault();\n            event.stopPropagation();\n\n            let $menuItem = $(event.currentTarget).closest(\"LI\");\n            let optionId = $menuItem.data(\"option-id\");\n            let $checkBox = $menuItem.find('input[type=\"checkbox\"]');\n            if ($checkBox.prop('checked')) {\n                let $selectedItem = $(this.selectedPanel).find(`li[data-option-id=\"${optionId}\"]`);\n                this.removeSelectedItem($selectedItem, optionId, $checkBox);\n            } else {\n                let itemText = $menuItem.find('label').text();\n                this.createAndAppendSelectedItem($checkBox, optionId, itemText);\n                $checkBox.prop('checked', true);\n            }\n            this.clearFilterInput();\n            $(this.filterInput).focus();\n        }\n\n        \n        appendDropDownItem(itemValue, itemText, isChecked) {\n            let optionId = itemValue;\n            let checkBoxId = `dashboardcode-bsmultiselect-${this.input.name.toLowerCase()}-generated-id-${optionId.toLowerCase()}`;\n            let checked = isChecked ? \"checked\" : \"\";\n            let $dropDownItem = $(\n                `<li data-option-id=\"${optionId}\">\n                    <div class=\"custom-control custom-checkbox\">\n                        <input type=\"checkbox\" class=\"custom-control-input\" id=\"${checkBoxId}\" ${checked}>\n                        <label class=\"custom-control-label\" for=\"${checkBoxId}\">${itemText}</label>\n                    </div>\n                 </li>`).addClass(this.options.dropDownItemClass).appendTo($(this.dropDownMenu));\n\n            let $checkBox = $dropDownItem.find(`input[type=\"checkbox\"]`);\n            if (isChecked) {\n                this.createAndAppendSelectedItem($checkBox, optionId, itemText);\n            }\n        }\n        \n        createAndAppendSelectedItem($checkBox, optionId, itemText) {\n            let $selectedItem = $(`<li data-option-id=\"${optionId}\"><span>${itemText}</span></li>`);\n            if (!this.options.selectedItemClass){\n                $selectedItem.addClass(defSelectedItemClass);\n                $selectedItem.css(defSelectedItemStyle)\n            }else{\n                $selectedItem.addClass(this.options.selectedItemClass);\n            }\n                \n            $selectedItem.insertBefore($(this.filterInputItem));\n            let $buttom = $(\"<button aria-label='Close' tabIndex='-1' type='button'><span aria-hidden='true'>&times;</span></button>\");\n            if (!this.options.removeSelectedItemButtonClass){\n                $buttom.addClass(defRemoveSelectedItemButtonClass);\n                $buttom.css(defRemoveSelectedItemButtonStyle);\n            }\n            else{\n                $buttom.addClass(this.options.removeSelectedItemButtonClass)\n            }\n            \n            $buttom.appendTo($selectedItem); \n            this.setCheck(optionId, true);\n\n            $buttom.click(() => {\n                this.removeSelectedItem($selectedItem, optionId, $checkBox)\n                this.updateDropDownPosition();\n                $(this.filterInput).focus();\n            });\n        }\n\n        adoptFilterInputLength() {\n            this.filterInput.style.width = this.filterInput.value.length*1.3 + 2 + \"ch\";\n        }\n\n        analyzeInputText() {\n            let text = this.filterInput.value.trim().toLowerCase();\n            let nodeList = this.dropDownMenu.querySelectorAll(\"LI\");\n            let item = null;\n            for (let i = 0; i < nodeList.length; ++i) {\n                let it = nodeList[i];\n                if (it.textContent.trim().toLowerCase() == text)\n                {\n                    item=it;\n                    break;\n                }\n            }\n            if (item) {\n                let $item = $(item);\n                let $checkBox = $item.find('input[type=\"checkbox\"]');\n                if (!$checkBox.prop('checked')) {\n                    let optionId = $item.data('option-id');\n                    let itemText = $item.find('label').text();\n                    this.createAndAppendSelectedItem($checkBox, optionId, itemText);\n                    $checkBox.prop('checked', true);\n                }\n                this.clearFilterInput();\n            }\n        }\n\n        resetSelectDropDownMenu() {\n            if (this.selectedDropDownItem !== null) {\n                this.selectedDropDownItem.classList.remove('bg-light');\n                this.selectedDropDownItem.classList.remove('text-primary');\n                this.selectedDropDownItem = null;\n            }\n            this.selectedDropDownIndex = null;\n        }\n        \n        keydownArrow(down) {\n            let visibleNodeListArray = $(this.dropDownMenu).find('LI:visible').toArray();\n            if (visibleNodeListArray.length > 0) {\n                this.showDropDown();\n                if (this.selectedDropDownItem === null) {\n                    this.selectedDropDownIndex = down ? 0 : visibleNodeListArray.length - 1;\n                }\n                else {\n                    // IE10-11 doesn't support multiple arguments in classList remove \n                    this.selectedDropDownItem.classList.remove('bg-light');\n                    this.selectedDropDownItem.classList.remove('text-primary');\n                    if (down) {\n                        let newIndex = this.selectedDropDownIndex + 1;\n                        this.selectedDropDownIndex = newIndex < visibleNodeListArray.length ? newIndex : 0;\n                    } else {\n                        let newIndex = this.selectedDropDownIndex - 1;\n                        this.selectedDropDownIndex = newIndex >= 0 ? newIndex : visibleNodeListArray.length - 1;\n                    }\n                }\n                this.selectedDropDownItem = visibleNodeListArray[this.selectedDropDownIndex];\n                // IE10-11 doesn't support multiple arguments in classList add \n                this.selectedDropDownItem.classList.add('text-primary');\n                this.selectedDropDownItem.classList.add('bg-light');\n            }\n        }\n\n        removeSelectedItem($selectedItem, optionId, $checkBox) {\n            $selectedItem.remove();\n            this.setCheck(optionId, false);\n            $checkBox.prop('checked', false);\n        }\n\n        init() {\n            let $input = $(this.input);\n            $input.hide();\n            let disabled = this.input.disabled;\n\n            let $container = $(\"<div/>\");\n            if (!this.options.containerClass)\n                $container.addClass(this.options.containerClass);\n            $container.insertAfter($input);\n                \n            this.container = $container.get(0);\n\n            let $selectedPanel = $(\"<ul/>\");\n\n            if (!this.options.selectedPanelClass){\n                $selectedPanel.addClass(defSelectedPanelClass);\n                $selectedPanel.css(defSelectedPanelStyle);\n                $selectedPanel.css(\"min-height\", this.options.selectedPanelMinHeight);\n            }\n            else\n                $selectedPanel.addClass(this.options.selectedPanelClass);\n            $selectedPanel.appendTo($container);\n            this.selectedPanel = $selectedPanel.get(0);\n\n            if ($input.hasClass(\"is-valid\")){\n                $selectedPanel.removeClass(\"border\");\n                $selectedPanel.addClass(\"is-valid\");\n                //$selectedPanel.removeClass(\"btn-outline-danger\");\n                //$selectedPanel.addClass(\"btn-outline-success\");\n            }\n            \n            if ($input.hasClass(\"is-invalid\")){\n                $selectedPanel.removeClass(\"border\");\n                $selectedPanel.addClass(\"is-invalid\");\n                //$selectedPanel.removeClass(\"btn-outline-success\");\n                //$selectedPanel.addClass(\"btn-outline-danger\");\n            }\n\n            let $filterInputItem = $('<li/>');\n            this.filterInputItem = $filterInputItem.get(0)\n            if (!this.options.filterInputItemClass)\n                $filterInputItem.css(defFilterInputItemStyleSys)\n            else\n                $filterInputItem.addClass(this.options.filterInputItemClass)\n            \n            $filterInputItem.appendTo($selectedPanel);\n            \n\n            let $filterInput = $('<input type=\"search\" autocomplete=\"off\">');\n            if (!this.options.filterInputClass){\n                $filterInput.css(defFilterInputStyle);\n                $filterInput.css(\"color\", this.options.filterInputColor);\n            } else {\n                $filterInput.addClass(this.options.filterInputClass);\n            }\n            $filterInput.appendTo($filterInputItem);\n            this.filterInput = $filterInput.get(0)\n\n            let $dropDownMenu = $(\"<ul/>\").appendTo($container);\n            this.dropDownMenu = $dropDownMenu.get(0);\n\n            $dropDownMenu.addClass(this.options.dropDownMenuClass);\n            //if (this.options.usePopper) {\n                this.popper = new Popper(this.filterInput, this.dropDownMenu, {\n                    placement: 'bottom-start',\n                    modifiers: {\n                        flip: {\n                            behavior: ['left', 'right']\n                        }\n                    }\n                });\n            // } else {\n            //     $(this.dropDownMenu).addClass(\"dropdown dropdown-menu\")\n            //     $(this.dropDownMenu).data(\"\", \"\");\n            //     $(this.dropDownMenu).dropdown({\n            //         placement: 'bottom-start',\n            //         flip: false,\n            //         reference: this.filterInput\n            //     });\n            // }\n\n            if (!this.options.items) {\n                this.options.items.forEach((item) => {\n                    let itemValue = item.value;\n                    let itemText = item.text;\n                    let isChecked = item.isChecked;\n                    this.appendDropDownItem(itemValue, itemText, isChecked);\n                });\n                this.hasItems = this.options.items.length > 0;\n            } else {\n                let selectOptions = $input.find('option');\n                selectOptions.each(\n                    (index, option) => {\n                        let itemValue = option.value;\n                        let itemText = option.text;\n                        let isChecked = option.selected;\n                        this.appendDropDownItem(itemValue, itemText, isChecked);\n                    }\n                );\n                this.hasItems = selectOptions.length > 0;\n            }\n            if (disabled) {\n                this.filterInput.style.display = \"none\";\n                if(!this.options.selectedPanelReadonlyClass){\n                    $selectedPanel.css({\"background-color\": this.options.selectedPanelReadonlyBackgroundColor});\n                }else{\n                    $selectedPanel.addClass(this.options.selectedPanelReadonlyClass);\n                }\n                $selectedPanel.find('button').prop(\"disabled\", true);\n                $selectedPanel.addClass();\n            } else {\n                let inputId = this.input.id;\n                let $formGroup = $input.closest(\".form-group\");\n                if ($formGroup.length==1) {\n                    let $label = $formGroup.find(`label[for=\"${inputId}\"]`);\n                    let f = $label.attr(\"for\");\n                    if (f == this.input.id) {\n                        this.filterInput.id = \"dashboardcode-bsmultiselect-generated-filter-id-\" + this.input.id;\n                        $label.attr(\"for\", this.filterInput.id);\n                    }\n                }\n\n                this.updateDropDownPosition();\n\n                $dropDownMenu.click((event) => {\n                    //console.log('dropDownMenu click - stopPropagation')\n                    event.stopPropagation();\n                });\n\n                $dropDownMenu.find('li').click((event) => {\n                    this.clickDropDownItem(event);\n                });\n\n                $dropDownMenu.on(\"mouseover\", () => {\n                    this.resetSelectDropDownMenu();\n                });\n\n                $dropDownMenu.find(\"li\").on(\"mouseover\", (event) => {\n                    let $li= $(event.target).closest(\"li\");\n                    $li.addClass('text-primary');\n                    $li.addClass('bg-light');\n                });\n\n                $dropDownMenu.find(\"li\").on(\"mouseout\", (event) => {\n                    let $li= $(event.target).closest(\"li\");\n                    $li.removeClass('text-primary');\n                    $li.removeClass('bg-light');\n                });\n\n                $selectedPanel.click((event) => {\n                    //console.log('selectedPanel click ' + event.target.nodeName);\n                    if (event.target.nodeName != \"INPUT\")\n                        $(this.filterInput).val('').focus();\n                    if (!(event.target.nodeName == \"BUTTON\" || (event.target.nodeName == \"SPAN\" && event.target.parentElement.nodeName == \"BUTTON\")))\n                        this.showDropDown();\n                });\n\n\n                $filterInput.on(\"keydown\", (event) => {\n                    if (event.which == 38 || event.keyCode == 38) {\n                        event.preventDefault();\n                        this.keydownArrow(false);\n                    }\n                    else if (event.which == 40 || event.keyCode == 40) {\n                        event.preventDefault()\n                        this.keydownArrow(true);\n                    }\n                    else if (event.which == 13 || event.keyCode == 13) {\n                        event.preventDefault();\n                    }\n                    else if (event.which == 9 || event.keyCode == 9){\n                        if (this.filterInput.value){\n                            event.preventDefault();\n                        }else{\n                            this.closeDropDown();\n                        }\n                    }\n                    else {\n                        if (event.which == 8 || event.keyCode == 8) {\n                            // detect that backspace is at start of input field (this will be used at keydown)\n                            this.backspaceAtStartPoint = (this.filterInput.selectionStart == 0 && this.filterInput.selectionEnd == 0);\n                        }\n                        this.resetSelectDropDownMenu();\n                    }\n                });\n\n                $filterInput.on(\"keyup\", (event) => {\n                    if (event.which == 13 || event.keyCode == 13 || event.which == 9 || event.keyCode == 9) {\n                        if (this.selectedDropDownItem) {\n                            let $item = $(this.selectedDropDownItem);\n                            let $checkBox = $item.find('input[type=\"checkbox\"]');\n                            let optionId = $item.data('option-id');\n                            if (!$checkBox.prop('checked')) {\n                                let itemText = $item.find('label').text();\n                                this.createAndAppendSelectedItem($checkBox, optionId, itemText);\n                                $checkBox.prop('checked', true);\n                                this.filterInput.value = \"\";\n                            } else {\n                                let $selectedItem = $(this.selectedPanel).find(`LI[data-option-id=\"${optionId}\"]:first`);\n                                this.removeSelectedItem($selectedItem, optionId, $checkBox);\n                            }\n                            //this.resetSelectDropDownMenu();\n                        } else {\n                            this.analyzeInputText();\n                        }\n                        if (event.which == 9 || event.keyCode == 9){\n                            this.closeDropDown();\n                        }\n                    } else if (event.which == 8 || event.keyCode == 8) {\n                        let startPosition = this.filterInput.selectionStart;\n                        let endPosition = this.filterInput.selectionEnd;\n                        if (endPosition == 0 && startPosition == 0 && this.backspaceAtStartPoint) {\n                            let $selectedPanel = $(this.selectedPanel);\n                            let array = $selectedPanel.find(\"LI\").toArray();\n                            if (array.length >= 2) {\n                                let itemToDelete = array[array.length - 2];\n                                let $itemToDelete = $(itemToDelete);\n                                let optionId = $itemToDelete.data(\"option-id\");\n                                let $item = $dropDownMenu.find(`LI[data-option-id=\"${optionId}\"]:first`);\n                                let $checkBox = $item.find('input[type=\"checkbox\"]');\n                                let $selectedItem = $selectedPanel.find(`LI[data-option-id=\"${optionId}\"]:first`);\n                                this.removeSelectedItem($selectedItem, optionId, $checkBox);\n                            }\n                        }\n                        this.backspaceAtStartPoint = null;\n                    } else if (event.which == 27 || event.keyCode == 27) { // escape\n                        this.closeDropDown();\n                    }\n                });\n\n                // Set on change for filter input\n                $filterInput.on('input', () => { // keyup focus\n                    //console.log('filterInput input');\n                    this.adoptFilterInputLength();\n                    this.filterDropDownMenu();\n                    if (this.hasItems) {\n                        this.updateDropDownPosition(); // support case when textbox can change its place because of line break (texbox grow with each key press)\n                        this.showDropDown();\n                    } else {\n                        this.hideDropDown();\n                    }\n                });\n\n                $filterInput.focusin(() => {\n                    if($selectedPanel.hasClass(\"is-valid\") &&  this.options.selectedPanelValidBoxShadow ){\n                        $selectedPanel.css(\"box-shadow\", this.options.selectedPanelValidBoxShadow );              \n                    }else if ($selectedPanel.hasClass(\"is-invalid\") && this.options.selectedPanelInvalidBoxShadow){\n                        $selectedPanel.css(\"box-shadow\", this.options.selectedPanelInvalidBoxShadow );\n                    }\n                    $(this.selectedPanel).addClass(\"focus\");\n                });\n\n                $filterInput.focusout(() => {\n                    if (!this.skipFocusout)\n                    {\n                        $selectedPanel.css(\"box-shadow\", \"\" );                \n                        $(this.selectedPanel).removeClass(\"focus\");\n                    }\n                });\n\n                $container.mousedown(() => {\n                    this.skipFocusout = true;\n\n                });\n\n                $(window.document).mouseup((event) => {\n                    this.skipFocusout = false;\n                    if (!(this.container === event.target || $.contains(this.container, event.target))) {\n                        //console.log(\"document mouseup outside container\");\n                        this.closeDropDown();\n                    }\n                });\n            }\n        }\n    }\n\n    function jQueryInterface(options) {\n        return this.each(function () {\n            let data = $(this).data(dataKey)\n\n            if (!data) {\n                if (/dispose|hide/.test(options)) {\n                    return;\n                }\n                const optionsObject = (typeof options === 'object')?options:null;\n                data = new Plugin(this, optionsObject);\n                $(this).data(dataKey, data);\n            }\n\n            if (typeof options === 'string') {\n                let methodName = options;\n                if (typeof data[methodName] === 'undefined') {\n                    throw new TypeError(`No method named \"${methodName}\"`)\n                }\n                data[methodName]()\n            }\n        })\n    }\n\n    $.fn[pluginName] = jQueryInterface;\n\n    // in case of mulitple $(this) it will return 1st element plugin instance\n    $.fn[pluginName.charAt(0).toUpperCase() + pluginName.slice(1)] = function () {\n        return $(this).data(\"plugin_\" + pluginName);\n    };\n\n    $.fn[pluginName].Constructor = Plugin;\n\n    $.fn[pluginName].noConflict = function () {\n        $.fn[pluginName] = JQUERY_NO_CONFLICT\n        return jQueryInterface;\n    }\n    return Plugin;\n})(window, $, Popper);\n\nexport default BsMultiSelect;\n"],"names":["BsMultiSelect","window","$","Popper","JQUERY_NO_CONFLICT","fn","pluginName","dataKey","defFilterInputItemStyleSys","defSelectedPanelClass","defFilterInputStyle","defSelectedPanelStyle","defSelectedItemClass","defSelectedItemStyle","defRemoveSelectedItemButtonClass","defRemoveSelectedItemButtonStyle","defaults","items","selectedPanelMinHeight","selectedPanelReadonlyBackgroundColor","selectedPanelValidBoxShadow","selectedPanelInvalidBoxShadow","filterInputColor","containerClass","dropDownMenuClass","dropDownItemClass","selectedPanelClass","selectedPanelReadonlyClass","selectedItemClass","removeSelectedItemButtonClass","filterInputItemClass","filterInputClass","Plugin","element","options","TypeError","extend","input","container","dropDownMenu","selectedPanel","filterInput","filterInputItem","popper","skipFocusout","backspaceAtStartPoint","selectedDropDownItem","selectedDropDownIndex","hasItems","init","updateDropDownPosition","update","hideDropDown","removeClass","showDropDown","addClass","setCheck","optionId","isChecked","i","length","option","value","selected","getInputValue","val","closeDropDown","resetSelectDropDownMenu","clearFilterInput","filterDropDownMenu","text","trim","visible","find","each","item","$item","show","itemText","$checkbox","prop","toLowerCase","indexOf","hide","clickDropDownItem","event","preventDefault","stopPropagation","$menuItem","currentTarget","closest","data","$checkBox","$selectedItem","removeSelectedItem","createAndAppendSelectedItem","focus","appendDropDownItem","itemValue","checkBoxId","name","checked","$dropDownItem","appendTo","css","insertBefore","$buttom","click","adoptFilterInputLength","style","width","analyzeInputText","nodeList","querySelectorAll","it","textContent","classList","remove","keydownArrow","down","visibleNodeListArray","toArray","newIndex","add","$input","disabled","$container","insertAfter","get","$selectedPanel","hasClass","$filterInputItem","$filterInput","$dropDownMenu","placement","modifiers","flip","behavior","forEach","selectOptions","index","display","inputId","id","$formGroup","$label","f","attr","on","$li","target","nodeName","parentElement","which","keyCode","selectionStart","selectionEnd","startPosition","endPosition","array","itemToDelete","$itemToDelete","focusin","focusout","mousedown","document","mouseup","contains","jQueryInterface","test","optionsObject","methodName","charAt","toUpperCase","slice","Constructor","noConflict"],"mappings":"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"}