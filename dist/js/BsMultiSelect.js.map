{"version":3,"file":"BsMultiSelect.js","sources":["../../js/src/FilterPanel.js","../../js/src/OptionsPanel.js","../../js/src/MultiSelect.js","../../js/src/LabelAdapter.js","../../js/src/OptionsAdapters.js","../../js/src/Tools.js","../../js/src/Bs4StylingMethodCss.js","../../js/src/Bs4StylingMethodJs.js","../../js/src/Bs4Styling.js","../../js/src/AddToJQueryPrototype.js","../../js/src/Bs4SelectedItemContent.js","../../js/src/Bs4DropDownItemContent.js","../../js/src/BsMultiSelect.js"],"sourcesContent":["function defFilterInputStyleSys(s) {s.width='2ch'; s.border='0'; s.padding='0'; s.outline='none'; s.backgroundColor='transparent' };\r\n\r\nfunction FilterPanel(\r\n        document,\r\n        insertIntoDom,\r\n        onFilterInputFocusIn,  // show dropdown\r\n        onFilterInputFocusOut, // hide dropdown\r\n        keyDownArrowUp, \r\n        keyDownArrowDown,\r\n        hideDropDown,  \r\n        removeSelectedTail, // backspace alike\r\n        resetDropDownMenuHover, \r\n        toggleHovered, // \"compleate alike\"\r\n        resetFilterAndHideDropDown, // \"esc\" alike\r\n        input // filter\r\n    ) {\r\n    \r\n    var filterInput = document.createElement('INPUT'); \r\n    \r\n    filterInput.setAttribute(\"type\",\"search\");\r\n    filterInput.setAttribute(\"autocomplete\",\"off\");\r\n\r\n    defFilterInputStyleSys(filterInput.style);\r\n\r\n    insertIntoDom(filterInput);\r\n\r\n    var onfilterInputKeyDown = (event) => {\r\n        if ([38, 40, 13 ,27].indexOf(event.which)>=0 || (event.which == 9 && filterInput.value) ) {\r\n            event.preventDefault(); // for 9 it enables keyup\r\n        }\r\n\r\n        if (event.which == 38) {\r\n            keyDownArrowUp();\r\n        }\r\n        else if (event.which == 40) {\r\n            keyDownArrowDown();\r\n        }\r\n        else if (event.which == 9  /*tab*/) { // no keydown for this\r\n            if (!filterInput.value) {\r\n                hideDropDown(); // filter is empty, nothing to reset\r\n            }\r\n        }\r\n        else if (event.which == 8 /*backspace*/) {\r\n            // NOTE: this will process backspace only if there are no text in the input field\r\n            // If user will find this inconvinient, we will need to calculate something like this\r\n            // this.isBackspaceAtStartPoint = (this.filterInput.selectionStart == 0 && this.filterInput.selectionEnd == 0);\r\n            if (!filterInput.value)\r\n            { \r\n                removeSelectedTail();\r\n            }\r\n        }\r\n\r\n        if ([38, 40, 13, 9].indexOf(event.which)==-1)\r\n            resetDropDownMenuHover();\r\n    }\r\n   \r\n\r\n    \r\n   var onFilterInputKeyUp = (event) => {\r\n        if (event.which == 13 || event.which == 9 ) {\r\n            toggleHovered();\r\n        }\r\n        else if (event.which == 27) { // escape\r\n            resetFilterAndHideDropDown();\r\n        }\r\n    }\r\n    \r\n    // it can be initated by 3PP functionality\r\n    // sample (1) BS functionality - input x button click - clears input\r\n    // sample (2) BS functionality - esc keydown - clears input\r\n    // and there could be difference in processing: (2) should hide the menu, then reset , when (1) should just reset without hiding.\r\n    var onFilterInputInput = () => {\r\n        var filterInputValue = filterInput.value;\r\n        input(\r\n            filterInputValue, \r\n            ()=> filterInput.style.width = filterInputValue.length*1.3 + 2 + \"ch\"\r\n        );\r\n    }\r\n    \r\n    var setEmptyLength =() =>{\r\n        filterInput.style.width=\"2ch\";\r\n    }\r\n    var setEmpty= ()=> {\r\n        filterInput.value ='';\r\n        setEmptyLength();\r\n    };\r\n\r\n    filterInput.addEventListener('focusin', onFilterInputFocusIn);\r\n    filterInput.addEventListener('focusout', onFilterInputFocusOut);\r\n    filterInput.addEventListener('keydown', onfilterInputKeyDown);    \r\n    filterInput.addEventListener('keyup', onFilterInputKeyUp);\r\n    filterInput.addEventListener('input', onFilterInputInput);\r\n\r\n    var filterPanel = {\r\n        input:filterInput,\r\n        isEmpty(){\r\n            return filterInput.value ? false:true;\r\n        },\r\n        setEmpty,\r\n        setEmptyLength,\r\n        setFocus(){\r\n            filterInput.focus();\r\n        },\r\n        isEventTarget(event){\r\n            return event.target == filterInput;\r\n        },\r\n        dispose(){\r\n            filterInput.removeEventListener('focusin', onFilterInputFocusIn);\r\n            filterInput.removeEventListener('focusout', onFilterInputFocusOut);\r\n            filterInput.removeEventListener('keydown', onfilterInputKeyDown);\r\n            filterInput.removeEventListener('keyup', onFilterInputKeyUp);\r\n            filterInput.removeEventListener('input', onFilterInputInput);\r\n        }\r\n    }\r\n    return filterPanel;\r\n}\r\n\r\nexport default FilterPanel;\r\n","function defDropDownMenuStyleSys(s) {s.listStyleType='none'}; // remove bullets since this is ul\r\n\r\nfunction OptionsPanel(document, container, init, styling, \r\n        getVisibleMultiSelectDataList, resetFilter,updateDropDownLocation) {\r\n    var dropDownMenu = document.createElement('UL');\r\n    dropDownMenu.style.display=\"none\";\r\n    init(dropDownMenu);\r\n\r\n    // prevent heavy understandable styling error\r\n    defDropDownMenuStyleSys(dropDownMenu.style);\r\n    var hoveredMultiSelectData=null;\r\n    var hoveredMultiSelectDataIndex = null;\r\n    var candidateToHoveredMultiSelectData=null;\r\n\r\n    var skipFocusout = false;\r\n    var inShowDropDown = false;\r\n    // we want to escape the closing of the menu on a user's click inside the container\r\n    var containerMousedown = function(){\r\n        skipFocusout = true;\r\n    };    \r\n                \r\n    // TODO : this.containerMousedown , this.documentMouseup and filterInput.focusOut are actual only when menu is open\r\n    var documentMouseup = function(event) {\r\n        // if click outside container - close dropdown\r\n        if (!(container === event.target || container.contains(event.target))) {\r\n            hideDropDown();\r\n            resetFilter();\r\n        }\r\n    }\r\n\r\n\r\n    var setInShowDropDown= function(){\r\n        inShowDropDown = true;\r\n            setTimeout( () => {  \r\n                inShowDropDown = null;\r\n            }, 0)\r\n    }    \r\n\r\n    function hideDropDown() {\r\n        if (candidateToHoveredMultiSelectData){\r\n            resetCandidateToHoveredMultiSelectData();\r\n        }\r\n        if (dropDownMenu.style.display != 'none')\r\n        {\r\n            dropDownMenu.style.display = 'none';\r\n            // remove listeners that manages close dropdown on input's focusout and click outside container\r\n            container.removeEventListener(\"mousedown\", containerMousedown);\r\n            document.removeEventListener(\"mouseup\", documentMouseup);\r\n        }\r\n    }\r\n\r\n    function showDropDown() {\r\n        if (dropDownMenu.style.display != 'block')\r\n        {\r\n            setInShowDropDown();\r\n            dropDownMenu.style.display = 'block';\r\n            // remove listeners that manages close dropdown on input's focusout and click outside container\r\n            container.addEventListener(\"mousedown\", containerMousedown);\r\n            document.addEventListener(\"mouseup\", documentMouseup);\r\n        }\r\n    }\r\n\r\n    function hoverInInternal(index){\r\n        hoveredMultiSelectDataIndex = index;\r\n        hoveredMultiSelectData = getVisibleMultiSelectDataList()[index];\r\n        styling.HoverIn(hoveredMultiSelectData.dropDownMenuItemElement);\r\n    }\r\n\r\n    function resetDropDownMenuHover() {\r\n        if (hoveredMultiSelectData) {\r\n            styling.HoverOut(hoveredMultiSelectData.dropDownMenuItemElement);\r\n            hoveredMultiSelectData = null;\r\n            hoveredMultiSelectDataIndex = null;\r\n        }\r\n    }\r\n\r\n    function resetCandidateToHoveredMultiSelectData(){\r\n        candidateToHoveredMultiSelectData.dropDownMenuItemElement.removeEventListener('mousemove', processCandidateToHovered);\r\n        candidateToHoveredMultiSelectData.dropDownMenuItemElement.removeEventListener('mousedown', processCandidateToHovered);\r\n        candidateToHoveredMultiSelectData = null;\r\n    }\r\n\r\n    function processCandidateToHovered() {\r\n        if (hoveredMultiSelectData!=candidateToHoveredMultiSelectData)\r\n        {\r\n            resetDropDownMenuHover(); \r\n            hoverInInternal(candidateToHoveredMultiSelectData.visibleIndex);\r\n        }\r\n        resetCandidateToHoveredMultiSelectData();\r\n    }\r\n\r\n    function toggleHovered(){\r\n        if (hoveredMultiSelectData) {\r\n            hoveredMultiSelectData.toggle();\r\n            resetDropDownMenuHover();\r\n            hideDropDown(); // always hide 1st\r\n            resetFilter();\r\n        } \r\n    }\r\n\r\n    function keyDownArrow(down) {\r\n        let visibleMultiSelectDataList = getVisibleMultiSelectDataList();\r\n        let length = visibleMultiSelectDataList.length;\r\n        let newIndex=null;\r\n        if (length > 0) {\r\n            if (down) {\r\n                let i = hoveredMultiSelectDataIndex==null?0:hoveredMultiSelectDataIndex+1;\r\n                while(i<length){\r\n                    if (visibleMultiSelectDataList[i].visible){\r\n                        newIndex=i;\r\n                        break;\r\n                    }\r\n                    i++;\r\n                }\r\n            } else {\r\n                let i = hoveredMultiSelectDataIndex==null?length-1:hoveredMultiSelectDataIndex-1;\r\n                while(i>=0){\r\n                    if (visibleMultiSelectDataList[i].visible){\r\n                        newIndex=i;\r\n                        break;\r\n                    }\r\n                    i--;\r\n                }\r\n            }\r\n        }\r\n        \r\n        if (newIndex!=null)\r\n        {\r\n            if (hoveredMultiSelectData)\r\n                styling.HoverOut(hoveredMultiSelectData.dropDownMenuItemElement);\r\n            updateDropDownLocation();\r\n            showDropDown(); \r\n            hoverInInternal(newIndex);\r\n        }\r\n    }\r\n\r\n    var item = {\r\n        dropDownMenu,\r\n        \r\n        processCandidateToHovered,\r\n        hoverInInternal,\r\n        resetDropDownMenuHover,\r\n        setInShowDropDown, \r\n        showDropDown,\r\n        hideDropDown,\r\n        toggleHovered,\r\n        getSkipFocusout : function() {return skipFocusout},\r\n        resetSkipFocusout : function() {skipFocusout=false},\r\n        keyDownArrow,\r\n        onDropDownMenuItemElementMouseover : function(MultiSelectData, dropDownMenuItemElement)\r\n        {\r\n            if (!inShowDropDown)\r\n            {\r\n                if (hoveredMultiSelectData!=MultiSelectData)\r\n                {\r\n                    // mouseleave is not enough to guarantee remove hover styles in situations\r\n                    // when style was setuped without mouse (keyboard arrows)\r\n                    // therefore force reset manually\r\n                    resetDropDownMenuHover(); \r\n                    hoverInInternal(MultiSelectData.visibleIndex);\r\n                }\r\n            }\r\n            else\r\n            {\r\n                candidateToHoveredMultiSelectData = MultiSelectData;\r\n                dropDownMenuItemElement.addEventListener('mousemove', processCandidateToHovered);\r\n                dropDownMenuItemElement.addEventListener('mousedown', processCandidateToHovered);\r\n            }\r\n        }\r\n    }\r\n    return item;\r\n}\r\n\r\nexport default OptionsPanel;\r\n","import Popper from 'popper.js'\r\nimport FilterPanel from './FilterPanel.js'\r\nimport OptionsPanel from './OptionsPanel.js'\r\n\r\nfunction defSelectedPanelStyleSys(s) {s.display='flex'; s.flexWrap='wrap'; s.listStyleType='none'};  // remove bullets since this is ul\r\n//function defDropDownMenuStyleSys(s) {s.listStyleType='none'}; // remove bullets since this is ul\r\nfunction removeElement(e) {e.parentNode.removeChild(e)}\r\n\r\nfunction filterMultiSelectData(MultiSelectData, isFiltered, visibleIndex) {\r\n    MultiSelectData.visible = isFiltered;\r\n    MultiSelectData.visibleIndex = visibleIndex;\r\n    MultiSelectData.dropDownMenuItemElement.style.display = isFiltered ? 'block': 'none';\r\n} \r\n\r\nfunction resetFilterDropDownMenu(MultiSelectDataList) {\r\n    for(let i=0; i<MultiSelectDataList.length; i++)\r\n    {\r\n        let multiSelectData = MultiSelectDataList[i];\r\n        if ( !multiSelectData.isHidden )\r\n        {\r\n            filterMultiSelectData(multiSelectData, true, i);\r\n        }\r\n    }\r\n}\r\n\r\nfunction filterDropDownMenu(MultiSelectDataList, text) {\r\n    var list = [];\r\n    var j = 0;\r\n    for(let i=0; i<MultiSelectDataList.length; i++)\r\n    {\r\n        let multiSelectData = MultiSelectDataList[i];\r\n        if ( !multiSelectData.isHidden )\r\n        {\r\n            if ( multiSelectData.excludedFromSearch || multiSelectData.searchText.indexOf(text)<0 )\r\n            {\r\n                filterMultiSelectData(multiSelectData, false);\r\n            }\r\n            else \r\n            {\r\n                filterMultiSelectData(multiSelectData, true, j++);\r\n                list.push( multiSelectData );\r\n            }\r\n        }\r\n    }\r\n    return list;\r\n}\r\n\r\nclass MultiSelect {\r\n    constructor(optionsAdapter, styling, \r\n        selectedItemContent, dropDownItemContent, \r\n        labelAdapter, createStylingComposite,\r\n        configuration, onDispose, window) {\r\n        if (typeof Popper === 'undefined') {\r\n            throw new TypeError('DashboardCode BsMultiSelect require Popper.js (https://popper.js.org)')\r\n        }\r\n\r\n        // readonly\r\n        this.optionsAdapter = optionsAdapter;\r\n        this.container = optionsAdapter.container; // part of published api\r\n        this.styling = styling;\r\n        this.selectedItemContent = selectedItemContent;\r\n        this.dropDownItemContent = dropDownItemContent;\r\n        this.labelAdapter = labelAdapter;\r\n        this.createStylingComposite = createStylingComposite;\r\n        this.configuration = configuration;\r\n        this.onDispose = onDispose;\r\n        this.window = window;\r\n        this.document = window.document;\r\n\r\n        this.popper = null;\r\n\r\n        this.visibleCount=10;\r\n\r\n        this.selectedPanel = null;\r\n        this.filterInputItem = null;\r\n        this.optionsPanel = null;\r\n\r\n        //this.dropDownMenu = null;\r\n\r\n        this.stylingComposite = null;\r\n\r\n        // removable handlers\r\n        this.selectedPanelClick  = null;\r\n        this.documentMouseup = null;\r\n        this.containerMousedown = null;\r\n\r\n        // state\r\n        this.isComponentDisabled = null;\r\n        this.filterInputItemOffsetLeft = null; // used to detect changes in input field position (by comparision with current value)\r\n        \r\n        this.resetMultiSelectDataList();\r\n    }\r\n\r\n    resetMultiSelectDataList(){\r\n        this.MultiSelectDataList = [];\r\n        this.MultiSelectDataSelectedTail = null;\r\n        this.visibleMultiSelectDataList = null;\r\n    }\r\n\r\n    getVisibleMultiSelectDataList(){\r\n        if (this.visibleMultiSelectDataList)\r\n            return this.visibleMultiSelectDataList;\r\n        else\r\n            return this.MultiSelectDataList;\r\n    }\r\n\r\n    removeSelectedTail(){\r\n        if (this.MultiSelectDataSelectedTail){ \r\n            this.MultiSelectDataSelectedTail.toggle(); // always remove in this case\r\n        }\r\n        this.updateDropDownLocation(false);\r\n    }\r\n\r\n    updateDropDownLocation(force) {\r\n        let offsetLeft = this.filterInputItem.offsetLeft;\r\n        if (force || this.filterInputItemOffsetLeft != offsetLeft){ // position changed\r\n            this.popper.update();\r\n            this.filterInputItemOffsetLeft=offsetLeft;\r\n        }\r\n    }\r\n\r\n\r\n    resetFilter(){\r\n        if (!this.filterPanel.isEmpty()) {\r\n            this.filterPanel.setEmpty();\r\n            this.processEmptyInput();\r\n        }\r\n    }\r\n\r\n    hideDropDownAndResetFilter() {\r\n        this.optionsPanel.hideDropDown(); // always hide 1st\r\n        this.resetFilter();\r\n    }\r\n    \r\n    removeSelectedFromList(MultiSelectData){\r\n        if (MultiSelectData.selectedPrev){\r\n            (MultiSelectData.selectedPrev).selectedNext = MultiSelectData.selectedNext;\r\n        }\r\n        if (MultiSelectData.selectedNext){\r\n           (MultiSelectData.selectedNext).selectedPrev = MultiSelectData.selectedPrev;\r\n        }\r\n        if (this.MultiSelectDataSelectedTail == MultiSelectData){\r\n            this.MultiSelectDataSelectedTail = MultiSelectData.selectedPrev;\r\n        }\r\n        MultiSelectData.selectedNext=null;\r\n        MultiSelectData.selectedPrev=null;\r\n    }\r\n\r\n    insertDropDownItem(MultiSelectData, insertToDropDownMenu, isSelected, isOptionDisabled) {\r\n        var dropDownMenuItemElement = this.document.createElement('LI');\r\n        \r\n        // in chrome it happens on \"become visible\" so we need to skip it, \r\n        // for IE11 and edge it doesn't happens, but for IE11 and Edge it doesn't happens on small \r\n        // mouse moves inside the item. \r\n        // https://stackoverflow.com/questions/59022563/browser-events-mouseover-doesnt-happen-when-you-make-element-visible-and-mous\r\n        \r\n        var onDropDownMenuItemElementMouseover = ()=>this.optionsPanel.onDropDownMenuItemElementMouseover(\r\n            MultiSelectData,\r\n            dropDownMenuItemElement\r\n        )\r\n\r\n        dropDownMenuItemElement.addEventListener('mouseover', onDropDownMenuItemElementMouseover);\r\n        \r\n        // note 1: mouseleave preferred to mouseout - which fires on each descendant\r\n        // note 2: since I want add aditional info panels to the dropdown put mouseleave on dropdwon would not work\r\n        var onDropDownMenuItemElementMouseleave = () => this.optionsPanel.resetDropDownMenuHover();\r\n        dropDownMenuItemElement.addEventListener('mouseleave', onDropDownMenuItemElementMouseleave);\r\n\r\n\r\n        insertToDropDownMenu(dropDownMenuItemElement);\r\n\r\n        let dropDownItemContent = this.dropDownItemContent(dropDownMenuItemElement, MultiSelectData.option); \r\n        MultiSelectData.dropDownMenuItemElement = dropDownMenuItemElement;\r\n        MultiSelectData.DropDownItemContent = dropDownItemContent;\r\n\r\n        MultiSelectData.DisposeDropDownMenuItemElement = ()=> {\r\n            dropDownMenuItemElement.removeEventListener('mouseover',  onDropDownMenuItemElementMouseover);\r\n            dropDownMenuItemElement.removeEventListener('mouseleave', onDropDownMenuItemElementMouseleave);\r\n        }\r\n\r\n        var setDropDownItemContentDisabled = (dropDownItemContent,  isSelected) => {\r\n            dropDownItemContent.disabledStyle(true);\r\n            // do not desable if selected! there should be possibility to unselect \"disabled\"\r\n            dropDownItemContent.disable(!isSelected);\r\n        }\r\n\r\n        if (isOptionDisabled)\r\n            setDropDownItemContentDisabled(dropDownItemContent, isSelected )\r\n\r\n        dropDownItemContent.onSelected(() => {\r\n            MultiSelectData.toggle();\r\n            this.filterPanel.setFocus();\r\n        });\r\n        // ------------------------------------------------------------------------------\r\n        \r\n        var setPreventDefaultMultiSelectEvent = (event)=>{\r\n                this.preventDefaultMultiSelectEvent = event;\r\n            }\r\n       \r\n        \r\n        var createSelectedItem = ()=>{\r\n            var selectedItemElement = this.document.createElement('LI');\r\n            MultiSelectData.selectedItemElement = selectedItemElement;\r\n            if (this.MultiSelectDataSelectedTail){\r\n                this.MultiSelectDataSelectedTail.selectedNext = MultiSelectData;\r\n                MultiSelectData.selectedPrev = this.MultiSelectDataSelectedTail;\r\n            }\r\n            this.MultiSelectDataSelectedTail = MultiSelectData;\r\n\r\n            var removeSelectedItem = () => {\r\n                MultiSelectData.option.selected = false;\r\n                MultiSelectData.excludedFromSearch = isOptionDisabled;\r\n                if (isOptionDisabled)\r\n                {\r\n                    setDropDownItemContentDisabled(dropDownItemContent, false);\r\n                    MultiSelectData.toggle = ()=> {};\r\n                }\r\n                else\r\n                {\r\n                    MultiSelectData.toggle = ()=>{\r\n                        createSelectedItem();\r\n                        this.optionsAdapter.triggerChange();\r\n                    };\r\n                }\r\n                dropDownItemContent.select(false);\r\n                removeElement(selectedItemElement);\r\n                MultiSelectData.SelectedItemContent.dispose();\r\n                MultiSelectData.SelectedItemContent=null;\r\n                MultiSelectData.selectedItemElement=null;\r\n\r\n                this.removeSelectedFromList(MultiSelectData);\r\n                this.optionsAdapter.triggerChange();\r\n            }\r\n\r\n            // what is a problem with calling removeSelectedItem directly (not using  setTimeout(removeSelectedItem, 0)):\r\n            // consider situation \"MultiSelect\" on DROPDOWN (that should be closed on the click outside dropdown)\r\n            // therefore we aslo have document's click's handler where we decide to close or leave the DROPDOWN open.\r\n            // because of the event's bubling process removeSelectedItem runs first. \r\n            // that means the event's target element on which we click (the x button) will be removed from the DOM together with badge \r\n            // before we could analize is it belong to our dropdown or not.\r\n            // important 1: we can't just the stop propogation using stopPropogate because click outside dropdown on the similar \r\n            // component that use stopPropogation will not close dropdown (error, dropdown should be closed)\r\n            // important 2: we can't change the dropdown's event handler to leave dropdown open if event's target is null because of\r\n            // the situation described above: click outside dropdown on the same component.\r\n            // Alternatively it could be possible to use stopPropogate but together create custom click event setting new target that belomgs to DOM (e.g. panel)\r\n    \r\n            let removeSelectedItemAndCloseDropDown = () => {\r\n                removeSelectedItem();\r\n                this.optionsPanel.hideDropDown(); // always hide 1st\r\n                this.resetFilter();\r\n            };\r\n        \r\n            let onRemoveSelectedItemEvent = () => {\r\n                setTimeout( () => {  \r\n                    removeSelectedItemAndCloseDropDown();\r\n                }, 0);\r\n            };\r\n\r\n            MultiSelectData.SelectedItemContent = this.selectedItemContent(\r\n                selectedItemElement,\r\n                MultiSelectData.option,\r\n                onRemoveSelectedItemEvent,\r\n                setPreventDefaultMultiSelectEvent);\r\n    \r\n            var disable = (isDisabled) =>\r\n                MultiSelectData.SelectedItemContent.disable(isDisabled);\r\n            disable(this.isComponentDisabled);\r\n\r\n            MultiSelectData.option.selected = true;\r\n            MultiSelectData.excludedFromSearch = true; // all selected excluded from search\r\n            //MultiSelectData.remove  = removeSelectedItemAndCloseDropDown;\r\n            MultiSelectData.disable = disable;\r\n            this.selectedPanel.insertBefore(selectedItemElement, this.filterInputItem);\r\n\r\n\r\n            MultiSelectData.toggle = () => removeSelectedItem();\r\n            dropDownItemContent.select(true);\r\n            \r\n        }\r\n\r\n        \r\n        \r\n        if (isSelected)\r\n        {\r\n            createSelectedItem();\r\n        }\r\n        else\r\n        {\r\n            MultiSelectData.excludedFromSearch =  isOptionDisabled;\r\n            if (isOptionDisabled)\r\n                MultiSelectData.toggle = () => { }\r\n            else\r\n                MultiSelectData.toggle = () =>  {\r\n                    createSelectedItem();\r\n                    this.optionsAdapter.triggerChange();\r\n                }\r\n        }\r\n        MultiSelectData.removeDropDownMenuItemElement = () => {\r\n            removeElement(dropDownMenuItemElement);\r\n            if (MultiSelectData.selectedItemElement!=null)\r\n                removeElement(MultiSelectData.selectedItemElement);\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    processEmptyInput(){\r\n        this.filterPanel.setEmptyLength();\r\n        resetFilterDropDownMenu(this.MultiSelectDataList);\r\n        this.visibleMultiSelectDataList = null;\r\n    }\r\n\r\n    Update(){\r\n        this.styling.UpdateIsValid(this.stylingComposite, this.optionsAdapter.getIsValid(), this.optionsAdapter.getIsInvalid());\r\n        this.UpdateSize();\r\n        this.UpdateDisabled();\r\n    }\r\n\r\n    UpdateOption(index){\r\n        let multiSelectData = this.MultiSelectDataList[index];\r\n        let option = multiSelectData.option;\r\n        multiSelectData.searchText = option.text.toLowerCase().trim();\r\n        if (multiSelectData.isHidden != option.isHidden)\r\n        {\r\n            multiSelectData.isHidden=option.isHidden;\r\n            if (multiSelectData.isHidden)\r\n                this.insertDropDownItem(multiSelectData, (e)=>this.optionsPanel.dropDownMenu.appendChild(e), option.isSelected, option.isDisabled);\r\n            else\r\n                multiSelectData.removeDropDownMenuItemElement();\r\n        }\r\n        else \r\n        {\r\n            if (multiSelectData.isSelected != option.isSelected)\r\n            {\r\n                multiSelectData.isSelected=option.isSelected;\r\n                if (multiSelectData.isSelected)\r\n                {\r\n                    // this.insertDropDownItem(multiSelectData, (e)=>this.dropDownMenu.appendChild(e), isSelected, isDisabled);\r\n                }\r\n                else\r\n                {\r\n                    // multiSelectData.removeDropDownMenuItemElement();\r\n                }\r\n            }\r\n            if (multiSelectData.isDisabled != option.isDisabled)\r\n            {\r\n                multiSelectData.isDisabled=option.isDisabled;\r\n                if (multiSelectData.isDisabled)\r\n                {\r\n                    // this.insertDropDownItem(multiSelectData, (e)=>this.dropDownMenu.appendChild(e), isSelected, isDisabled);\r\n                }\r\n                else\r\n                {\r\n                    // multiSelectData.removeDropDownMenuItemElement();\r\n                }\r\n            }\r\n        }    \r\n        //multiSelectData.updateOption();\r\n    }\r\n\r\n    UpdateData(){\r\n        // close drop down , remove filter and listeners\r\n        this.optionsPanel.hideDropDown(); // always hide 1st\r\n        this.resetFilter();\r\n\r\n        for(let i=0; i<this.MultiSelectDataList.length; i++)\r\n        {\r\n            let multiSelectData = this.MultiSelectDataList[i];\r\n            if (multiSelectData.removeDropDownMenuItemElement)\r\n                multiSelectData.removeDropDownMenuItemElement();\r\n        }\r\n        this.resetMultiSelectDataList();\r\n\r\n        // reinitiate\r\n        this.updateDataImpl();\r\n    }\r\n\r\n    updateDataImpl(){\r\n        var createDropDownItems = () => {\r\n            let options = this.optionsAdapter.getOptions();\r\n            var j = 0;\r\n            for(let i = 0; i<options.length; i++) {\r\n                let option = options[i];\r\n\r\n                let isDisabled = option.disabled;\r\n                let isHidden   = option.hidden;\r\n                let isSelected = option.selected;\r\n                \r\n                var MultiSelectData = {\r\n                    searchText: option.text.toLowerCase().trim(),\r\n                    excludedFromSearch: isSelected || isDisabled || isHidden,\r\n                    option: option,\r\n                    isHidden: isHidden,\r\n                    dropDownMenuItemElement: null,\r\n                    dropDownItemContent: null,\r\n                    selectedPrev: null,\r\n                    selectedNext: null,\r\n                    visible: false,\r\n                    toggle: null,\r\n                    selectedItemElement: null,\r\n                    remove: null,\r\n                    disable: null,\r\n                    removeDropDownMenuItemElement: null\r\n                };\r\n\r\n                this.MultiSelectDataList.push(MultiSelectData);\r\n                if (!isHidden){\r\n                    MultiSelectData.visible = true;\r\n                    MultiSelectData.visibleIndex=i;\r\n                    this.insertDropDownItem(MultiSelectData, (e)=>this.optionsPanel.dropDownMenu.appendChild(e), isSelected, isDisabled);\r\n                }\r\n            } \r\n            this.updateDropDownLocation(false);\r\n        }\r\n\r\n        // some browsers (IE11) can change select value (as part of \"autocomplete\") after page is loaded but before \"ready\" event\r\n        if (document.readyState != 'loading'){\r\n            createDropDownItems();\r\n        } else {\r\n            var createDropDownItemsHandler = function(){\r\n                createDropDownItems();\r\n                document.removeEventListener(\"DOMContentLoaded\", createDropDownItemsHandler);\r\n            }\r\n            document.addEventListener('DOMContentLoaded', createDropDownItemsHandler); // IE9+\r\n        }\r\n    }\r\n\r\n    Dispose(){\r\n        if (this.onDispose)\r\n            this.onDispose(); // primary used to remove from jQuery tables\r\n        \r\n        // remove event listeners\r\n        // TODO check if open\r\n        this.optionsPanel.hideDropDown();\r\n        \r\n        this.selectedPanel.removeEventListener(\"click\", this.selectedPanelClick); // OPEN dropdown\r\n        this.filterPanel.dispose();\r\n        \r\n        this.labelAdapter.dispose();\r\n        \r\n        if (this.popper) {\r\n            this.popper.destroy();\r\n        }\r\n        \r\n        if (this.optionsAdapter.dispose) {\r\n            this.optionsAdapter.dispose();\r\n        }\r\n\r\n        for(let i=0; i<this.MultiSelectDataList.length; i++)\r\n        {\r\n            let multiSelectData = this.MultiSelectDataList[i];\r\n            if (multiSelectData.DisposeDropDownMenuItemElement)\r\n                multiSelectData.DisposeDropDownMenuItemElement();\r\n            \r\n            if (multiSelectData.SelectedItemContent)\r\n                multiSelectData.SelectedItemContent.dispose();\r\n            if (multiSelectData.DropDownItemContent)\r\n                multiSelectData.DropDownItemContent.dispose();\r\n        }\r\n    }\r\n\r\n    UpdateSize(){\r\n        if (this.styling.UpdateSize)\r\n            this.styling.UpdateSize(this.stylingComposite);\r\n    }\r\n\r\n    UpdateDisabled(){\r\n        let isComponentDisabled = this.optionsAdapter.getDisabled();\r\n        let iterateAll = (isDisabled)=>{\r\n            let i = this.MultiSelectDataSelectedTail;\r\n            while(i){\r\n                i.disable(isDisabled); \r\n                i = i.selectedPrev;\r\n            }\r\n        }\r\n        if (this.isComponentDisabled!==isComponentDisabled){\r\n            if (isComponentDisabled) {\r\n                //this.filterInput.style.display = \"none\";\r\n                this.filterInputItem.style.display = \"none\";\r\n                this.styling.Disable(this.stylingComposite);\r\n                iterateAll(true);\r\n                    \r\n                this.selectedPanel.removeEventListener(\"click\", this.selectedPanelClick);\r\n            } else {\r\n                //this.filterInput.style.display = \"inline-block\";\r\n                this.filterInputItem.style.display = \"list-item\";\r\n                this.styling.Enable(this.stylingComposite);\r\n                iterateAll(false);\r\n\r\n                this.selectedPanel.addEventListener(\"click\", this.selectedPanelClick);\r\n            }\r\n            this.isComponentDisabled=isComponentDisabled;\r\n        }\r\n    }\r\n \r\n    input(filterInputValue, resetLength){\r\n        let text = filterInputValue.trim().toLowerCase();\r\n        var isEmpty=false;\r\n        if (text == '')\r\n            isEmpty=true;\r\n        else\r\n        {\r\n            // check if exact match, otherwise new search\r\n            this.visibleMultiSelectDataList = filterDropDownMenu(this.MultiSelectDataList, text);\r\n            if (this.visibleMultiSelectDataList.length == 1)\r\n            {\r\n                let fullMatchMultiSelectData =  this.visibleMultiSelectDataList[0];\r\n                if (fullMatchMultiSelectData.searchText == text)\r\n                {\r\n                    fullMatchMultiSelectData.toggle();\r\n                    this.filterPanel.setEmpty(); // clear\r\n                    isEmpty=true;\r\n                }\r\n            }\r\n        }\r\n        if (isEmpty)\r\n            this.processEmptyInput();\r\n        else\r\n            resetLength();  \r\n        \r\n        this.optionsPanel.setInShowDropDown();\r\n\r\n        this.optionsPanel.resetDropDownMenuHover();\r\n\r\n        if (this.getVisibleMultiSelectDataList().length == 1) {\r\n            this.optionsPanel.hoverInInternal(0)\r\n        }\r\n\r\n        if (this.getVisibleMultiSelectDataList().length > 0) {\r\n            this.updateDropDownLocation(true); // we need it to support case when textbox changes its place because of line break (texbox grow with each key press)\r\n            this.optionsPanel.showDropDown();\r\n        } else {\r\n            this.optionsPanel.hideDropDown();\r\n        }\r\n    }\r\n\r\n    init() {\r\n        var document = this.document;\r\n        let container = this.optionsAdapter.container;\r\n        \r\n        this.selectedPanel = document.createElement('UL');\r\n        defSelectedPanelStyleSys(this.selectedPanel.style); \r\n        container.appendChild(this.selectedPanel);\r\n        \r\n        this.filterInputItem = document.createElement('LI');\r\n        this.selectedPanel.appendChild(this.filterInputItem);\r\n        \r\n        this.filterPanel = FilterPanel(\r\n            document,\r\n            (input) => {\r\n                this.filterInputItem.appendChild(input);\r\n                this.labelAdapter.init(input); \r\n            },\r\n            () => this.styling.FocusIn(this.stylingComposite),  // show dropdown\r\n            () => {\r\n                if (!this.optionsPanel.getSkipFocusout()) // skip initiated by mouse click (we manage it different way)\r\n                {\r\n                    this.resetFilter(); // if do not do this we will return to filtered list without text filter in input\r\n                    this.optionsPanel.resetDropDownMenuHover(); // if do not do this tab will select \"only one hovered\"\r\n                    this.styling.FocusOut(this.stylingComposite)\r\n                    this.optionsPanel.resetSkipFocusout();\r\n                }\r\n            }, // hide dropdown\r\n            () => this.optionsPanel.keyDownArrow(false), // arrow up\r\n            () => this.optionsPanel.keyDownArrow(true), // arrow down\r\n            () => this.optionsPanel.hideDropDown(),  \r\n            () => this.removeSelectedTail(), // backspace alike\r\n            () => this.optionsPanel.resetDropDownMenuHover(), \r\n            () => this.optionsPanel.toggleHovered(), // \"compleate alike\"\r\n            () => {\r\n                this.optionsPanel.hideDropDown(); // always hide 1st\r\n                this.resetFilter();\r\n            }, // \"esc\" alike\r\n            (filterInputValue, resetLength) => this.input(filterInputValue, resetLength) // filter\r\n        );\r\n        \r\n        this.optionsPanel = OptionsPanel(\r\n            document,\r\n            container,\r\n            (dropDownMenu) => {\r\n                container.appendChild(dropDownMenu);\r\n            },\r\n            this.styling, \r\n            () => this.getVisibleMultiSelectDataList(),\r\n            () => this.resetFilter(),\r\n            () => this.updateDropDownLocation(true)\r\n        );\r\n\r\n        this.selectedPanelClick = event => {\r\n            if (!this.filterPanel.isEventTarget(event))\r\n            {   \r\n                //this.filterPanel.setEmpty();\r\n                this.filterPanel.setFocus();\r\n            }\r\n            if (this.getVisibleMultiSelectDataList().length > 0 && this.preventDefaultMultiSelectEvent != event) {\r\n                this.updateDropDownLocation(true);\r\n                this.optionsPanel.showDropDown();\r\n            }\r\n            this.preventDefaultMultiSelectEvent=null;\r\n        };\r\n\r\n        this.stylingComposite = this.createStylingComposite(container, this.selectedPanel,\r\n            this.filterInputItem, this.filterPanel.input, this.optionsPanel.dropDownMenu);\r\n        \r\n        this.styling.Init(this.stylingComposite);\r\n\r\n        if (this.optionsAdapter.afterContainerFilled)\r\n            this.optionsAdapter.afterContainerFilled();\r\n\r\n        this.popper = new Popper( this.filterInputItem, this.optionsPanel.dropDownMenu, {\r\n            placement: 'bottom-start',\r\n            modifiers: {\r\n                preventOverflow: {enabled:false},\r\n                hide: {enabled:false},\r\n                flip: {enabled:false}\r\n            }\r\n        });\r\n        \r\n        this.styling.UpdateIsValid(this.stylingComposite, this.optionsAdapter.getIsValid(), this.optionsAdapter.getIsInvalid());\r\n        \r\n        this.UpdateSize();\r\n        this.UpdateDisabled();\r\n        \r\n        this.updateDataImpl();\r\n    }\r\n}\r\n\r\nexport default MultiSelect;\r\n","function LabelAdapter(label, createInputId){\r\n    var backupedFor = null; // state saved between init and dispose\r\n    return {\r\n        init(filterInput) {\r\n            if (label) {\r\n                backupedFor = label.getAttribute('for');\r\n                var newId = createInputId();\r\n                filterInput.setAttribute('id', newId);\r\n                label.setAttribute('for',newId);\r\n            }\r\n        },\r\n        dispose(){\r\n            if(backupedFor)\r\n                label.setAttribute('for',backupedFor);\r\n        }\r\n    }\r\n}\r\n\r\nexport default LabelAdapter;","function OptionsAdapterJson(container, options, getDisabled, getIsValid, getIsInvalid, trigger) {\r\n    return {\r\n        container,\r\n        getOptions(){return options},\r\n        dispose(){\r\n            while (container.firstChild) container.removeChild(container.firstChild);\r\n        },\r\n        triggerChange(){\r\n            trigger('multiselect:change');\r\n        },\r\n        getDisabled(){\r\n            return getDisabled?getDisabled():false;\r\n        },\r\n        getIsValid(){\r\n            return getIsValid?getIsValid():false;\r\n        },\r\n        getIsInvalid(){\r\n            return getIsInvalid?getIsInvalid():false;\r\n        }\r\n    }\r\n}\r\n\r\nfunction OptionsAdapterElement(selectElement, trigger) {\r\n    selectElement.style.display='none';\r\n    var container = document.createElement('div');\r\n    return {\r\n        container,\r\n        getOptions(){return selectElement.getElementsByTagName('OPTION')},\r\n        dispose(){\r\n            container.parentNode.removeChild(container);\r\n        },\r\n        afterContainerFilled(){\r\n            selectElement.parentNode.insertBefore(container, selectElement.nextSibling);\r\n        },\r\n        triggerChange(){\r\n            trigger('change');\r\n            trigger('multiselect:change');\r\n        },\r\n        getDisabled(){\r\n            return selectElement.disabled;\r\n        },\r\n        getIsValid(){\r\n            return selectElement.classList.contains('is-valid');\r\n        },\r\n        getIsInvalid(){\r\n            return selectElement.classList.contains('is-invalid');\r\n        }\r\n    }\r\n}\r\n\r\nexport {OptionsAdapterJson, OptionsAdapterElement};\r\n","export function ExtendIfUndefined(destination, source) {\r\n    for (var property in source)\r\n        if (destination[property] === undefined)\r\n            destination[property] = source[property];\r\n}\r\n\r\nexport function ExtendIfUndefinedFluent(destination, source) {\r\n    ExtendIfUndefined(destination, source);\r\n    return destination;\r\n}","import  { ExtendIfUndefined } from './Tools';\r\n\r\nconst bs4StylingMethodCssDefaults = {\r\n    selectedPanelFocusClass : 'focus',\r\n    selectedPanelDisabledClass: 'disabled',\r\n    dropDownItemDisabledClass: 'disabled'\r\n};\r\n\r\nfunction Bs4StylingMethodCss(configuration){\r\n    ExtendIfUndefined(configuration, bs4StylingMethodCssDefaults);\r\n\r\n    return {\r\n        Enable($selectedPanel){\r\n            $selectedPanel.removeClass(configuration.selectedPanelDisabledClass)\r\n        },\r\n    \r\n        Disable($selectedPanel){\r\n            $selectedPanel.addClass(configuration.selectedPanelDisabledClass)\r\n        },\r\n    \r\n        FocusIn($selectedPanel){\r\n            $selectedPanel.addClass(configuration.selectedPanelFocusClass);\r\n        },\r\n    \r\n        FocusOut($selectedPanel){\r\n            $selectedPanel.removeClass(configuration.selectedPanelFocusClass);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Bs4StylingMethodCss;","import  { ExtendIfUndefined } from './Tools';\r\n\r\nconst defSelectedPanelStyle = {'margin-bottom': '0', 'height': 'auto'};\r\n\r\nconst bs4StylingMethodJsDefaults = {\r\n    selectedPanelDefMinHeight: 'calc(2.25rem + 2px)',\r\n    selectedPanelLgMinHeight:  'calc(2.875rem + 2px)',\r\n    selectedPanelSmMinHeight:  'calc(1.8125rem + 2px)',\r\n    selectedPanelDisabledBackgroundColor: '#e9ecef',\r\n    selectedPanelFocusBorderColor: '#80bdff',\r\n    selectedPanelFocusBoxShadow: '0 0 0 0.2rem rgba(0, 123, 255, 0.25)',\r\n    selectedPanelFocusValidBoxShadow: '0 0 0 0.2rem rgba(40, 167, 69, 0.25)',\r\n    selectedPanelFocusInvalidBoxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)',\r\n    filterInputColor: '#495057',\r\n    //selectedItemContentDisabledOpacity: '.65'\r\n};\r\n\r\nfunction Bs4StylingMethodJs(configuration){\r\n    ExtendIfUndefined(configuration, bs4StylingMethodJsDefaults);\r\n\r\n    return {\r\n        OnInit(composite){\r\n            composite.$selectedPanel.css(defSelectedPanelStyle);\r\n            composite.$filterInput.css(\"color\", configuration.filterInputColor);\r\n        },\r\n    \r\n        UpdateSize($selectedPanel){\r\n            if ($selectedPanel.hasClass(\"form-control-lg\")){\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelLgMinHeight);\r\n            } else if ($selectedPanel.hasClass(\"form-control-sm\")){\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelSmMinHeight);\r\n            } else {\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelDefMinHeight);\r\n            }\r\n        },\r\n    \r\n        Enable($selectedPanel){\r\n            $selectedPanel.css(\"background-color\", \"\")\r\n        },\r\n    \r\n        Disable($selectedPanel){\r\n            $selectedPanel.css(\"background-color\", configuration.selectedPanelDisabledBackgroundColor)\r\n        },\r\n    \r\n        FocusIn($selectedPanel){\r\n            if ($selectedPanel.hasClass(\"is-valid\")){\r\n                $selectedPanel.css(\"box-shadow\", configuration.selectedPanelFocusValidBoxShadow);\r\n            } else if ($selectedPanel.hasClass(\"is-invalid\")){\r\n                $selectedPanel.css(\"box-shadow\", configuration.selectedPanelFocusInvalidBoxShadow);\r\n            } else {\r\n                $selectedPanel\r\n                    .css(\"box-shadow\", configuration.selectedPanelFocusBoxShadow)\r\n                    .css(\"border-color\", configuration.selectedPanelFocusBorderColor);\r\n            }\r\n        },\r\n    \r\n        FocusOut($selectedPanel){\r\n                $selectedPanel.css(\"box-shadow\", \"\" ).css(\"border-color\", \"\")\r\n        },\r\n    }\r\n}\r\n\r\nexport default Bs4StylingMethodJs;","import  { ExtendIfUndefined } from './Tools';\r\n\r\n// Bs4Styling\r\nconst bs4StylingDefaults = {\r\n    containerClass: 'dashboardcode-bsmultiselect',\r\n    dropDownMenuClass: 'dropdown-menu',\r\n    dropDownItemClass:  'px-2',\r\n    dropDownItemHoverClass: 'text-primary bg-light',\r\n    selectedPanelClass: 'form-control',\r\n    selectedItemClass: 'badge',\r\n    removeSelectedItemButtonClass: 'close',\r\n    filterInputItemClass: '',\r\n    filterInputClass: ''\r\n}\r\n\r\nfunction Bs4Styling(stylingMethod, configuration, $) {\r\n    ExtendIfUndefined(configuration, bs4StylingDefaults);\r\n\r\n    return {\r\n        Init(composite){\r\n            composite.$container.addClass(configuration.containerClass);\r\n            composite.$selectedPanel.addClass(configuration.selectedPanelClass);\r\n            composite.$dropDownMenu.addClass(configuration.dropDownMenuClass);\r\n            composite.$filterInputItem.addClass(configuration.filterInputItemClass);\r\n            composite.$filterInput.addClass(configuration.filterInputClass);\r\n            if (stylingMethod.OnInit)\r\n                stylingMethod.OnInit(composite)\r\n        },\r\n\r\n        UpdateIsValid(composite, isValid, isInvalid){\r\n            if (isValid)\r\n                composite.$selectedPanel.addClass('is-valid');\r\n\r\n            if (isInvalid)\r\n                composite.$selectedPanel.addClass('is-invalid');\r\n        },\r\n\r\n        UpdateSize(composite){\r\n            if(stylingMethod.UpdateSize)\r\n               stylingMethod.UpdateSize(composite.$selectedPanel)\r\n        },\r\n\r\n        Enable(composite){\r\n            stylingMethod.Enable(composite.$selectedPanel)\r\n        },\r\n\r\n        Disable(composite){\r\n            stylingMethod.Disable(composite.$selectedPanel)\r\n        },\r\n\r\n        FocusIn(composite){\r\n            stylingMethod.FocusIn(composite.$selectedPanel)\r\n        },\r\n\r\n        FocusOut(composite){\r\n            stylingMethod.FocusOut(composite.$selectedPanel)\r\n        },\r\n\r\n        HoverIn(dropDownItem){\r\n            $(dropDownItem).addClass(configuration.dropDownItemHoverClass);\r\n        },\r\n\r\n        HoverOut(dropDownItem){\r\n            $(dropDownItem).removeClass(configuration.dropDownItemHoverClass);\r\n        }\r\n    }\r\n    \r\n}\r\n\r\nexport default Bs4Styling;","function AddToJQueryPrototype(pluginName, createPlugin, $){\r\n    const firstChar = pluginName.charAt(0);\r\n    const firstCharLower = firstChar.toLowerCase();\r\n    if (firstCharLower == firstChar) {\r\n        throw new TypeError(`Plugin name '${pluginName}' should be started from upper case char`)\r\n    }\r\n    const prototypableName = firstCharLower + pluginName.slice(1)\r\n    const noConflictPrototypable = $.fn[prototypableName];\r\n    const dataKey = `DashboardCode.${pluginName}`;\r\n\r\n    function prototypable(options) {\r\n        return this.each( function () {\r\n            let $e = $(this);\r\n            let instance = $e.data(dataKey)\r\n            let isMethodName = typeof options === 'string';\r\n            if (!instance) {\r\n                if (isMethodName && /Dispose/.test(options)) {\r\n                    return;\r\n                }\r\n                const optionsObject = (typeof options === 'object')?options:null;\r\n\r\n                instance = createPlugin(this, optionsObject,\r\n                    () => {\r\n                        $e.removeData(dataKey)\r\n                    });\r\n                $e.data(dataKey, instance);\r\n            }\r\n\r\n            if (isMethodName) {\r\n                let methodName = options;\r\n                if (typeof instance[methodName] === 'undefined') {\r\n                    throw new TypeError(`No method named '${methodName}'`)\r\n                }\r\n                instance[methodName]()\r\n            }\r\n        })\r\n    }\r\n\r\n    $.fn[prototypableName] = prototypable;\r\n\r\n    // pluginName with first capitalized letter - return plugin instance for 1st $selected item\r\n    $.fn[pluginName] = function () {\r\n        return $(this).data(dataKey);\r\n    };\r\n\r\n    $.fn[prototypableName].noConflict = function () {\r\n        $.fn[prototypableName] = noConflictPrototypable\r\n        return prototypable;\r\n    }\r\n}\r\n\r\nexport default AddToJQueryPrototype;","import  { ExtendIfUndefined } from './Tools';\r\n\r\nconst bs4StylingMethodCssdefaults = {\r\n    selectedItemContentDisabledClass: 'disabled'\r\n};\r\n\r\nfunction Bs4SelectedItemContentStylingMethodCss(configuration) {\r\n    ExtendIfUndefined(configuration, bs4StylingMethodCssdefaults);\r\n\r\n    return {\r\n        disableSelectedItemContent($content){\r\n            $content.addClass(configuration.selectedItemContentDisabledClass )\r\n        }\r\n    }\r\n}\r\n\r\nconst defSelectedItemStyle = {'padding-left': '0px', 'line-height': '1.5em'};\r\nconst defRemoveSelectedItemButtonStyle = {'font-size':'1.5em', 'line-height': '.9em'};\r\nconst bs4StylingMethodJsDefaults = {\r\n    selectedItemContentDisabledOpacity: '.65'\r\n };\r\n\r\nfunction Bs4SelectedItemContentStylingMethodJs(configuration) {\r\n    ExtendIfUndefined(configuration, bs4StylingMethodJsDefaults);\r\n    return {\r\n        disableSelectedItemContent($content){\r\n            $content.css(\"opacity\", configuration.selectedItemContentDisabledOpacity )\r\n        },\r\n    \r\n        createSelectedItemContent($selectedItem, $button){\r\n            $selectedItem.css(defSelectedItemStyle);\r\n            if ($button)\r\n                $button.css(defRemoveSelectedItemButtonStyle);\r\n        }\r\n    }\r\n}\r\n\r\nconst bs4SelectedItemContentDefaults = {\r\n    selectedItemClass: 'badge',\r\n    removeSelectedItemButtonClass: 'close'\r\n};\r\nfunction Bs4SelectedItemContent(stylingMethod, configuration, $) {\r\n        ExtendIfUndefined(configuration, bs4SelectedItemContentDefaults);\r\n        \r\n        return function (selectedItem, optionItem, removeSelectedItem, preventDefaultMultiSelect){\r\n                let $selectedItem = $(selectedItem)\r\n                $selectedItem.addClass(configuration.selectedItemClass);\r\n                let $content = $(`<span/>`).text(optionItem.text);\r\n                $content.appendTo($selectedItem);\r\n                if (optionItem.disabled)\r\n                    stylingMethod.disableSelectedItemContent($content);\r\n                let $button = $('<button aria-label=\"Close\" tabIndex=\"-1\" type=\"button\"><span aria-hidden=\"true\">&times;</span></button>')\r\n                    // bs 'close' class that will be added to button set the float:right, therefore it impossible to configure no-warp policy \r\n                    // with .css(\"white-space\", \"nowrap\") or  .css(\"display\", \"inline-block\"); TODO: migrate to flex? \r\n                    .css(\"float\", \"none\").appendTo($selectedItem)\r\n                    .addClass(configuration.removeSelectedItemButtonClass) // bs close class set the float:right\r\n                    .on(\"click\", (jqEvent) => \r\n                        {   \r\n                            removeSelectedItem(); \r\n                            preventDefaultMultiSelect(jqEvent.originalEvent);\r\n                        });\r\n                \r\n                if (stylingMethod.createSelectedItemContent)\r\n                    stylingMethod.createSelectedItemContent($selectedItem, $button);\r\n                return {\r\n                    disable(isDisabled){ \r\n                        $button.prop('disabled', isDisabled); \r\n                    },\r\n                    dispose(){\r\n                        $button.unbind();\r\n                    }\r\n                };\r\n            }\r\n}\r\n\r\nexport { Bs4SelectedItemContent as Bs4SelectedItemContent, Bs4SelectedItemContentStylingMethodJs, Bs4SelectedItemContentStylingMethodCss};","import  { ExtendIfUndefined} from './Tools';\r\n\r\nconst bs4StylingMethodCssDefaults = {\r\n    selectedItemContentDisabledClass: 'disabled',\r\n};\r\n\r\nfunction Bs4DropDownItemContentStylingMethodCss(configuration) {\r\n    ExtendIfUndefined(configuration, bs4StylingMethodCssDefaults);\r\n    return {\r\n        disabledStyle($checkBox, $checkBoxLabel, isDisbaled){\r\n            if (isDisbaled) \r\n                $checkBox.addClass(configuration.dropDownItemDisabledClass);\r\n            else\r\n                $checkBox.removeClass(configuration.dropDownItemDisabledClass);\r\n        }\r\n    }\r\n}\r\n\r\nconst bs4StylingMethodJsDefaults = {\r\n    selectedItemContentDisabledOpacity: '.65',\r\n    dropdDownLabelDisabledColor: '#6c757d'\r\n};\r\n\r\nfunction Bs4DropDownItemContentStylingMethodJs(configuration) {\r\n    ExtendIfUndefined(configuration, bs4StylingMethodJsDefaults);\r\n    return{\r\n        disabledStyle($checkBox, $checkBoxLabel, isDisbaled){\r\n            $checkBoxLabel.css('color', isDisbaled?configuration.dropdDownLabelDisabledColor:'')\r\n        }\r\n    }\r\n}\r\n\r\nconst bs4DropDownItemContentDefaults = {\r\n    dropDownItemClass:  'px-2',\r\n}\r\n\r\nfunction Bs4DropDownItemContent(stylingMethod, configuration, $) {\r\n    ExtendIfUndefined(configuration, bs4DropDownItemContentDefaults);\r\n    return function(dropDownItem, option){\r\n        let $dropDownItem = $(dropDownItem);\r\n        $dropDownItem.addClass(configuration.dropDownItemClass);\r\n        let $dropDownItemContent= $(`<div class=\"custom-control custom-checkbox\">\r\n            <input type=\"checkbox\" class=\"custom-control-input\">\r\n            <label class=\"custom-control-label\"></label>\r\n        </div>`);\r\n        $dropDownItemContent.appendTo(dropDownItem);\r\n        let $checkBox = $dropDownItemContent.find(`INPUT[type=\"checkbox\"]`);\r\n        let $checkBoxLabel = $dropDownItemContent.find(`label`);\r\n        $checkBoxLabel.text(option.text);\r\n\r\n        var tmp = { \r\n            select(isSelected){ $checkBox.prop('checked', isSelected); }, \r\n            // --- distinct disable and disabledStyle to provide a possibility to unselect disabled option\r\n            disable(isDisabled){ $checkBox.prop('disabled', isDisabled); },\r\n            disabledStyle(isDisbaled){ stylingMethod.disabledStyle($checkBox, $checkBoxLabel, isDisbaled); },\r\n\r\n            onSelected(toggle) {\r\n                $checkBox.on(\"change\", toggle)\r\n                $dropDownItem.on(\"click\", event => {\r\n                    if (dropDownItem === event.target || $.contains(dropDownItem, event.target)) {\r\n                        toggle();\r\n                    }\r\n                })\r\n            },\r\n            dispose(){\r\n                $checkBox.unbind();\r\n                $dropDownItem.unbind();\r\n            }\r\n        }\r\n        \r\n        return tmp;\r\n    }\r\n}\r\n\r\nexport { Bs4DropDownItemContent, Bs4DropDownItemContentStylingMethodJs, Bs4DropDownItemContentStylingMethodCss };","import $ from 'jquery'\r\n\r\nimport MultiSelect from './MultiSelect'\r\nimport LabelAdapter from './LabelAdapter';\r\nimport {OptionsAdapterJson,OptionsAdapterElement} from './OptionsAdapters';\r\n\r\nimport Bs4StylingMethodCss from './Bs4StylingMethodCss'\r\nimport Bs4StylingMethodJs from './Bs4StylingMethodJs'\r\nimport Bs4Styling from './Bs4Styling';\r\nimport AddToJQueryPrototype from './AddToJQueryPrototype'\r\n\r\nimport { Bs4SelectedItemContent, Bs4SelectedItemContentStylingMethodJs, Bs4SelectedItemContentStylingMethodCss} from './Bs4SelectedItemContent';\r\nimport { Bs4DropDownItemContent, Bs4DropDownItemContentStylingMethodJs, Bs4DropDownItemContentStylingMethodCss} from './Bs4DropDownItemContent';\r\n\r\n(\r\n    (window, $) => {\r\n        AddToJQueryPrototype('BsMultiSelect',\r\n            (element, settings, onDispose) => {\r\n                let configuration = $.extend({}, settings); // settings used per jQuery intialization, configuration per element\r\n                if (configuration.preBuildConfiguration)\r\n                    configuration.preBuildConfiguration(element, configuration);\r\n                \r\n                var $element= $(element);\r\n                let optionsAdapter = null;\r\n                if (configuration.optionsAdapter)\r\n                    optionsAdapter = configuration.optionsAdapter;\r\n                else\r\n                {\r\n                    var trigger = function(eventName){\r\n                        $element.trigger(eventName);\r\n                    }\r\n                    if (configuration.options){\r\n                        optionsAdapter = OptionsAdapterJson(\r\n                            element,\r\n                            configuration.options,\r\n                            configuration.getDisabled,\r\n                            configuration.getIsValid,\r\n                            configuration.getIsInvalid,\r\n                            trigger );\r\n                        if (!configuration.createInputId)\r\n                            configuration.createInputId=()=>`${configuration.containerClass}-generated-filter-${element.id}`;\r\n            \r\n                    }else {\r\n                        if (!configuration.label)\r\n                        {\r\n                            let $formGroup = $(element).closest('.form-group');\r\n                            if ($formGroup.length == 1) {\r\n                                let $label = $formGroup.find(`label[for=\"${element.id}\"]`);\r\n                                if ($label.length>0)\r\n                                {   \r\n                                    let label = $label.get(0);\r\n                                    let forId = label.getAttribute('for');\r\n                                    if (forId == element.id) {\r\n                                        configuration.label = label;\r\n                                    }\r\n                                }   \r\n                            }\r\n                        }\r\n                        optionsAdapter = OptionsAdapterElement(element, trigger);\r\n                        if (!configuration.createInputId)\r\n                            configuration.createInputId=()=>`${configuration.containerClass}-generated-input-${((element.id)?element.id:element.name).toLowerCase()}-id`;\r\n                    }\r\n                }\r\n\r\n                let labelAdapter = LabelAdapter(configuration.label, configuration.createInputId);\r\n\r\n                let useCss = configuration.useCss;\r\n                let styling = configuration.styling;\r\n                if (!configuration.adapter)\r\n                {\r\n                    let stylingMethod = configuration.stylingMethod;\r\n                    if (!stylingMethod)\r\n                    {\r\n                        if (useCss)\r\n                            stylingMethod = Bs4StylingMethodCss(configuration);\r\n                        else\r\n                            stylingMethod = Bs4StylingMethodJs(configuration);\r\n                    }\r\n                    styling = Bs4Styling(stylingMethod, configuration, $);\r\n                }\r\n\r\n                let selectedItemContent = configuration.selectedItemContent;\r\n                if (!selectedItemContent){\r\n                    let selectedItemContentStylingMethod = configuration.selectedItemContentStylingMethod;\r\n                    if (!selectedItemContentStylingMethod)\r\n                    {\r\n                        if (useCss)\r\n                            selectedItemContentStylingMethod=Bs4SelectedItemContentStylingMethodCss(configuration, $);\r\n                        else\r\n                            selectedItemContentStylingMethod=Bs4SelectedItemContentStylingMethodJs(configuration, $);\r\n                    }\r\n                    selectedItemContent = Bs4SelectedItemContent(selectedItemContentStylingMethod, configuration, $);\r\n                }\r\n\r\n                let dropDownItemContent = configuration.bs4DropDownItemContent;\r\n                if (!dropDownItemContent){\r\n                    let dropDownItemContentStylingMethod = configuration.dropDownItemContentStylingMethod;\r\n                    if (useCss)\r\n                        dropDownItemContentStylingMethod=Bs4DropDownItemContentStylingMethodCss(configuration, $);\r\n                    else\r\n                        dropDownItemContentStylingMethod=Bs4DropDownItemContentStylingMethodJs(configuration, $);\r\n                    dropDownItemContent = Bs4DropDownItemContent(dropDownItemContentStylingMethod, configuration, $)\r\n                }\r\n\r\n                let createStylingComposite = function(container, selectedPanel, filterInputItem, filterInput, dropDownMenu){\r\n                    return {\r\n                        $container:$(container),\r\n                        $selectedPanel:$(selectedPanel),\r\n                        $filterInputItem:$(filterInputItem),\r\n                        $filterInput:$(filterInput),\r\n                        $dropDownMenu:$(dropDownMenu)\r\n                    };\r\n                }\r\n\r\n                let multiSelect = new MultiSelect(\r\n                    optionsAdapter,\r\n                    styling,\r\n                    selectedItemContent,\r\n                    dropDownItemContent,\r\n                    labelAdapter,\r\n                    createStylingComposite,\r\n                    configuration,\r\n                    onDispose,\r\n                    window);\r\n\r\n                if (configuration.postBuildConfiguration)\r\n                    configuration.postBuildConfiguration(element, multiSelect);\r\n                \r\n                multiSelect.init();\r\n                return multiSelect;\r\n            }, $);\r\n    }\r\n)(window, $)\r\n"],"names":["defFilterInputStyleSys","s","width","border","padding","outline","backgroundColor","FilterPanel","document","insertIntoDom","onFilterInputFocusIn","onFilterInputFocusOut","keyDownArrowUp","keyDownArrowDown","hideDropDown","removeSelectedTail","resetDropDownMenuHover","toggleHovered","resetFilterAndHideDropDown","input","filterInput","createElement","setAttribute","style","onfilterInputKeyDown","event","indexOf","which","value","preventDefault","onFilterInputKeyUp","onFilterInputInput","filterInputValue","length","setEmptyLength","setEmpty","addEventListener","filterPanel","isEmpty","setFocus","focus","isEventTarget","target","dispose","removeEventListener","defDropDownMenuStyleSys","listStyleType","OptionsPanel","container","init","styling","getVisibleMultiSelectDataList","resetFilter","updateDropDownLocation","dropDownMenu","display","hoveredMultiSelectData","hoveredMultiSelectDataIndex","candidateToHoveredMultiSelectData","skipFocusout","inShowDropDown","containerMousedown","documentMouseup","contains","setInShowDropDown","setTimeout","resetCandidateToHoveredMultiSelectData","showDropDown","hoverInInternal","index","HoverIn","dropDownMenuItemElement","HoverOut","processCandidateToHovered","visibleIndex","toggle","keyDownArrow","down","visibleMultiSelectDataList","newIndex","i","visible","item","getSkipFocusout","resetSkipFocusout","onDropDownMenuItemElementMouseover","MultiSelectData","defSelectedPanelStyleSys","flexWrap","removeElement","e","parentNode","removeChild","filterMultiSelectData","isFiltered","resetFilterDropDownMenu","MultiSelectDataList","multiSelectData","isHidden","filterDropDownMenu","text","list","j","excludedFromSearch","searchText","push","MultiSelect","optionsAdapter","selectedItemContent","dropDownItemContent","labelAdapter","createStylingComposite","configuration","onDispose","window","Popper","TypeError","popper","visibleCount","selectedPanel","filterInputItem","optionsPanel","stylingComposite","selectedPanelClick","isComponentDisabled","filterInputItemOffsetLeft","resetMultiSelectDataList","MultiSelectDataSelectedTail","force","offsetLeft","update","processEmptyInput","hideDropDownAndResetFilter","removeSelectedFromList","selectedPrev","selectedNext","insertDropDownItem","insertToDropDownMenu","isSelected","isOptionDisabled","onDropDownMenuItemElementMouseleave","option","DropDownItemContent","DisposeDropDownMenuItemElement","setDropDownItemContentDisabled","disabledStyle","disable","onSelected","setPreventDefaultMultiSelectEvent","preventDefaultMultiSelectEvent","createSelectedItem","selectedItemElement","removeSelectedItem","selected","triggerChange","select","SelectedItemContent","removeSelectedItemAndCloseDropDown","onRemoveSelectedItemEvent","isDisabled","insertBefore","removeDropDownMenuItemElement","Update","UpdateIsValid","getIsValid","getIsInvalid","UpdateSize","UpdateDisabled","UpdateOption","toLowerCase","trim","appendChild","UpdateData","updateDataImpl","createDropDownItems","options","getOptions","disabled","hidden","remove","readyState","createDropDownItemsHandler","Dispose","destroy","getDisabled","iterateAll","Disable","Enable","resetLength","fullMatchMultiSelectData","FocusIn","FocusOut","Init","afterContainerFilled","placement","modifiers","preventOverflow","enabled","hide","flip","LabelAdapter","label","createInputId","backupedFor","getAttribute","newId","OptionsAdapterJson","trigger","firstChild","OptionsAdapterElement","selectElement","getElementsByTagName","nextSibling","classList","ExtendIfUndefined","destination","source","property","undefined","bs4StylingMethodCssDefaults","selectedPanelFocusClass","selectedPanelDisabledClass","dropDownItemDisabledClass","Bs4StylingMethodCss","$selectedPanel","removeClass","addClass","defSelectedPanelStyle","bs4StylingMethodJsDefaults","selectedPanelDefMinHeight","selectedPanelLgMinHeight","selectedPanelSmMinHeight","selectedPanelDisabledBackgroundColor","selectedPanelFocusBorderColor","selectedPanelFocusBoxShadow","selectedPanelFocusValidBoxShadow","selectedPanelFocusInvalidBoxShadow","filterInputColor","Bs4StylingMethodJs","OnInit","composite","css","$filterInput","hasClass","bs4StylingDefaults","containerClass","dropDownMenuClass","dropDownItemClass","dropDownItemHoverClass","selectedPanelClass","selectedItemClass","removeSelectedItemButtonClass","filterInputItemClass","filterInputClass","Bs4Styling","stylingMethod","$","$container","$dropDownMenu","$filterInputItem","isValid","isInvalid","dropDownItem","AddToJQueryPrototype","pluginName","createPlugin","firstChar","charAt","firstCharLower","prototypableName","slice","noConflictPrototypable","fn","dataKey","prototypable","each","$e","instance","data","isMethodName","test","optionsObject","removeData","methodName","noConflict","bs4StylingMethodCssdefaults","selectedItemContentDisabledClass","Bs4SelectedItemContentStylingMethodCss","disableSelectedItemContent","$content","defSelectedItemStyle","defRemoveSelectedItemButtonStyle","selectedItemContentDisabledOpacity","Bs4SelectedItemContentStylingMethodJs","createSelectedItemContent","$selectedItem","$button","bs4SelectedItemContentDefaults","Bs4SelectedItemContent","selectedItem","optionItem","preventDefaultMultiSelect","appendTo","on","jqEvent","originalEvent","prop","unbind","Bs4DropDownItemContentStylingMethodCss","$checkBox","$checkBoxLabel","isDisbaled","dropdDownLabelDisabledColor","Bs4DropDownItemContentStylingMethodJs","bs4DropDownItemContentDefaults","Bs4DropDownItemContent","$dropDownItem","$dropDownItemContent","find","tmp","element","settings","extend","preBuildConfiguration","$element","eventName","id","$formGroup","closest","$label","get","forId","name","useCss","adapter","selectedItemContentStylingMethod","bs4DropDownItemContent","dropDownItemContentStylingMethod","multiSelect","postBuildConfiguration"],"mappings":"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"}