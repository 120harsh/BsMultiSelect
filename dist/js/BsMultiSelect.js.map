{"version":3,"file":"BsMultiSelect.js","sources":["../../js/src/BsMultiSelect.es8.js"],"sourcesContent":["import $ from 'jquery'\nimport Popper from 'popper.js'\n\n// TODO: \n// 2) require polyfill Element.closest polyfill IE 11\n// 3) require multiple classList.add polyfill IE 11\n\n// IIFE to declare private members\nconst BsMultiSelect = ((window, $, Popper) => {\n    const JQUERY_NO_CONFLICT = $.fn[pluginName];\n    const pluginName = 'dashboardCodeBsMultiSelect';\n    const dataKey = `plugin_${pluginName}`;\n\n    const defFilterInputItemStyleSys = {'display': 'block'};\n    const defSelectedPanelClass = 'form-control btn border';\n    const defFilterInputStyle = {'width': '2ch', 'border': '0', 'padding': '0', 'outline': 'none'};\n    const defSelectedPanelStyle = {'cursor': 'text', 'display': 'flex', \"flex-wrap\": \"wrap\", \"align-items\": \"center\", \"margin-bottom\": \"0px\"};\n    const defSelectedItemClass = 'badge';\n    const defSelectedItemStyle = {'padding-left': '0px', 'display': 'flex', 'align-items': 'center'};\n    const defRemoveSelectedItemButtonClass = 'close';\n    const defRemoveSelectedItemButtonStyle = {'font-size': '100%'};\n    const defaults = {\n        items: [],\n        defaults: [],\n        //usePopper: true,\n        selectedPanelMinHeight: 'calc(2.25rem + 2px)',\n        selectedPanelReadonlyBackgroundColor: '#e9ecef',\n        selectedPanelValidBoxShadow: ' 0 0 0 0.2rem rgba(40, 167, 69, 0.25)',\n        selectedPanelInvalidBoxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)',\n        filterInputColor: '#495057',\n        containerClass: 'dashboardcode-bsmultiselect',\n        dropDownMenuClass: 'dropdown-menu',\n        dropDownItemClass: 'px-2',\n        selectedPanelClass: '',\n        selectedPanelReadonlyClass: '',\n        selectedItemClass: '', \n        removeSelectedItemButtonClass: '',\n        filterInputItemClass: '', \n        filterInputClass: ''\n    };\n\n    class Plugin {\n        constructor(element, options) {\n            if (typeof Popper === 'undefined') {\n                throw new TypeError('DashboardCode bsMultiSelect require Popper.js (https://popper.js.org)')\n            }\n\n            // readonly\n            this.element = element;\n            this.options = $.extend({}, defaults, options);\n            this.input = element;\n            this.container = null;\n            this.dropDownMenu = null;\n            this.selectedPanel = null;\n            this.filterInput = null;\n            this.filterInputItem = null;\n            this.popper = null;\n\n            // state\n            this.skipFocusout = false;\n            this.backspaceAtStartPoint = null;\n            this.selectedDropDownItem = null;\n            this.selectedDropDownIndex = null;\n            this.hasItems = false;\n\n            this.init();\n        }\n\n        updateDropDownPosition() {\n            //console.log('updateDropDownPosition');\n            //if (this.options.usePopper) {\n                this.popper.update();\n            // } else {\n            //     $(this.dropDownMenu).dropdown('update');\n            // }\n        }\n\n        hideDropDown() {\n            //if (this.options.usePopper) {\n                //console.log('popper remove show');\n                $(this.dropDownMenu).removeClass('show')\n            // } else {\n            //     if ($(this.dropDownMenu).hasClass('show'))\n            //         $(this.dropDownMenu).dropdown('toggle');\n            // }\n        }\n\n        showDropDown() {\n            if (this.hasItems) {\n                //if (this.options.usePopper) {\n                    //console.log('popper add show');\n                    $(this.dropDownMenu).addClass('show')\n                // } else {\n                //     if (!$(this.dropDownMenu).hasClass('show'))\n                //         $(this.dropDownMenu).dropdown('toggle');\n                // }\n            }\n        }\n\n        setCheck(optionId, isChecked) {\n            for (let i = 0; i < this.input.options.length; i += 1) {\n                let option = this.input.options[i];\n                if (option.value == optionId) {\n                    this.input.options[i].selected = isChecked;\n                    break;\n                }\n            }\n        }\n\n        // Public methods\n        getInputValue() {\n            return $(this.input).val();\n        }\n\n        closeDropDown() {\n            this.resetSelectDropDownMenu();\n            this.clearFilterInput();\n            this.hideDropDown();\n            this.updateDropDownPosition();\n        }\n\n\n        clearFilterInput() {\n            if (this.filterInput.value != '') {\n                this.filterInput.value = '';\n                this.filterDropDownMenu();\n                if (this.hasItems) {\n                    this.updateDropDownPosition(); \n                } \n            }\n        }\n\n        filterDropDownMenu() {\n            let text = this.filterInput.value.trim();\n            let visible = 0;\n            $(this.dropDownMenu).find('li').each(function () {\n                let $item = $(this);\n                if (text == '') {\n                    $item.show();\n                    visible++;\n                }\n                else {\n                    let itemText = $item.text();\n                    let $checkbox = $item.find('input[type=\"checkbox\"]');\n                    \n                    if (!$checkbox.prop('checked') && itemText.toLowerCase().includes(text.toLowerCase())) {\n                        $item.show();\n                        visible++;\n                    } else {\n                        $item.hide();\n                    }\n                }\n            });\n            this.hasItems = visible > 0;\n            this.resetSelectDropDownMenu();\n        }\n\n        clickDropDownItem(event) {\n            //console.log(\"filter & stopPropagation\");\n            event.preventDefault();\n            event.stopPropagation();\n\n            let menuItem = event.currentTarget.closest(\"LI\");\n            let $menuItem = $(menuItem);\n            let optionId = $menuItem.data(\"option-id\");\n            let $checkBox = $menuItem.find('input[type=\"checkbox\"]');\n            if ($checkBox.prop('checked')) {\n                let $selectedItem = $(this.selectedPanel).find(`li[data-option-id=\"${optionId}\"]`);\n                this.removeSelectedItem($selectedItem, optionId, $checkBox);\n            } else {\n                let itemText = $menuItem.find('label').text();\n                this.createAndAppendSelectedItem($checkBox, optionId, itemText);\n                $checkBox.prop('checked', true);\n            }\n            this.clearFilterInput();\n            $(this.filterInput).focus();\n        }\n\n        \n        appendDropDownItem(itemValue, itemText, isChecked) {\n            let optionId = itemValue;\n            let checkBoxId = `dashboardcode-bsmultiselect-${this.input.name.toLowerCase()}-generated-id-${optionId.toLowerCase()}`;\n            let checked = isChecked ? \"checked\" : \"\";\n            let $dropDownItem = $(\n                `<li data-option-id=\"${optionId}\">\n                    <div class=\"custom-control custom-checkbox\">\n                        <input type=\"checkbox\" class=\"custom-control-input\" id=\"${checkBoxId}\" ${checked}>\n                        <label class=\"custom-control-label\" for=\"${checkBoxId}\">${itemText}</label>\n                    </div>\n                 </li>`).addClass(this.options.dropDownItemClass).appendTo($(this.dropDownMenu));\n\n            let $checkBox = $dropDownItem.find(`input[type=\"checkbox\"]`);\n            if (isChecked) {\n                this.createAndAppendSelectedItem($checkBox, optionId, itemText);\n            }\n        }\n        \n        createAndAppendSelectedItem($checkBox, optionId, itemText) {\n            let $selectedItem = $(`<li data-option-id=\"${optionId}\"><span>${itemText}</span></li>`);\n            if (!this.options.selectedItemClass){\n                $selectedItem.addClass(defSelectedItemClass);\n                $selectedItem.css(defSelectedItemStyle)\n            }else{\n                $selectedItem.addClass(this.options.selectedItemClass);\n            }\n                \n            $selectedItem.insertBefore($(this.filterInputItem));\n            let $buttom = $(\"<button aria-label='Close' tabIndex='-1' type='button'><span aria-hidden='true'>&times;</span></button>\");\n            if (!this.options.removeSelectedItemButtonClass){\n                $buttom.addClass(defRemoveSelectedItemButtonClass);\n                $buttom.css(defRemoveSelectedItemButtonStyle);\n            }\n            else{\n                $buttom.addClass(this.options.removeSelectedItemButtonClass)\n            }\n            \n            $buttom.appendTo($selectedItem); \n            this.setCheck(optionId, true);\n\n            $buttom.click(() => {\n                this.removeSelectedItem($selectedItem, optionId, $checkBox)\n                this.updateDropDownPosition();\n                $(this.filterInput).focus();\n            });\n        }\n\n        adoptFilterInputLength() {\n            this.filterInput.style.width = this.filterInput.value.length*1.3 + 2 + \"ch\";\n        }\n\n        analyzeInputText() {\n            let text = this.filterInput.value.trim().toLowerCase();\n            let item = [...this.dropDownMenu.querySelectorAll(\"LI\")]\n                .find((i) => i.textContent.trim().toLowerCase() == text);\n            if (item) {\n                let $item = $(item);\n                let $checkBox = $item.find('input[type=\"checkbox\"]');\n                if (!$checkBox.prop('checked')) {\n                    let optionId = $item.data('option-id');\n                    let itemText = $item.find('label').text();\n                    this.createAndAppendSelectedItem($checkBox, optionId, itemText);\n                    $checkBox.prop('checked', true);\n                }\n                this.clearFilterInput();\n            }\n        }\n\n        resetSelectDropDownMenu() {\n            if (this.selectedDropDownItem !== null) {\n                // IE11 doesn't support remove('text-primary', bg-light' )\n                this.selectedDropDownItem.classList.remove('bg-light');\n                this.selectedDropDownItem.classList.remove('text-primary');\n                this.selectedDropDownItem = null;\n            }\n            this.selectedDropDownIndex = null;\n        }\n        \n        keydownArrow(down) {\n            let items = [...this.dropDownMenu.querySelectorAll('LI:not([style*=\"display: none\"]')];\n            if (items.length > 0) {\n                this.showDropDown();\n                if (this.selectedDropDownItem === null) {\n                    this.selectedDropDownIndex = down ? 0 : items.length - 1;\n                }\n                else {\n                    // IE11 doesn't support remove('text-primary', bg-light' )\n                    this.selectedDropDownItem.classList.remove('bg-light');\n                    this.selectedDropDownItem.classList.remove('text-primary');\n                    if (down) {\n                        let newIndex = this.selectedDropDownIndex + 1;\n                        this.selectedDropDownIndex = newIndex < items.length ? newIndex : 0;\n                    } else {\n                        let newIndex = this.selectedDropDownIndex - 1;\n                        this.selectedDropDownIndex = newIndex >= 0 ? newIndex : items.length - 1;\n                    }\n                }\n                this.selectedDropDownItem = items[this.selectedDropDownIndex];\n                // IE11 doesn't support add('text-primary', bg-light' )\n                this.selectedDropDownItem.classList.add('text-primary');\n                this.selectedDropDownItem.classList.add('bg-light');\n            }\n        }\n\n        removeSelectedItem($selectedItem, optionId, $checkBox) {\n            $selectedItem.remove();\n            this.setCheck(optionId, false);\n            $checkBox.prop('checked', false);\n        }\n\n        init() {\n            let $input = $(this.input);\n            $input.hide();\n            let disabled = this.input.disabled;\n\n            let $container = $(\"<div/>\");\n            if (!this.options.containerClass)\n                $container.addClass(this.options.containerClass);\n            $container.insertAfter($input);\n                \n            this.container = $container.get(0);\n\n            let $selectedPanel = $(\"<ul/>\");\n\n            if (!this.options.selectedPanelClass){\n                $selectedPanel.addClass(defSelectedPanelClass);\n                $selectedPanel.css(defSelectedPanelStyle);\n                $selectedPanel.css(\"min-height\", this.options.selectedPanelMinHeight);\n            }\n            else\n                $selectedPanel.addClass(this.options.selectedPanelClass);\n            $selectedPanel.appendTo($container);\n            this.selectedPanel = $selectedPanel.get(0);\n\n            if ($input.hasClass(\"is-valid\")){\n                $selectedPanel.removeClass(\"border\");\n                $selectedPanel.addClass(\"is-valid\");\n                //$selectedPanel.removeClass(\"btn-outline-danger\");\n                //$selectedPanel.addClass(\"btn-outline-success\");\n            }\n            \n            if ($input.hasClass(\"is-invalid\")){\n                $selectedPanel.removeClass(\"border\");\n                $selectedPanel.addClass(\"is-invalid\");\n                //$selectedPanel.removeClass(\"btn-outline-success\");\n                //$selectedPanel.addClass(\"btn-outline-danger\");\n            }\n\n            let $filterInputItem = $('<li/>');\n            this.filterInputItem = $filterInputItem.get(0)\n            if (!this.options.filterInputItemClass)\n                $filterInputItem.css(defFilterInputItemStyleSys)\n            else\n                $filterInputItem.addClass(this.options.filterInputItemClass)\n            \n            $filterInputItem.appendTo($selectedPanel);\n            \n\n            let $filterInput = $('<input type=\"search\" autocomplete=\"off\">');\n            if (!this.options.filterInputClass){\n                $filterInput.css(defFilterInputStyle);\n                $filterInput.css(\"color\", this.options.filterInputColor);\n            } else {\n                $filterInput.addClass(this.options.filterInputClass);\n            }\n            $filterInput.appendTo($filterInputItem);\n            this.filterInput = $filterInput.get(0)\n\n            let $dropDownMenu = $(\"<ul/>\").appendTo($container);\n            this.dropDownMenu = $dropDownMenu.get(0);\n\n            $dropDownMenu.addClass(this.options.dropDownMenuClass);\n            //if (this.options.usePopper) {\n                this.popper = new Popper(this.filterInput, this.dropDownMenu, {\n                    placement: 'bottom-start',\n                    modifiers: {\n                        flip: {\n                            behavior: ['left', 'right']\n                        }\n                    }\n                });\n            // } else {\n            //     $(this.dropDownMenu).addClass(\"dropdown dropdown-menu\")\n            //     $(this.dropDownMenu).data(\"\", \"\");\n            //     $(this.dropDownMenu).dropdown({\n            //         placement: 'bottom-start',\n            //         flip: false,\n            //         reference: this.filterInput\n            //     });\n            // }\n\n            if (!this.options.items) {\n                this.options.items.forEach((item) => {\n                    let itemValue = item.value;\n                    let itemText = item.text;\n                    let isChecked = item.isChecked;\n                    this.appendDropDownItem(itemValue, itemText, isChecked);\n                });\n                this.hasItems = this.options.items.length > 0;\n            } else {\n                let selectOptions = $input.find('option');\n                selectOptions.each(\n                    (index, option) => {\n                        let itemValue = option.value;\n                        let itemText = option.text;\n                        let isChecked = option.selected;\n                        this.appendDropDownItem(itemValue, itemText, isChecked);\n                    }\n                );\n                this.hasItems = selectOptions.length > 0;\n            }\n            if (disabled) {\n                this.filterInput.style.display = \"none\";\n                if(!this.options.selectedPanelReadonlyClass){\n                    $selectedPanel.css({\"background-color\": this.options.selectedPanelReadonlyBackgroundColor});\n                }else{\n                    $selectedPanel.addClass(this.options.selectedPanelReadonlyClass);\n                }\n                $selectedPanel.find('button').prop(\"disabled\", true);\n                $selectedPanel.addClass();\n            } else {\n                let inputId = this.input.id;\n                let formGroup = this.input.closest(\".form-group\");\n                if (formGroup) {\n                    let label = formGroup.querySelector(`label[for=\"${inputId}\"]`);\n                    let f = $(label).attr(\"for\");\n                    if (f == this.input.id) {\n                        this.filterInput.id = \"dashboardcode-bsmultiselect-generated-filter-id-\" + this.input.id;\n                        label.setAttribute(\"for\", this.filterInput.id);\n                    }\n                }\n\n                this.updateDropDownPosition();\n\n                $dropDownMenu.click((event) => {\n                    //console.log('dropDownMenu click - stopPropagation')\n                    event.stopPropagation();\n                });\n\n                $dropDownMenu.find('li').click((event) => {\n                    this.clickDropDownItem(event);\n                });\n\n                $dropDownMenu.on(\"mouseover\", () => {\n                    this.resetSelectDropDownMenu();\n                });\n\n                $dropDownMenu.find(\"li\").on(\"mouseover\", (event) => {\n                    event.target.closest(\"li\").classList.add('text-primary');\n                    event.target.closest(\"li\").classList.add('bg-light');\n                });\n\n                $dropDownMenu.find(\"li\").on(\"mouseout\", (event) => {\n                    event.target.closest(\"li\").classList.remove('text-primary');\n                    event.target.closest(\"li\").classList.remove('bg-light');\n                });\n\n                $selectedPanel.click((event) => {\n                    //console.log('selectedPanel click ' + event.target.nodeName);\n                    if (event.target.nodeName != \"INPUT\")\n                        $(this.filterInput).val('').focus();\n                    if (!(event.target.nodeName == \"BUTTON\" || (event.target.nodeName == \"SPAN\" && event.target.parentElement.nodeName == \"BUTTON\")))\n                        this.showDropDown();\n                });\n\n\n                $filterInput.on(\"keydown\", (event) => {\n                    if (event.which == 38 || event.keyCode == 38) {\n                        event.preventDefault();\n                        this.keydownArrow(false);\n                    }\n                    else if (event.which == 40 || event.keyCode == 40) {\n                        event.preventDefault()\n                        this.keydownArrow(true);\n                    }\n                    else if (event.which == 13 || event.keyCode == 13) {\n                        event.preventDefault();\n                    }\n                    else if (event.which == 9 || event.keyCode == 9){\n                        if (this.filterInput.value){\n                            event.preventDefault();\n                        }else{\n                            this.closeDropDown();\n                        }\n                    }\n                    else {\n                        if (event.which == 8 || event.keyCode == 8) {\n                            // detect that backspace is at start of input field (this will be used at keydown)\n                            this.backspaceAtStartPoint = (this.filterInput.selectionStart == 0 && this.filterInput.selectionEnd == 0);\n                        }\n                        this.resetSelectDropDownMenu();\n                    }\n                });\n\n                $filterInput.on(\"keyup\", (event) => {\n                    if (event.which == 13 || event.keyCode == 13 || event.which == 9 || event.keyCode == 9) {\n                        if (this.selectedDropDownItem) {\n                            let $item = $(this.selectedDropDownItem);\n                            let $checkBox = $item.find('input[type=\"checkbox\"]');\n                            let optionId = $item.data('option-id');\n                            if (!$checkBox.prop('checked')) {\n                                let itemText = $item.find('label').text();\n                                this.createAndAppendSelectedItem($checkBox, optionId, itemText);\n                                $checkBox.prop('checked', true);\n                                this.filterInput.value = \"\";\n                            } else {\n                                let $selectedItem = $(this.selectedPanel).find(`li[data-option-id=\"${optionId}\"]`);\n                                this.removeSelectedItem($selectedItem, optionId, $checkBox);\n                            }\n                            //this.resetSelectDropDownMenu();\n                        } else {\n                            this.analyzeInputText();\n                        }\n                        if (event.which == 9 || event.keyCode == 9){\n                            this.closeDropDown();\n                        }\n                    } else if (event.which == 8 || event.keyCode == 8) {\n                        let startPosition = this.filterInput.selectionStart;\n                        let endPosition = this.filterInput.selectionEnd;\n                        if (endPosition == 0 && startPosition == 0 && this.backspaceAtStartPoint) {\n                            let array = [...this.selectedPanel.querySelectorAll(\"LI\")];\n                            if (array.length >= 2) {\n                                let itemToDelete = array[array.length - 2];\n                                let $itemToDelete = $(itemToDelete);\n                                let optionId = $itemToDelete.data(\"option-id\");\n                                let item = [...this.dropDownMenu.querySelectorAll(\"LI\")]\n                                    .find((i) => i.dataset.optionId == optionId);\n                                let $item = $(item);\n                                let $checkBox = $item.find('input[type=\"checkbox\"]');\n                                let $selectedItem = $(this.selectedPanel).find(`li[data-option-id=\"${optionId}\"]`);\n                                this.removeSelectedItem($selectedItem, optionId, $checkBox);\n                            }\n                        }\n                        this.backspaceAtStartPoint = null;\n                    } else if (event.which == 27 || event.keyCode == 27) { // escape\n                        this.closeDropDown();\n                    }\n                });\n\n                // Set on change for filter input\n                $filterInput.on('input', () => { // keyup focus\n                    //console.log('filterInput input');\n                    this.adoptFilterInputLength();\n                    this.filterDropDownMenu();\n                    if (this.hasItems) {\n                        this.updateDropDownPosition(); // support case when textbox can change its place because of line break (texbox grow with each key press)\n                        this.showDropDown();\n                    } else {\n                        this.hideDropDown();\n                    }\n                });\n\n                $filterInput.focusin(() => {\n                    if($selectedPanel.hasClass(\"is-valid\") &&  this.options.selectedPanelValidBoxShadow ){\n                        $selectedPanel.css(\"box-shadow\", this.options.selectedPanelValidBoxShadow );              \n                    }else if ($selectedPanel.hasClass(\"is-invalid\") && this.options.selectedPanelInvalidBoxShadow){\n                        $selectedPanel.css(\"box-shadow\", this.options.selectedPanelInvalidBoxShadow );\n                    }\n                    $(this.selectedPanel).addClass(\"focus\");\n                });\n\n                $filterInput.focusout(() => {\n                    if (!this.skipFocusout)\n                    {\n                        $selectedPanel.css(\"box-shadow\", \"\" );                \n                        $(this.selectedPanel).removeClass(\"focus\");\n                    }\n                });\n\n                $container.mousedown(() => {\n                    this.skipFocusout = true;\n\n                });\n\n                $(window.document).mouseup((event) => {\n                    this.skipFocusout = false;\n                    if (!(this.container === event.target || this.container.contains(event.target))) {\n                        //console.log(\"document mouseup outside container\");\n                        this.closeDropDown();\n                    }\n                });\n            }\n        }\n    }\n\n    function jQueryInterface(options) {\n        return this.each(function () {\n            let data = $(this).data(dataKey)\n\n            if (!data) {\n                if (/dispose|hide/.test(options)) {\n                    return;\n                }\n                const optionsObject = (typeof options === 'object')?options:null;\n                data = new Plugin(this, optionsObject);\n                $(this).data(dataKey, data);\n            }\n\n            if (typeof options === 'string') {\n                let methodName = options;\n                if (typeof data[methodName] === 'undefined') {\n                    throw new TypeError(`No method named \"${methodName}\"`)\n                }\n                data[methodName]()\n            }\n        })\n    }\n\n    $.fn[pluginName] = jQueryInterface;\n\n    // in case of mulitple $(this) it will return 1st element plugin instance\n    $.fn[pluginName.charAt(0).toUpperCase() + pluginName.slice(1)] = function () {\n        return $(this).data(\"plugin_\" + pluginName);\n    };\n\n    $.fn[pluginName].Constructor = Plugin;\n\n    $.fn[pluginName].noConflict = function () {\n        $.fn[pluginName] = JQUERY_NO_CONFLICT\n        return jQueryInterface;\n    }\n    return Plugin;\n})(window, $, Popper);\n\nexport default BsMultiSelect;\n"],"names":["BsMultiSelect","window","$","Popper","JQUERY_NO_CONFLICT","fn","pluginName","dataKey","defFilterInputItemStyleSys","defSelectedPanelClass","defFilterInputStyle","defSelectedPanelStyle","defSelectedItemClass","defSelectedItemStyle","defRemoveSelectedItemButtonClass","defRemoveSelectedItemButtonStyle","defaults","items","selectedPanelMinHeight","selectedPanelReadonlyBackgroundColor","selectedPanelValidBoxShadow","selectedPanelInvalidBoxShadow","filterInputColor","containerClass","dropDownMenuClass","dropDownItemClass","selectedPanelClass","selectedPanelReadonlyClass","selectedItemClass","removeSelectedItemButtonClass","filterInputItemClass","filterInputClass","Plugin","element","options","TypeError","extend","input","container","dropDownMenu","selectedPanel","filterInput","filterInputItem","popper","skipFocusout","backspaceAtStartPoint","selectedDropDownItem","selectedDropDownIndex","hasItems","init","update","removeClass","addClass","optionId","isChecked","i","length","option","value","selected","val","resetSelectDropDownMenu","clearFilterInput","hideDropDown","updateDropDownPosition","filterDropDownMenu","text","trim","visible","find","each","$item","show","itemText","$checkbox","prop","toLowerCase","includes","hide","event","preventDefault","stopPropagation","menuItem","currentTarget","closest","$menuItem","data","$checkBox","$selectedItem","removeSelectedItem","createAndAppendSelectedItem","focus","itemValue","checkBoxId","name","checked","$dropDownItem","appendTo","css","insertBefore","$buttom","setCheck","click","style","width","item","querySelectorAll","textContent","classList","remove","down","showDropDown","newIndex","add","$input","disabled","$container","insertAfter","get","$selectedPanel","hasClass","$filterInputItem","$filterInput","$dropDownMenu","placement","modifiers","flip","behavior","forEach","appendDropDownItem","selectOptions","index","display","inputId","id","formGroup","label","querySelector","f","attr","setAttribute","clickDropDownItem","on","target","nodeName","parentElement","which","keyCode","keydownArrow","closeDropDown","selectionStart","selectionEnd","analyzeInputText","startPosition","endPosition","array","itemToDelete","$itemToDelete","dataset","adoptFilterInputLength","focusin","focusout","mousedown","document","mouseup","contains","jQueryInterface","test","optionsObject","methodName","charAt","toUpperCase","slice","Constructor","noConflict"],"mappings":"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"}