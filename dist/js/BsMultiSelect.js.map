{"version":3,"file":"BsMultiSelect.js","sources":["../../js/src/Bootstrap4Adapter.es8.js","../../js/src/BsMultiSelect.es8.js"],"sourcesContent":["class Bootstrap4Adapter {\r\n\r\n    constructor(jQuery, hiddenSelect, options) {\r\n        const defaults = {\r\n            //usePopper: true,\r\n            selectedPanelDefMinHeight: 'calc(2.25rem + 2px)',\r\n            selectedPanelReadonlyBackgroundColor: '#e9ecef',\r\n            selectedPanelBoxShadow: '0 0 0 0.2rem rgba(0, 123, 255, 0.25)',\r\n            selectedPanelBorderColor: '#80bdff', \r\n            selectedPanelValidBoxShadow: ' 0 0 0 0.2rem rgba(40, 167, 69, 0.25)',\r\n            selectedPanelInvalidBoxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)',\r\n            filterInputColor: '#495057',\r\n            containerClass: 'dashboardcode-bsmultiselect',\r\n            dropDownMenuClass: 'dropdown-menu',\r\n            dropDownItemClass: 'px-2',\r\n            selectedPanelClass: '',\r\n            selectedPanelFocusClass : '',\r\n            selectedPanelReadonlyClass: '',\r\n            selectedItemClass: '', \r\n            \r\n            removeSelectedItemButtonClass: '',\r\n            \r\n            filterInputItemClass: '',\r\n            filterInputClass: ''\r\n        };\r\n        this.options = jQuery.extend({}, defaults, options);\r\n        this.jQuery=jQuery;\r\n        this.hiddenSelect=hiddenSelect;\r\n        \r\n    }\r\n\r\n    CreateSelectedItemContent($selectedItem, itemText, removeSelectedItem){\r\n        const defSelectedItemClass = 'badge';\r\n        const defSelectedItemStyle = {'padding-left': '0px', 'line-height': '1rem'};\r\n        const defRemoveSelectedItemButtonClass = 'close';\r\n        const defRemoveSelectedItemButtonStyle = {'line-height': '1rem', 'font-size':'1.3rem'};\r\n\r\n        if (!this.options.selectedItemClass){\r\n            $selectedItem.addClass(defSelectedItemClass);\r\n            $selectedItem.css(defSelectedItemStyle)\r\n        }else{\r\n            $selectedItem.addClass(this.options.selectedItemClass);\r\n        }\r\n            \r\n        let $text = this.jQuery(`<span>${itemText}</span>`)\r\n        let $buttom = this.jQuery('<button aria-label=\"Close\" tabIndex=\"-1\" type=\"button\"><span aria-hidden=\"true\">&times;</span></button>');\r\n\r\n        if (!this.options.removeSelectedItemButtonClass){\r\n            $buttom.addClass(defRemoveSelectedItemButtonClass);\r\n            $buttom.css(defRemoveSelectedItemButtonStyle);\r\n        }\r\n        else{\r\n            $buttom.addClass(this.options.removeSelectedItemButtonClass)\r\n        }\r\n        $buttom.on(\"click\", removeSelectedItem);\r\n        $text.appendTo($selectedItem);\r\n        $buttom.appendTo($selectedItem); \r\n    }\r\n\r\n    CreateDropDownItemContent($dropDownItem, optionId, itemText, isSelected){\r\n        let checkBoxId = `${this.options.containerClass}-${this.hiddenSelect.name.toLowerCase()}-generated-id-${optionId.toLowerCase()}`;\r\n        let checked = isSelected ? \"checked\" : \"\";\r\n\r\n        let $dropDownItemContent= this.jQuery(`<div class=\"custom-control custom-checkbox\">\r\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"${checkBoxId}\" ${checked}>\r\n                <label class=\"custom-control-label\" for=\"${checkBoxId}\">${itemText}</label>\r\n        </div>`)\r\n        $dropDownItemContent.appendTo($dropDownItem);\r\n        $dropDownItem.addClass(this.options.dropDownItemClass)\r\n        let $checkBox = $dropDownItem.find(`INPUT[type=\"checkbox\"]`);\r\n        let adoptDropDownItem = (isSelected) => {\r\n            $checkBox.prop('checked', isSelected);\r\n        }\r\n        return adoptDropDownItem;\r\n    }\r\n\r\n    Init($container, $selectedPanel, $filterInputItem, $filterInput, $dropDownMenu){\r\n        const defSelectedPanelClass = 'form-control';\r\n        const defSelectedPanelStyle = {'margin-bottom': '0'}; // 16 is for bootstrap reboot for UL\r\n\r\n        $container.addClass(this.options.containerClass);\r\n\r\n        if (!this.options.selectedPanelClass){\r\n            $selectedPanel.addClass(defSelectedPanelClass);\r\n            $selectedPanel.css(defSelectedPanelStyle);\r\n            $selectedPanel.css({ \"min-height\" : this.options.selectedPanelMinHeight });\r\n        }\r\n        else {\r\n            $selectedPanel.addClass(this.options.selectedPanelClass);\r\n        }\r\n\r\n        let $hiddenSelect = this.jQuery(this.hiddenSelect);\r\n        if ($hiddenSelect.hasClass(\"is-valid\")){\r\n            $selectedPanel.addClass(\"is-valid\");\r\n        }\r\n        \r\n        if ($hiddenSelect.hasClass(\"is-invalid\")){\r\n            $selectedPanel.addClass(\"is-invalid\");\r\n        }\r\n\r\n        $dropDownMenu.addClass(this.options.dropDownMenuClass);\r\n\r\n        if (!this.options.filterInputItemClass)\r\n            $filterInputItem.addClass(this.options.filterInputItemClass)\r\n\r\n\r\n        if (!this.options.filterInputClass){\r\n            $filterInput.css(\"color\", this.options.filterInputColor);\r\n        } else {\r\n            $filterInput.addClass(this.options.filterInputClass);\r\n        }\r\n    }\r\n\r\n    Enable($selectedPanel, isEnabled){\r\n        if(isEnabled){\r\n            let inputId = this.hiddenSelect.id;\r\n            let $formGroup = this.jQuery(this.hiddenSelect).closest('.form-group');\r\n            \r\n            if ($formGroup.length == 1) {\r\n                let $label = $formGroup.find(`label[for=\"${inputId}\"]`);\r\n                let f = $label.attr('for');\r\n                let $filterInput = $selectedPanel.find('input');\r\n                if (f == this.hiddenSelect.id) {\r\n                    let id = `${this.options.containerClass}-generated-filter-id-${this.hiddenSelect.id}`;\r\n                    $filterInput.attr('id', id);\r\n                    $label.attr('for', id);\r\n                }\r\n            }\r\n        }\r\n        else{\r\n            if(!this.options.selectedPanelReadonlyClass){\r\n                $selectedPanel.css({\"background-color\": this.options.selectedPanelReadonlyBackgroundColor});\r\n            }else{\r\n                $selectedPanel.addClass(this.options.selectedPanelReadonlyClass);\r\n            }\r\n            $selectedPanel.find('BUTTON').prop(\"disabled\", true).off();\r\n        }\r\n    }\r\n\r\n    Hover($dropDownItem, isHover){\r\n        if (isHover)\r\n            $dropDownItem.addClass('text-primary').addClass('bg-light');\r\n        else\r\n            $dropDownItem.removeClass('text-primary').removeClass('bg-light');\r\n    }\r\n\r\n    FilterClick(event){\r\n        return !(event.target.nodeName == \"BUTTON\" || (event.target.nodeName == \"SPAN\" && event.target.parentElement.nodeName == \"BUTTON\"))\r\n    }\r\n\r\n    Focus($selectedPanel, isFocused){\r\n        if (isFocused){\r\n            if (this.options.selectedPanelFocusClass){\r\n                $selectedPanel.addClass(\"this.options.selectedPanelFocusClass\");\r\n            }\r\n            else\r\n            {\r\n                if ($selectedPanel.hasClass(\"is-valid\") &&  this.options.selectedPanelValidBoxShadow){\r\n                    $selectedPanel.css(\"box-shadow\", this.options.selectedPanelValidBoxShadow);              \r\n                } else if ($selectedPanel.hasClass(\"is-invalid\") && this.options.selectedPanelInvalidBoxShadow){\r\n                    $selectedPanel.css(\"box-shadow\", this.options.selectedPanelInvalidBoxShadow);\r\n                } else {\r\n                    $selectedPanel\r\n                        .css(\"box-shadow\", this.options.selectedPanelBoxShadow)\r\n                        .css(\"border-color\", this.options.selectedPanelBorderColor);\r\n                }\r\n            }\r\n\r\n        }else{\r\n            if (this.options.selectedPanelFocusClass){\r\n                $selectedPanel.removeClass(this.options.selectedPanelFocusClass);\r\n            } else {\r\n                $selectedPanel.css(\"box-shadow\", \"\" ).css(\"border-color\", \"\")\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Bootstrap4Adapter;","import $ from 'jquery'\nimport Popper from 'popper.js'\nimport Bootstrap4Adapter from './Bootstrap4Adapter.es8'\n\n// TODO: try to find convinient way to declare private members. Is it convinient enough to move them into IIFE?\nconst BsMultiSelect = ((window, $, Popper) => {\n    const JQUERY_NO_CONFLICT = $.fn[pluginName];\n    const pluginName = 'dashboardCodeBsMultiSelect';\n    const dataKey = `plugin_${pluginName}`;\n\n    const defSelectedPanelStyleSys = {'display':'flex', 'flex-wrap':'wrap', 'list-style-type':'none'};  // remove bullets since this is ul\n    const defFilterInputStyleSys   = {'width':'2ch', 'border':'0', 'padding':'0', 'outline':'none', 'background-color':'transparent' };\n    const defDropDownMenuStyleSys  = {'list-style-type':'none'}; // remove bullets since this is ul\n\n    const defaults = {\n        doManageFocus:true\n    }\n\n    class Plugin {\n        constructor(selectElement, options, adapter) {\n            if (typeof Popper === 'undefined') {\n                throw new TypeError('DashboardCode BsMultiSelect require Popper.js (https://popper.js.org)')\n            }\n\n            // readonly\n            this.selectElement = selectElement;\n            this.options = $.extend({}, defaults, options);\n\n            this.adapter = adapter?adapter:new Bootstrap4Adapter($, this.selectElement);\n            \n            this.container = null;\n            this.selectedPanel = null;\n            this.filterInputItem = null;\n            this.filterInput = null;\n            this.dropDownMenu = null;\n            this.popper = null;\n\n            // state\n            this.filterInputItemOffsetLeft = null; // used to detect changes in input field position (by comparision with current value)\n            this.skipFocusout = false; \n            this.hoveredDropDownItem = null;\n            this.hoveredDropDownIndex = null;\n            this.hasDropDownVisible = false;\n            this.init();\n        }\n\n        updateDropDownPosition(force) {\n            let offsetLeft = this.filterInputItem.offsetLeft;\n            if (force || this.filterInputItemOffsetLeft!=offsetLeft){\n                this.popper.update();\n                this.filterInputItemOffsetLeft=offsetLeft;\n            }\n        }\n\n        hideDropDown() {\n            this.dropDownMenu.style.display = 'none';\n        }\n\n        showDropDown() {\n            this.dropDownMenu.style.display = 'block';\n        }\n\n        // Public methods\n        resetDropDownMenuHover() {\n            if (this.hoveredDropDownItem !== null) {\n                this.adapter.Hover($(this.hoveredDropDownItem), false);\n                this.hoveredDropDownItem = null;\n            }\n            this.hoveredDropDownIndex = null;\n        }\n\n        filterDropDownMenu() {\n            let text = this.filterInput.value.trim().toLowerCase();\n            let visible = 0;\n            $(this.dropDownMenu).find('LI').each((i, dropDownMenuItem) => {\n                let $dropDownMenuItem = $(dropDownMenuItem);\n                if (text == '') {\n                    $dropDownMenuItem.show();\n                    visible++;\n                }\n                else {\n                    let itemText = $dropDownMenuItem.data(\"option-text\");\n                    let isSelected = $dropDownMenuItem.data(\"option-selected\"); \n                    if (!isSelected && itemText.indexOf(text)>=0) {\n                        $dropDownMenuItem.show();\n                        visible++;\n                    } else {\n                        $dropDownMenuItem.hide();\n                    }\n                }\n            });\n            this.hasDropDownVisible = visible > 0;\n            this.resetDropDownMenuHover();\n        }\n\n        clearFilterInput(updatePosition) {\n            if (this.filterInput.value) {\n                this.filterInput.value = '';\n                this.input(updatePosition);\n            }\n        }\n\n        closeDropDown() {\n            this.resetDropDownMenuHover();\n            this.clearFilterInput(true);\n            this.hideDropDown();\n        }\n\n        appendDropDownItem(optionElement) {\n            let optionId = optionElement.value;\n            let itemText = optionElement.text;\n            let isSelected = optionElement.selected;\n            let $dropDownItem = $(\"<LI/>\");\n            $dropDownItem.data(\"option-id\", optionId);\n            $dropDownItem.data(\"option-text\", itemText.toLowerCase());\n\n            let adoptDropDownItem = this.adapter.CreateDropDownItemContent($dropDownItem, optionId, itemText, isSelected)\n            $dropDownItem.appendTo(this.dropDownMenu);\n\n            let appendItem = () => {\n                $dropDownItem.data(\"option-selected\", true);\n                let $selectedItem = $(\"<LI/>\");\n                $selectedItem.data(\"option-id\", optionId);\n                optionElement.selected = true;\n                adoptDropDownItem(true);\n\n                let removeItem = () => {\n                    $dropDownItem.data(\"option-selected\", false);\n                    $dropDownItem.data(\"option-toggle\", appendItem);\n                    $selectedItem.data(\"option-remove\", null);\n                    $selectedItem.remove();\n                    optionElement.selected = false;\n                    adoptDropDownItem(false);\n                };\n                let removeItemAndCloseDropDown = () => {\n                    removeItem();\n                    this.closeDropDown();\n                };\n                this.adapter.CreateSelectedItemContent(\n                    $selectedItem, \n                    itemText, \n                    removeItemAndCloseDropDown\n                );\n                $selectedItem.insertBefore(this.filterInputItem);\n                $dropDownItem.data(\"option-toggle\", removeItem);\n                $selectedItem.data(\"option-remove\", removeItemAndCloseDropDown);\n                return $selectedItem;\n            }\n            $dropDownItem.data(\"option-toggle\", () => appendItem());\n            \n            if (isSelected) {\n                appendItem();\n            }\n        }\n\n        keydownArrow(down) {\n            let visibleNodeListArray = $(this.dropDownMenu).find('LI:not([style*=\"display: none\"])').toArray();\n            if (visibleNodeListArray.length > 0) {\n                if (this.hasDropDownVisible) {\n                    this.updateDropDownPosition(true);\n                    this.showDropDown();\n                }\n                if (this.hoveredDropDownItem === null) {\n                    this.hoveredDropDownIndex = down ? 0 : visibleNodeListArray.length - 1;\n                }\n                else {\n                    this.adapter.Hover($(this.hoveredDropDownItem), false);\n                    if (down) {\n                        let newIndex = this.hoveredDropDownIndex + 1;\n                        this.hoveredDropDownIndex = newIndex < visibleNodeListArray.length ? newIndex : 0;\n                    } else {\n                        let newIndex = this.hoveredDropDownIndex - 1;\n                        this.hoveredDropDownIndex = newIndex >= 0 ? newIndex : visibleNodeListArray.length - 1;\n                    }\n                }\n                this.hoveredDropDownItem = visibleNodeListArray[this.hoveredDropDownIndex];\n                this.adapter.Hover($(this.hoveredDropDownItem), true);\n            }\n        }\n\n        input(forceUpdatePosition) {\n            this.filterInput.style.width = this.filterInput.value.length*1.3 + 2 + \"ch\";\n            this.filterDropDownMenu();\n            if (this.hasDropDownVisible) {\n                if (forceUpdatePosition) // ignore it if it is called from \n                    this.updateDropDownPosition(forceUpdatePosition); // we need it to support case when textbox changes its place because of line break (texbox grow with each key press)\n                this.showDropDown();\n            } else {\n                this.hideDropDown();\n            }\n        }\n\n        init() {\n            let $hiddenSelect = $(this.selectElement);\n            $hiddenSelect.hide();\n            let disabled = this.selectElement.disabled;\n\n            let $container = $(\"<DIV/>\");\n            this.container = $container.get(0);\n\n            let $selectedPanel = $(\"<UL/>\");\n            $selectedPanel.css(defSelectedPanelStyleSys);\n            \n            this.selectedPanel = $selectedPanel.get(0);\n            \n            $selectedPanel.appendTo(this.container);\n\n            let $filterInputItem = $('<LI/>');\n            this.filterInputItem = $filterInputItem.get(0)\n\n            $filterInputItem.appendTo(this.selectedPanel);\n\n            let $filterInput = $('<INPUT type=\"search\" autocomplete=\"off\">');\n            $filterInput.css(defFilterInputStyleSys);\n            $filterInput.appendTo(this.filterInputItem);\n            this.filterInput = $filterInput.get(0);\n\n            let $dropDownMenu = $(\"<UL/>\")\n                .css({\"display\":\"none\"})\n                .appendTo($container);\n            this.dropDownMenu = $dropDownMenu.get(0);\n            \n            // prevent heavy understandable styling error\n            $dropDownMenu.css(defDropDownMenuStyleSys);\n\n            this.adapter.Init($container, $selectedPanel, $filterInputItem, $filterInput, $dropDownMenu);\n            $container.insertAfter($hiddenSelect);\n            \n            this.popper = new Popper(this.filterInput, this.dropDownMenu, {\n                placement: 'bottom-start',\n                modifiers: {\n                    preventOverflow: {enabled:false},\n                    hide: {enabled:false},\n                    flip: { enabled:false }\n                    }\n            });\n            \n            // some browsers (IE11) can change select value (\"autocomplete\") after page is loaded but before \"ready\" event\n            $(document).ready(() => {\n                let selectOptions = $hiddenSelect.find('OPTION');\n                selectOptions.each(\n                    (index, optionElement) => {\n                        this.appendDropDownItem(optionElement);\n                    }\n                );\n                this.hasDropDownVisible = selectOptions.length > 0;\n                this.updateDropDownPosition(false);\n\n                $dropDownMenu.find('LI').click(event => {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    let toggleItem = $(event.currentTarget).closest(\"LI\").data(\"option-toggle\");\n                    toggleItem();\n                    this.filterInput.focus(); \n                });\n\n                $dropDownMenu.find(\"LI\").on(\"mouseover\", event => {\n                    this.adapter.Hover($(event.target).closest(\"LI\"), true);\n                });\n\n                $dropDownMenu.find(\"LI\").on(\"mouseout\", event => {\n                    this.adapter.Hover($(event.target).closest(\"LI\"), false);\n                });\n\n                if (disabled) {\n                    this.filterInput.style.display = \"none\";\n                    this.adapter.Enable($selectedPanel, false);\n                } else {\n                    this.filterInput.style.display = \"inline-block\";\n                    this.adapter.Enable($selectedPanel, true);\n                    \n                    $selectedPanel.click((event) => {\n                        if (event.target.nodeName != \"INPUT\")\n                            $filterInput.val('').focus();\n                        if (this.hasDropDownVisible)\n                            if (this.adapter.FilterClick(event)){\n                                this.updateDropDownPosition(true);\n                                this.showDropDown();\n                            }\n                    });\n    \n                    $dropDownMenu.click((event) => {\n                        event.stopPropagation();\n                    });\n    \n                    $dropDownMenu.on(\"mouseover\", () => this.resetDropDownMenuHover());\n    \n                    if (this.options.doManageFocus)\n                    {\n                        $filterInput.focusin(() => {\n                            this.adapter.Focus($selectedPanel, true);\n                        });\n    \n                        $filterInput.focusout(() => {\n                            if (!this.skipFocusout) {\n                                this.adapter.Focus($selectedPanel, false);\n                            }\n                        });\n    \n                        $container.mousedown(() => {\n                            this.skipFocusout = true;\n                        });\n    \n                        $(window.document).mouseup(() => {\n                            this.skipFocusout = false;\n                        });\n                    }\n    \n                    $(window.document).mouseup((event) => {\n                        if (!(this.container === event.target || $.contains(this.container, event.target))) {\n                            this.closeDropDown();\n                        }\n                    });\n                }\n            });\n\n            $filterInput.on(\"keydown\", (event) => {\n                if (event.which == 38) {\n                    event.preventDefault();\n                    this.keydownArrow(false);\n                }\n                else if (event.which == 40) {\n                    event.preventDefault()\n                    this.keydownArrow(true);\n                }\n                else if (event.which == 13) {\n                    event.preventDefault();\n                }\n                else if (event.which == 9) {\n                    if (this.filterInput.value) {\n                        event.preventDefault();\n                    }\n                    else {\n                        this.closeDropDown();\n                    }\n                }\n                else {\n                    if (event.which == 8) {\n                        // NOTE: this will process backspace only if there are no text in the input field\n                        // If user will find this inconvinient, we will need to calculate something like this\n                        // this.isBackspaceAtStartPoint = (this.filterInput.selectionStart == 0 && this.filterInput.selectionEnd == 0);\n                        if (!this.filterInput.value)\n                        {\n                            let $penult = $(this.selectedPanel).find(\"LI:last\").prev();\n                            if ($penult.length){\n                                let removeItem = $penult.data(\"option-remove\");\n                                removeItem();\n                            }\n                            this.updateDropDownPosition(false);\n                        }\n                    }\n                    this.resetDropDownMenuHover();\n                }\n            });\n\n            $filterInput.on(\"keyup\", (event) => {\n                if (event.which == 13 || event.which == 9 ) {\n                    if (this.hoveredDropDownItem) {\n                        let $hoveredDropDownItem = $(this.hoveredDropDownItem);\n                        let toggleItem =  $hoveredDropDownItem.data(\"option-toggle\");\n                        toggleItem();\n                        this.closeDropDown();\n                    } else {\n                        let text = this.filterInput.value.trim().toLowerCase();\n                        let dropDownItems = this.dropDownMenu.querySelectorAll(\"LI\");\n                        let dropDownItem = null;\n                        for (let i = 0; i < dropDownItems.length; ++i) {\n                            let it = dropDownItems[i];\n                            if (it.textContent.trim().toLowerCase() == text)\n                            {\n                                dropDownItem=it;\n                                break;\n                            }\n                        }\n                        if (dropDownItem) {\n                            let $dropDownItem = $(dropDownItem);\n                            let isSelected = $dropDownItem.data(\"option-selected\");\n                            if (!isSelected){\n                                let toggle = $dropDownItem.data(\"option-toggle\");\n                                toggle();\n                            }\n                            this.clearFilterInput(true);\n                        }\n                    }\n                } \n                else if (event.which == 27) { // escape\n                    this.closeDropDown();\n                }\n            });\n\n            $filterInput.on('input', () => { \n                this.input(true);\n            });\n        }\n    }\n\n    function jQueryInterface(options) {\n        return this.each(function () {\n            let data = $(this).data(dataKey)\n\n            if (!data) {\n                if (/dispose|hide/.test(options)) {\n                    return;\n                }\n                const optionsObject = (typeof options === 'object')?options:null;\n                data = new Plugin(this, optionsObject);\n                $(this).data(dataKey, data);\n            }\n\n            if (typeof options === 'string') {\n                let methodName = options;\n                if (typeof data[methodName] === 'undefined') {\n                    throw new TypeError(`No method named \"${methodName}\"`)\n                }\n                data[methodName]()\n            }\n        })\n    }\n\n    $.fn[pluginName] = jQueryInterface;\n\n    // in case of mulitple $(this) it will return 1st element plugin instance\n    $.fn[pluginName.charAt(0).toUpperCase() + pluginName.slice(1)] = function () {\n        return $(this).data(\"plugin_\" + pluginName);\n    };\n\n    $.fn[pluginName].Constructor = Plugin;\n\n    $.fn[pluginName].noConflict = function () {\n        $.fn[pluginName] = JQUERY_NO_CONFLICT\n        return jQueryInterface;\n    }\n    return Plugin;\n})(window, $, Popper);\n\nexport default BsMultiSelect;\n"],"names":["Bootstrap4Adapter","jQuery","hiddenSelect","options","defaults","selectedPanelDefMinHeight","selectedPanelReadonlyBackgroundColor","selectedPanelBoxShadow","selectedPanelBorderColor","selectedPanelValidBoxShadow","selectedPanelInvalidBoxShadow","filterInputColor","containerClass","dropDownMenuClass","dropDownItemClass","selectedPanelClass","selectedPanelFocusClass","selectedPanelReadonlyClass","selectedItemClass","removeSelectedItemButtonClass","filterInputItemClass","filterInputClass","extend","CreateSelectedItemContent","$selectedItem","itemText","removeSelectedItem","defSelectedItemClass","defSelectedItemStyle","defRemoveSelectedItemButtonClass","defRemoveSelectedItemButtonStyle","addClass","css","$text","$buttom","on","appendTo","CreateDropDownItemContent","$dropDownItem","optionId","isSelected","checkBoxId","name","toLowerCase","checked","$dropDownItemContent","$checkBox","find","adoptDropDownItem","prop","Init","$container","$selectedPanel","$filterInputItem","$filterInput","$dropDownMenu","defSelectedPanelClass","defSelectedPanelStyle","selectedPanelMinHeight","$hiddenSelect","hasClass","Enable","isEnabled","inputId","id","$formGroup","closest","length","$label","f","attr","off","Hover","isHover","removeClass","FilterClick","event","target","nodeName","parentElement","Focus","isFocused","BsMultiSelect","window","$","Popper","JQUERY_NO_CONFLICT","fn","pluginName","dataKey","defSelectedPanelStyleSys","defFilterInputStyleSys","defDropDownMenuStyleSys","doManageFocus","Plugin","selectElement","adapter","TypeError","container","selectedPanel","filterInputItem","filterInput","dropDownMenu","popper","filterInputItemOffsetLeft","skipFocusout","hoveredDropDownItem","hoveredDropDownIndex","hasDropDownVisible","init","updateDropDownPosition","force","offsetLeft","update","hideDropDown","style","display","showDropDown","resetDropDownMenuHover","filterDropDownMenu","text","value","trim","visible","each","i","dropDownMenuItem","$dropDownMenuItem","show","data","indexOf","hide","clearFilterInput","updatePosition","input","closeDropDown","appendDropDownItem","optionElement","selected","appendItem","removeItem","remove","removeItemAndCloseDropDown","insertBefore","keydownArrow","down","visibleNodeListArray","toArray","newIndex","forceUpdatePosition","width","disabled","get","insertAfter","placement","modifiers","preventOverflow","enabled","flip","document","ready","selectOptions","index","click","preventDefault","stopPropagation","toggleItem","currentTarget","focus","val","focusin","focusout","mousedown","mouseup","contains","which","$penult","prev","$hoveredDropDownItem","dropDownItems","querySelectorAll","dropDownItem","it","textContent","toggle","jQueryInterface","test","optionsObject","methodName","charAt","toUpperCase","slice","Constructor","noConflict"],"mappings":"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"}