{"version":3,"sources":["../../js/src/FilterPanel.js","../../js/src/OptionsPanel.js","../../js/src/SelectionsPanel.js","../../js/src/removeElement.js","../../js/src/MultiSelectInputAspect.js","../../js/src/MultiSelect.js","../../js/src/Tools.js","../../js/src/Bs4StylingMethodCss.js","../../js/src/Bs4StylingMethodJs.js","../../js/src/Bs4Styling.js","../../js/src/Bs4SelectedItemContent.js","../../js/src/Bs4DropDownItemContent.js","../../js/src/BsMultiSelect.js","../../js/src/AddToJQueryPrototype.js","../../js/src/OptionsAdapters.js","../../js/src/LabelAdapter.js"],"names":["FilterPanel","createElement","insertIntoDom","onFocusIn","onFocusOut","onKeyDownArrowUp","onKeyDownArrowDown","onTabForEmpty","onBackspace","onEnterOrTabToCompleate","onEmptyEscape","onInput","s","inputElement","setAttribute","style","width","border","padding","outline","backgroundColor","onfilterInputKeyDown","event","indexOf","which","value","preventDefault","onFilterInputKeyUp","onFilterInputInput","filterInputValue","length","setEmptyLength","addEventListener","input","isEmpty","setEmpty","setFocus","focus","isEventTarget","target","dispose","removeEventListener","OptionsPanel","document","container","dropDownItemContent","styling","getVisibleMultiSelectDataList","resetFilter","updateDropDownLocation","filterPanelSetFocus","dropDownMenu","display","listStyleType","hoveredMultiSelectData","hoveredMultiSelectDataIndex","candidateToHoveredMultiSelectData","skipFocusout","inShowDropDown","containerMousedown","documentMouseup","contains","hideDropDown","setInShowDropDown","setTimeout","resetCandidateToHoveredMultiSelectData","showDropDown","hoverInInternal","index","HoverIn","dropDownMenuItemElement","resetDropDownMenuHover","HoverOut","processCandidateToHovered","visibleIndex","toggleHovered","toggle","getSkipFocusout","resetSkipFocusout","keyDownArrow","down","visibleMultiSelectDataList","newIndex","i","visible","insertDropDownItem","MultiSelectData","createSelectedItemGen","triggerChange","isSelected","isOptionDisabled","onDropDownMenuItemElementMouseover","onDropDownMenuItemElementMouseleave","appendChild","content","option","setDropDownItemContentDisabled","disabledStyle","disable","createSelectedItem","DropDownItemContent","DisposeDropDownMenuItemElement","onSelected","excludedFromSearch","SelectionsPanel","init","selectedItemContent","isComponentDisabled","onRemove","onClick","preventDefaultClick","selectedPanel","flexWrap","filterInputItem","MultiSelectDataSelectedTail","selectedPanelClick","iterateAll","isDisabled","selectedPrev","insert","selectedItemElement","this","insertBefore","selectedNext","removeSelectedItem","e","selected","select","parentNode","removeChild","SelectedItemContent","jqEvent","originalEvent","removeSelectedTail","resetMultiSelectDataSelectedTail","enable","MultiSelectInputAspect","Popper","popper","placement","modifiers","preventOverflow","enabled","hide","flip","filterInputItemOffsetLeft","preventDefaultClickEvent","alignToFilterInputItemLocation","force","offsetLeft","update","destroy","alignAndShowDropDown","setPreventDefaultMultiSelectEvent","filterMultiSelectData","isFiltered","MultiSelect","optionsAdapter","labelAdapter","createStylingComposite","configuration","onDispose","window","TypeError","visibleCount","selectionsPanel","optionsPanel","stylingComposite","resetMultiSelectDataList","MultiSelectDataList","filteredMultiSelectDataList","filterPanel","processEmptyInput","multiSelectData","isHidden","resetFilterDropDownMenu","Update","UpdateIsValid","getIsValid","getIsInvalid","UpdateSize","UpdateDisabled","UpdateOption","_this","searchText","text","toLowerCase","trim","p1","p2","p3","removeDropDownMenuItemElement","UpdateData","updateDataImpl","createDropDownItems","options","_this2","getOptions","disabled","hidden","remove","push","aspect","readyState","createDropDownItemsHandler","Dispose","getDisabled","Disable","Enable","resetLength","list","j","collectFilterDropDownMenu","fullMatchMultiSelectData","name","_this3","lazyfilterItemInputElementAtach","filterItemInputElement","filterItemElement","FocusIn","FocusOut","Init","afterContainerFilled","ExtendIfUndefined","destination","source","property","undefined","bs4StylingMethodCssDefaults","selectedPanelFocusClass","selectedPanelDisabledClass","dropDownItemDisabledClass","defSelectedPanelStyle","margin-bottom","height","bs4StylingMethodJsDefaults","selectedPanelDefMinHeight","selectedPanelLgMinHeight","selectedPanelSmMinHeight","selectedPanelDisabledBackgroundColor","selectedPanelFocusBorderColor","selectedPanelFocusBoxShadow","selectedPanelFocusValidBoxShadow","selectedPanelFocusInvalidBoxShadow","filterInputColor","bs4StylingDefaults","containerClass","dropDownMenuClass","dropDownItemClass","dropDownItemHoverClass","selectedPanelClass","selectedItemClass","removeSelectedItemButtonClass","filterInputItemClass","filterInputClass","bs4StylingMethodCssdefaults","selectedItemContentDisabledClass","defSelectedItemStyle","padding-left","line-height","defRemoveSelectedItemButtonStyle","font-size","selectedItemContentDisabledOpacity","bs4SelectedItemContentDefaults","dropdDownLabelDisabledColor","$","bs4DropDownItemContentDefaults","pluginName","createPlugin","firstChar","charAt","firstCharLower","prototypableName","slice","noConflictPrototypable","fn","dataKey","prototypable","each","$e","instance","data","isMethodName","test","removeData","methodName","noConflict","AddToJQueryPrototype","element","settings","extend","preBuildConfiguration","trigger","$element","eventName","firstChild","createInputId","id","label","$formGroup","closest","$label","find","get","getAttribute","selectElement","getElementsByTagName","nextSibling","classList","OptionsAdapterElement","backupedFor","stylingMethod","filterInput","newId","useCss","adapter","$selectedPanel","removeClass","addClass","OnInit","composite","css","$filterInput","hasClass","$container","$dropDownMenu","$filterInputItem","isValid","isInvalid","dropDownItem","selectedItemContentStylingMethod","disableSelectedItemContent","$content","createSelectedItemContent","$selectedItem","$button","selectedItem","optionItem","appendTo","on","prop","unbind","bs4DropDownItemContent","dropDownItemContentStylingMethod","$checkBox","$checkBoxLabel","isDisbaled","$dropDownItem","$dropDownItemContent","multiSelect","postBuildConfiguration"],"mappings":";;;;;qPAEA,SAASA,EACDC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAGJ,IAhB4BC,EAgBxBC,EAAeZ,EAAc,SAEjCY,EAAaC,aAAa,OAAO,UACjCD,EAAaC,aAAa,eAAe,QAnBbF,EAqBLC,EAAaE,OArBFC,MAAM,MAAOJ,EAAEK,OAAO,IAAKL,EAAEM,QAAQ,IAAKN,EAAEO,QAAQ,OAAQP,EAAEQ,gBAAgB,cAuBhHlB,EAAcW,GAEa,SAAvBQ,EAAwBC,IACmB,GAAvC,CAAC,GAAI,GAAI,GAAI,IAAIC,QAAQD,EAAME,QAA6B,GAAfF,EAAME,OAAcX,EAAaY,QAC9EH,EAAMI,iBAGS,IAAfJ,EAAME,MACNnB,IAEoB,IAAfiB,EAAME,MACXlB,IAEoB,GAAfgB,EAAME,MACNX,EAAaY,OACblB,IAGe,GAAfe,EAAME,QAINX,EAAaY,OAEdjB,KAKa,SAArBmB,EAAsBL,GACH,IAAfA,EAAME,OAA8B,GAAfF,EAAME,MAC3Bf,IAEoB,IAAfa,EAAME,OACXd,IAQiB,SAArBkB,IACA,IAAIC,EAAmBhB,EAAaY,MACpCd,EACIkB,EACA,WAAA,OAAKhB,EAAaE,MAAMC,MAAgC,IAAxBa,EAAiBC,OAAa,EAAI,OAU1E,SAASC,IACLlB,EAAaE,MAAMC,MAAM,MAQ7B,OAfAH,EAAamB,iBAAiB,UAAW7B,GACzCU,EAAamB,iBAAiB,WAAY5B,GAC1CS,EAAamB,iBAAiB,UAAWX,GACzCR,EAAamB,iBAAiB,QAASL,GACvCd,EAAamB,iBAAiB,QAASJ,GAWhC,CACHK,MAAMpB,EACNqB,QAFG,WAGC,OAAOrB,EAAaY,OAExBU,SAVJ,WACItB,EAAaY,MAAO,GACpBM,KASAA,eAAAA,EACAK,SAPG,WAQCvB,EAAawB,SAEjBC,cAVG,SAUWhB,GACV,OAAOA,EAAMiB,QAAU1B,GAE3B2B,QAbG,WAcC3B,EAAa4B,oBAAoB,UAAWtC,GAC5CU,EAAa4B,oBAAoB,WAAYrC,GAC7CS,EAAa4B,oBAAoB,UAAWpB,GAC5CR,EAAa4B,oBAAoB,QAASd,GAC1Cd,EAAa4B,oBAAoB,QAASb,KCxGtD,SAASc,EAAaC,EAAUC,EAAWC,EAAqBC,EACxDC,EAA+BC,EAAYC,EAAwBC,GACvE,IAAIC,EAAeR,EAAS1C,cAAc,MAC1CkD,EAAapC,MAAMqC,QAAQ,OAGHD,EAAapC,MARFsC,cAAc,OASjD,IAAIC,EAAuB,KACvBC,EAA8B,KAC9BC,EAAkC,KAElCC,GAAe,EACfC,GAAiB,EAGjBC,EAAqB,WACrBF,GAAe,GAIfG,EAAkB,SAAStC,GAErBsB,IAActB,EAAMiB,QAAUK,EAAUiB,SAASvC,EAAMiB,UACzDuB,IACAd,MAIR,SAASe,IACLL,GAAiB,EACbM,WAAY,WACRN,EAAiB,MAClB,GAGX,SAASI,IACDN,GACAS,IAE8B,QAA9Bd,EAAapC,MAAMqC,UAEnBD,EAAapC,MAAMqC,QAAU,OAE7BR,EAAUH,oBAAoB,YAAakB,GAC3ChB,EAASF,oBAAoB,UAAWmB,IAIhD,SAASM,IAC6B,SAA9Bf,EAAapC,MAAMqC,UAEnBW,IACAZ,EAAapC,MAAMqC,QAAU,QAE7BR,EAAUZ,iBAAiB,YAAa2B,GACxChB,EAASX,iBAAiB,UAAW4B,IAIvB,SAAlBO,EAA2BC,GAC3Bb,EAA8Ba,EAC9Bd,EAAyBP,IAAgCqB,GACzDtB,EAAQuB,QAAQf,EAAuBgB,yBAG3C,SAASC,IACDjB,IACAR,EAAQ0B,SAASlB,EAAuBgB,yBAExCf,EADAD,EAAyB,MAKjC,IAAIW,EAAyC,WACzCT,EAAkCc,wBAAwB7B,oBAAoB,YAAagC,GAC3FjB,EAAkCc,wBAAwB7B,oBAAoB,YAAagC,GAC3FjB,EAAoC,MAGpCiB,EAA4B,WACxBnB,GAA0BE,IAE1Be,IACAJ,EAAgBX,EAAkCkB,eAEnDlB,GACCS,KAiKR,MAdW,CACPd,aAAAA,EACAgB,gBAAAA,EACAI,uBAAAA,EACAR,kBAAAA,EACAG,aAAAA,EACAJ,aAAAA,EACAa,cAvJJ,WACQrB,IACAA,EAAuBsB,SACvBL,IACAT,IACAd,MAmJJ6B,gBAAkB,WAAY,OAAOpB,GACrCqB,kBAAoB,WAAYrB,GAAa,GAC7CsB,aAjJJ,SAAsBC,GAClB,IAAIC,EAA6BlC,IAC7BjB,EAASmD,EAA2BnD,OACpCoD,EAAS,KACb,GAAa,EAATpD,EACA,GAAIkD,EAEA,IADA,IAAIG,EAAiC,MAA7B5B,EAAkC,EAAEA,EAA4B,EAClE4B,EAAErD,GAAO,CACX,GAAImD,EAA2BE,GAAGC,QAAQ,CACtCF,EAASC,EACT,MAEJA,SAIJ,IADA,IAAIA,EAAiC,MAA7B5B,EAAkCzB,EAAO,EAAEyB,EAA4B,EACtE,GAAH4B,GAAK,CACP,GAAIF,EAA2BE,GAAGC,QAAQ,CACtCF,EAASC,EACT,MAEJA,IAKE,MAAVD,IAEI5B,GACAR,EAAQ0B,SAASlB,EAAuBgB,yBAC5CrB,IACAiB,IACAC,EAAgBe,KAkHpBG,mBAtFJ,SAA4BC,EAAiBC,EAAuBC,EAAeC,EAAYC,GAQlD,SAArCC,IAAqC,OAhCaL,EAiClDA,EAjCmEhB,EAkCnEA,OAhCAZ,GAEGF,GACCS,IAEJT,EAAoC8B,EACpChB,EAAwBtC,iBAAiB,YAAayC,GACtDH,EAAwBtC,iBAAiB,YAAayC,IAIlDnB,GAAwBgC,IAKxBf,IACAJ,EAAgBmB,EAAgBZ,gBAnBK,IAASY,EAAiBhB,EAyBvE,IAAIA,EAA0B3B,EAAS1C,cAAc,MAgBX,SAAtC2F,IAAsC,OAAMrB,IAJhDD,EAAwBtC,iBAAiB,YAAa2D,GAKtDrB,EAAwBtC,iBAAiB,aAAc4D,GAEvDzC,EAAa0C,YAAYvB,GAEzB,IAAIwB,EAAUjD,EAAoByB,EAAyBgB,EAAgBS,QAStC,SAAjCC,EAAkCF,EAAUL,GAC5CK,EAAQG,eAAc,GAEtBH,EAAQI,SAAST,GAYI,SAArBU,IAAqB,OAAMZ,EAC3BD,EACAI,EACA,WAAA,OAAMM,EAA+BF,GAAS,KA1BlDR,EAAgBhB,wBAA0BA,EAC1CgB,EAAgBc,oBAAsBN,EAEtCR,EAAgBe,+BAAiC,WAC7C/B,EAAwB7B,oBAAoB,YAAckD,GAC1DrB,EAAwB7B,oBAAoB,aAAcmD,IAS1DF,GACAM,EAA+BF,EAASL,GAE5CK,EAAQQ,WAAY,WAChBhB,EAAgBV,SAChB1B,MAUAuC,EAEAU,KAIAb,EAAgBiB,mBAAsBb,EAElCJ,EAAgBV,OADhBc,EACyB,aAEA,WACrBS,IACAX,QC5NpB,SAASgB,EACLvG,EACAwG,EACAC,EACAC,EACAnB,EACAoB,EACAC,EACAC,GAKA,IAf8BlG,EAe1BmG,EAAgB9G,EAAc,OAfJW,EAgBLmG,EAAchG,OAhBHqC,QAAQ,OAAQxC,EAAEoG,SAAS,OAAQpG,EAAEyC,cAAc,OAiBvF,IAAI4D,EAAkBhH,EAAc,MACpC8G,EAAclB,YAAYoB,GAE1BR,EAAKQ,GACL,IAAIC,EAA8B,KAsGT,SAArBC,EAAqB7F,GACrBuF,EAAQvF,GAGZ,SAAS8F,EAAWC,GAEhB,IADA,IAAIlC,EAAI+B,EACF/B,GACFA,EAAEe,QAAQmB,GACVlC,EAAIA,EAAEmC,aA+Bd,MA3BW,CACPP,cAAAA,EACAE,gBAAAA,EACAM,OAHO,SAGAC,GACHC,KAAKV,cAAcW,aAAaF,EAAqBP,IAEzDd,mBAjGJ,SAASA,EAAmBb,EAAiBI,EAAkBM,GAC3D,IAAIwB,EAAsBvH,EAAc,MACxCqF,EAAgBkC,oBAAsBA,EAClCN,KACAA,EAA4BS,aAAerC,GAC3BgC,aAAeJ,GAIV,SAArBU,ICvDZ,IAAuBC,ED+BavC,EAyBxBA,EAAgBS,OAAO+B,UAAW,GAClCxC,EAAgBiB,mBAAqBb,IAGjCM,EAA+BV,EAAgBc,qBAAqB,GACpEd,EAAgBV,OAAS,cAIzBU,EAAgBV,OAAS,WACrBuB,EAAmBb,EAAiBI,EAAkBM,GACtDR,KAGRF,EAAgBc,oBAAoB2B,QAAO,ICtEhCF,EDuEGL,GCvEGQ,WAAWC,YAAYJ,GDwExCvC,EAAgB4C,oBAAoB1F,UACpC8C,EAAgB4C,oBAAoB,KACpC5C,EAAgBkC,oBAAoB,MA3CZlC,EA6CDA,GA5CPgC,eACfhC,EAAgBgC,aAAcK,aAAerC,EAAgBqC,cAE9DrC,EAAgBqC,eAChBrC,EAAgBqC,aAAcL,aAAehC,EAAgBgC,cAE7DJ,GAA+B5B,IAC/B4B,EAA8B5B,EAAgBgC,cAElDhC,EAAgBqC,aAAa,KAC7BrC,EAAgBgC,aAAa,KAmCzB9B,KAxBJ0B,EAA8B5B,GAmDd4C,oBAAsBxB,EAClCc,EACAlC,EAAgBS,OATY,SAACoC,GAC7BnE,WAAY,WALZ4D,IACAhB,KAMG,GACHE,EAAoBqB,EAAQC,iBAQlB,SAAVlC,EAAWmB,GAAD,OACV/B,EAAgB4C,oBAAoBhC,QAAQmB,GAChDnB,EAAQS,GAERrB,EAAgBS,OAAO+B,UAAW,EAClCxC,EAAgBiB,oBAAqB,EAErCjB,EAAgBY,QAAUA,EAC1Ba,EAAcW,aAAaF,EAAqBP,GAGhD3B,EAAgBV,OAAS,WAAA,OAAMgD,KAC/BtC,EAAgBc,oBAAoB2B,QAAO,IAuB3CM,mBAvHJ,WACQnB,GACAA,EAA4BtC,UAsHhC0D,iCARO,WASHpB,EAA8B,MAElCqB,OAXO,WAaHnB,IADAH,EAAgBlG,MAAMqC,QAAU,cAEhC2D,EAAc/E,iBAAiB,QAASmF,IAG5CjB,QAjBO,WAkBHe,EAAgBlG,MAAMqC,QAAU,OAChCgE,GAAW,GACXL,EAActE,oBAAoB,QAAS0E,IAG/C3E,QAvBO,WAwBHuE,EAActE,oBAAoB,QAAS0E,KEjKvD,SAASqB,EACL7F,EACAC,EACAmE,EACAE,EACA9D,EACAe,EACAnB,EACA0F,GAGA7F,EAAUiD,YAAYkB,GACtBnE,EAAUiD,YAAY1C,GAEtB,IAAIuF,EAAS,IAAID,EACbxB,EACA9D,EACA,CACIwF,UAAW,eACXC,UAAW,CACPC,gBAAiB,CAACC,SAAQ,GAC1BC,KAAM,CAACD,SAAQ,GACfE,KAAM,CAACF,SAAQ,MAKvBG,EAA4B,KAC5BC,EAA2B,KAa/B,SAASC,EAA+BC,GACpC,IAAIC,EAAapC,EAAgBoC,YAC7BD,GAASH,GAA6BI,IACtCX,EAAOY,SACPL,EAA0BI,GAIlC,MAAO,CACH7G,QADG,WAECkG,EAAOa,WAEXJ,+BAAAA,EACAK,qBAxBJ,SAA8BlI,GACtB4H,GAA4B5H,GACiB,EAAzCyB,IAAgCjB,SAEhCqH,GAA+B,GAC/BjF,KAGRgF,EAAyB,MAiBzBO,kCANG,SAM+BnI,GAC9B4H,EAA2B5H,IClDvC,SAASoI,EAAsBpE,EAAiBqE,EAAYjF,GACxDY,EAAgBF,QAAUuE,EAC1BrE,EAAgBZ,aAAeA,EAC/BY,EAAgBhB,wBAAwBvD,MAAMqC,QAAUuG,EAAa,QAAS,qGAoC5EC,aACF,SAAAA,EAAYC,EAAgB/G,EACxB4D,EAAqB7D,EACrBiH,EAAcC,EACdC,EAAeC,EAAWC,GAC1B,GAAsB,oBAAXzB,EACP,MAAM,IAAI0B,UAAU,yEAIxB1C,KAAKoC,eAAiBA,EACtBpC,KAAK7E,UAAYiH,EAAejH,UAChC6E,KAAK3E,QAAUA,EACf2E,KAAKf,oBAAsBA,EAC3Be,KAAK5E,oBAAsBA,EAC3B4E,KAAKqC,aAAeA,EACpBrC,KAAKsC,uBAAyBA,EAC9BtC,KAAKuC,cAAgBA,EACrBvC,KAAKwC,UAAYA,EACjBxC,KAAKyC,OAASA,EACdzC,KAAK9E,SAAWuH,EAAOvH,SAIvB8E,KAAK2C,aAAa,GAElB3C,KAAK4C,gBAAkB,KACvB5C,KAAKR,gBAAkB,KACvBQ,KAAK6C,aAAe,KAEpB7C,KAAK8C,iBAAmB,KAGxB9C,KAAK7D,gBAAkB,KACvB6D,KAAK9D,mBAAqB,KAG1B8D,KAAKd,oBAAsB,KAC3Bc,KAAKwB,0BAA4B,KAEjCxB,KAAK+C,sDAGTA,yBAAA,WACI/C,KAAKgD,oBAAsB,GAC3BhD,KAAKiD,4BAA8B,QAIvC3H,8BAAA,WACI,OAAI0E,KAAKiD,4BACEjD,KAAKiD,4BAELjD,KAAKgD,uBAGpBzH,YAAA,WACSyE,KAAKkD,YAAYzI,YAClBuF,KAAKkD,YAAYxI,WACjBsF,KAAKmD,wBAIbA,kBAAA,WACInD,KAAKkD,YAAY5I,iBAjGzB,SAAiC0I,GAC7B,IAAI,IAAItF,EAAE,EAAGA,EAAEsF,EAAoB3I,OAAQqD,IAC3C,CACI,IAAI0F,EAAkBJ,EAAoBtF,GACpC0F,EAAgBC,UAElBpB,EAAsBmB,GAAiB,EAAM1F,IA4FjD4F,CAAwBtD,KAAKgD,qBAC7BhD,KAAKiD,4BAA8B,QAIvCM,OAAA,WACIvD,KAAK3E,QAAQmI,cAAcxD,KAAK8C,iBAAkB9C,KAAKoC,eAAeqB,aAAczD,KAAKoC,eAAesB,gBACxG1D,KAAK2D,aACL3D,KAAK4D,oBAGTC,aAAA,SAAalH,GAAM,IAAAmH,EAAA9D,KACXoD,EAAkBpD,KAAKgD,oBAAoBrG,GAC3C2B,EAAS8E,EAAgB9E,OAC7B8E,EAAgBW,WAAazF,EAAO0F,KAAKC,cAAcC,OACnDd,EAAgBC,UAAY/E,EAAO+E,UAEnCD,EAAgBC,SAAS/E,EAAO+E,SAC5BD,EAAgBC,SAChBrD,KAAK6C,aAAajF,mBAAmBwF,EACjC,SAACe,EAAGC,EAAGC,GAAP,OAAYP,EAAKlB,gBAAgBlE,mBAAmByF,EAAGC,EAAGC,IAC1D,WAAA,OAAIP,EAAK1B,eAAerE,iBACxBO,EAAON,WAAYM,EAAOsB,YAE9BwD,EAAgBkB,kCAIhBlB,EAAgBpF,YAAcM,EAAON,aAErCoF,EAAgBpF,WAAWM,EAAON,WAC9BoF,EAAgBpF,YASpBoF,EAAgBxD,YAActB,EAAOsB,aAErCwD,EAAgBxD,WAAWtB,EAAOsB,WAC9BwD,EAAgBxD,gBAahC2E,WAAA,WAEIvE,KAAK6C,aAAaxG,eAClB2D,KAAKzE,cAEL,IAAI,IAAImC,EAAE,EAAGA,EAAEsC,KAAKgD,oBAAoB3I,OAAQqD,IAChD,CACI,IAAI0F,EAAkBpD,KAAKgD,oBAAoBtF,GAC3C0F,EAAgBkB,+BAChBlB,EAAgBkB,gCAExBtE,KAAK+C,2BACL/C,KAAK4C,gBAAgB/B,mCAGrBb,KAAKwE,oBAGTA,eAAA,WAC8B,SAAtBC,IAGA,IAFA,IAAIC,EAAUC,EAAKvC,eAAewC,aAE1BlH,EAAI,EAAGA,EAAEgH,EAAQrK,OAAQqD,IAAK,CAClC,IAAIY,EAASoG,EAAQhH,GAEjBkC,EAAatB,EAAOuG,SACpBxB,EAAa/E,EAAOwG,OACpB9G,EAAaM,EAAO+B,SAEpBxC,EAAkB,CAClBkG,WAAYzF,EAAO0F,KAAKC,cAAcC,OACtCpF,mBAAoBd,GAAc4B,GAAcyD,EAChD/E,OAAQA,EACR+E,SAAUA,EACVxG,wBAAyB,KACzBzB,oBAAqB,KACrByE,aAAc,KACdK,aAAc,KACdvC,SAAS,EACTR,OAAQ,KACR4C,oBAAqB,KACrBgF,OAAQ,KACRtG,QAAS,KACT6F,8BAA+B,MAGnCK,EAAK3B,oBAAoBgC,KAAKnH,GACzBwF,IACDxF,EAAgBF,SAAU,EAC1BE,EAAgBZ,aAAaS,EAC7BiH,EAAK9B,aAAajF,mBAAmBC,EACjC,SAACsG,EAAGC,EAAGC,GAAP,OAAYM,EAAK/B,gBAAgBlE,mBAAmByF,EAAGC,EAAGC,IAC1D,WAAA,OAAIM,EAAKvC,eAAerE,iBAAiBC,EAAY4B,IAGjE+E,EAAKM,OAAOvD,gCAA+B,GArCnC,IAAAiD,EAAA3E,KAyCZ,GAA2B,WAAvB9E,SAASgK,WACTT,QACG,CAKHvJ,SAASX,iBAAiB,mBAJO,SAA7B4K,IACAV,IACAvJ,SAASF,oBAAoB,mBAAoBmK,SAM7DC,QAAA,WACQpF,KAAKwC,WACLxC,KAAKwC,YAITxC,KAAK6C,aAAaxG,eAElB2D,KAAK4C,gBAAgB7H,UACrBiF,KAAKkD,YAAYnI,UAEjBiF,KAAKqC,aAAatH,UAElBiF,KAAKiF,OAAOlK,UAERiF,KAAKoC,eAAerH,SACpBiF,KAAKoC,eAAerH,UAGxB,IAAI,IAAI2C,EAAE,EAAGA,EAAEsC,KAAKgD,oBAAoB3I,OAAQqD,IAChD,CACI,IAAI0F,EAAkBpD,KAAKgD,oBAAoBtF,GAC3C0F,EAAgBxE,gCAChBwE,EAAgBxE,iCAEhBwE,EAAgB3C,qBAChB2C,EAAgB3C,oBAAoB1F,UACpCqI,EAAgBzE,qBAChByE,EAAgBzE,oBAAoB5D,cAIhD4I,WAAA,WACQ3D,KAAK3E,QAAQsI,YACb3D,KAAK3E,QAAQsI,WAAW3D,KAAK8C,qBAGrCc,eAAA,WACI,IAAI1E,EAAsBc,KAAKoC,eAAeiD,cAC1CrF,KAAKd,sBAAsBA,IACvBA,GACAc,KAAK4C,gBAAgBnE,UACrBuB,KAAK3E,QAAQiK,QAAQtF,KAAK8C,oBAE1B9C,KAAK4C,gBAAgB9B,SACrBd,KAAK3E,QAAQkK,OAAOvF,KAAK8C,mBAE7B9C,KAAKd,oBAAoBA,MAIjC1E,MAAA,SAAMJ,EAAkBoL,GACpB,IAAIxB,EAAO5J,EAAiB8J,OAAOD,cAC/BxJ,GAAQ,EACZ,GAAY,IAARuJ,EACAvJ,GAAQ,OAKR,GADAuF,KAAKiD,4BAhRjB,SAAmCD,EAAqBgB,GAGpD,IAFA,IAAIyB,EAAO,GACPC,EAAI,EACAhI,EAAE,EAAGA,EAAEsF,EAAoB3I,OAAQqD,IAC3C,CACI,IAAI0F,EAAkBJ,EAAoBtF,GACpC0F,EAAgBC,WAEbD,EAAgBtE,oBAAsBsE,EAAgBW,WAAWjK,QAAQkK,GAAM,EAEhF/B,EAAsBmB,GAAiB,IAIvCnB,EAAsBmB,GAAiB,EAAMsC,KAC7CD,EAAKT,KAAM5B,KAIvB,OAAOqC,EA6PoCE,CAA0B3F,KAAKgD,oBAAqBgB,GACxC,GAA3ChE,KAAKiD,4BAA4B5I,OACrC,CACI,IAAIuL,EAA4B5F,KAAKiD,4BAA4B,GAC7D2C,EAAyB7B,YAAcC,IAEvC4B,EAAyBzI,SACzB6C,KAAKkD,YAAYxI,WACjBD,GAAQ,GAIhBA,EACAuF,KAAKmD,oBAELqC,IAEJxF,KAAK6C,aAAavG,oBAElB0D,KAAK6C,aAAa/F,yBAEiC,GAA/CkD,KAAK1E,gCAAgCjB,QACrC2F,KAAK6C,aAAanG,gBAAgB,GAGY,EAA9CsD,KAAK1E,gCAAgCjB,QACrC2F,KAAKiF,OAAOvD,gCAA+B,GAC3C1B,KAAK6C,aAAapG,gBAElBuD,KAAK6C,aAAaxG,kBAI1B2C,KAAA,WAEwB,SAAhBxG,EAAiBqN,GAAD,OAAU3K,EAAS1C,cAAcqN,GAFlD,IAAAC,EAAA9F,KACC9E,EAAW8E,KAAK9E,SAEhBC,EAAY6E,KAAKoC,eAAejH,UAEhC4K,EAAgC,KAEpC/F,KAAKkD,YAAc3K,EACfC,EACA,SAACwN,GACGD,EAAkC,SAACE,GAC/BA,EAAkB7H,YAAY4H,GAC9BF,EAAKzD,aAAarD,KAAKgH,KAG/B,WAAA,OAAMF,EAAKzK,QAAQ6K,QAAQJ,EAAKhD,mBAChC,WACSgD,EAAKjD,aAAazF,oBAEnB0I,EAAKvK,cACLuK,EAAKjD,aAAa/F,yBAClBgJ,EAAKzK,QAAQ8K,SAASL,EAAKhD,kBAC3BgD,EAAKjD,aAAaxF,sBAG1B,WAAA,OAAMyI,EAAKjD,aAAavF,cAAa,IACrC,WAAA,OAAMwI,EAAKjD,aAAavF,cAAa,IACrC,WAAA,OAAMwI,EAAKjD,aAAaxG,gBACxB,WACIyJ,EAAKlD,gBAAgBhC,qBACrBkF,EAAKb,OAAOvD,gCAA+B,IAE/C,WAAA,OAAMoE,EAAKjD,aAAa3F,iBACxB,WACI4I,EAAKjD,aAAaxG,eAClByJ,EAAKvK,eAET,SAACnB,EAAkBoL,GAAnB,OAAmCM,EAAKtL,MAAMJ,EAAkBoL,KAGpExF,KAAK4C,gBAAmB7D,EACpBvG,EACA,SAACyN,GACGF,EAAgCE,IAEpCjG,KAAKf,oBACLe,KAAKd,oBACL,WAAA,OAAM4G,EAAK1D,eAAerE,iBAC1B,WACI+H,EAAKjD,aAAaxG,eAClByJ,EAAKvK,eAET,SAAC1B,GACQiM,EAAK5C,YAAYrI,cAAchB,IAChCiM,EAAK5C,YAAYvI,WACrBmL,EAAKb,OAAOlD,qBAAqBlI,IAerC,SAACA,GAAD,OAAWiM,EAAKb,OAAOjD,kCAAkCnI,KAG7DmG,KAAKV,cAAgBU,KAAK4C,gBAAgBtD,cAC1CU,KAAKR,gBAAkBQ,KAAK4C,gBAAgBpD,gBAE5CQ,KAAK6C,aAAe5H,EAChBC,EACAC,EACA6E,KAAK5E,oBACL4E,KAAK3E,QACL,WAAA,OAAMyK,EAAKxK,iCACX,WAAA,OAAMwK,EAAKvK,eACX,WAAA,OAAMuK,EAAKb,OAAOvD,gCAA+B,IACjD,WAAA,OAAMoE,EAAK5C,YAAYvI,aAG3BqF,KAAKiF,OAAUlE,EACX7F,EACA8E,KAAKoC,eAAejH,UACpB6E,KAAK4C,gBAAgBtD,cACrBU,KAAK4C,gBAAgBpD,gBACrBQ,KAAK6C,aAAanH,aAClB,WAAA,OAAKoK,EAAKjD,aAAapG,gBACvB,WAAA,OAAIqJ,EAAKxK,iCACT0F,GAGJhB,KAAK8C,iBAAmB9C,KAAKsC,uBAAuBnH,EAChD6E,KAAK4C,gBAAgBtD,cACrBU,KAAK4C,gBAAgBpD,gBACrBQ,KAAKkD,YAAY1I,MACjBwF,KAAK6C,aAAanH,cAEtBsE,KAAK3E,QAAQ+K,KAAKpG,KAAK8C,kBAEnB9C,KAAKoC,eAAeiE,sBACpBrG,KAAKoC,eAAeiE,uBAKxBrG,KAAK3E,QAAQmI,cAAcxD,KAAK8C,iBAAkB9C,KAAKoC,eAAeqB,aAAczD,KAAKoC,eAAesB,gBAExG1D,KAAK2D,aACL3D,KAAK4D,iBAEL5D,KAAKwE,uBC7bN,SAAS8B,EAAkBC,EAAaC,GAC3C,IAAK,IAAIC,KAAYD,OACaE,IAA1BH,EAAYE,KACZF,EAAYE,GAAYD,EAAOC,ICD3C,IAAME,EAA8B,CAChCC,wBAA0B,QAC1BC,2BAA4B,WAC5BC,0BAA2B,YCH/B,IAAMC,EAAwB,CAACC,gBAAiB,IAAKC,OAAU,QAEzDC,EAA6B,CAC/BC,0BAA2B,sBAC3BC,yBAA2B,uBAC3BC,yBAA2B,wBAC3BC,qCAAsC,UACtCC,8BAA+B,UAC/BC,4BAA6B,uCAC7BC,iCAAkC,uCAClCC,mCAAoC,uCACpCC,iBAAkB,WCVtB,IAAMC,EAAqB,CACvBC,eAAgB,8BAChBC,kBAAmB,gBACnBC,kBAAoB,OACpBC,uBAAwB,wBACxBC,mBAAoB,eACpBC,kBAAmB,QACnBC,8BAA+B,QAC/BC,qBAAsB,GACtBC,iBAAkB,ICVtB,IAAMC,EAA8B,CAChCC,iCAAkC,YAatC,IAAMC,EAAuB,CAACC,eAAgB,MAAOC,cAAe,SAC9DC,EAAmC,CAACC,YAAY,QAASF,cAAe,QACxExB,EAA6B,CAC/B2B,mCAAoC,OAkBxC,IAAMC,EAAiC,CACnCZ,kBAAmB,QACnBC,8BAA+B,SCrCnC,IAAMxB,GAA8B,CAChC4B,iCAAkC,YAetC,IAAMrB,GAA6B,CAC/B2B,mCAAoC,MACpCE,4BAA6B,WAYjC,ICjBKtG,GAAQuG,GDiBPC,GAAiC,CACnClB,kBAAoB,QClBnBtF,GAqHHA,OCpIF,SAA8ByG,EAAYC,EAAcH,GACpD,IAAMI,EAAYF,EAAWG,OAAO,GAC9BC,EAAiBF,EAAUnF,cACjC,GAAIqF,GAAkBF,EAClB,MAAM,IAAI1G,UAAJ,gBAA8BwG,EAA9B,4CAEV,IAAMK,EAAmBD,EAAiBJ,EAAWM,MAAM,GACrDC,EAAyBT,EAAEU,GAAGH,GAC9BI,EAAO,iBAAoBT,EAEjC,SAASU,EAAalF,GAClB,OAAO1E,KAAK6J,KAAM,WACd,IAAIC,EAAKd,EAAEhJ,MACP+J,EAAWD,EAAGE,KAAKL,GACnBM,EAAkC,iBAAZvF,EAC1B,IAAKqF,EAAU,CACX,GAAIE,GAAgB,UAAUC,KAAKxF,GAC/B,OAIJqF,EAAWZ,EAAanJ,KAFkB,iBAAZ0E,EAAsBA,EAAQ,KAGxD,WACIoF,EAAGK,WAAWR,KAEtBG,EAAGE,KAAKL,EAASI,GAGrB,GAAIE,EAAc,CACd,IAAIG,EAAa1F,EACjB,GAAoC,oBAAzBqF,EAASK,GAChB,MAAM,IAAI1H,UAAJ,oBAAkC0H,EAAlC,KAEVL,EAASK,QAKrBpB,EAAEU,GAAGH,GAAoBK,EAGzBZ,EAAEU,GAAGR,GAAc,WACf,OAAOF,EAAEhJ,MAAMgK,KAAKL,IAGxBX,EAAEU,GAAGH,GAAkBc,WAAa,WAEhC,OADArB,EAAEU,GAAGH,GAAoBE,EAClBG,GD/BPU,CAAqB,gBACjB,SAACC,EAASC,EAAUhI,GAChB,IAAID,EAAgByG,GAAEyB,OAAO,GAAID,GAC7BjI,EAAcmI,uBACdnI,EAAcmI,sBAAsBH,EAAShI,GAEjD,IEtBYpH,EAAWuJ,EAASW,EAAa5B,EAAYC,EAAciH,EFsBnEC,EAAU5B,GAAEuB,GACZnI,EAAiB,KACrB,GAAIG,EAAcH,eACdA,EAAiBG,EAAcH,mBAEnC,CACI,IAAIuI,EAAU,SAASE,GACnBD,EAASD,QAAQE,IAErB,GAAItI,EAAcmC,QE/BVvJ,EFiCAoP,EEjCW7F,EFkCXnC,EAAcmC,QElCMW,EFmCpB9C,EAAc8C,YEnCmB5B,EFoCjClB,EAAckB,WEpC+BC,EFqC7CnB,EAAcmB,aErC6CiH,EFsC3DA,EANJvI,EE/Bb,CACHjH,UAAAA,EACAyJ,WAFG,WAEU,OAAOF,GACpB3J,QAHG,WAIC,KAAOI,EAAU2P,YAAY3P,EAAUqF,YAAYrF,EAAU2P,aAEjE/M,cANG,WAOC4M,EAAQ,uBAEZtF,YATG,WAUC,QAAOA,GAAYA,KAEvB5B,WAZG,WAaC,QAAOA,GAAWA,KAEtBC,aAfG,WAgBC,QAAOA,GAAaA,MFsBHnB,EAAcwI,gBACfxI,EAAcwI,cAAc,WAAA,OAAOxI,EAAcsF,eAArB,qBAAwD0C,EAAQS,SAE9F,CACF,IAAKzI,EAAc0I,MACnB,CACI,IAAIC,EAAalC,GAAEuB,GAASY,QAAQ,eACpC,GAAyB,GAArBD,EAAW7Q,OAAa,CACxB,IAAI+Q,EAASF,EAAWG,KAAX,cAA8Bd,EAAQS,GAAtC,MACb,GAAkB,EAAdI,EAAO/Q,OACX,CACI,IAAI4Q,EAAQG,EAAOE,IAAI,GACXL,EAAMM,aAAa,QAClBhB,EAAQS,KACjBzI,EAAc0I,MAAQA,KAKtC7I,EEpCxB,SAA+BoJ,EAAeb,GAC1Ca,EAAclS,MAAMqC,QAAQ,OAC5B,IAAIR,EAAYD,SAAS1C,cAAc,OACvC,MAAO,CACH2C,UAAAA,EACAyJ,WAFG,WAEU,OAAO4G,EAAcC,qBAAqB,WACvD1Q,QAHG,WAICI,EAAUoF,WAAWC,YAAYrF,IAErCkL,qBANG,WAOCmF,EAAcjL,WAAWN,aAAa9E,EAAWqQ,EAAcE,cAEnE3N,cATG,WAUC4M,EAAQ,UACRA,EAAQ,uBAEZtF,YAbG,WAcC,OAAOmG,EAAc3G,UAEzBpB,WAhBG,WAiBC,OAAO+H,EAAcG,UAAUvP,SAAS,aAE5CsH,aAnBG,WAoBC,OAAO8H,EAAcG,UAAUvP,SAAS,gBFaXwP,CAAsBrB,EAASI,GAC3CpI,EAAcwI,gBACfxI,EAAcwI,cAAc,WAAA,OAAOxI,EAAcsF,eAArB,qBAAyD0C,EAAQS,GAAIT,EAAQS,GAAGT,EAAQ1E,MAAM5B,cAA9F,SAIxC,IGhEMgH,EAAOF,EACrBc,ENcYC,EAAevJ,EAAeyG,EDEtBzG,EDTCA,EKwDTF,GGhEE4I,EHgE0B1I,EAAc0I,MGhEjCF,EHgEwCxI,EAAcwI,cG/D3Ec,EAAc,KACX,CACH7M,KADG,SACE+M,GACD,GAAId,EAAO,CACPY,EAAcZ,EAAMM,aAAa,OACjC,IAAIS,EAAQjB,IACZgB,EAAY1S,aAAa,KAAM2S,GAC/Bf,EAAM5R,aAAa,MAAM2S,KAGjCjR,QATG,WAUI8Q,GACCZ,EAAM5R,aAAa,MAAMwS,MHqDrBI,EAAS1J,EAAc0J,OACvB5Q,EAAUkH,EAAclH,QAC5B,IAAKkH,EAAc2J,QACnB,CACI,IAAIJ,EAAgBvJ,EAAcuJ,cAI1BA,EAHHA,IAEGG,GLhExB3F,EADyB/D,EKkEmCA,ELjE3BoE,GAE1B,CACHpB,OADG,SACI4G,GACHA,EAAeC,YAAY7J,EAAcsE,6BAG7CvB,QALG,SAKK6G,GACJA,EAAeE,SAAS9J,EAAcsE,6BAG1CX,QATG,SASKiG,GACJA,EAAeE,SAAS9J,EAAcqE,0BAG1CT,SAbG,SAaMgG,GACLA,EAAeC,YAAY7J,EAAcqE,6BCPjDN,EADwB/D,EI2DmCA,EJ1D1B2E,GAE1B,CACHoF,OADG,SACIC,GACHA,EAAUJ,eAAeK,IAAIzF,GAC7BwF,EAAUE,aAAaD,IAAI,QAASjK,EAAcoF,mBAGtDhE,WANG,SAMQwI,GACHA,EAAeO,SAAS,mBACxBP,EAAeK,IAAI,aAAcjK,EAAc6E,0BACxC+E,EAAeO,SAAS,mBAC/BP,EAAeK,IAAI,aAAcjK,EAAc8E,0BAE/C8E,EAAeK,IAAI,aAAcjK,EAAc4E,4BAIvD5B,OAhBG,SAgBI4G,GACHA,EAAeK,IAAI,mBAAoB,KAG3ClH,QApBG,SAoBK6G,GACJA,EAAeK,IAAI,mBAAoBjK,EAAc+E,uCAGzDpB,QAxBG,SAwBKiG,GACAA,EAAeO,SAAS,YACxBP,EAAeK,IAAI,aAAcjK,EAAckF,kCACxC0E,EAAeO,SAAS,cAC/BP,EAAeK,IAAI,aAAcjK,EAAcmF,oCAE/CyE,EACKK,IAAI,aAAcjK,EAAciF,6BAChCgF,IAAI,eAAgBjK,EAAcgF,gCAI/CpB,SApCG,SAoCMgG,GACDA,EAAeK,IAAI,aAAc,IAAKA,IAAI,eAAgB,QC1CtDV,EG+DqBA,EH/DS9C,EG+DqBA,GH9DnE1C,EAD+B/D,EG+DqBA,EH9DnBqF,GG8DjBvM,EH5DT,CACH+K,KADG,SACEmG,GACDA,EAAUI,WAAWN,SAAS9J,EAAcsF,gBAC5C0E,EAAUJ,eAAeE,SAAS9J,EAAc0F,oBAChDsE,EAAUK,cAAcP,SAAS9J,EAAcuF,mBAC/CyE,EAAUM,iBAAiBR,SAAS9J,EAAc6F,sBAClDmE,EAAUE,aAAaJ,SAAS9J,EAAc8F,kBAC1CyD,EAAcQ,QACdR,EAAcQ,OAAOC,IAG7B/I,cAXG,SAWW+I,EAAWO,EAASC,GAC1BD,GACAP,EAAUJ,eAAeE,SAAS,YAElCU,GACAR,EAAUJ,eAAeE,SAAS,eAG1C1I,WAnBG,SAmBQ4I,GACJT,EAAcnI,YACdmI,EAAcnI,WAAW4I,EAAUJ,iBAG1C5G,OAxBG,SAwBIgH,GACHT,EAAcvG,OAAOgH,EAAUJ,iBAGnC7G,QA5BG,SA4BKiH,GACJT,EAAcxG,QAAQiH,EAAUJ,iBAGpCjG,QAhCG,SAgCKqG,GACJT,EAAc5F,QAAQqG,EAAUJ,iBAGpChG,SApCG,SAoCMoG,GACLT,EAAc3F,SAASoG,EAAUJ,iBAGrCvP,QAxCG,SAwCKoQ,GACJhE,EAAEgE,GAAcX,SAAS9J,EAAcyF,yBAG3CjL,SA5CG,SA4CMiQ,GACLhE,EAAEgE,GAAcZ,YAAY7J,EAAcyF,0BGkBtC,IFxCgB8D,EAAevJ,EAAeyG,EAnBfzG,EAhBCA,EE2E5BtD,EAAsBsD,EAActD,oBACxC,IAAKA,EAAoB,CACrB,IAAIgO,EAAmC1K,EAAc0K,iCAI7CA,EAHHA,IAEGhB,GF/ExB3F,EAD4C/D,EEiFoDA,EFhF/D+F,GAE1B,CACH4E,2BADG,SACwBC,GACvBA,EAASd,SAAS9J,EAAcgG,sCAYxCjC,EAD2C/D,EEmEoDA,EFlE9D2E,GAC1B,CACHgG,2BADG,SACwBC,GACvBA,EAASX,IAAI,UAAWjK,EAAcsG,qCAG1CuE,0BALG,SAKuBC,EAAeC,GACrCD,EAAcb,IAAIhE,GACd8E,GACAA,EAAQd,IAAI7D,OASImD,EEkDiCmB,EFlDHjE,EEkDoDA,GFjD9G1C,EAD2C/D,EEkDoDA,EFjD9DuG,GEiDjB7J,EF/CT,SAAUsO,EAAcC,EAAYrN,EAAoBd,GACvD,IAAIgO,EAAgBrE,EAAEuE,GACtBF,EAAchB,SAAS9J,EAAc2F,mBACrC,IAAIiF,EAAWnE,EAAC,WAAYhF,KAAKwJ,EAAWxJ,MAC5CmJ,EAASM,SAASJ,GACdG,EAAW3I,UACXiH,EAAcoB,2BAA2BC,GAC7C,IAAIG,EAAUtE,EAAE,2GAGXwD,IAAI,QAAS,QAAQiB,SAASJ,GAC9BhB,SAAS9J,EAAc4F,+BACvBuF,GAAG,QACA,SAAAhN,GACIP,EAAmBO,KAM/B,OAFIoL,EAAcsB,2BACdtB,EAAcsB,0BAA0BC,EAAeC,GACpD,CACH7O,QADG,SACKmB,GACJ0N,EAAQK,KAAK,WAAY/N,IAE7B7E,QAJG,WAKCuS,EAAQM,YEyBZ,ID1DgB9B,EAAevJ,EAAeyG,EAbfzG,EAjBCA,ECwF5BnH,EAAsBmH,EAAcsL,uBACxC,IAAKzS,EAAoB,CACrB,IAAI0S,EAAmCvL,EAAcuL,iCAEjDA,EADA7B,GD1FpB3F,EAD4C/D,EC4FgDA,ED3F3DoE,IAC1B,CACHnI,cADG,SACWuP,EAAWC,EAAgBC,GACjCA,EACAF,EAAU1B,SAAS9J,EAAcuE,2BAEjCiH,EAAU3B,YAAY7J,EAAcuE,+BAWhDR,EAD2C/D,EC6EgDA,ED5E1D2E,IAC3B,CACF1I,cADE,SACYuP,EAAWC,EAAgBC,GACrCD,EAAexB,IAAI,QAASyB,EAAW1L,EAAcwG,4BAA4B,OAS7D+C,ECiEiCgC,EDjEH9E,ECiEoDA,GDhE9G1C,EAD2C/D,ECiEoDA,EDhE9D0G,ICgEjB7N,ED/DT,SAAS4R,EAAc1O,GAC1B,IAAI4P,EAAgBlF,EAAEgE,GACtBkB,EAAc7B,SAAS9J,EAAcwF,mBACrC,IAAIoG,EAAsBnF,EAAC,4LAI3BmF,EAAqBV,SAAST,GAC9B,IAAIe,EAAYI,EAAqB9C,KAArB,0BACZ2C,EAAiBG,EAAqB9C,KAArB,SAuBrB,OAtBA2C,EAAehK,KAAK1F,EAAO0F,MAEjB,CACN1D,OADM,SACCtC,GAAa+P,EAAUJ,KAAK,UAAW3P,IAE9CS,QAHM,SAGEmB,GAAamO,EAAUJ,KAAK,WAAY/N,IAChDpB,cAJM,SAIQyP,GAAanC,EAActN,cAAcuP,EAAWC,EAAgBC,IAElFpP,WANM,SAMK1B,GACP4Q,EAAUL,GAAG,SAAUvQ,GACvB+Q,EAAcR,GAAG,QAAS,SAAA7T,GAClBmT,IAAiBnT,EAAMiB,SAAUkO,EAAE5M,SAAS4Q,EAAcnT,EAAMiB,SAChEqC,OAIZpC,QAdM,WAeFgT,EAAUH,SACVM,EAAcN,YCsCd,IAUIQ,EAAc,IAAIjM,EAClBC,EACA/G,EACA4D,EACA7D,EACAiH,EAfyB,SAASlH,EAAWmE,EAAeE,EAAiBuM,EAAarQ,GAC1F,MAAO,CACHiR,WAAW3D,GAAE7N,GACbgR,eAAenD,GAAE1J,GACjBuN,iBAAiB7D,GAAExJ,GACnBiN,aAAazD,GAAE+C,GACfa,cAAc5D,GAAEtN,KAWpB6G,EACAC,EACAC,IAMJ,OAJIF,EAAc8L,wBACd9L,EAAc8L,uBAAuB9D,EAAS6D,GAElDA,EAAYpP,OACLoP,GAlHVpF,GAqHHA","sourcesContent":["function defFilterInputStyleSys(s) {s.width='2ch'; s.border='0'; s.padding='0'; s.outline='none'; s.backgroundColor='transparent' };\r\n\r\nfunction FilterPanel(\r\n        createElement,\r\n        insertIntoDom,\r\n        onFocusIn,  // show dropdown\r\n        onFocusOut, // hide dropdown\r\n        onKeyDownArrowUp, \r\n        onKeyDownArrowDown,\r\n        onTabForEmpty,  // tab on empty\r\n        onBackspace, // backspace alike\r\n        onEnterOrTabToCompleate, // \"compleate alike\"\r\n        onEmptyEscape, // \"esc\" alike\r\n        onInput // filter\r\n    ) {\r\n    \r\n    var inputElement = createElement('INPUT'); \r\n    \r\n    inputElement.setAttribute(\"type\",\"search\");\r\n    inputElement.setAttribute(\"autocomplete\",\"off\");\r\n\r\n    defFilterInputStyleSys(inputElement.style);\r\n\r\n    insertIntoDom(inputElement);\r\n\r\n    var onfilterInputKeyDown = (event) => {\r\n        if ([38, 40, 13 ,27].indexOf(event.which)>=0 || (event.which == 9 && inputElement.value) ) {\r\n            event.preventDefault(); // for 9 it enables keyup\r\n        }\r\n\r\n        if (event.which == 38) {\r\n            onKeyDownArrowUp();\r\n        }\r\n        else if (event.which == 40) {\r\n            onKeyDownArrowDown();\r\n        }\r\n        else if (event.which == 9  /*tab*/) { // no keydown for this\r\n            if (!inputElement.value) {\r\n                 onTabForEmpty(); // filter is empty, nothing to reset\r\n            }\r\n        }\r\n        else if (event.which == 8 /*backspace*/) {\r\n            // NOTE: this will process backspace only if there are no text in the input field\r\n            // If user will find this inconvinient, we will need to calculate something like this\r\n            // this.isBackspaceAtStartPoint = (this.filterInput.selectionStart == 0 && this.filterInput.selectionEnd == 0);\r\n            if (!inputElement.value)\r\n            { \r\n                onBackspace();\r\n            }\r\n        }\r\n    }\r\n    \r\n    var onFilterInputKeyUp = (event) => {\r\n        if (event.which == 13 || event.which == 9) {\r\n            onEnterOrTabToCompleate();\r\n        }\r\n        else if (event.which == 27) { // escape\r\n            onEmptyEscape();\r\n        }\r\n    }\r\n    \r\n    // it can be initated by 3PP functionality\r\n    // sample (1) BS functionality - input x button click - clears input\r\n    // sample (2) BS functionality - esc keydown - clears input\r\n    // and there could be difference in processing: (2) should hide the menu, then reset , when (1) should just reset without hiding.\r\n    var onFilterInputInput = () => {\r\n        var filterInputValue = inputElement.value;\r\n        onInput(\r\n            filterInputValue, \r\n            ()=> inputElement.style.width = filterInputValue.length*1.3 + 2 + \"ch\"\r\n        );\r\n    }\r\n    \r\n    inputElement.addEventListener('focusin', onFocusIn);\r\n    inputElement.addEventListener('focusout', onFocusOut);\r\n    inputElement.addEventListener('keydown', onfilterInputKeyDown);    \r\n    inputElement.addEventListener('keyup', onFilterInputKeyUp);\r\n    inputElement.addEventListener('input', onFilterInputInput);\r\n\r\n    function setEmptyLength(){\r\n        inputElement.style.width=\"2ch\";\r\n    }\r\n\r\n    function setEmpty(){\r\n        inputElement.value ='';\r\n        setEmptyLength();\r\n    };\r\n    \r\n    return {\r\n        input:inputElement,\r\n        isEmpty(){\r\n            return inputElement.value ? false:true;\r\n        },\r\n        setEmpty,\r\n        setEmptyLength,\r\n        setFocus(){\r\n            inputElement.focus();\r\n        },\r\n        isEventTarget(event){\r\n            return event.target == inputElement;\r\n        },\r\n        dispose(){\r\n            inputElement.removeEventListener('focusin', onFocusIn);\r\n            inputElement.removeEventListener('focusout', onFocusOut);\r\n            inputElement.removeEventListener('keydown', onfilterInputKeyDown);\r\n            inputElement.removeEventListener('keyup', onFilterInputKeyUp);\r\n            inputElement.removeEventListener('input', onFilterInputInput);\r\n        }\r\n    }\r\n}\r\n\r\nexport default FilterPanel;","function defDropDownMenuStyleSys(s) {s.listStyleType='none'}; // remove bullets since this is ul\r\n\r\nfunction OptionsPanel(document, container, dropDownItemContent, styling, \r\n        getVisibleMultiSelectDataList, resetFilter,updateDropDownLocation, filterPanelSetFocus) {\r\n    var dropDownMenu = document.createElement('UL');\r\n    dropDownMenu.style.display=\"none\";\r\n\r\n    // prevent heavy understandable styling error\r\n    defDropDownMenuStyleSys(dropDownMenu.style);\r\n    var hoveredMultiSelectData=null;\r\n    var hoveredMultiSelectDataIndex = null;\r\n    var candidateToHoveredMultiSelectData=null;\r\n\r\n    var skipFocusout = false;\r\n    var inShowDropDown = false;\r\n    \r\n    // we want to escape the closing of the menu on a user's click inside the container\r\n    var containerMousedown = function(){\r\n        skipFocusout = true;\r\n    };    \r\n                \r\n    // TODO : this.containerMousedown , this.documentMouseup and filterInput.focusOut are actual only when menu is open\r\n    var documentMouseup = function(event) {\r\n        // if click outside container - close dropdown\r\n        if (!(container === event.target || container.contains(event.target))) {\r\n            hideDropDown();\r\n            resetFilter();\r\n        }\r\n    }\r\n\r\n    function setInShowDropDown(){\r\n        inShowDropDown = true;\r\n            setTimeout( () => {  \r\n                inShowDropDown = null;\r\n            }, 0)\r\n    }    \r\n\r\n    function hideDropDown() {\r\n        if (candidateToHoveredMultiSelectData){\r\n            resetCandidateToHoveredMultiSelectData();\r\n        }\r\n        if (dropDownMenu.style.display != 'none')\r\n        {\r\n            dropDownMenu.style.display = 'none';\r\n            // remove listeners that manages close dropdown on input's focusout and click outside container\r\n            container.removeEventListener(\"mousedown\", containerMousedown);\r\n            document.removeEventListener(\"mouseup\", documentMouseup);\r\n        }\r\n    }\r\n\r\n    function showDropDown() {\r\n        if (dropDownMenu.style.display != 'block')\r\n        {\r\n            setInShowDropDown();\r\n            dropDownMenu.style.display = 'block';\r\n            // remove listeners that manages close dropdown on input's focusout and click outside container\r\n            container.addEventListener(\"mousedown\", containerMousedown);\r\n            document.addEventListener(\"mouseup\", documentMouseup);\r\n        }\r\n    }\r\n\r\n    var hoverInInternal = function(index){\r\n        hoveredMultiSelectDataIndex = index;\r\n        hoveredMultiSelectData = getVisibleMultiSelectDataList()[index];\r\n        styling.HoverIn(hoveredMultiSelectData.dropDownMenuItemElement);\r\n    }\r\n\r\n    function resetDropDownMenuHover() {\r\n        if (hoveredMultiSelectData) {\r\n            styling.HoverOut(hoveredMultiSelectData.dropDownMenuItemElement);\r\n            hoveredMultiSelectData = null;\r\n            hoveredMultiSelectDataIndex = null;\r\n        }\r\n    }\r\n\r\n    var resetCandidateToHoveredMultiSelectData = function(){\r\n        candidateToHoveredMultiSelectData.dropDownMenuItemElement.removeEventListener('mousemove', processCandidateToHovered);\r\n        candidateToHoveredMultiSelectData.dropDownMenuItemElement.removeEventListener('mousedown', processCandidateToHovered);\r\n        candidateToHoveredMultiSelectData = null;\r\n    }\r\n\r\n    var processCandidateToHovered = function() {\r\n        if (hoveredMultiSelectData != candidateToHoveredMultiSelectData)\r\n        {\r\n            resetDropDownMenuHover(); \r\n            hoverInInternal(candidateToHoveredMultiSelectData.visibleIndex);\r\n        }\r\n        if(candidateToHoveredMultiSelectData) \r\n            resetCandidateToHoveredMultiSelectData();\r\n    }\r\n\r\n    function toggleHovered(){\r\n        if (hoveredMultiSelectData) {\r\n            hoveredMultiSelectData.toggle();\r\n            resetDropDownMenuHover();\r\n            hideDropDown(); // always hide 1st\r\n            resetFilter();\r\n        } \r\n    }\r\n\r\n    function keyDownArrow(down) {\r\n        let visibleMultiSelectDataList = getVisibleMultiSelectDataList();\r\n        let length = visibleMultiSelectDataList.length;\r\n        let newIndex=null;\r\n        if (length > 0) {\r\n            if (down) {\r\n                let i = hoveredMultiSelectDataIndex==null?0:hoveredMultiSelectDataIndex+1;\r\n                while(i<length){\r\n                    if (visibleMultiSelectDataList[i].visible){\r\n                        newIndex=i;\r\n                        break;\r\n                    }\r\n                    i++;\r\n                }\r\n            } else {\r\n                let i = hoveredMultiSelectDataIndex==null?length-1:hoveredMultiSelectDataIndex-1;\r\n                while(i>=0){\r\n                    if (visibleMultiSelectDataList[i].visible){\r\n                        newIndex=i;\r\n                        break;\r\n                    }\r\n                    i--;\r\n                }\r\n            }\r\n        }\r\n        \r\n        if (newIndex!=null)\r\n        {\r\n            if (hoveredMultiSelectData)\r\n                styling.HoverOut(hoveredMultiSelectData.dropDownMenuItemElement);\r\n            updateDropDownLocation();\r\n            showDropDown(); \r\n            hoverInInternal(newIndex);\r\n        }\r\n    }\r\n\r\n    var  onDropDownMenuItemElementMouseoverGeneral = function(MultiSelectData, dropDownMenuItemElement)\r\n    {\r\n        if (inShowDropDown)\r\n        {\r\n            if(candidateToHoveredMultiSelectData)\r\n                resetCandidateToHoveredMultiSelectData()\r\n\r\n            candidateToHoveredMultiSelectData = MultiSelectData;\r\n            dropDownMenuItemElement.addEventListener('mousemove', processCandidateToHovered);\r\n            dropDownMenuItemElement.addEventListener('mousedown', processCandidateToHovered);\r\n        }\r\n        else\r\n        {\r\n            if (hoveredMultiSelectData!=MultiSelectData)\r\n            {\r\n                // mouseleave is not enough to guarantee remove hover styles in situations\r\n                // when style was setuped without mouse (keyboard arrows)\r\n                // therefore force reset manually\r\n                resetDropDownMenuHover(); \r\n                hoverInInternal(MultiSelectData.visibleIndex);\r\n            }                \r\n        }\r\n    }\r\n\r\n    function insertDropDownItem(MultiSelectData, createSelectedItemGen, triggerChange, isSelected, isOptionDisabled) {\r\n        var dropDownMenuItemElement = document.createElement('LI');\r\n        \r\n        // in chrome it happens on \"become visible\" so we need to skip it, \r\n        // for IE11 and edge it doesn't happens, but for IE11 and Edge it doesn't happens on small \r\n        // mouse moves inside the item. \r\n        // https://stackoverflow.com/questions/59022563/browser-events-mouseover-doesnt-happen-when-you-make-element-visible-and-mous\r\n        \r\n        var onDropDownMenuItemElementMouseover = () => onDropDownMenuItemElementMouseoverGeneral(\r\n            MultiSelectData,\r\n            dropDownMenuItemElement\r\n        )\r\n\r\n        dropDownMenuItemElement.addEventListener('mouseover', onDropDownMenuItemElementMouseover);\r\n        \r\n        // note 1: mouseleave preferred to mouseout - which fires on each descendant\r\n        // note 2: since I want add aditional info panels to the dropdown put mouseleave on dropdwon would not work\r\n        var onDropDownMenuItemElementMouseleave = () => resetDropDownMenuHover();\r\n        dropDownMenuItemElement.addEventListener('mouseleave', onDropDownMenuItemElementMouseleave);\r\n\r\n        dropDownMenu.appendChild(dropDownMenuItemElement);\r\n\r\n        let content = dropDownItemContent(dropDownMenuItemElement, MultiSelectData.option); \r\n        MultiSelectData.dropDownMenuItemElement = dropDownMenuItemElement;\r\n        MultiSelectData.DropDownItemContent = content;\r\n\r\n        MultiSelectData.DisposeDropDownMenuItemElement = ()=> {\r\n            dropDownMenuItemElement.removeEventListener('mouseover',  onDropDownMenuItemElementMouseover);\r\n            dropDownMenuItemElement.removeEventListener('mouseleave', onDropDownMenuItemElementMouseleave);\r\n        }\r\n\r\n        var setDropDownItemContentDisabled = (content,  isSelected) => {\r\n            content.disabledStyle(true);\r\n            // do not desable if selected! there should be possibility to unselect \"disabled\"\r\n            content.disable(!isSelected);\r\n        }\r\n\r\n        if (isOptionDisabled)\r\n            setDropDownItemContentDisabled(content, isSelected )\r\n\r\n        content.onSelected( () => {\r\n            MultiSelectData.toggle();\r\n            filterPanelSetFocus();\r\n        });\r\n        // ------------------------------------------------------------------------------\r\n        \r\n        var createSelectedItem = () => createSelectedItemGen(\r\n            MultiSelectData,\r\n            isOptionDisabled,\r\n            () => setDropDownItemContentDisabled(content, false)\r\n        );\r\n        \r\n        if (isSelected)\r\n        {\r\n            createSelectedItem();\r\n        }\r\n        else\r\n        {\r\n            MultiSelectData.excludedFromSearch =  isOptionDisabled;\r\n            if (isOptionDisabled)\r\n                MultiSelectData.toggle = () => { }\r\n            else\r\n                MultiSelectData.toggle = () =>  {\r\n                    createSelectedItem();\r\n                    triggerChange();\r\n                }\r\n        }\r\n        // TODO\r\n        // MultiSelectData.removeDropDownMenuItemElement = () => {\r\n        //     removeElement(dropDownMenuItemElement);\r\n        //     if (MultiSelectData.selectedItemElement!=null)\r\n        //         removeElement(MultiSelectData.selectedItemElement);\r\n        // }\r\n    }\r\n\r\n    var item = {\r\n        dropDownMenu,\r\n        hoverInInternal,\r\n        resetDropDownMenuHover,\r\n        setInShowDropDown, \r\n        showDropDown,\r\n        hideDropDown,\r\n        toggleHovered,\r\n        getSkipFocusout : function() {return skipFocusout},\r\n        resetSkipFocusout : function() {skipFocusout=false},\r\n        keyDownArrow,\r\n        insertDropDownItem\r\n        \r\n    }\r\n    return item;\r\n}\r\n\r\nexport default OptionsPanel;","import removeElement from './removeElement.js'\r\n\r\nfunction defSelectedPanelStyleSys(s) {s.display='flex'; s.flexWrap='wrap'; s.listStyleType='none'};  // remove bullets since this is ul\r\n\r\nfunction SelectionsPanel (\r\n    createElement, \r\n    init, \r\n    selectedItemContent, \r\n    isComponentDisabled, \r\n    triggerChange, \r\n    onRemove,\r\n    onClick,\r\n    preventDefaultClick\r\n    //trySetFilterPanelFocus,\r\n    //trySetOptionsPanelFocus\r\n    ) \r\n    {\r\n    var selectedPanel = createElement('UL');\r\n    defSelectedPanelStyleSys(selectedPanel.style); \r\n    var filterInputItem = createElement('LI'); // detached\r\n    selectedPanel.appendChild(filterInputItem); // located filter in selectionsPanel\r\n\r\n    init(filterInputItem);\r\n    var MultiSelectDataSelectedTail = null;\r\n\r\n    function removeSelectedTail(){\r\n        if (MultiSelectDataSelectedTail){ \r\n            MultiSelectDataSelectedTail.toggle(); // always remove in this case\r\n        }\r\n    }\r\n\r\n    function removeSelectedFromList(MultiSelectData){\r\n        if (MultiSelectData.selectedPrev){\r\n            (MultiSelectData.selectedPrev).selectedNext = MultiSelectData.selectedNext;\r\n        }\r\n        if (MultiSelectData.selectedNext){\r\n           (MultiSelectData.selectedNext).selectedPrev = MultiSelectData.selectedPrev;\r\n        }\r\n        if (MultiSelectDataSelectedTail == MultiSelectData){\r\n            MultiSelectDataSelectedTail = MultiSelectData.selectedPrev;\r\n        }\r\n        MultiSelectData.selectedNext=null;\r\n        MultiSelectData.selectedPrev=null;\r\n    }\r\n\r\n\r\n    function createSelectedItem(MultiSelectData, isOptionDisabled, setDropDownItemContentDisabled) {\r\n        var selectedItemElement = createElement('LI');\r\n        MultiSelectData.selectedItemElement = selectedItemElement;\r\n        if (MultiSelectDataSelectedTail){\r\n            MultiSelectDataSelectedTail.selectedNext = MultiSelectData;\r\n            MultiSelectData.selectedPrev = MultiSelectDataSelectedTail;\r\n        }\r\n        MultiSelectDataSelectedTail = MultiSelectData;\r\n\r\n        var removeSelectedItem = () => {\r\n            MultiSelectData.option.selected = false;\r\n            MultiSelectData.excludedFromSearch = isOptionDisabled;\r\n            if (isOptionDisabled)\r\n            {\r\n                setDropDownItemContentDisabled(MultiSelectData.DropDownItemContent, false);\r\n                MultiSelectData.toggle = ()=> {};\r\n            }\r\n            else\r\n            {\r\n                MultiSelectData.toggle = ()=>{\r\n                    createSelectedItem(MultiSelectData, isOptionDisabled, setDropDownItemContentDisabled);\r\n                    triggerChange();\r\n                };\r\n            }\r\n            MultiSelectData.DropDownItemContent.select(false);\r\n            removeElement(selectedItemElement);\r\n            MultiSelectData.SelectedItemContent.dispose();\r\n            MultiSelectData.SelectedItemContent=null;\r\n            MultiSelectData.selectedItemElement=null;\r\n\r\n            removeSelectedFromList(MultiSelectData);\r\n            triggerChange();\r\n        }\r\n\r\n        // what is a problem with calling removeSelectedItem directly (not using  setTimeout(removeSelectedItem, 0)):\r\n        // consider situation \"MultiSelect\" on DROPDOWN (that should be closed on the click outside dropdown)\r\n        // therefore we aslo have document's click's handler where we decide to close or leave the DROPDOWN open.\r\n        // because of the event's bubling process removeSelectedItem runs first. \r\n        // that means the event's target element on which we click (the x button) will be removed from the DOM together with badge \r\n        // before we could analize is it belong to our dropdown or not.\r\n        // important 1: we can't just the stop propogation using stopPropogate because click outside dropdown on the similar \r\n        // component that use stopPropogation will not close dropdown (error, dropdown should be closed)\r\n        // important 2: we can't change the dropdown's event handler to leave dropdown open if event's target is null because of\r\n        // the situation described above: click outside dropdown on the same component.\r\n        // Alternatively it could be possible to use stopPropogate but together create custom click event setting new target that belomgs to DOM (e.g. panel)\r\n\r\n        let removeSelectedItemAndCloseDropDown = () => {\r\n            removeSelectedItem();\r\n            onRemove();\r\n        };\r\n    \r\n        let onRemoveSelectedItemEvent = (jqEvent) => {\r\n            setTimeout( () => {  \r\n                removeSelectedItemAndCloseDropDown();\r\n            }, 0);\r\n            preventDefaultClick(jqEvent.originalEvent);\r\n        };\r\n\r\n        MultiSelectData.SelectedItemContent = selectedItemContent(\r\n            selectedItemElement,\r\n            MultiSelectData.option,\r\n            onRemoveSelectedItemEvent);\r\n\r\n        var disable = (isDisabled) =>\r\n            MultiSelectData.SelectedItemContent.disable(isDisabled);\r\n        disable(isComponentDisabled);\r\n\r\n        MultiSelectData.option.selected = true;\r\n        MultiSelectData.excludedFromSearch = true; // all selected excluded from search\r\n        //MultiSelectData.remove  = removeSelectedItemAndCloseDropDown;\r\n        MultiSelectData.disable = disable;\r\n        selectedPanel.insertBefore(selectedItemElement, filterInputItem);\r\n\r\n\r\n        MultiSelectData.toggle = () => removeSelectedItem();\r\n        MultiSelectData.DropDownItemContent.select(true);\r\n        \r\n    }\r\n\r\n    var selectedPanelClick = event => {\r\n        onClick(event);\r\n    };\r\n\r\n    function iterateAll(isDisabled){\r\n        let i = MultiSelectDataSelectedTail;\r\n        while(i){\r\n            i.disable(isDisabled); \r\n            i = i.selectedPrev;\r\n        }\r\n    }\r\n\r\n    var item = {\r\n        selectedPanel,\r\n        filterInputItem,\r\n        insert(selectedItemElement){\r\n            this.selectedPanel.insertBefore(selectedItemElement, filterInputItem);\r\n        },\r\n        createSelectedItem,\r\n        removeSelectedTail,\r\n        resetMultiSelectDataSelectedTail() {\r\n            MultiSelectDataSelectedTail = null;\r\n        },\r\n        enable(){\r\n            filterInputItem.style.display = \"list-item\";\r\n            iterateAll(false);\r\n            selectedPanel.addEventListener(\"click\", selectedPanelClick);\r\n\r\n        },\r\n        disable(){\r\n            filterInputItem.style.display = \"none\";\r\n            iterateAll(true);\r\n            selectedPanel.removeEventListener(\"click\", selectedPanelClick);\r\n\r\n        },\r\n        dispose(){\r\n            selectedPanel.removeEventListener(\"click\", selectedPanelClick); // OPEN dropdown\r\n        }\r\n    }\r\n    return item;\r\n}\r\n\r\nexport default SelectionsPanel;","function removeElement(e) {e.parentNode.removeChild(e)}\r\nexport default removeElement;","function MultiSelectInputAspect (\r\n    document, \r\n    container, \r\n    selectedPanel, \r\n    filterInputItem, \r\n    dropDownMenu, \r\n    showDropDown,\r\n    getVisibleMultiSelectDataList,\r\n    Popper\r\n    ) {\r\n\r\n    container.appendChild(selectedPanel);\r\n    container.appendChild(dropDownMenu);\r\n\r\n    var popper = new Popper( \r\n        filterInputItem, \r\n        dropDownMenu, \r\n        {\r\n            placement: 'bottom-start',\r\n            modifiers: {\r\n                preventOverflow: {enabled:false},\r\n                hide: {enabled:false},\r\n                flip: {enabled:false}\r\n            }\r\n        }\r\n    );\r\n\r\n    var filterInputItemOffsetLeft = null;\r\n    var preventDefaultClickEvent = null;\r\n\r\n    function alignAndShowDropDown(event){\r\n        if (preventDefaultClickEvent != event) {\r\n            if (getVisibleMultiSelectDataList().length > 0)\r\n            {\r\n                alignToFilterInputItemLocation(true);\r\n                showDropDown();\r\n            }\r\n        }\r\n        preventDefaultClickEvent=null;\r\n    }\r\n    \r\n    function alignToFilterInputItemLocation(force) {\r\n        let offsetLeft = filterInputItem.offsetLeft;\r\n        if (force || filterInputItemOffsetLeft != offsetLeft){ // position changed\r\n            popper.update();\r\n            filterInputItemOffsetLeft=offsetLeft;\r\n        }\r\n    }\r\n\r\n    return {\r\n        dispose(){\r\n            popper.destroy();\r\n        },\r\n        alignToFilterInputItemLocation,\r\n        alignAndShowDropDown,\r\n        setPreventDefaultMultiSelectEvent(event){\r\n            preventDefaultClickEvent = event;\r\n        }\r\n    }\r\n}\r\n\r\nexport default MultiSelectInputAspect;","import Popper from 'popper.js'\r\nimport FilterPanel from './FilterPanel.js'\r\nimport OptionsPanel from './OptionsPanel.js'\r\nimport SelectionsPanel from './SelectionsPanel.js'\r\nimport MultiSelectInputAspect from './MultiSelectInputAspect.js'\r\n\r\nfunction filterMultiSelectData(MultiSelectData, isFiltered, visibleIndex) {\r\n    MultiSelectData.visible = isFiltered;\r\n    MultiSelectData.visibleIndex = visibleIndex;\r\n    MultiSelectData.dropDownMenuItemElement.style.display = isFiltered ? 'block': 'none';\r\n} \r\n\r\nfunction resetFilterDropDownMenu(MultiSelectDataList) {\r\n    for(let i=0; i<MultiSelectDataList.length; i++)\r\n    {\r\n        let multiSelectData = MultiSelectDataList[i];\r\n        if ( !multiSelectData.isHidden )\r\n        {\r\n            filterMultiSelectData(multiSelectData, true, i);\r\n        }\r\n    }\r\n}\r\n\r\nfunction collectFilterDropDownMenu(MultiSelectDataList, text) {\r\n    var list = [];\r\n    var j = 0;\r\n    for(let i=0; i<MultiSelectDataList.length; i++)\r\n    {\r\n        let multiSelectData = MultiSelectDataList[i];\r\n        if ( !multiSelectData.isHidden )\r\n        {\r\n            if ( multiSelectData.excludedFromSearch || multiSelectData.searchText.indexOf(text)<0 )\r\n            {\r\n                filterMultiSelectData(multiSelectData, false);\r\n            }\r\n            else \r\n            {\r\n                filterMultiSelectData(multiSelectData, true, j++);\r\n                list.push( multiSelectData );\r\n            }\r\n        }\r\n    }\r\n    return list;\r\n}\r\n\r\nclass MultiSelect {\r\n    constructor(optionsAdapter, styling, \r\n        selectedItemContent, dropDownItemContent, \r\n        labelAdapter, createStylingComposite,\r\n        configuration, onDispose, window) {\r\n        if (typeof Popper === 'undefined') {\r\n            throw new TypeError('DashboardCode BsMultiSelect require Popper.js (https://popper.js.org)')\r\n        }\r\n\r\n        // readonly\r\n        this.optionsAdapter = optionsAdapter;\r\n        this.container = optionsAdapter.container; // part of published api\r\n        this.styling = styling;\r\n        this.selectedItemContent = selectedItemContent;\r\n        this.dropDownItemContent = dropDownItemContent;\r\n        this.labelAdapter = labelAdapter;\r\n        this.createStylingComposite = createStylingComposite;\r\n        this.configuration = configuration;\r\n        this.onDispose = onDispose;\r\n        this.window = window;\r\n        this.document = window.document;\r\n\r\n        //this.popper = null;\r\n\r\n        this.visibleCount=10;\r\n\r\n        this.selectionsPanel = null;\r\n        this.filterInputItem = null;\r\n        this.optionsPanel = null;\r\n\r\n        this.stylingComposite = null;\r\n\r\n        // removable handlers\r\n        this.documentMouseup = null;\r\n        this.containerMousedown = null;\r\n\r\n        // state\r\n        this.isComponentDisabled = null;\r\n        this.filterInputItemOffsetLeft = null; // used to detect changes in input field position (by comparision with current value)\r\n        \r\n        this.resetMultiSelectDataList();\r\n    }\r\n\r\n    resetMultiSelectDataList(){\r\n        this.MultiSelectDataList = [];\r\n        this.filteredMultiSelectDataList = null;\r\n    }\r\n\r\n    \r\n    getVisibleMultiSelectDataList(){\r\n        if (this.filteredMultiSelectDataList)\r\n            return this.filteredMultiSelectDataList;\r\n        else\r\n            return this.MultiSelectDataList;\r\n    }\r\n\r\n    resetFilter(){\r\n        if (!this.filterPanel.isEmpty()) {\r\n            this.filterPanel.setEmpty();\r\n            this.processEmptyInput();\r\n        }\r\n    }\r\n\r\n    processEmptyInput(){\r\n        this.filterPanel.setEmptyLength();\r\n        resetFilterDropDownMenu(this.MultiSelectDataList);\r\n        this.filteredMultiSelectDataList = null;\r\n    }\r\n\r\n    // -----------------------------------------------------------------------------------------------------------------------\r\n    Update(){\r\n        this.styling.UpdateIsValid(this.stylingComposite, this.optionsAdapter.getIsValid(), this.optionsAdapter.getIsInvalid());\r\n        this.UpdateSize();\r\n        this.UpdateDisabled();\r\n    }\r\n\r\n    UpdateOption(index){\r\n        let multiSelectData = this.MultiSelectDataList[index];\r\n        let option = multiSelectData.option;\r\n        multiSelectData.searchText = option.text.toLowerCase().trim();\r\n        if (multiSelectData.isHidden != option.isHidden)\r\n        {\r\n            multiSelectData.isHidden=option.isHidden;\r\n            if (multiSelectData.isHidden)\r\n                this.optionsPanel.insertDropDownItem(multiSelectData, \r\n                    (p1,p2,p3)=>this.selectionsPanel.createSelectedItem(p1,p2,p3),\r\n                    ()=>this.optionsAdapter.triggerChange(),\r\n                    option.isSelected, option.isDisabled);\r\n            else\r\n                multiSelectData.removeDropDownMenuItemElement();\r\n        }\r\n        else \r\n        {\r\n            if (multiSelectData.isSelected != option.isSelected)\r\n            {\r\n                multiSelectData.isSelected=option.isSelected;\r\n                if (multiSelectData.isSelected)\r\n                {\r\n                    // this.insertDropDownItem(multiSelectData, (e)=>this.dropDownMenu.appendChild(e), isSelected, isDisabled);\r\n                }\r\n                else\r\n                {\r\n                    // multiSelectData.removeDropDownMenuItemElement();\r\n                }\r\n            }\r\n            if (multiSelectData.isDisabled != option.isDisabled)\r\n            {\r\n                multiSelectData.isDisabled=option.isDisabled;\r\n                if (multiSelectData.isDisabled)\r\n                {\r\n                    // this.insertDropDownItem(multiSelectData, (e)=>this.dropDownMenu.appendChild(e), isSelected, isDisabled);\r\n                }\r\n                else\r\n                {\r\n                    // multiSelectData.removeDropDownMenuItemElement();\r\n                }\r\n            }\r\n        }    \r\n        //multiSelectData.updateOption();\r\n    }\r\n\r\n    UpdateData(){\r\n        // close drop down , remove filter and listeners\r\n        this.optionsPanel.hideDropDown(); // always hide 1st\r\n        this.resetFilter();\r\n\r\n        for(let i=0; i<this.MultiSelectDataList.length; i++)\r\n        {\r\n            let multiSelectData = this.MultiSelectDataList[i];\r\n            if (multiSelectData.removeDropDownMenuItemElement)\r\n                multiSelectData.removeDropDownMenuItemElement();\r\n        }\r\n        this.resetMultiSelectDataList();\r\n        this.selectionsPanel.resetMultiSelectDataSelectedTail();// this.MultiSelectDataSelectedTail = null;\r\n\r\n        // reinitiate\r\n        this.updateDataImpl();\r\n    }\r\n\r\n    updateDataImpl(){\r\n        var createDropDownItems = () => {\r\n            let options = this.optionsAdapter.getOptions();\r\n            var j = 0;\r\n            for(let i = 0; i<options.length; i++) {\r\n                let option = options[i];\r\n\r\n                let isDisabled = option.disabled;\r\n                let isHidden   = option.hidden;\r\n                let isSelected = option.selected;\r\n                \r\n                var MultiSelectData = {\r\n                    searchText: option.text.toLowerCase().trim(),\r\n                    excludedFromSearch: isSelected || isDisabled || isHidden,\r\n                    option: option,\r\n                    isHidden: isHidden,\r\n                    dropDownMenuItemElement: null,\r\n                    dropDownItemContent: null,\r\n                    selectedPrev: null,\r\n                    selectedNext: null,\r\n                    visible: false,\r\n                    toggle: null,\r\n                    selectedItemElement: null,\r\n                    remove: null,\r\n                    disable: null,\r\n                    removeDropDownMenuItemElement: null\r\n                };\r\n\r\n                this.MultiSelectDataList.push(MultiSelectData);\r\n                if (!isHidden){\r\n                    MultiSelectData.visible = true;\r\n                    MultiSelectData.visibleIndex=i;\r\n                    this.optionsPanel.insertDropDownItem(MultiSelectData, \r\n                        (p1,p2,p3)=>this.selectionsPanel.createSelectedItem(p1,p2,p3),\r\n                        ()=>this.optionsAdapter.triggerChange(), isSelected, isDisabled);\r\n                }\r\n            } \r\n            this.aspect.alignToFilterInputItemLocation(false);\r\n        }\r\n\r\n        // some browsers (IE11) can change select value (as part of \"autocomplete\") after page is loaded but before \"ready\" event\r\n        if (document.readyState != 'loading'){\r\n            createDropDownItems();\r\n        } else {\r\n            var createDropDownItemsHandler = function(){\r\n                createDropDownItems();\r\n                document.removeEventListener(\"DOMContentLoaded\", createDropDownItemsHandler);\r\n            }\r\n            document.addEventListener('DOMContentLoaded', createDropDownItemsHandler); // IE9+\r\n        }\r\n    }\r\n\r\n    Dispose(){\r\n        if (this.onDispose)\r\n            this.onDispose(); // primary used to remove from jQuery tables\r\n        \r\n        // remove event listeners\r\n        // TODO check if open\r\n        this.optionsPanel.hideDropDown();\r\n        \r\n        this.selectionsPanel.dispose();\r\n        this.filterPanel.dispose();\r\n        \r\n        this.labelAdapter.dispose();\r\n        \r\n        this.aspect.dispose();\r\n        \r\n        if (this.optionsAdapter.dispose) {\r\n            this.optionsAdapter.dispose();\r\n        }\r\n\r\n        for(let i=0; i<this.MultiSelectDataList.length; i++)\r\n        {\r\n            let multiSelectData = this.MultiSelectDataList[i];\r\n            if (multiSelectData.DisposeDropDownMenuItemElement)\r\n                multiSelectData.DisposeDropDownMenuItemElement();\r\n            \r\n            if (multiSelectData.SelectedItemContent)\r\n                multiSelectData.SelectedItemContent.dispose();\r\n            if (multiSelectData.DropDownItemContent)\r\n                multiSelectData.DropDownItemContent.dispose();\r\n        }\r\n    }\r\n\r\n    UpdateSize(){\r\n        if (this.styling.UpdateSize)\r\n            this.styling.UpdateSize(this.stylingComposite);\r\n    }\r\n\r\n    UpdateDisabled(){\r\n        let isComponentDisabled = this.optionsAdapter.getDisabled();\r\n        if (this.isComponentDisabled!==isComponentDisabled){\r\n            if (isComponentDisabled) {\r\n                this.selectionsPanel.disable();\r\n                this.styling.Disable(this.stylingComposite);\r\n            } else {\r\n                this.selectionsPanel.enable();\r\n                this.styling.Enable(this.stylingComposite);\r\n            }\r\n            this.isComponentDisabled=isComponentDisabled;\r\n        }\r\n    }\r\n \r\n    input(filterInputValue, resetLength){\r\n        let text = filterInputValue.trim().toLowerCase();\r\n        var isEmpty=false;\r\n        if (text == '')\r\n            isEmpty=true;\r\n        else\r\n        {\r\n            // check if exact match, otherwise new search\r\n            this.filteredMultiSelectDataList = collectFilterDropDownMenu(this.MultiSelectDataList, text);\r\n            if (this.filteredMultiSelectDataList.length == 1)\r\n            {\r\n                let fullMatchMultiSelectData =  this.filteredMultiSelectDataList[0];\r\n                if (fullMatchMultiSelectData.searchText == text)\r\n                {\r\n                    fullMatchMultiSelectData.toggle();\r\n                    this.filterPanel.setEmpty(); // clear\r\n                    isEmpty=true;\r\n                }\r\n            }\r\n        }\r\n        if (isEmpty)\r\n            this.processEmptyInput();\r\n        else\r\n            resetLength();  \r\n        \r\n        this.optionsPanel.setInShowDropDown();\r\n\r\n        this.optionsPanel.resetDropDownMenuHover();\r\n\r\n        if (this.getVisibleMultiSelectDataList().length == 1) {\r\n            this.optionsPanel.hoverInInternal(0)\r\n        }\r\n\r\n        if (this.getVisibleMultiSelectDataList().length > 0) {\r\n            this.aspect.alignToFilterInputItemLocation(true); // we need it to support case when textbox changes its place because of line break (texbox grow with each key press)\r\n            this.optionsPanel.showDropDown();\r\n        } else {\r\n            this.optionsPanel.hideDropDown();\r\n        }\r\n    }\r\n\r\n    init() {\r\n        var document = this.document;\r\n        var createElement = (name) => document.createElement(name);\r\n        let container = this.optionsAdapter.container;\r\n\r\n        var lazyfilterItemInputElementAtach=null;\r\n        \r\n        this.filterPanel = FilterPanel(\r\n            createElement,\r\n            (filterItemInputElement) => {\r\n                lazyfilterItemInputElementAtach = (filterItemElement)=>{\r\n                    filterItemElement.appendChild(filterItemInputElement);\r\n                    this.labelAdapter.init(filterItemInputElement); \r\n                };\r\n            },\r\n            () => this.styling.FocusIn(this.stylingComposite),  // focus in - show dropdown\r\n            () => {\r\n                if (!this.optionsPanel.getSkipFocusout()) // skip initiated by mouse click (we manage it different way)\r\n                {\r\n                    this.resetFilter(); // if do not do this we will return to filtered list without text filter in input\r\n                    this.optionsPanel.resetDropDownMenuHover(); // if do not do this tab will select \"only one hovered\"\r\n                    this.styling.FocusOut(this.stylingComposite)\r\n                    this.optionsPanel.resetSkipFocusout();\r\n                }\r\n            }, // focus out - hide dropdown\r\n            () => this.optionsPanel.keyDownArrow(false), // arrow up\r\n            () => this.optionsPanel.keyDownArrow(true),  // arrow down\r\n            () => this.optionsPanel.hideDropDown(),  // tab on empty\r\n            () => {\r\n                this.selectionsPanel.removeSelectedTail();\r\n                this.aspect.alignToFilterInputItemLocation(false);\r\n            }, // backspace - \"remove last\"\r\n            () => this.optionsPanel.toggleHovered(), // tab/enter \"compleate hovered\"\r\n            () => {\r\n                this.optionsPanel.hideDropDown(); // always hide 1st\r\n                this.resetFilter();\r\n            }, // esc  \r\n            (filterInputValue, resetLength) => this.input(filterInputValue, resetLength) // filter\r\n        );\r\n             \r\n        this.selectionsPanel =  SelectionsPanel(\r\n            createElement,\r\n            (filterItemElement) => {\r\n                lazyfilterItemInputElementAtach(filterItemElement);\r\n            },\r\n            this.selectedItemContent,\r\n            this.isComponentDisabled,\r\n            () => this.optionsAdapter.triggerChange(),\r\n            () => {\r\n                this.optionsPanel.hideDropDown(); // always hide 1st\r\n                this.resetFilter();\r\n            },\r\n            (event) => {\r\n                if (!this.filterPanel.isEventTarget(event))\r\n                    this.filterPanel.setFocus();\r\n                this.aspect.alignAndShowDropDown(event);\r\n                // if (preventDefaultClickEvent != event) {\r\n                //     if (this.getVisibleMultiSelectDataList().length > 0)\r\n                //     {\r\n                //         this.aspect.alignToFilterInputItemLocation(true);\r\n                //         this.optionsPanel.showDropDown();\r\n                //     }\r\n                // }\r\n                //preventDefaultClickEvent=null;\r\n                //-----------------------------\r\n                /*var preventDefaultClickEvent;\r\n                var setPreventDefaultMultiSelectEvent = (event)=>{\r\n                    preventDefaultClickEvent = event;\r\n                } */   \r\n            },\r\n            (event) => this.aspect.setPreventDefaultMultiSelectEvent(event)\r\n        );\r\n        \r\n        this.selectedPanel = this.selectionsPanel.selectedPanel; // TODO remove\r\n        this.filterInputItem = this.selectionsPanel.filterInputItem;\r\n\r\n        this.optionsPanel = OptionsPanel(\r\n            document,\r\n            container,\r\n            this.dropDownItemContent,\r\n            this.styling, \r\n            () => this.getVisibleMultiSelectDataList(),\r\n            () => this.resetFilter(),\r\n            () => this.aspect.alignToFilterInputItemLocation(true),\r\n            () => this.filterPanel.setFocus()\r\n        );\r\n\r\n        this.aspect =  MultiSelectInputAspect(\r\n            document,\r\n            this.optionsAdapter.container, \r\n            this.selectionsPanel.selectedPanel, \r\n            this.selectionsPanel.filterInputItem, \r\n            this.optionsPanel.dropDownMenu, \r\n            ()=> this.optionsPanel.showDropDown(),\r\n            ()=>this.getVisibleMultiSelectDataList(),\r\n            Popper\r\n        );\r\n\r\n        this.stylingComposite = this.createStylingComposite(container, \r\n            this.selectionsPanel.selectedPanel,\r\n            this.selectionsPanel.filterInputItem, \r\n            this.filterPanel.input, \r\n            this.optionsPanel.dropDownMenu);\r\n        \r\n        this.styling.Init(this.stylingComposite);\r\n\r\n        if (this.optionsAdapter.afterContainerFilled)\r\n            this.optionsAdapter.afterContainerFilled();\r\n\r\n\r\n        \r\n        \r\n        this.styling.UpdateIsValid(this.stylingComposite, this.optionsAdapter.getIsValid(), this.optionsAdapter.getIsInvalid());\r\n        \r\n        this.UpdateSize();\r\n        this.UpdateDisabled();\r\n        \r\n        this.updateDataImpl();\r\n    }\r\n}\r\n\r\nexport default MultiSelect;\r\n","export function ExtendIfUndefined(destination, source) {\r\n    for (var property in source)\r\n        if (destination[property] === undefined)\r\n            destination[property] = source[property];\r\n}\r\n\r\nexport function ExtendIfUndefinedFluent(destination, source) {\r\n    ExtendIfUndefined(destination, source);\r\n    return destination;\r\n}","import  { ExtendIfUndefined } from './Tools';\r\n\r\nconst bs4StylingMethodCssDefaults = {\r\n    selectedPanelFocusClass : 'focus',\r\n    selectedPanelDisabledClass: 'disabled',\r\n    dropDownItemDisabledClass: 'disabled'\r\n};\r\n\r\nfunction Bs4StylingMethodCss(configuration){\r\n    ExtendIfUndefined(configuration, bs4StylingMethodCssDefaults);\r\n\r\n    return {\r\n        Enable($selectedPanel){\r\n            $selectedPanel.removeClass(configuration.selectedPanelDisabledClass)\r\n        },\r\n    \r\n        Disable($selectedPanel){\r\n            $selectedPanel.addClass(configuration.selectedPanelDisabledClass)\r\n        },\r\n    \r\n        FocusIn($selectedPanel){\r\n            $selectedPanel.addClass(configuration.selectedPanelFocusClass);\r\n        },\r\n    \r\n        FocusOut($selectedPanel){\r\n            $selectedPanel.removeClass(configuration.selectedPanelFocusClass);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Bs4StylingMethodCss;","import  { ExtendIfUndefined } from './Tools';\r\n\r\nconst defSelectedPanelStyle = {'margin-bottom': '0', 'height': 'auto'};\r\n\r\nconst bs4StylingMethodJsDefaults = {\r\n    selectedPanelDefMinHeight: 'calc(2.25rem + 2px)',\r\n    selectedPanelLgMinHeight:  'calc(2.875rem + 2px)',\r\n    selectedPanelSmMinHeight:  'calc(1.8125rem + 2px)',\r\n    selectedPanelDisabledBackgroundColor: '#e9ecef',\r\n    selectedPanelFocusBorderColor: '#80bdff',\r\n    selectedPanelFocusBoxShadow: '0 0 0 0.2rem rgba(0, 123, 255, 0.25)',\r\n    selectedPanelFocusValidBoxShadow: '0 0 0 0.2rem rgba(40, 167, 69, 0.25)',\r\n    selectedPanelFocusInvalidBoxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)',\r\n    filterInputColor: '#495057',\r\n    //selectedItemContentDisabledOpacity: '.65'\r\n};\r\n\r\nfunction Bs4StylingMethodJs(configuration){\r\n    ExtendIfUndefined(configuration, bs4StylingMethodJsDefaults);\r\n\r\n    return {\r\n        OnInit(composite){\r\n            composite.$selectedPanel.css(defSelectedPanelStyle);\r\n            composite.$filterInput.css(\"color\", configuration.filterInputColor);\r\n        },\r\n    \r\n        UpdateSize($selectedPanel){\r\n            if ($selectedPanel.hasClass(\"form-control-lg\")){\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelLgMinHeight);\r\n            } else if ($selectedPanel.hasClass(\"form-control-sm\")){\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelSmMinHeight);\r\n            } else {\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelDefMinHeight);\r\n            }\r\n        },\r\n    \r\n        Enable($selectedPanel){\r\n            $selectedPanel.css(\"background-color\", \"\")\r\n        },\r\n    \r\n        Disable($selectedPanel){\r\n            $selectedPanel.css(\"background-color\", configuration.selectedPanelDisabledBackgroundColor)\r\n        },\r\n    \r\n        FocusIn($selectedPanel){\r\n            if ($selectedPanel.hasClass(\"is-valid\")){\r\n                $selectedPanel.css(\"box-shadow\", configuration.selectedPanelFocusValidBoxShadow);\r\n            } else if ($selectedPanel.hasClass(\"is-invalid\")){\r\n                $selectedPanel.css(\"box-shadow\", configuration.selectedPanelFocusInvalidBoxShadow);\r\n            } else {\r\n                $selectedPanel\r\n                    .css(\"box-shadow\", configuration.selectedPanelFocusBoxShadow)\r\n                    .css(\"border-color\", configuration.selectedPanelFocusBorderColor);\r\n            }\r\n        },\r\n    \r\n        FocusOut($selectedPanel){\r\n                $selectedPanel.css(\"box-shadow\", \"\" ).css(\"border-color\", \"\")\r\n        },\r\n    }\r\n}\r\n\r\nexport default Bs4StylingMethodJs;","import  { ExtendIfUndefined } from './Tools';\r\n\r\n// Bs4Styling\r\nconst bs4StylingDefaults = {\r\n    containerClass: 'dashboardcode-bsmultiselect',\r\n    dropDownMenuClass: 'dropdown-menu',\r\n    dropDownItemClass:  'px-2',\r\n    dropDownItemHoverClass: 'text-primary bg-light',\r\n    selectedPanelClass: 'form-control',\r\n    selectedItemClass: 'badge',\r\n    removeSelectedItemButtonClass: 'close',\r\n    filterInputItemClass: '',\r\n    filterInputClass: ''\r\n}\r\n\r\nfunction Bs4Styling(stylingMethod, configuration, $) {\r\n    ExtendIfUndefined(configuration, bs4StylingDefaults);\r\n\r\n    return {\r\n        Init(composite){\r\n            composite.$container.addClass(configuration.containerClass);\r\n            composite.$selectedPanel.addClass(configuration.selectedPanelClass);\r\n            composite.$dropDownMenu.addClass(configuration.dropDownMenuClass);\r\n            composite.$filterInputItem.addClass(configuration.filterInputItemClass);\r\n            composite.$filterInput.addClass(configuration.filterInputClass);\r\n            if (stylingMethod.OnInit)\r\n                stylingMethod.OnInit(composite)\r\n        },\r\n\r\n        UpdateIsValid(composite, isValid, isInvalid){\r\n            if (isValid)\r\n                composite.$selectedPanel.addClass('is-valid');\r\n\r\n            if (isInvalid)\r\n                composite.$selectedPanel.addClass('is-invalid');\r\n        },\r\n\r\n        UpdateSize(composite){\r\n            if(stylingMethod.UpdateSize)\r\n               stylingMethod.UpdateSize(composite.$selectedPanel)\r\n        },\r\n\r\n        Enable(composite){\r\n            stylingMethod.Enable(composite.$selectedPanel)\r\n        },\r\n\r\n        Disable(composite){\r\n            stylingMethod.Disable(composite.$selectedPanel)\r\n        },\r\n\r\n        FocusIn(composite){\r\n            stylingMethod.FocusIn(composite.$selectedPanel)\r\n        },\r\n\r\n        FocusOut(composite){\r\n            stylingMethod.FocusOut(composite.$selectedPanel)\r\n        },\r\n\r\n        HoverIn(dropDownItem){\r\n            $(dropDownItem).addClass(configuration.dropDownItemHoverClass);\r\n        },\r\n\r\n        HoverOut(dropDownItem){\r\n            $(dropDownItem).removeClass(configuration.dropDownItemHoverClass);\r\n        }\r\n    }\r\n    \r\n}\r\n\r\nexport default Bs4Styling;","import  { ExtendIfUndefined } from './Tools';\r\n\r\nconst bs4StylingMethodCssdefaults = {\r\n    selectedItemContentDisabledClass: 'disabled'\r\n};\r\n\r\nfunction Bs4SelectedItemContentStylingMethodCss(configuration) {\r\n    ExtendIfUndefined(configuration, bs4StylingMethodCssdefaults);\r\n\r\n    return {\r\n        disableSelectedItemContent($content){\r\n            $content.addClass(configuration.selectedItemContentDisabledClass )\r\n        }\r\n    }\r\n}\r\n\r\nconst defSelectedItemStyle = {'padding-left': '0px', 'line-height': '1.5em'};\r\nconst defRemoveSelectedItemButtonStyle = {'font-size':'1.5em', 'line-height': '.9em'};\r\nconst bs4StylingMethodJsDefaults = {\r\n    selectedItemContentDisabledOpacity: '.65'\r\n };\r\n\r\nfunction Bs4SelectedItemContentStylingMethodJs(configuration) {\r\n    ExtendIfUndefined(configuration, bs4StylingMethodJsDefaults);\r\n    return {\r\n        disableSelectedItemContent($content){\r\n            $content.css(\"opacity\", configuration.selectedItemContentDisabledOpacity )\r\n        },\r\n    \r\n        createSelectedItemContent($selectedItem, $button){\r\n            $selectedItem.css(defSelectedItemStyle);\r\n            if ($button)\r\n                $button.css(defRemoveSelectedItemButtonStyle);\r\n        }\r\n    }\r\n}\r\n\r\nconst bs4SelectedItemContentDefaults = {\r\n    selectedItemClass: 'badge',\r\n    removeSelectedItemButtonClass: 'close'\r\n};\r\nfunction Bs4SelectedItemContent(stylingMethod, configuration, $) {\r\n    ExtendIfUndefined(configuration, bs4SelectedItemContentDefaults);\r\n    \r\n    return function (selectedItem, optionItem, removeSelectedItem, preventDefaultClick){\r\n            let $selectedItem = $(selectedItem)\r\n            $selectedItem.addClass(configuration.selectedItemClass);\r\n            let $content = $(`<span/>`).text(optionItem.text);\r\n            $content.appendTo($selectedItem);\r\n            if (optionItem.disabled)\r\n                stylingMethod.disableSelectedItemContent($content);\r\n            let $button = $('<button aria-label=\"Close\" tabIndex=\"-1\" type=\"button\"><span aria-hidden=\"true\">&times;</span></button>')\r\n                // bs 'close' class that will be added to button set the float:right, therefore it impossible to configure no-warp policy \r\n                // with .css(\"white-space\", \"nowrap\") or  .css(\"display\", \"inline-block\"); TODO: migrate to flex? \r\n                .css(\"float\", \"none\").appendTo($selectedItem)\r\n                .addClass(configuration.removeSelectedItemButtonClass) // bs close class set the float:right\r\n                .on(\"click\", \r\n                    jqEvent => {   \r\n                        removeSelectedItem(jqEvent); \r\n                        //preventDefaultClick(jqEvent.originalEvent);\r\n                    });\r\n            \r\n            if (stylingMethod.createSelectedItemContent)\r\n                stylingMethod.createSelectedItemContent($selectedItem, $button);\r\n            return {\r\n                disable(isDisabled){ \r\n                    $button.prop('disabled', isDisabled); \r\n                },\r\n                dispose(){\r\n                    $button.unbind();\r\n                }\r\n            };\r\n        }\r\n}\r\n\r\nexport { Bs4SelectedItemContent as Bs4SelectedItemContent, Bs4SelectedItemContentStylingMethodJs, Bs4SelectedItemContentStylingMethodCss};","import  { ExtendIfUndefined} from './Tools';\r\n\r\nconst bs4StylingMethodCssDefaults = {\r\n    selectedItemContentDisabledClass: 'disabled',\r\n};\r\n\r\nfunction Bs4DropDownItemContentStylingMethodCss(configuration) {\r\n    ExtendIfUndefined(configuration, bs4StylingMethodCssDefaults);\r\n    return {\r\n        disabledStyle($checkBox, $checkBoxLabel, isDisbaled){\r\n            if (isDisbaled) \r\n                $checkBox.addClass(configuration.dropDownItemDisabledClass);\r\n            else\r\n                $checkBox.removeClass(configuration.dropDownItemDisabledClass);\r\n        }\r\n    }\r\n}\r\n\r\nconst bs4StylingMethodJsDefaults = {\r\n    selectedItemContentDisabledOpacity: '.65',\r\n    dropdDownLabelDisabledColor: '#6c757d'\r\n};\r\n\r\nfunction Bs4DropDownItemContentStylingMethodJs(configuration) {\r\n    ExtendIfUndefined(configuration, bs4StylingMethodJsDefaults);\r\n    return{\r\n        disabledStyle($checkBox, $checkBoxLabel, isDisbaled){\r\n            $checkBoxLabel.css('color', isDisbaled?configuration.dropdDownLabelDisabledColor:'')\r\n        }\r\n    }\r\n}\r\n\r\nconst bs4DropDownItemContentDefaults = {\r\n    dropDownItemClass:  'px-2',\r\n}\r\n\r\nfunction Bs4DropDownItemContent(stylingMethod, configuration, $) {\r\n    ExtendIfUndefined(configuration, bs4DropDownItemContentDefaults);\r\n    return function(dropDownItem, option){\r\n        let $dropDownItem = $(dropDownItem);\r\n        $dropDownItem.addClass(configuration.dropDownItemClass);\r\n        let $dropDownItemContent= $(`<div class=\"custom-control custom-checkbox\">\r\n            <input type=\"checkbox\" class=\"custom-control-input\">\r\n            <label class=\"custom-control-label\"></label>\r\n        </div>`);\r\n        $dropDownItemContent.appendTo(dropDownItem);\r\n        let $checkBox = $dropDownItemContent.find(`INPUT[type=\"checkbox\"]`);\r\n        let $checkBoxLabel = $dropDownItemContent.find(`label`);\r\n        $checkBoxLabel.text(option.text);\r\n\r\n        var tmp = { \r\n            select(isSelected){ $checkBox.prop('checked', isSelected); }, \r\n            // --- distinct disable and disabledStyle to provide a possibility to unselect disabled option\r\n            disable(isDisabled){ $checkBox.prop('disabled', isDisabled); },\r\n            disabledStyle(isDisbaled){ stylingMethod.disabledStyle($checkBox, $checkBoxLabel, isDisbaled); },\r\n\r\n            onSelected(toggle) {\r\n                $checkBox.on(\"change\", toggle)\r\n                $dropDownItem.on(\"click\", event => {\r\n                    if (dropDownItem === event.target || $.contains(dropDownItem, event.target)) {\r\n                        toggle();\r\n                    }\r\n                })\r\n            },\r\n            dispose(){\r\n                $checkBox.unbind();\r\n                $dropDownItem.unbind();\r\n            }\r\n        }\r\n        \r\n        return tmp;\r\n    }\r\n}\r\n\r\nexport { Bs4DropDownItemContent, Bs4DropDownItemContentStylingMethodJs, Bs4DropDownItemContentStylingMethodCss };","import $ from 'jquery'\r\n\r\nimport MultiSelect from './MultiSelect'\r\nimport LabelAdapter from './LabelAdapter';\r\nimport {OptionsAdapterJson,OptionsAdapterElement} from './OptionsAdapters';\r\n\r\nimport Bs4StylingMethodCss from './Bs4StylingMethodCss'\r\nimport Bs4StylingMethodJs from './Bs4StylingMethodJs'\r\nimport Bs4Styling from './Bs4Styling';\r\nimport AddToJQueryPrototype from './AddToJQueryPrototype'\r\n\r\nimport { Bs4SelectedItemContent, Bs4SelectedItemContentStylingMethodJs, Bs4SelectedItemContentStylingMethodCss} from './Bs4SelectedItemContent';\r\nimport { Bs4DropDownItemContent, Bs4DropDownItemContentStylingMethodJs, Bs4DropDownItemContentStylingMethodCss} from './Bs4DropDownItemContent';\r\n\r\n(\r\n    (window, $) => {\r\n        AddToJQueryPrototype('BsMultiSelect',\r\n            (element, settings, onDispose) => {\r\n                let configuration = $.extend({}, settings); // settings used per jQuery intialization, configuration per element\r\n                if (configuration.preBuildConfiguration)\r\n                    configuration.preBuildConfiguration(element, configuration);\r\n                \r\n                var $element= $(element);\r\n                let optionsAdapter = null;\r\n                if (configuration.optionsAdapter)\r\n                    optionsAdapter = configuration.optionsAdapter;\r\n                else\r\n                {\r\n                    var trigger = function(eventName){\r\n                        $element.trigger(eventName);\r\n                    }\r\n                    if (configuration.options){\r\n                        optionsAdapter = OptionsAdapterJson(\r\n                            element,\r\n                            configuration.options,\r\n                            configuration.getDisabled,\r\n                            configuration.getIsValid,\r\n                            configuration.getIsInvalid,\r\n                            trigger );\r\n                        if (!configuration.createInputId)\r\n                            configuration.createInputId=()=>`${configuration.containerClass}-generated-filter-${element.id}`;\r\n            \r\n                    }else {\r\n                        if (!configuration.label)\r\n                        {\r\n                            let $formGroup = $(element).closest('.form-group');\r\n                            if ($formGroup.length == 1) {\r\n                                let $label = $formGroup.find(`label[for=\"${element.id}\"]`);\r\n                                if ($label.length>0)\r\n                                {   \r\n                                    let label = $label.get(0);\r\n                                    let forId = label.getAttribute('for');\r\n                                    if (forId == element.id) {\r\n                                        configuration.label = label;\r\n                                    }\r\n                                }   \r\n                            }\r\n                        }\r\n                        optionsAdapter = OptionsAdapterElement(element, trigger);\r\n                        if (!configuration.createInputId)\r\n                            configuration.createInputId=()=>`${configuration.containerClass}-generated-input-${((element.id)?element.id:element.name).toLowerCase()}-id`;\r\n                    }\r\n                }\r\n\r\n                let labelAdapter = LabelAdapter(configuration.label, configuration.createInputId);\r\n\r\n                let useCss = configuration.useCss;\r\n                let styling = configuration.styling;\r\n                if (!configuration.adapter)\r\n                {\r\n                    let stylingMethod = configuration.stylingMethod;\r\n                    if (!stylingMethod)\r\n                    {\r\n                        if (useCss)\r\n                            stylingMethod = Bs4StylingMethodCss(configuration);\r\n                        else\r\n                            stylingMethod = Bs4StylingMethodJs(configuration);\r\n                    }\r\n                    styling = Bs4Styling(stylingMethod, configuration, $);\r\n                }\r\n\r\n                let selectedItemContent = configuration.selectedItemContent;\r\n                if (!selectedItemContent){\r\n                    let selectedItemContentStylingMethod = configuration.selectedItemContentStylingMethod;\r\n                    if (!selectedItemContentStylingMethod)\r\n                    {\r\n                        if (useCss)\r\n                            selectedItemContentStylingMethod=Bs4SelectedItemContentStylingMethodCss(configuration, $);\r\n                        else\r\n                            selectedItemContentStylingMethod=Bs4SelectedItemContentStylingMethodJs(configuration, $);\r\n                    }\r\n                    selectedItemContent = Bs4SelectedItemContent(selectedItemContentStylingMethod, configuration, $);\r\n                }\r\n\r\n                let dropDownItemContent = configuration.bs4DropDownItemContent;\r\n                if (!dropDownItemContent){\r\n                    let dropDownItemContentStylingMethod = configuration.dropDownItemContentStylingMethod;\r\n                    if (useCss)\r\n                        dropDownItemContentStylingMethod=Bs4DropDownItemContentStylingMethodCss(configuration, $);\r\n                    else\r\n                        dropDownItemContentStylingMethod=Bs4DropDownItemContentStylingMethodJs(configuration, $);\r\n                    dropDownItemContent = Bs4DropDownItemContent(dropDownItemContentStylingMethod, configuration, $)\r\n                }\r\n\r\n                let createStylingComposite = function(container, selectedPanel, filterInputItem, filterInput, dropDownMenu){\r\n                    return {\r\n                        $container:$(container),\r\n                        $selectedPanel:$(selectedPanel),\r\n                        $filterInputItem:$(filterInputItem),\r\n                        $filterInput:$(filterInput),\r\n                        $dropDownMenu:$(dropDownMenu)\r\n                    };\r\n                }\r\n\r\n                let multiSelect = new MultiSelect(\r\n                    optionsAdapter,\r\n                    styling,\r\n                    selectedItemContent,\r\n                    dropDownItemContent,\r\n                    labelAdapter,\r\n                    createStylingComposite,\r\n                    configuration,\r\n                    onDispose,\r\n                    window);\r\n\r\n                if (configuration.postBuildConfiguration)\r\n                    configuration.postBuildConfiguration(element, multiSelect);\r\n                \r\n                multiSelect.init();\r\n                return multiSelect;\r\n            }, $);\r\n    }\r\n)(window, $)\r\n","function AddToJQueryPrototype(pluginName, createPlugin, $){\r\n    const firstChar = pluginName.charAt(0);\r\n    const firstCharLower = firstChar.toLowerCase();\r\n    if (firstCharLower == firstChar) {\r\n        throw new TypeError(`Plugin name '${pluginName}' should be started from upper case char`)\r\n    }\r\n    const prototypableName = firstCharLower + pluginName.slice(1)\r\n    const noConflictPrototypable = $.fn[prototypableName];\r\n    const dataKey = `DashboardCode.${pluginName}`;\r\n\r\n    function prototypable(options) {\r\n        return this.each( function () {\r\n            let $e = $(this);\r\n            let instance = $e.data(dataKey)\r\n            let isMethodName = typeof options === 'string';\r\n            if (!instance) {\r\n                if (isMethodName && /Dispose/.test(options)) {\r\n                    return;\r\n                }\r\n                const optionsObject = (typeof options === 'object')?options:null;\r\n\r\n                instance = createPlugin(this, optionsObject,\r\n                    () => {\r\n                        $e.removeData(dataKey)\r\n                    });\r\n                $e.data(dataKey, instance);\r\n            }\r\n\r\n            if (isMethodName) {\r\n                let methodName = options;\r\n                if (typeof instance[methodName] === 'undefined') {\r\n                    throw new TypeError(`No method named '${methodName}'`)\r\n                }\r\n                instance[methodName]()\r\n            }\r\n        })\r\n    }\r\n\r\n    $.fn[prototypableName] = prototypable;\r\n\r\n    // pluginName with first capitalized letter - return plugin instance for 1st $selected item\r\n    $.fn[pluginName] = function () {\r\n        return $(this).data(dataKey);\r\n    };\r\n\r\n    $.fn[prototypableName].noConflict = function () {\r\n        $.fn[prototypableName] = noConflictPrototypable\r\n        return prototypable;\r\n    }\r\n}\r\n\r\nexport default AddToJQueryPrototype;","function OptionsAdapterJson(container, options, getDisabled, getIsValid, getIsInvalid, trigger) {\r\n    return {\r\n        container,\r\n        getOptions(){return options},\r\n        dispose(){\r\n            while (container.firstChild) container.removeChild(container.firstChild);\r\n        },\r\n        triggerChange(){\r\n            trigger('multiselect:change');\r\n        },\r\n        getDisabled(){\r\n            return getDisabled?getDisabled():false;\r\n        },\r\n        getIsValid(){\r\n            return getIsValid?getIsValid():false;\r\n        },\r\n        getIsInvalid(){\r\n            return getIsInvalid?getIsInvalid():false;\r\n        }\r\n    }\r\n}\r\n\r\nfunction OptionsAdapterElement(selectElement, trigger) {\r\n    selectElement.style.display='none';\r\n    var container = document.createElement('div');\r\n    return {\r\n        container,\r\n        getOptions(){return selectElement.getElementsByTagName('OPTION')},\r\n        dispose(){\r\n            container.parentNode.removeChild(container);\r\n        },\r\n        afterContainerFilled(){\r\n            selectElement.parentNode.insertBefore(container, selectElement.nextSibling);\r\n        },\r\n        triggerChange(){\r\n            trigger('change');\r\n            trigger('multiselect:change');\r\n        },\r\n        getDisabled(){\r\n            return selectElement.disabled;\r\n        },\r\n        getIsValid(){\r\n            return selectElement.classList.contains('is-valid');\r\n        },\r\n        getIsInvalid(){\r\n            return selectElement.classList.contains('is-invalid');\r\n        }\r\n    }\r\n}\r\n\r\nexport {OptionsAdapterJson, OptionsAdapterElement};\r\n","function LabelAdapter(label, createInputId){\r\n    var backupedFor = null; // state saved between init and dispose\r\n    return {\r\n        init(filterInput) {\r\n            if (label) {\r\n                backupedFor = label.getAttribute('for');\r\n                var newId = createInputId();\r\n                filterInput.setAttribute('id', newId);\r\n                label.setAttribute('for',newId);\r\n            }\r\n        },\r\n        dispose(){\r\n            if(backupedFor)\r\n                label.setAttribute('for',backupedFor);\r\n        }\r\n    }\r\n}\r\n\r\nexport default LabelAdapter;"]}