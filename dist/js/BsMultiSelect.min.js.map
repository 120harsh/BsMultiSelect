{"version":3,"sources":["../../js/src/JsTools.js","../../js/src/DomTools.js","../../js/src/FilterPanel.js","../../js/src/ChoicesPanel.js","../../js/src/PicksPanel.js","../../js/src/MultiSelectInputAspect.js","../../js/src/MultiSelect.js","../../js/src/EventSkipper.js","../../js/src/PlaceholderAspect.js","../../js/src/ContainerAdapter.js","../../js/src/BsAppearance.js","../../js/src/BsMultiSelect.js","../../js/src/AddToJQueryPrototype.js","../../js/src/Styling.js","../../js/src/StylingCorrector.js","../../js/src/OptionsAdapters.js","../../js/src/LabelAdapter.js","../../js/src/BsPickContentGenerator.js","../../js/src/BsChoiceContentGenerator.js"],"names":["extendIfUndefined","destination","source","property","undefined","createEmpty","value","removeElement","e","parentNode","removeChild","findDirectChildByTagName","element","tagName","returnValue","i","children","length","tmp","addClass","c","classList","add","removeClass","remove","addClasses","classes","modifyClasses","removeClasses","setStyles","styles","style","modify","Array","isArray","forEach","split","filterInputStyle","border","padding","outline","backgroundColor","FilterPanel","createElement","insertIntoDom","onFocusIn","onFocusOut","onKeyDownArrowUp","onKeyDownArrowDown","onTabForEmpty","onBackspace","onEnterOrTabToCompleate","onKeyDownEsc","onKeyUpEsc","onInput","setEmptyLength","filterInputElement","setAttribute","onfilterInputKeyDown","event","indexOf","which","preventDefault","onFilterInputKeyUp","onFilterInputInput","filterInputValue","width","addEventListener","isEmpty","setEmpty","setFocus","focus","isEventTarget","target","dispose","removeEventListener","choicesStyle","listStyleType","ChoicesPanel","choicesElement","onShow","onHide","eventSkipper","dropDownItemContent","getVisibleMultiSelectDataList","resetFilter","updateDropDownLocation","filterPanelSetFocus","hoveredMultiSelectData","hoveredMultiSelectDataIndex","candidateToHoveredMultiSelectData","hideDropDown","resetCandidateToHoveredMultiSelectData","display","showDropDown","setSkippable","hoverInInternal","index","DropDownItemContent","hoverIn","resetDropDownMenuHover","hoverOut","dropDownMenuItemElement","processCandidateToHovered","visibleIndex","stopAndResetDropDownMenuHover","toggleHovered","toggle","keyDownArrow","down","visibleMultiSelectDataList","newIndex","visible","insertDropDownItem","MultiSelectData","createSelectedItemGen","setSelected","triggerChange","isSelected","isOptionDisabled","onDropDownMenuItemElementMouseover","isSkippable","onDropDownMenuItemElementMouseleave","appendChild","content","option","setDropDownItemContentDisabled","disabledStyle","disable","createSelectedItem","DisposeDropDownMenuItemElement","onSelected","excludedFromSearch","confirmed","getIsVisble","picksStyle","flexWrap","PicksPanel","picksElement","init","pickContentGenerator","isComponentDisabled","onRemove","onClick","onPicksEmptyChanged","processRemoveButtonClick","picksCount","pickFilterElement","MultiSelectDataSelectedTail","picksClick","iterateAll","isDisabled","selectedPrev","createPick","pickElement","selectedNext","removeSelectedItem","select","PickContent","insertBefore","removePicksTail","resetMultiSelectDataSelectedTail","enable","toRemove","firstChild","MultiSelectInputAspect","window","appendToContainer","choiceFilterInputElement","hideDropDownAndResetFilter","isDropDownMenuEmpty","Popper","skipoutMousedown","skipFocusout","documentMouseup","contains","document","popper","placement","modifiers","preventOverflow","enabled","hide","flip","filterInputItemOffsetLeft","preventDefaultClickEvent","alignToFilterInputItemLocation","force","offsetLeft","update","destroy","alignAndShowDropDown","processUncheck","uncheckOption","setTimeout","onDropDownShow","onDropDownHide","getSkipFocusout","resetSkipFocusout","filterMultiSelectData","isFiltered","MultiSelect","optionsAdapter","containerAdapter","styling","choiceContentGenerator","labelAdapter","createStylingComposite","placeholderText","configuration","onUpdate","onDispose","TypeError","this","visibleCount","choicesPanel","stylingComposite","resetMultiSelectDataList","_proto","prototype","MultiSelectDataList","filteredMultiSelectDataList","filterPanel","processEmptyInput","placeholderAspect","updatePlacehodlerVisibility","multiSelectData","isHidden","resetDropDownMenu","GetContainer","containerElement","Update","UpdateDisabled","UpdateData","DeselectAll","SelectAll","empty","picksPanel","updateDataImpl","createDropDownItems","options","_this","getOptions","selected","disabled","hidden","searchText","text","toLowerCase","trim","removeDropDownMenuItemElement","push","p1","p2","p3","o","aspect","readyState","createDropDownItemsHandler","Dispose","getDisabled","setDisabled","Disable","Enable","input","resetLength","list","j","collectFilterDropDownMenu","fullMatchMultiSelectData","name","picksIsEmpty","filterIsEmpty","inputElement","_this2","lazyfilterItemInputElementAtach","setEmptyInputWidth","isVisible","showPlacehodler","placeholder","filterItemInputElement","filterItemElement","FocusIn","FocusOut","stopPropagation","updateEmptyInputWidth","doUncheck","Init","attachContainer","subscribeToReset","ContainerAdapter","selectElement","ownContainerElement","ownPicksElement","backupDisplay","nextSibling","updateSize","size","updateIsValidForAdapter","isValid","isInvalid","getIsValid","getIsInvalid","updateSizeJsForAdapter","picksStyleLg","picksStyleSm","picksStyleDef","getSize","createBsAppearance","updateIsValid","useCss","Object","create","$","classesDefaults","containerClass","choicesClass","choiceClassHover","choiceClassSelected","choiceClassDisabled","picksClass","picksClassFocus","picksClassDisabled","pickClassDisabled","pickFilterClass","filterInputClass","pickClass","pickRemoveButtonClass","pickContentClassDisabled","choiceClass","choiceCheckBoxClassDisabled","stylingDefaults","marginBottom","height","picksStyleDisabled","picksStyleFocus","borderColor","boxShadow","picksStyleFocusValid","picksStyleFocusInvalid","color","fontWeight","minHeight","pickStyle","paddingLeft","lineHeight","pickButtonStyle","fontSize","pickContentStyleDisabled","opacity","choiceLabelStyleDisabled","pluginName","createPlugin","defaults","firstChar","charAt","firstCharLower","prototypableName","slice","noConflictPrototypable","fn","dataKey","prototypable","each","$e","instance","data","isMethodName","test","removeData","methodName","noConflict","addToJQueryPrototype","settings","extend","buildConfiguration","stylingCorrector","resetDisable","resetFocus","adapter","defFocusIn","elements","picks","focusIn","focusOut","container","choices","pickFilter","trigger","form","backup","eventName","createInputId","id","$container","closest","get","label","$formGroup","$label","find","getAttribute","$form","$fieldset","fieldset","getElementsByTagName","handler","labelElement","backupedForAttribute","newId","pickContentStylingCorrector","disablePickContent","createPickContent","selectedItem","button","optionItem","$selectedItem","$content","appendTo","$button","css","on","jqEvent","originalEvent","prop","unbind","resetStyle","choiceContentStylingCorrector","checkBox","checkBoxLabel","isDisbaled","choiceElement","$choiceElement","$choiceContent","$checkBox","$checkBoxLabel","bsAppearance","multiSelect","UpdateSize","UpdateIsValid"],"mappings":"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","sourcesContent":["export function extendIfUndefined(destination, source) {\r\n    for (var property in source)\r\n        if (destination[property] === undefined)\r\n            destination[property] = source[property];\r\n}\r\n\r\nexport function createEmpty(source, value) {\r\n    var destination={};\r\n    for (var property in source)\r\n         destination[property] = value;\r\n    return destination;\r\n}","export function removeElement(e) {e.parentNode.removeChild(e)}\r\n\r\nexport function findDirectChildByTagName(element, tagName){\r\n    var returnValue = null;\r\n    for (var i = 0; i<element.children.length; i++)\r\n    {\r\n        let tmp = element.children[i];\r\n        if (tmp.tagName==tagName)\r\n        {\r\n            returnValue = tmp;\r\n            break;\r\n        }\r\n    }\r\n    return returnValue;\r\n}\r\n\r\nexport function addClass(element, c){\r\n    element.classList.add(c);\r\n}\r\n\r\nexport function removeClass(element, c){\r\n    element.classList.remove(c);\r\n}\r\n\r\nexport function addClasses(element, classes){\r\n    modifyClasses(classes, e=>addClass(element,e))\r\n}\r\n\r\nexport function removeClasses(element, classes){\r\n    modifyClasses(classes, e=>removeClass(element,e))\r\n}\r\n\r\nexport function setStyles(element, styles){\r\n    for (var property in styles)\r\n        element.style[property] = styles[property];\r\n}\r\n\r\n\r\nfunction modifyClasses(classes, modify){\r\n    if (classes){\r\n        if (Array.isArray(classes))\r\n            classes.forEach(e => modify(e))\r\n        else{\r\n            var array = classes.split(\" \");\r\n            array.forEach(e => modify(e))\r\n        }\r\n    }\r\n}","import {setStyles} from './DomTools';\r\n\r\nconst filterInputStyle = {border:'0px', padding:'0px', outline:'none', backgroundColor:'transparent' };\r\n\r\nexport function FilterPanel(\r\n        createElement,\r\n        insertIntoDom,\r\n        onFocusIn,  // show dropdown\r\n        onFocusOut, // hide dropdown\r\n        onKeyDownArrowUp, \r\n        onKeyDownArrowDown,\r\n        onTabForEmpty,  // tab on empty\r\n        onBackspace, // backspace alike\r\n        onEnterOrTabToCompleate, // \"compleate alike\"\r\n        onKeyDownEsc, \r\n        onKeyUpEsc, // \"esc\" alike\r\n        onInput, // filter\r\n        setEmptyLength\r\n    ) {\r\n    \r\n    var filterInputElement = createElement('INPUT'); \r\n    \r\n    filterInputElement.setAttribute(\"type\",\"search\");\r\n    filterInputElement.setAttribute(\"autocomplete\",\"off\");\r\n\r\n    setStyles(filterInputElement, filterInputStyle);\r\n\r\n    insertIntoDom(filterInputElement);\r\n\r\n    var onfilterInputKeyDown = (event) => {\r\n        if ([38, 40, 13 ,27].indexOf(event.which)>=0 \r\n            || (event.which == 9 && filterInputElement.value) ) {\r\n            event.preventDefault(); \r\n            // preventDefault for tab(9) it enables keyup,\r\n            // prevent form default button (13-enter) \r\n            // but doesn't help with bootsrap modal ESC or ENTER (close behaviour);\r\n            // esc(27) there is just in case\r\n        }\r\n        if (event.which == 27 ) {\r\n            onKeyDownEsc(filterInputElement.value?false:true, event); // support BS do not close modal - event.stopPropagation inside\r\n        }\r\n        else if (event.which == 38) {\r\n            onKeyDownArrowUp();\r\n        }\r\n        else if (event.which == 40) {\r\n            onKeyDownArrowDown();\r\n        }\r\n        else if (event.which == 9  /*tab*/) { // no keydown for this\r\n            if (!filterInputElement.value) {\r\n                 onTabForEmpty(); // filter is empty, nothing to reset\r\n            }\r\n        }\r\n        else if (event.which == 8 /*backspace*/) {\r\n            // NOTE: this will process backspace only if there are no text in the input field\r\n            // If user will find this inconvinient, we will need to calculate something like this\r\n            // this.isBackspaceAtStartPoint = (this.filterInput.selectionStart == 0 && this.filterInput.selectionEnd == 0);\r\n            if (!filterInputElement.value)\r\n            { \r\n                onBackspace();\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n    \r\n    var onFilterInputKeyUp = (event) => {\r\n        if (event.which == 13 || event.which == 9) {\r\n            onEnterOrTabToCompleate();\r\n        }\r\n        else if (event.which == 27) { // escape\r\n            onKeyUpEsc(); // is it always empty (bs x can still it) \r\n        }\r\n    }\r\n    \r\n    // it can be initated by 3PP functionality\r\n    // sample (1) BS functionality - input x button click - clears input\r\n    // sample (2) BS functionality - esc keydown - clears input\r\n    // and there could be difference in processing: (2) should hide the menu, then reset , when (1) should just reset without hiding.\r\n    var onFilterInputInput = () => {\r\n        var filterInputValue = filterInputElement.value;\r\n        onInput(\r\n            filterInputValue, \r\n            ()=> filterInputElement.style.width = filterInputValue.length*1.3 + 2 + \"ch\"\r\n        );\r\n    }\r\n    \r\n    filterInputElement.addEventListener('focusin', onFocusIn);\r\n    filterInputElement.addEventListener('focusout', onFocusOut);\r\n    filterInputElement.addEventListener('keydown', onfilterInputKeyDown);    \r\n    filterInputElement.addEventListener('keyup', onFilterInputKeyUp);\r\n    filterInputElement.addEventListener('input', onFilterInputInput);\r\n\r\n    // function setEmptyLength(){\r\n    //     inputElement.style.width= \"100%\"; //--\"1rem\";\r\n    // }\r\n    //setEmptyLength();\r\n\r\n    function setEmpty(){\r\n        filterInputElement.value ='';\r\n        setEmptyLength();\r\n    };\r\n    \r\n    return {\r\n        filterInputElement,\r\n        isEmpty(){\r\n            return filterInputElement.value ? false:true;\r\n        },\r\n        setEmpty,\r\n        setEmptyLength,\r\n        setFocus(){\r\n            filterInputElement.focus();\r\n        },\r\n        isEventTarget(event){\r\n            return event.target == filterInputElement;\r\n        },\r\n        dispose(){\r\n            filterInputElement.removeEventListener('focusin', onFocusIn);\r\n            filterInputElement.removeEventListener('focusout', onFocusOut);\r\n            filterInputElement.removeEventListener('keydown', onfilterInputKeyDown);\r\n            filterInputElement.removeEventListener('keyup', onFilterInputKeyUp);\r\n            filterInputElement.removeEventListener('input', onFilterInputInput);\r\n        }\r\n    }\r\n}","import {setStyles} from './DomTools';\r\n\r\nconst choicesStyle = {listStyleType:'none'}; // remove bullets since this is ul\r\n\r\nexport function ChoicesPanel(createElement, choicesElement, onShow, onHide, eventSkipper, dropDownItemContent, \r\n        getVisibleMultiSelectDataList, resetFilter, updateDropDownLocation, filterPanelSetFocus) {\r\n    \r\n    // prevent heavy understandable styling error\r\n    setStyles(choicesElement, choicesStyle);\r\n    var hoveredMultiSelectData=null;\r\n    var hoveredMultiSelectDataIndex = null;\r\n    var candidateToHoveredMultiSelectData=null;\r\n\r\n    function hideDropDown() {\r\n        if (candidateToHoveredMultiSelectData){\r\n            resetCandidateToHoveredMultiSelectData();\r\n        }\r\n        if (choicesElement.style.display != 'none')\r\n        {\r\n            choicesElement.style.display = 'none';\r\n            onHide();\r\n        }\r\n    }\r\n\r\n    function showDropDown() {\r\n        if (choicesElement.style.display != 'block')\r\n        {\r\n            eventSkipper.setSkippable();\r\n            choicesElement.style.display = 'block';\r\n            onShow();\r\n        }\r\n    }\r\n\r\n    var hoverInInternal = function(index){\r\n        hoveredMultiSelectDataIndex = index;\r\n        hoveredMultiSelectData = getVisibleMultiSelectDataList()[index];\r\n        hoveredMultiSelectData.DropDownItemContent.hoverIn()\r\n    }\r\n\r\n    function resetDropDownMenuHover() {\r\n        if (hoveredMultiSelectData) {\r\n            hoveredMultiSelectData.DropDownItemContent.hoverOut()\r\n            hoveredMultiSelectData = null;\r\n            hoveredMultiSelectDataIndex = null;\r\n        }\r\n    }\r\n\r\n    var resetCandidateToHoveredMultiSelectData = function(){\r\n        candidateToHoveredMultiSelectData.dropDownMenuItemElement.removeEventListener('mousemove', processCandidateToHovered);\r\n        candidateToHoveredMultiSelectData.dropDownMenuItemElement.removeEventListener('mousedown', processCandidateToHovered);\r\n        candidateToHoveredMultiSelectData = null;\r\n    }\r\n\r\n    var processCandidateToHovered = function() {\r\n        if (hoveredMultiSelectData != candidateToHoveredMultiSelectData)\r\n        {\r\n            resetDropDownMenuHover(); \r\n            hoverInInternal(candidateToHoveredMultiSelectData.visibleIndex);\r\n        }\r\n        if(candidateToHoveredMultiSelectData) \r\n            resetCandidateToHoveredMultiSelectData();\r\n    }\r\n\r\n    function toggleHovered(){\r\n        if (hoveredMultiSelectData) {\r\n            hoveredMultiSelectData.toggle();\r\n            resetDropDownMenuHover();\r\n            hideDropDown(); // always hide 1st\r\n            resetFilter();\r\n        } \r\n    }\r\n\r\n    function keyDownArrow(down) {\r\n        let visibleMultiSelectDataList = getVisibleMultiSelectDataList();\r\n        let length = visibleMultiSelectDataList.length;\r\n        let newIndex=null;\r\n        if (length > 0) {\r\n            if (down) {\r\n                let i = hoveredMultiSelectDataIndex==null?0:hoveredMultiSelectDataIndex+1;\r\n                while(i<length){\r\n                    if (visibleMultiSelectDataList[i].visible){\r\n                        newIndex=i;\r\n                        break;\r\n                    }\r\n                    i++;\r\n                }\r\n            } else {\r\n                let i = hoveredMultiSelectDataIndex==null?length-1:hoveredMultiSelectDataIndex-1;\r\n                while(i>=0){\r\n                    if (visibleMultiSelectDataList[i].visible){\r\n                        newIndex=i;\r\n                        break;\r\n                    }\r\n                    i--;\r\n                }\r\n            }\r\n        }\r\n        \r\n        if (newIndex!=null)\r\n        {\r\n            if (hoveredMultiSelectData)\r\n                hoveredMultiSelectData.DropDownItemContent.hoverOut()\r\n                //styling.HoverOut(hoveredMultiSelectData.dropDownMenuItemElement);\r\n            updateDropDownLocation();\r\n            showDropDown(); \r\n            hoverInInternal(newIndex);\r\n        }\r\n    }\r\n\r\n    var onDropDownMenuItemElementMouseoverGeneral = function(MultiSelectData, dropDownMenuItemElement)\r\n    {\r\n        if (eventSkipper.isSkippable())\r\n        {\r\n            if(candidateToHoveredMultiSelectData)\r\n                resetCandidateToHoveredMultiSelectData()\r\n\r\n            candidateToHoveredMultiSelectData = MultiSelectData;\r\n            dropDownMenuItemElement.addEventListener('mousemove', processCandidateToHovered);\r\n            dropDownMenuItemElement.addEventListener('mousedown', processCandidateToHovered);\r\n        }\r\n        else\r\n        {\r\n            if (hoveredMultiSelectData!=MultiSelectData)\r\n            {\r\n                // mouseleave is not enough to guarantee remove hover styles in situations\r\n                // when style was setuped without mouse (keyboard arrows)\r\n                // therefore force reset manually\r\n                resetDropDownMenuHover(); \r\n                hoverInInternal(MultiSelectData.visibleIndex);\r\n            }                \r\n        }\r\n    }\r\n\r\n    function insertDropDownItem(MultiSelectData, createSelectedItemGen, setSelected, triggerChange, isSelected, isOptionDisabled) {\r\n        var dropDownMenuItemElement = createElement('LI');\r\n        \r\n        // in chrome it happens on \"become visible\" so we need to skip it, \r\n        // for IE11 and edge it doesn't happens, but for IE11 and Edge it doesn't happens on small \r\n        // mouse moves inside the item. \r\n        // https://stackoverflow.com/questions/59022563/browser-events-mouseover-doesnt-happen-when-you-make-element-visible-and-mous\r\n        \r\n        var onDropDownMenuItemElementMouseover = () => onDropDownMenuItemElementMouseoverGeneral(\r\n            MultiSelectData,\r\n            dropDownMenuItemElement\r\n        )\r\n\r\n        dropDownMenuItemElement.addEventListener('mouseover', onDropDownMenuItemElementMouseover);\r\n        \r\n        // note 1: mouseleave preferred to mouseout - which fires on each descendant\r\n        // note 2: since I want add aditional info panels to the dropdown put mouseleave on dropdwon would not work\r\n        var onDropDownMenuItemElementMouseleave = () => {\r\n            if (!eventSkipper.isSkippable()) {\r\n                resetDropDownMenuHover();\r\n            }\r\n        }\r\n\r\n        dropDownMenuItemElement.addEventListener('mouseleave', onDropDownMenuItemElementMouseleave);\r\n\r\n        choicesElement.appendChild(dropDownMenuItemElement);\r\n\r\n        let content = dropDownItemContent(dropDownMenuItemElement, MultiSelectData.option); \r\n        MultiSelectData.dropDownMenuItemElement = dropDownMenuItemElement;\r\n        MultiSelectData.DropDownItemContent = content;\r\n\r\n        MultiSelectData.DisposeDropDownMenuItemElement = ()=> {\r\n            dropDownMenuItemElement.removeEventListener('mouseover',  onDropDownMenuItemElementMouseover);\r\n            dropDownMenuItemElement.removeEventListener('mouseleave', onDropDownMenuItemElementMouseleave);\r\n        }\r\n\r\n        var setDropDownItemContentDisabled = (content,  isSelected) => {\r\n            content.disabledStyle(true);\r\n            // do not desable if selected! there should be possibility to unselect \"disabled\"\r\n            content.disable(!isSelected);\r\n        }\r\n\r\n        if (isOptionDisabled)\r\n            setDropDownItemContentDisabled(content, isSelected )\r\n\r\n        content.onSelected( () => {\r\n            MultiSelectData.toggle();\r\n            filterPanelSetFocus();\r\n        });\r\n        // ------------------------------------------------------------------------------\r\n        \r\n        var createSelectedItem = () => createSelectedItemGen(\r\n            MultiSelectData,\r\n            isOptionDisabled,\r\n            () => setDropDownItemContentDisabled(content, false)\r\n        );\r\n        \r\n        if (isSelected)\r\n        {\r\n            createSelectedItem();\r\n        }\r\n        else\r\n        {\r\n            MultiSelectData.excludedFromSearch =  isOptionDisabled;\r\n            if (isOptionDisabled)\r\n                MultiSelectData.toggle = () => { }\r\n            else\r\n                MultiSelectData.toggle = () =>  {\r\n                    var confirmed = setSelected(MultiSelectData.option, true);\r\n                    if (confirmed==null || confirmed) {\r\n                        createSelectedItem();\r\n                        triggerChange();\r\n                    }\r\n                }\r\n        }\r\n        // TODO: refactore it\r\n    }\r\n\r\n    var item = {\r\n        hoverInInternal,\r\n        stopAndResetDropDownMenuHover(){\r\n            eventSkipper.setSkippable(); //disable Hover On MouseEnter - filter's changes should remove hover\r\n            resetDropDownMenuHover();\r\n        },\r\n        showDropDown,\r\n        hideDropDown,\r\n        toggleHovered,\r\n        keyDownArrow,\r\n        insertDropDownItem,\r\n        getIsVisble(){\r\n            return choicesElement.style.display != 'none';\r\n        }\r\n        \r\n    }\r\n    return item;\r\n}\r\n","import {removeElement, setStyles} from './DomTools'\r\n\r\nconst picksStyle = {display:'flex', flexWrap:'wrap', listStyleType:'none'};  // remove bullets since this is ul\r\n\r\nexport function PicksPanel (\r\n        setSelected,\r\n        createElement,\r\n        picksElement, \r\n        init, \r\n        pickContentGenerator, \r\n        isComponentDisabled, \r\n        triggerChange, \r\n        onRemove,\r\n        onClick,\r\n        onPicksEmptyChanged, //placeholderAspect.updatePlacehodlerVisibility(); call the same on enable/disable\r\n        processRemoveButtonClick\r\n) \r\n{\r\n    var picksCount = 0;\r\n    function inc(){picksCount++; if (picksCount==1) onPicksEmptyChanged()};\r\n    function dec(){picksCount--; if (picksCount==0) onPicksEmptyChanged()};\r\n    function reset(){picksCount=0; onPicksEmptyChanged()}\r\n    function isEmpty(){return picksCount==0};\r\n\r\n    setStyles(picksElement, picksStyle); \r\n\r\n    var pickFilterElement = createElement('LI'); // detached\r\n        \r\n    picksElement.appendChild(pickFilterElement); // located filter in selectionsPanel\r\n\r\n    init(pickFilterElement);\r\n    var MultiSelectDataSelectedTail = null;\r\n\r\n    function removePicksTail(){\r\n        if (MultiSelectDataSelectedTail){ \r\n            MultiSelectDataSelectedTail.toggle(); // always remove in this case\r\n        }\r\n    }\r\n\r\n    function removeSelectedFromList(MultiSelectData){\r\n        if (MultiSelectData.selectedPrev){\r\n            (MultiSelectData.selectedPrev).selectedNext = MultiSelectData.selectedNext;\r\n        }\r\n        if (MultiSelectData.selectedNext){\r\n           (MultiSelectData.selectedNext).selectedPrev = MultiSelectData.selectedPrev;\r\n        }\r\n        if (MultiSelectDataSelectedTail == MultiSelectData){\r\n            MultiSelectDataSelectedTail = MultiSelectData.selectedPrev;\r\n        }\r\n        MultiSelectData.selectedNext=null;\r\n        MultiSelectData.selectedPrev=null;\r\n    }\r\n\r\n\r\n    function createPick(MultiSelectData, isOptionDisabled, setDropDownItemContentDisabled) {\r\n        \r\n        var pickElement = createElement('LI');\r\n        MultiSelectData.pickElement = pickElement;\r\n        if (MultiSelectDataSelectedTail){\r\n            MultiSelectDataSelectedTail.selectedNext = MultiSelectData;\r\n            MultiSelectData.selectedPrev = MultiSelectDataSelectedTail;\r\n        }\r\n        MultiSelectDataSelectedTail = MultiSelectData;\r\n\r\n        var removeSelectedItem = () => {\r\n            let confirmed = setSelected(MultiSelectData.option, false);\r\n            if (confirmed==null || confirmed) {\r\n                MultiSelectData.excludedFromSearch = isOptionDisabled;\r\n                if (isOptionDisabled)\r\n                {\r\n                    setDropDownItemContentDisabled(MultiSelectData.DropDownItemContent, false);\r\n                    MultiSelectData.toggle = ()=> {};\r\n                }\r\n                else\r\n                {\r\n                    MultiSelectData.toggle = ()=>{\r\n                        let confirmed = setSelected(MultiSelectData.option, true);\r\n                        if (confirmed==null || confirmed){\r\n                            createPick(MultiSelectData, isOptionDisabled, setDropDownItemContentDisabled);\r\n                            triggerChange();\r\n                        }\r\n                    };\r\n                }\r\n                MultiSelectData.DropDownItemContent.select(false);\r\n                removeElement(pickElement);\r\n                MultiSelectData.PickContent.dispose();\r\n                MultiSelectData.PickContent=null;\r\n                MultiSelectData.pickElement=null;\r\n\r\n                removeSelectedFromList(MultiSelectData);\r\n                dec();\r\n                triggerChange();\r\n            }\r\n        }\r\n\r\n        // processRemoveButtonClick removes the \r\n        // what is a problem with calling removeSelectedItem directly (not using  setTimeout(removeSelectedItem, 0)):\r\n        // consider situation \"MultiSelect\" on DROPDOWN (that should be closed on the click outside dropdown)\r\n        // therefore we aslo have document's click's handler where we decide to close or leave the DROPDOWN open.\r\n        // because of the event's bubling process removeSelectedItem runs first. \r\n        // that means the event's target element on which we click (the x button) will be removed from the DOM together with badge \r\n        // before we could analize is it belong to our dropdown or not.\r\n        // important 1: we can't just the stop propogation using stopPropogate because click outside dropdown on the similar \r\n        // component that use stopPropogation will not close dropdown (error, dropdown should be closed)\r\n        // important 2: we can't change the dropdown's event handler to leave dropdown open if event's target is null because of\r\n        // the situation described above: click outside dropdown on the same component.\r\n        // Alternatively it could be possible to use stopPropogate but together create custom click event setting new target that belomgs to DOM (e.g. panel)\r\n\r\n        let removeSelectedItemAndCloseDropDown = () => {\r\n            removeSelectedItem();\r\n            onRemove();\r\n        };\r\n    \r\n        let onRemoveSelectedItemEvent = (event) => {\r\n            processRemoveButtonClick(() => removeSelectedItemAndCloseDropDown(), event);\r\n        };\r\n\r\n        MultiSelectData.PickContent = pickContentGenerator(\r\n            pickElement,\r\n            MultiSelectData.option,\r\n            onRemoveSelectedItemEvent);\r\n\r\n        var disable = (isDisabled) =>\r\n            MultiSelectData.PickContent.disable(isDisabled);\r\n        disable(isComponentDisabled);\r\n\r\n        MultiSelectData.excludedFromSearch = true; // all selected excluded from search\r\n        MultiSelectData.disable = disable;\r\n        picksElement.insertBefore(pickElement, pickFilterElement);\r\n         \r\n        MultiSelectData.toggle = () => removeSelectedItem();\r\n        MultiSelectData.DropDownItemContent.select(true);\r\n        inc();\r\n    }\r\n\r\n    var picksClick = event => {\r\n        onClick(event);\r\n    };\r\n\r\n    function iterateAll(isDisabled){\r\n        let i = MultiSelectDataSelectedTail;\r\n        while(i){\r\n            i.disable(isDisabled); \r\n            i = i.selectedPrev;\r\n        }\r\n    }\r\n\r\n    var item = {\r\n        pickFilterElement,\r\n        createPick,\r\n        removePicksTail,\r\n        resetMultiSelectDataSelectedTail() {\r\n            reset();\r\n            MultiSelectDataSelectedTail = null;\r\n        },\r\n        isEmpty,\r\n        enable(){\r\n            isComponentDisabled= false;\r\n            iterateAll(false);\r\n            picksElement.addEventListener(\"click\", picksClick);\r\n\r\n        },\r\n        disable(){\r\n            isComponentDisabled= true;\r\n            iterateAll(true);\r\n            picksElement.removeEventListener(\"click\", picksClick);\r\n\r\n        },\r\n        dispose(){\r\n            var toRemove = picksElement.firstChild;\r\n            while( toRemove ) {\r\n                picksElement.removeChild( toRemove );\r\n                toRemove = picksElement.firstChild;\r\n            }\r\n            picksElement.removeEventListener(\"click\", picksClick); // OPEN dropdown\r\n        }\r\n        \r\n    }\r\n    return item;\r\n}","export function MultiSelectInputAspect (\r\n    window,\r\n    appendToContainer, \r\n    choiceFilterInputElement, \r\n    picksElement,\r\n    choicesElement, \r\n    showDropDown,\r\n    hideDropDownAndResetFilter,\r\n    isDropDownMenuEmpty,\r\n    Popper\r\n    ) {\r\n        appendToContainer();\r\n        var document = window.document;\r\n\r\n    var skipFocusout = false;\r\n    \r\n    // we want to escape the closing of the menu (because of focus out from) on a user's click inside the container\r\n    var skipoutMousedown = function() {\r\n         skipFocusout = true;\r\n    }\r\n\r\n    var documentMouseup = function(event) {\r\n        // if click outside container - close dropdown\r\n        if (  !(choicesElement === event.target \r\n                || picksElement === event.target \r\n                || choicesElement.contains(event.target)\r\n                || picksElement.contains(event.target)\r\n               )\r\n            ) {\r\n            hideDropDownAndResetFilter();\r\n        }\r\n    }\r\n\r\n    var popper = new Popper( \r\n        choiceFilterInputElement, \r\n        choicesElement, \r\n        {\r\n            placement: 'bottom-start',\r\n            modifiers: {\r\n                preventOverflow: {enabled:false},\r\n                hide: {enabled:false},\r\n                flip: {enabled:false}\r\n            }\r\n        }\r\n    );\r\n\r\n    var filterInputItemOffsetLeft = null; // used to detect changes in input field position (by comparision with current value)\r\n    var preventDefaultClickEvent = null;\r\n\r\n    function alignAndShowDropDown(event){\r\n        if (preventDefaultClickEvent != event) {\r\n            if (!isDropDownMenuEmpty())\r\n            {\r\n                alignToFilterInputItemLocation(true);\r\n                showDropDown();\r\n            }\r\n        }\r\n        preventDefaultClickEvent=null;\r\n    }\r\n    \r\n    function alignToFilterInputItemLocation(force) {\r\n        let offsetLeft = choiceFilterInputElement.offsetLeft;\r\n        if (force || filterInputItemOffsetLeft != offsetLeft){ // position changed\r\n            popper.update();\r\n            filterInputItemOffsetLeft = offsetLeft;\r\n        }\r\n    }\r\n\r\n    return {\r\n        dispose(){\r\n            popper.destroy();\r\n        },\r\n        alignToFilterInputItemLocation,\r\n        alignAndShowDropDown,\r\n        processUncheck(uncheckOption, event){\r\n            // we can't remove item on \"click\" in the same loop iteration - it is unfrendly for 3PP event handlers (they will get detached element)\r\n            // never remove elements in the same event iteration\r\n\r\n            window.setTimeout(()=>uncheckOption(),0)\r\n            preventDefaultClickEvent = event; // setPreventDefaultMultiSelectEvent\r\n        },\r\n        onDropDownShow(){\r\n            // add listeners that manages close dropdown on input's focusout and click outside container\r\n            //container.removeEventListener(\"mousedown\", containerMousedown);\r\n\r\n            picksElement.addEventListener(\"mousedown\", skipoutMousedown);\r\n            choicesElement.addEventListener(\"mousedown\", skipoutMousedown);\r\n            document.addEventListener(\"mouseup\", documentMouseup);\r\n            \r\n        },\r\n        onDropDownHide(){\r\n            picksElement.removeEventListener(\"mousedown\", skipoutMousedown);\r\n            choicesElement.addEventListener(\"mousedown\", skipoutMousedown);\r\n            document.removeEventListener(\"mouseup\", documentMouseup);\r\n        },\r\n        getSkipFocusout : function() {\r\n             return skipFocusout;\r\n        },\r\n        resetSkipFocusout : function() {\r\n             skipFocusout=false;\r\n        }\r\n    }\r\n}","import Popper from 'popper.js'\r\nimport {FilterPanel} from './FilterPanel'\r\nimport {ChoicesPanel} from './ChoicesPanel'\r\nimport {PicksPanel} from './PicksPanel'\r\nimport {MultiSelectInputAspect} from './MultiSelectInputAspect'\r\nimport {PlaceholderAspect} from './PlaceholderAspect'\r\n\r\nimport {EventSkipper} from './EventSkipper'\r\nimport {removeElement} from './DomTools'\r\n\r\nfunction filterMultiSelectData(MultiSelectData, isFiltered, visibleIndex) {\r\n    MultiSelectData.visible = isFiltered;\r\n    MultiSelectData.visibleIndex = visibleIndex;\r\n    MultiSelectData.dropDownMenuItemElement.style.display = isFiltered ? 'block': 'none';\r\n} \r\n\r\nfunction resetDropDownMenu(MultiSelectDataList) {\r\n    for(let i=0; i<MultiSelectDataList.length; i++)\r\n    {\r\n        let multiSelectData = MultiSelectDataList[i];\r\n        if ( !multiSelectData.isHidden )\r\n        {\r\n            filterMultiSelectData(multiSelectData, true, i);\r\n        }\r\n    }\r\n}\r\n\r\nfunction collectFilterDropDownMenu(MultiSelectDataList, text) {\r\n    var list = [];\r\n    var j = 0;\r\n    for(let i=0; i<MultiSelectDataList.length; i++)\r\n    {\r\n        let multiSelectData = MultiSelectDataList[i];\r\n        if ( !multiSelectData.isHidden )\r\n        {\r\n            if ( multiSelectData.excludedFromSearch || multiSelectData.searchText.indexOf(text)<0 )\r\n            {\r\n                filterMultiSelectData(multiSelectData, false);\r\n            }\r\n            else \r\n            {\r\n                filterMultiSelectData(multiSelectData, true, j++);\r\n                list.push( multiSelectData );\r\n            }\r\n        }\r\n    }\r\n    return list;\r\n}\r\n\r\nexport class MultiSelect {\r\n\r\n    constructor(optionsAdapter, setSelected, containerAdapter, styling, \r\n        pickContentGenerator, choiceContentGenerator, \r\n        labelAdapter, createStylingComposite, placeholderText,\r\n        configuration, onUpdate, onDispose, window) {\r\n        if (typeof Popper === 'undefined') {\r\n            throw new TypeError('DashboardCode BsMultiSelect require Popper.js (https://popper.js.org)')\r\n        }\r\n        this.onUpdate = onUpdate;\r\n        this.onDispose = onDispose; \r\n\r\n        // readonly\r\n        this.optionsAdapter = optionsAdapter;\r\n        this.containerAdapter = containerAdapter;\r\n        this.styling = styling;\r\n        this.pickContentGenerator = pickContentGenerator;\r\n        this.choiceContentGenerator = choiceContentGenerator;\r\n        this.labelAdapter = labelAdapter;\r\n        this.createStylingComposite = createStylingComposite;\r\n        this.configuration = configuration;\r\n        this.placeholderText = placeholderText;\r\n        this.setSelected=setSelected; // should I rebind this for callbacks? setSelected.bind(this);\r\n        this.window = window;\r\n\r\n        this.visibleCount=10;\r\n\r\n        this.choicesPanel = null;\r\n\r\n        this.stylingComposite = null;\r\n\r\n        this.isComponentDisabled = null;\r\n                \r\n        this.resetMultiSelectDataList();\r\n    }\r\n\r\n    resetMultiSelectDataList(){\r\n        this.MultiSelectDataList = [];\r\n        this.filteredMultiSelectDataList = null;\r\n    }\r\n\r\n    \r\n    getVisibleMultiSelectDataList(){\r\n        if (this.filteredMultiSelectDataList)\r\n            return this.filteredMultiSelectDataList;\r\n        else\r\n            return this.MultiSelectDataList;\r\n    }\r\n\r\n    resetFilter(){\r\n        if (!this.filterPanel.isEmpty()) {\r\n            this.filterPanel.setEmpty();\r\n            this.processEmptyInput();\r\n            this.placeholderAspect.updatePlacehodlerVisibility();\r\n        }\r\n    }\r\n\r\n    processEmptyInput(){\r\n        this.filterPanel.setEmptyLength();\r\n        resetDropDownMenu(this.MultiSelectDataList);\r\n        this.filteredMultiSelectDataList = null;\r\n    }\r\n\r\n    // -----------------------------------------------------------------------------------------------------------------------\r\n    GetContainer(){\r\n        return this.containerAdapter.containerElement;\r\n    }\r\n\r\n    Update(){\r\n        this.onUpdate();\r\n        this.UpdateDisabled();\r\n        this.UpdateData();\r\n    }\r\n\r\n    /*\r\n    UpdateOption(index){\r\n        let multiSelectData = this.MultiSelectDataList[index];\r\n        let option = multiSelectData.option;\r\n        multiSelectData.searchText = option.text.toLowerCase().trim();\r\n        if (multiSelectData.isHidden != option.isHidden)\r\n        {\r\n            multiSelectData.isHidden=option.isHidden;\r\n            if (multiSelectData.isHidden)\r\n                this.optionsPanel.insertDropDownItem(multiSelectData, \r\n                    (p1,p2,p3)=>this.picksPanel.createPick(p1,p2,p3),\r\n                    ()=>this.optionsAdapter.triggerChange(),\r\n                    option.isSelected, option.isDisabled);\r\n            else\r\n                multiSelectData.removeDropDownMenuItemElement();\r\n        }\r\n        else \r\n        {\r\n            if (multiSelectData.isSelected != option.isSelected)\r\n            {\r\n                multiSelectData.isSelected=option.isSelected;\r\n                if (multiSelectData.isSelected)\r\n                {\r\n                    // this.insertDropDownItem(multiSelectData, (e)=>this.dropDownMenu.appendChild(e), isSelected, isDisabled);\r\n                }\r\n                else\r\n                {\r\n                    // multiSelectData.removeDropDownMenuItemElement();\r\n                }\r\n            }\r\n            if (multiSelectData.isDisabled != option.isDisabled)\r\n            {\r\n                multiSelectData.isDisabled=option.isDisabled;\r\n                if (multiSelectData.isDisabled)\r\n                {\r\n                    // this.insertDropDownItem(multiSelectData, (e)=>this.dropDownMenu.appendChild(e), isSelected, isDisabled);\r\n                }\r\n                else\r\n                {\r\n                    // multiSelectData.removeDropDownMenuItemElement();\r\n                }\r\n            }\r\n        }    \r\n        //multiSelectData.updateOption();\r\n    }*/\r\n\r\n    DeselectAll(){\r\n        this.choicesPanel.hideDropDown(); // always hide 1st\r\n\r\n        for(let i=0; i<this.MultiSelectDataList.length; i++)\r\n        {\r\n            let multiSelectData = this.MultiSelectDataList[i];\r\n            if (multiSelectData.pickElement)\r\n                multiSelectData.toggle();\r\n        }\r\n        this.resetFilter();\r\n        \r\n    }\r\n\r\n    SelectAll(){\r\n        this.choicesPanel.hideDropDown(); // always hide 1st\r\n\r\n        for(let i=0; i<this.MultiSelectDataList.length; i++)\r\n        {\r\n            let multiSelectData = this.MultiSelectDataList[i];\r\n            if (!multiSelectData.excludedFromSearch)\r\n                multiSelectData.toggle();\r\n        }\r\n        this.resetFilter();\r\n    }\r\n\r\n    empty(){\r\n        // close drop down , remove filter and listeners\r\n        this.choicesPanel.hideDropDown(); // always hide 1st\r\n        this.resetFilter();\r\n\r\n        for(let i=0; i<this.MultiSelectDataList.length; i++)\r\n        {\r\n            let multiSelectData = this.MultiSelectDataList[i];\r\n            if (multiSelectData.dropDownMenuItemElement)\r\n                removeElement(multiSelectData.dropDownMenuItemElement);\r\n            if (multiSelectData.pickElement)\r\n                removeElement(multiSelectData.pickElement);\r\n        }\r\n        this.resetMultiSelectDataList();\r\n        this.picksPanel.resetMultiSelectDataSelectedTail();// this.MultiSelectDataSelectedTail = null;\r\n    }\r\n\r\n    UpdateData(){\r\n        this.empty();\r\n        // reinitiate\r\n        this.updateDataImpl();\r\n        \r\n    }\r\n\r\n    updateDataImpl(){\r\n        var createDropDownItems = () => {\r\n            let options = this.optionsAdapter.getOptions();\r\n            var j = 0;\r\n            for(let i = 0; i<options.length; i++) {\r\n                let option = options[i];\r\n\r\n                let isSelected = option.selected;\r\n\r\n                let isDisabled = (option.disabled)?option.disabled:false;\r\n                let isHidden   = (option.hidden)?option.hidden:false;\r\n                \r\n                var MultiSelectData = {\r\n                    searchText: option.text.toLowerCase().trim(),\r\n                    excludedFromSearch: isSelected || isDisabled || isHidden,\r\n                    option: option,\r\n                    isHidden: isHidden,\r\n                    dropDownMenuItemElement: null,\r\n                    dropDownItemContent: null,\r\n                    selectedPrev: null,\r\n                    selectedNext: null,\r\n                    visible: false,\r\n                    toggle: null,\r\n                    pickElement: null,\r\n                    remove: null,\r\n                    disable: null,\r\n                    removeDropDownMenuItemElement: null\r\n                };\r\n\r\n                this.MultiSelectDataList.push(MultiSelectData);\r\n                if (!isHidden){\r\n                    MultiSelectData.visible = true;\r\n                    MultiSelectData.visibleIndex=i;\r\n                    this.choicesPanel.insertDropDownItem(\r\n                        MultiSelectData, \r\n                        (p1,p2,p3) => this.picksPanel.createPick(p1,p2,p3),\r\n                        (o,i) => this.setSelected(o,i),\r\n                        () => this.optionsAdapter.triggerChange(), \r\n                        isSelected, \r\n                        isDisabled);\r\n                }\r\n            } \r\n            this.aspect.alignToFilterInputItemLocation(false);\r\n            //this.placeholderAspect.updatePlacehodlerVisibility();\r\n        }\r\n\r\n        // some browsers (IE11) can change select value (as part of \"autocomplete\") after page is loaded but before \"ready\" event\r\n        if (document.readyState != 'loading'){\r\n            createDropDownItems();\r\n        } else {\r\n            var createDropDownItemsHandler = function(){\r\n                createDropDownItems();\r\n                document.removeEventListener(\"DOMContentLoaded\", createDropDownItemsHandler);\r\n            }\r\n            document.addEventListener('DOMContentLoaded', createDropDownItemsHandler); // IE9+\r\n        }\r\n    }\r\n\r\n    Dispose(){\r\n        if (this.onDispose)\r\n            this.onDispose(); // primary used to remove from jQuery tables\r\n        \r\n        // remove event listeners\r\n        // TODO check if open\r\n        this.choicesPanel.hideDropDown();\r\n        if (this.optionsAdapter.dispose)\r\n            this.optionsAdapter.dispose();\r\n        this.picksPanel.dispose();\r\n        this.filterPanel.dispose();\r\n        \r\n        this.labelAdapter.dispose();\r\n        \r\n        this.aspect.dispose();\r\n        \r\n        this.containerAdapter.dispose();\r\n\r\n        for(let i=0; i<this.MultiSelectDataList.length; i++)\r\n        {\r\n            let multiSelectData = this.MultiSelectDataList[i];\r\n            multiSelectData.toggle = null;\r\n            multiSelectData.remove = null; \r\n            multiSelectData.removeDropDownMenuItemElement = null;\r\n            if (multiSelectData.DisposeDropDownMenuItemElement)\r\n                multiSelectData.DisposeDropDownMenuItemElement();\r\n            \r\n            if (multiSelectData.PickContent)\r\n                multiSelectData.PickContent.dispose();\r\n            if (multiSelectData.DropDownItemContent)\r\n                multiSelectData.DropDownItemContent.dispose();\r\n        }\r\n    }\r\n\r\n    UpdateDisabled(){\r\n        let isComponentDisabled = this.optionsAdapter.getDisabled();\r\n        if (this.isComponentDisabled!==isComponentDisabled){\r\n            if (isComponentDisabled) {\r\n                this.picksPanel.disable();\r\n                this.placeholderAspect.setDisabled(true);\r\n                this.styling.Disable(this.stylingComposite);\r\n            } else {\r\n                this.picksPanel.enable();\r\n                this.placeholderAspect.setDisabled(false);\r\n                this.styling.Enable(this.stylingComposite);\r\n            }\r\n            this.isComponentDisabled=isComponentDisabled;\r\n        }\r\n    }\r\n \r\n    input(filterInputValue, resetLength){\r\n        let text = filterInputValue.trim().toLowerCase();\r\n        var isEmpty=false;\r\n        if (text == '')\r\n            isEmpty=true;\r\n        else\r\n        {\r\n            // check if exact match, otherwise new search\r\n            this.filteredMultiSelectDataList = collectFilterDropDownMenu(this.MultiSelectDataList, text);\r\n            if (this.filteredMultiSelectDataList.length == 1)\r\n            {\r\n                let fullMatchMultiSelectData =  this.filteredMultiSelectDataList[0];\r\n                if (fullMatchMultiSelectData.searchText == text)\r\n                {\r\n                    fullMatchMultiSelectData.toggle();\r\n                    this.filterPanel.setEmpty(); // clear\r\n                    isEmpty=true;\r\n                }\r\n            }\r\n        }\r\n        if (isEmpty)\r\n            this.processEmptyInput();\r\n        else\r\n            resetLength();  \r\n        \r\n        \r\n        this.choicesPanel.stopAndResetDropDownMenuHover();\r\n        if (this.getVisibleMultiSelectDataList().length == 1) {\r\n            this.choicesPanel.hoverInInternal(0)\r\n        }\r\n\r\n        if (this.getVisibleMultiSelectDataList().length > 0) {\r\n            this.aspect.alignToFilterInputItemLocation(true); // we need it to support case when textbox changes its place because of line break (texbox grow with each key press)\r\n            this.choicesPanel.showDropDown();\r\n        } else {\r\n            this.choicesPanel.hideDropDown();\r\n        }\r\n    }\r\n\r\n    init() {\r\n        var document = this.window.document;\r\n        var createElement = (name) => document.createElement(name);\r\n\r\n        var lazyfilterItemInputElementAtach=null;\r\n        \r\n        this.filterPanel = FilterPanel(\r\n            createElement,\r\n            (filterItemInputElement) => {\r\n                lazyfilterItemInputElementAtach = (filterItemElement)=>{\r\n                    filterItemElement.appendChild(filterItemInputElement);\r\n                    this.labelAdapter.init(filterItemInputElement); \r\n                };\r\n            },\r\n            () => {\r\n                this.styling.FocusIn(this.stylingComposite)\r\n            },  // focus in - show dropdown\r\n            () => {\r\n                if (!this.aspect.getSkipFocusout()) // skip initiated by mouse click (we manage it different way)\r\n                {\r\n                    this.resetFilter(); // if do not do this we will return to filtered list without text filter in input\r\n                    this.styling.FocusOut(this.stylingComposite)\r\n                }\r\n                this.aspect.resetSkipFocusout();\r\n            }, // focus out - hide dropdown\r\n            () => this.choicesPanel.keyDownArrow(false), // arrow up\r\n            () => this.choicesPanel.keyDownArrow(true),  // arrow down\r\n            () => this.choicesPanel.hideDropDown(),  // tab on empty\r\n            () => {\r\n                this.picksPanel.removePicksTail();\r\n                this.aspect.alignToFilterInputItemLocation(false);\r\n            }, // backspace - \"remove last\"\r\n            () => { \r\n                if (this.choicesPanel.getIsVisble())\r\n                    this.choicesPanel.toggleHovered() }, // tab/enter \"compleate hovered\"\r\n            (isEmpty, event) => {\r\n                if (!isEmpty || this.choicesPanel.getIsVisble()) // supports bs modal - stop esc (close modal) propogation\r\n                    event.stopPropagation();\r\n            }, // esc keydown\r\n            () => {\r\n                this.choicesPanel.hideDropDown(); // always hide 1st\r\n                this.resetFilter();\r\n            }, // esc keyup \r\n            (filterInputValue, resetLength) =>\r\n            { \r\n                this.placeholderAspect.updatePlacehodlerVisibility();\r\n                this.input(filterInputValue, resetLength) \r\n            }, // filter\r\n            () => {\r\n                this.placeholderAspect.updateEmptyInputWidth();\r\n            }\r\n        );\r\n        \r\n        this.picksPanel =  PicksPanel(\r\n            this.setSelected,\r\n            createElement,\r\n            this.containerAdapter.picksElement,\r\n            (filterItemElement) => {\r\n                lazyfilterItemInputElementAtach(filterItemElement);\r\n            },\r\n            this.pickContentGenerator,\r\n            this.isComponentDisabled,\r\n            () => this.optionsAdapter.triggerChange(),\r\n            () => {\r\n                this.choicesPanel.hideDropDown(); // always hide 1st\r\n                this.resetFilter();\r\n            },\r\n            (event) => {\r\n                if (!this.filterPanel.isEventTarget(event))\r\n                     this.filterPanel.setFocus();\r\n                this.aspect.alignAndShowDropDown(event); \r\n            },\r\n            ()=> this.placeholderAspect.updatePlacehodlerVisibility(),\r\n            (doUncheck, event) => {\r\n                this.aspect.processUncheck(doUncheck, event);\r\n            }\r\n        );\r\n\r\n        this.choicesPanel = ChoicesPanel(\r\n            createElement,\r\n            this.containerAdapter.choicesElement,\r\n            () => this.aspect.onDropDownShow(),\r\n            () => this.aspect.onDropDownHide(),\r\n            EventSkipper(this.window),\r\n            this.choiceContentGenerator,\r\n            () => this.getVisibleMultiSelectDataList(),\r\n            () => this.resetFilter(),\r\n            () => this.aspect.alignToFilterInputItemLocation(true),\r\n            () => this.filterPanel.setFocus()\r\n        );\r\n\r\n        this.placeholderAspect = PlaceholderAspect(\r\n            this.placeholderText, \r\n            () => this.picksPanel.isEmpty(), \r\n            () => this.filterPanel.isEmpty(), \r\n            this.containerAdapter.picksElement, \r\n            this.filterPanel.filterInputElement\r\n        )\r\n\r\n        this.placeholderAspect.init();\r\n        this.placeholderAspect.updateEmptyInputWidth();\r\n        \r\n\r\n        this.aspect =  MultiSelectInputAspect(\r\n            this.window,\r\n            ()=>this.containerAdapter.appendToContainer(), \r\n            this.picksPanel.pickFilterElement, \r\n            this.containerAdapter.picksElement, \r\n            this.containerAdapter.choicesElement, \r\n            () => this.choicesPanel.showDropDown(),\r\n            () => {  \r\n                this.choicesPanel.hideDropDown();\r\n                this.resetFilter();\r\n            },\r\n            () => this.getVisibleMultiSelectDataList().length==0, \r\n            Popper\r\n        );\r\n        \r\n        this.stylingComposite = this.createStylingComposite(\r\n            this.picksPanel.pickFilterElement, \r\n            this.filterPanel.filterInputElement, \r\n            this.containerAdapter.choicesElement);\r\n        \r\n        this.styling.Init(this.stylingComposite);\r\n\r\n        this.containerAdapter.attachContainer();\r\n\r\n        this.onUpdate();\r\n        this.UpdateDisabled(); // should be done after updateDataImpl\r\n        this.updateDataImpl();\r\n\r\n        if (this.optionsAdapter.subscribeToReset)\r\n            this.optionsAdapter.subscribeToReset(()=> this.window.setTimeout( ()=>this.UpdateData() ) );\r\n    }\r\n}","export function EventSkipper(window) {\r\n    var isSkippable = false;\r\n    return {\r\n        isSkippable(){\r\n            return isSkippable;\r\n        },\r\n        setSkippable(){\r\n            isSkippable = true;\r\n            window.setTimeout( \r\n                () => {  \r\n                    isSkippable = false;\r\n                }, 0)\r\n        }\r\n    }\r\n}","export function PlaceholderAspect(placeholderText, picksIsEmpty, filterIsEmpty, picksElement, inputElement ){\r\n    function setEmptyInputWidth(isVisible){\r\n        if(isVisible)\r\n            inputElement.style.width=\"100%\"\r\n        else\r\n            inputElement.style.width=\"2ch\";\r\n    }\r\n\r\n    function showPlacehodler(isVisible){\r\n        if (isVisible)\r\n        {\r\n            inputElement.placeholder = placeholderText?placeholderText:\"\";\r\n            picksElement.style.display= \"block\";\r\n        }\r\n        else\r\n        {\r\n            inputElement.placeholder = \"\";\r\n            picksElement.style.display= \"flex\";\r\n        }\r\n        setEmptyInputWidth(isVisible);\r\n    }\r\n    showPlacehodler(true);\r\n\r\n    return {\r\n        init(){\r\n        },\r\n        updatePlacehodlerVisibility(){\r\n            showPlacehodler(picksIsEmpty() && filterIsEmpty());\r\n        },\r\n        updateEmptyInputWidth(){\r\n            setEmptyInputWidth(picksIsEmpty() && filterIsEmpty())\r\n        },\r\n        setDisabled(isDisabled)\r\n        { \r\n            inputElement.disabled = isDisabled;\r\n        }\r\n    }\r\n}","export function ContainerAdapter(createElement, selectElement, containerElement, picksElement) { // select\r\n    var ownContainerElement = false;\r\n    var ownPicksElement = false;\r\n    \r\n    if (!containerElement){\r\n        containerElement = createElement('div');\r\n        ownContainerElement= true;\r\n    }\r\n    if (!picksElement){\r\n        picksElement = createElement('UL');\r\n        ownPicksElement = true;\r\n    }\r\n\r\n    var choicesElement = createElement('UL');\r\n    choicesElement.style.display=\"none\";\r\n    \r\n    var backupDisplay = null;\r\n    if (selectElement)\r\n    { \r\n        backupDisplay = selectElement.style.display;\r\n        selectElement.style.display='none';\r\n    }\r\n    \r\n    return {\r\n        containerElement,\r\n        picksElement,\r\n        choicesElement,\r\n        init(){\r\n            if (ownPicksElement)\r\n                containerElement.appendChild(picksElement);\r\n        },\r\n        appendToContainer(){\r\n            if (ownContainerElement || !selectElement)            \r\n            {\r\n                if (ownPicksElement)\r\n                    containerElement.appendChild(picksElement);\r\n                containerElement.appendChild(choicesElement);\r\n            }\r\n            else\r\n            {\r\n                if (selectElement)\r\n                {\r\n                    selectElement.parentNode.insertBefore(choicesElement, selectElement.nextSibling);\r\n                    if (ownPicksElement)\r\n                        selectElement.parentNode.insertBefore(picksElement, choicesElement);\r\n                }\r\n            }\r\n        },\r\n        attachContainer(){\r\n            if (ownContainerElement)\r\n                selectElement.parentNode.insertBefore(containerElement, selectElement.nextSibling);\r\n        },\r\n        dispose(){\r\n            if (ownContainerElement)\r\n                containerElement.parentNode.removeChild(containerElement);\r\n            if (ownPicksElement)\r\n                picksElement.parentNode.removeChild(picksElement);\r\n            choicesElement.parentNode.removeChild(choicesElement);\r\n            if (selectElement)\r\n                selectElement.style.display = backupDisplay;\r\n        }\r\n    }\r\n}","import {addClass, removeClass, setStyles} from './DomTools';\r\n\r\nfunction updateIsValid(picksElement, isValid, isInvalid){\r\n    if (isValid)\r\n        addClass(picksElement,'is-valid');\r\n    else\r\n        removeClass(picksElement,'is-valid');\r\n    \r\n    if (isInvalid)\r\n        addClass(picksElement,'is-invalid');\r\n    else\r\n        removeClass(picksElement,'is-invalid');\r\n}\r\n\r\n\r\nfunction updateSize(picksElement, size){\r\n    if (size==\"custom-select-lg\"){\r\n        addClass(picksElement,'form-control-lg');\r\n        removeClass(picksElement,'form-control-sm');\r\n    }\r\n    else if (size==\"custom-select-sm\"){\r\n        removeClass(picksElement,'form-control-lg');\r\n        addClass(picksElement,'form-control-sm');\r\n    }\r\n    else{\r\n        removeClass(picksElement,'form-control-lg');\r\n        removeClass(picksElement,'form-control-sm');\r\n    }\r\n}\r\n\r\nfunction updateSizeJs(picksElement, picksStyleLg, picksStyleSm, picksStyleDef, size){\r\n    updateSize(picksElement, size);\r\n    if (size==\"custom-select-lg\" || size==\"input-group-lg\"){\r\n        setStyles(picksElement, picksStyleLg);\r\n    } else if (size==\"custom-select-sm\" || size==\"input-group-sm\"){\r\n        setStyles(picksElement, picksStyleSm);\r\n    } else {\r\n        setStyles(picksElement, picksStyleDef);\r\n    }\r\n}\r\n\r\nfunction updateIsValidForAdapter(picksElement, optionsAdapter){\r\n    updateIsValid(picksElement, optionsAdapter.getIsValid(), optionsAdapter.getIsInvalid())\r\n}\r\n\r\nfunction updateSizeForAdapter(picksElement, optionsAdapter){\r\n    updateSize(picksElement, optionsAdapter.getSize())\r\n}\r\n\r\nfunction updateSizeJsForAdapter(picksElement, picksStyleLg, picksStyleSm, picksStyleDef, optionsAdapter){\r\n    updateSizeJs(picksElement, picksStyleLg, picksStyleSm, picksStyleDef,  optionsAdapter.getSize())\r\n}\r\n\r\nexport function createBsAppearance(picksElement, configuration, optionsAdapter){\r\n    var updateIsValid = () => updateIsValidForAdapter(picksElement, optionsAdapter);\r\n    if (configuration.useCss){\r\n        return Object.create({\r\n            updateIsValid,\r\n            updateSize: () => updateSizeForAdapter(picksElement, optionsAdapter)\r\n        });\r\n    }else{\r\n        const {picksStyleLg, picksStyleSm, picksStyleDef} = configuration;\r\n        return Object.create({\r\n            updateIsValid,\r\n            updateSize: () => updateSizeJsForAdapter(picksElement, \r\n                picksStyleLg, picksStyleSm, picksStyleDef, optionsAdapter)\r\n        });\r\n    }\r\n}","import $ from 'jquery'\r\n\r\nimport {extendIfUndefined} from './JsTools';\r\nimport {MultiSelect} from './MultiSelect'\r\nimport {LabelAdapter} from './LabelAdapter';\r\nimport {addToJQueryPrototype} from './AddToJQueryPrototype'\r\n\r\nimport {OptionsAdapterJson,OptionsAdapterElement} from './OptionsAdapters';\r\n\r\nimport {StylingCorrector} from './StylingCorrector'\r\nimport {Styling} from './Styling';\r\n\r\nimport {BsPickContentGenerator, BsPickContentStylingCorrector} from './BsPickContentGenerator';\r\nimport {BsChoiceContentGenerator, BsChoiceContentStylingCorrector} from './BsChoiceContentGenerator';\r\nimport {ContainerAdapter} from './ContainerAdapter';\r\n\r\nimport {createBsAppearance} from './BsAppearance';\r\nimport {findDirectChildByTagName, setStyles} from './DomTools';\r\n\r\nconst classesDefaults = {\r\n    containerClass: 'dashboardcode-bsmultiselect',\r\n    choicesClass: 'dropdown-menu',\r\n\r\n    choiceClassHover: 'text-primary bg-light', // TODO looks like bullshit\r\n    choiceClassSelected: '', // not used? should be used in OptionsPanel.js\r\n    choiceClassDisabled: '', // not used? should be used in OptionsPanel.js\r\n\r\n    picksClass: 'form-control',  \r\n    picksClassFocus: 'focus', // internal, not bs4, used in scss\r\n    picksClassDisabled: 'disabled', // internal, not bs4, used in scss\r\n\r\n    pickClassDisabled: '', // not used? should be used in PicksPanel.js\r\n    \r\n    pickFilterClass: '', \r\n    filterInputClass: '',\r\n\r\n    // used in BsPickContentStylingCorrector\r\n    pickClass: 'badge',\r\n    pickRemoveButtonClass: 'close',\r\n    pickContentClassDisabled: 'disabled', // internal, not bs4, used in scss\r\n\r\n    // used in BsChoiceContentStylingCorrector\r\n    choiceClass:  'px-2',\r\n    choiceCheckBoxClassDisabled: 'disabled' // internal, not bs4, used in scss\r\n\r\n};\r\n\r\nconst stylingDefaults = {\r\n    // used in StylingCorrector\r\n    picksStyle: {marginBottom: 0, height: 'auto'},\r\n    picksStyleDisabled: {backgroundColor: '#e9ecef'},\r\n\r\n    picksStyleFocus: {borderColor: '#80bdff', boxShadow: '0 0 0 0.2rem rgba(0, 123, 255, 0.25)'},\r\n    picksStyleFocusValid: {boxShadow: '0 0 0 0.2rem rgba(40, 167, 69, 0.25)'},\r\n    picksStyleFocusInvalid: {boxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)'},\r\n    \r\n    filterInputStyle: {color: 'inherit' /*#495057 for default BS*/, fontWeight : 'inherit'},\r\n\r\n    // used in BsAppearance\r\n    picksStyleDef: {minHeight: 'calc(2.25rem + 2px)'},\r\n    picksStyleLg:  {minHeight: 'calc(2.875rem + 2px)'},\r\n    picksStyleSm:  {minHeight: 'calc(1.8125rem + 2px)'},\r\n\r\n    // used in BsPickContentStylingCorrector\r\n    pickStyle: {paddingLeft: '0px', lineHeight: '1.5em'},\r\n    pickButtonStyle: {fontSize:'1.5em', lineHeight: '.9em'},\r\n    pickContentStyleDisabled: {opacity: '.65'},\r\n\r\n    // used in BsChoiceContentStylingCorrector\r\n    choiceLabelStyleDisabled: {color: '#6c757d'}\r\n};\r\n\r\n(\r\n    (window, $) => {\r\n        function createPlugin(element, settings, onDispose){\r\n            let configuration = $.extend({}, settings); // settings used per jQuery intialization, configuration per element\r\n            if (configuration.buildConfiguration)\r\n                configuration.buildConfiguration(element, configuration);\r\n            \r\n            let useCss = configuration.useCss;\r\n            let styling = configuration.styling;\r\n            if (!configuration.adapter)\r\n            {\r\n                let stylingCorrector = configuration.stylingCorrector;\r\n                if (!stylingCorrector)\r\n                {\r\n                    if (!useCss)\r\n                    {\r\n                        extendIfUndefined(configuration, stylingDefaults);\r\n                        stylingCorrector = StylingCorrector(configuration);\r\n                        var defFocusIn = stylingCorrector.focusIn;\r\n                        stylingCorrector.focusIn = (picksElement) => {\r\n                            if (picksElement.classList.contains(\"is-valid\")){\r\n                                setStyles(picksElement, configuration.picksStyleFocusValid)\r\n                            } else if (picksElement.classList.contains(\"is-invalid\")){\r\n                                setStyles(picksElement, configuration.picksStyleFocusInvalid)\r\n                            } else {\r\n                                defFocusIn(picksElement)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                extendIfUndefined(configuration, classesDefaults);\r\n                styling = Styling(configuration, stylingCorrector);\r\n            }\r\n\r\n            let optionsAdapter = null;\r\n            let containerAdapter = null;\r\n            if (configuration.optionsAdapter)\r\n                optionsAdapter = configuration.optionsAdapter;\r\n            else\r\n            {\r\n                var createElement = function(name){\r\n                    return window.document.createElement(name);\r\n                }\r\n                var trigger = function(eventName){\r\n                    $(element).trigger(eventName);\r\n                }\r\n                if (configuration.options){\r\n                    optionsAdapter = OptionsAdapterJson(\r\n                        configuration.options,\r\n                        configuration.getDisabled,\r\n                        configuration.getSize,\r\n                        configuration.getIsValid,\r\n                        configuration.getIsInvalid,\r\n                        trigger );\r\n                    if (!configuration.createInputId)\r\n                        configuration.createInputId = () => `${configuration.containerClass}-generated-filter-${element.id}`;\r\n                    // find direct child by tagName\r\n                    var picksElement = findDirectChildByTagName(element, \"UL\");\r\n                    containerAdapter = ContainerAdapter(createElement, null, element, picksElement);\r\n                } \r\n                else  \r\n                {\r\n                    var selectElement = null;\r\n                    var containerElement = null;\r\n                    if (element.tagName==\"SELECT\")\r\n                        selectElement = element;\r\n                    else \r\n                    { \r\n                        selectElement = findDirectChildByTagName(element, \"SELECT\");\r\n                        if (!selectElement)\r\n                            throw \"There are no SELECT element or options in the configuraion\";\r\n                        containerElement = element;\r\n                    }\r\n\r\n                    if (!containerElement && configuration.containerClass)\r\n                    {\r\n                        var $container = $(selectElement).closest('.'+configuration.containerClass);\r\n                        if ($container.length>0)\r\n                            containerElement =  $container.get(0);\r\n                    }\r\n\r\n                    if (!configuration.label)\r\n                    {\r\n                        let $formGroup = $(selectElement).closest('.form-group');\r\n                        if ($formGroup.length == 1) {\r\n                            let $label = $formGroup.find(`label[for=\"${selectElement.id}\"]`);\r\n                            if ($label.length>0)\r\n                            {   \r\n                                let label = $label.get(0);\r\n                                let forId = label.getAttribute('for');\r\n                                if (forId == selectElement.id) {\r\n                                    configuration.label = label;\r\n                                }\r\n                            }   \r\n                        }\r\n                    }\r\n                    var $form = $(selectElement).closest('form');\r\n                    var form = null;\r\n                    if ($form.length == 1) {\r\n                        form = $form.get(0);\r\n                    }\r\n                    \r\n                    if (!configuration.getDisabled) {\r\n                        var $fieldset = $(selectElement).closest('fieldset');\r\n                    \r\n                        if ($fieldset.length == 1) {\r\n                            var fieldset = $fieldset.get(0);\r\n                            configuration.getDisabled = () => selectElement.disabled || fieldset.disabled;\r\n                        }else{\r\n                            configuration.getDisabled = () => selectElement.disabled;\r\n                        }\r\n                    }\r\n\r\n                    if (!configuration.getSize) {\r\n                        configuration.getSize = function(){\r\n                            var value=null;\r\n                            if (selectElement.classList.contains('custom-select-lg') || selectElement.classList.contains('form-control-lg') )\r\n                                value='custom-select-lg';\r\n                            else if (selectElement.classList.contains('custom-select-sm')  || selectElement.classList.contains('form-control-sm')  )\r\n                                value='custom-select-sm';\r\n                            else if (containerElement && containerElement.classList.contains('input-group-lg'))\r\n                                value='input-group-lg';\r\n                            else if (containerElement && containerElement.classList.contains('input-group-sm'))\r\n                                value='input-group-sm';\r\n                            return value;\r\n                        }\r\n                    }\r\n                    if (!configuration.getIsValid) {\r\n                        configuration.getIsValid = function()\r\n                        { return selectElement.classList.contains('is-valid')}\r\n                    }\r\n                    if (!configuration.getIsInvalid) {\r\n                        configuration.getIsInvalid = function()\r\n                        { return selectElement.classList.contains('is-invalid')}\r\n                    }\r\n                    optionsAdapter = OptionsAdapterElement(selectElement, configuration.getDisabled, \r\n                        configuration.getSize, \r\n                        configuration.getIsValid, configuration.getIsInvalid,\r\n                        trigger, form);\r\n\r\n                    if (!configuration.createInputId)\r\n                        configuration.createInputId = () => `${configuration.containerClass}-generated-input-${((selectElement.id)?selectElement.id:selectElement.name).toLowerCase()}-id`;\r\n\r\n                    \r\n                    var picksElement = null;\r\n                    if (containerElement)\r\n                        picksElement = findDirectChildByTagName(containerElement, \"UL\");\r\n                    containerAdapter = ContainerAdapter(createElement, selectElement, containerElement, picksElement);\r\n                    \r\n                }\r\n            }\r\n            let labelAdapter = LabelAdapter(configuration.label, configuration.createInputId);\r\n\r\n            let pickContentGenerator = configuration.pickContentGenerator;\r\n            if (!pickContentGenerator){\r\n                let pickContentStylingCorrector = configuration.pickContentStylingCorrector;\r\n                if (!pickContentStylingCorrector)\r\n                {\r\n                    if (!useCss){\r\n                        var  {pickStyle, pickButtonStyle, pickContentStyleDisabled} = stylingDefaults;\r\n                        extendIfUndefined(configuration,  {pickStyle, pickButtonStyle, pickContentStyleDisabled});\r\n                        pickContentStylingCorrector=BsPickContentStylingCorrector(configuration, $);\r\n                    }\r\n                }\r\n                \r\n                var  {pickClass, pickRemoveButtonClass, pickContentClassDisabled} = classesDefaults;\r\n                extendIfUndefined(configuration, {pickClass, pickRemoveButtonClass, pickContentClassDisabled});\r\n                pickContentGenerator = BsPickContentGenerator(configuration, pickContentStylingCorrector, $);\r\n            }\r\n\r\n            let choiceContentGenerator = configuration.choiceContentGenerator;\r\n            if (!choiceContentGenerator){\r\n                let choiceContentStylingCorrector = configuration.choiceContentStylingCorrector;\r\n                if (!useCss){\r\n                    var {choiceLabelStyleDisabled} = stylingDefaults;\r\n                    extendIfUndefined(configuration, {choiceLabelStyleDisabled});\r\n                    choiceContentStylingCorrector=BsChoiceContentStylingCorrector(configuration, $);\r\n                }\r\n                \r\n                var  {choiceClass, choiceCheckBoxClassDisabled} = classesDefaults;\r\n                extendIfUndefined(configuration, {choiceClass, choiceCheckBoxClassDisabled});\r\n                choiceContentGenerator = BsChoiceContentGenerator(configuration, choiceContentStylingCorrector, $)\r\n            }\r\n\r\n            let createStylingComposite = function(pickFilterElement, inputElement, choicesElement){\r\n                return {\r\n                    container: containerAdapter.containerElement,\r\n                    picks: containerAdapter.picksElement,\r\n                    pickFilter: pickFilterElement,\r\n                    input: inputElement,\r\n                    choices: choicesElement\r\n                };\r\n            }\r\n            var placeholderText = configuration.placeholder;\r\n            if (!placeholderText)\r\n            {\r\n                if (selectElement)\r\n                {\r\n                    placeholderText = $(selectElement).data(\"bsmultiselect-placeholder\");\r\n                    if (!placeholderText)\r\n                        placeholderText = $(selectElement).data(\"placeholder\");\r\n                }\r\n                else if (containerElement)                 \r\n                {\r\n                    placeholderText = $(containerElement).data(\"bsmultiselect-placeholder\");\r\n                    if (!placeholderText)\r\n                        placeholderText = $(containerElement).data(\"placeholder\");\r\n                }\r\n            }\r\n            \r\n            let setSelected = configuration.setSelected;\r\n            if (!setSelected){\r\n                setSelected = (option, value)=> { option.selected = value;}\r\n            }\r\n\r\n            var bsAppearance =  createBsAppearance(containerAdapter.picksElement, configuration, optionsAdapter);\r\n\r\n            var onUpdate = () => {\r\n                bsAppearance.updateSize();\r\n                bsAppearance.updateIsValid();\r\n            }\r\n\r\n            let multiSelect = new MultiSelect(\r\n                optionsAdapter,\r\n                setSelected,\r\n                containerAdapter,\r\n                styling,\r\n                pickContentGenerator,\r\n                choiceContentGenerator,\r\n                labelAdapter,\r\n                createStylingComposite,\r\n                placeholderText,\r\n                configuration,\r\n                onUpdate,\r\n                onDispose,\r\n                window);\r\n            \r\n            multiSelect.UpdateSize = bsAppearance.updateSize;\r\n            multiSelect.UpdateIsValid = bsAppearance.updateIsValid;\r\n            \r\n            if (configuration.init)\r\n                configuration.init(element, multiSelect);\r\n            \r\n            multiSelect.init();\r\n\r\n            return multiSelect;\r\n        };\r\n        var defaults = {\r\n            classes: classesDefaults,\r\n            styling: stylingDefaults\r\n        };\r\n        addToJQueryPrototype('BsMultiSelect', createPlugin, defaults, $);\r\n    }\r\n)(window, $)\r\n","export function addToJQueryPrototype(pluginName, createPlugin, defaults, $){\r\n    const firstChar = pluginName.charAt(0);\r\n    const firstCharLower = firstChar.toLowerCase();\r\n    if (firstCharLower == firstChar) {\r\n        throw new TypeError(`Plugin name '${pluginName}' should be started from upper case char`)\r\n    }\r\n    const prototypableName = firstCharLower + pluginName.slice(1)\r\n    const noConflictPrototypable = $.fn[prototypableName];\r\n    const dataKey = `DashboardCode.${pluginName}`;\r\n\r\n    function prototypable(options) {\r\n        return this.each( function () {\r\n            let $e = $(this);\r\n            let instance = $e.data(dataKey)\r\n            let isMethodName = typeof options === 'string';\r\n            if (!instance) {\r\n                if (isMethodName && /Dispose/.test(options)) {\r\n                    return;\r\n                }\r\n                const optionsObject = (typeof options === 'object')?options:null;\r\n\r\n                instance = createPlugin(this, optionsObject,\r\n                    () => {\r\n                        $e.removeData(dataKey)\r\n                    });\r\n                $e.data(dataKey, instance);\r\n            }\r\n\r\n            if (isMethodName) {\r\n                let methodName = options;\r\n                if (typeof instance[methodName] === 'undefined') {\r\n                    throw new TypeError(`No method named '${methodName}'`)\r\n                }\r\n                instance[methodName]()\r\n            }\r\n        })\r\n    }\r\n\r\n    $.fn[prototypableName] = prototypable;\r\n\r\n    // pluginName with first capitalized letter - return plugin instance (for 1st $selected item)\r\n    $.fn[pluginName] = function () {\r\n        return $(this).data(dataKey);\r\n    };\r\n\r\n    $.fn[prototypableName].noConflict = function () {\r\n        $.fn[prototypableName] = noConflictPrototypable\r\n        return prototypable;\r\n    }\r\n\r\n    $.fn[prototypableName].defaults = defaults;\r\n}\r\n\r\n","import {addClasses, removeClasses} from './DomTools';\r\n\r\nexport function Styling(configuration, stylingCorrector) {\r\n    return {\r\n        Init(elements){\r\n            addClasses(elements.container, configuration.containerClass);\r\n            addClasses(elements.picks, configuration.picksClass);\r\n            addClasses(elements.choices, configuration.choicesClass);\r\n            addClasses(elements.pickFilter, configuration.pickFilterClass);\r\n            addClasses(elements.input, configuration.filterInputClass);\r\n            if (stylingCorrector && stylingCorrector.init)\r\n                stylingCorrector.init(elements)\r\n        },\r\n\r\n        Enable(elements){\r\n            removeClasses(elements.picks, configuration.picksClassDisabled);\r\n            if (stylingCorrector && stylingCorrector.enable)\r\n                stylingCorrector.enable(elements.picks)\r\n        },\r\n\r\n        Disable(elements){\r\n            addClasses(elements.picks, configuration.picksClassDisabled);\r\n            if (stylingCorrector && stylingCorrector.disable)\r\n                stylingCorrector.disable(elements.picks)\r\n        },\r\n\r\n        FocusIn(elements){\r\n            addClasses(elements.picks, configuration.picksClassFocus);\r\n            if (stylingCorrector && stylingCorrector.focusIn)\r\n                stylingCorrector.focusIn(elements.picks)\r\n        },\r\n\r\n        FocusOut(elements){\r\n            removeClasses(elements.picks, configuration.picksClassFocus);\r\n            if (stylingCorrector && stylingCorrector.focusOut)\r\n                stylingCorrector.focusOut(elements.picks)\r\n        }\r\n    }\r\n}","import {setStyles} from './DomTools';\r\nimport {createEmpty} from './JsTools';\r\n\r\nexport function StylingCorrector(configuration){\r\n    var resetDisable = createEmpty(configuration.picksStyleDisabled, \"\");\r\n    var resetFocus = createEmpty(configuration.picksStyleFocus, \"\");\r\n    return {\r\n        init(elements){\r\n            setStyles(elements.picks, configuration.picksStyle);\r\n            setStyles(elements.input, configuration.filterInputStyle);\r\n        },\r\n    \r\n        enable(picksElement){\r\n            setStyles(picksElement, resetDisable)\r\n        },\r\n    \r\n        disable(picksElement){\r\n            setStyles(picksElement, configuration.picksStyleDisabled);\r\n        },\r\n    \r\n        focusIn(picksElement){\r\n            setStyles(picksElement, configuration.picksStyleFocus)\r\n        },\r\n    \r\n        focusOut(picksElement){\r\n            setStyles(picksElement, resetFocus)\r\n        }\r\n    }\r\n}","function OptionsAdapterElement(selectElement, getDisabled, getSize, getIsValid, getIsInvalid, trigger, form) {\r\n    var backup;\r\n    return {\r\n        getOptions(){\r\n            return selectElement.getElementsByTagName('OPTION')\r\n        },\r\n        triggerChange(){\r\n            trigger('change')\r\n            trigger('multiselect:change')\r\n        },\r\n        getDisabled,\r\n        getSize,\r\n        getIsValid,\r\n        getIsInvalid,\r\n        subscribeToReset(handler){\r\n            backup = handler;\r\n            if (form)\r\n                form.addEventListener('reset', backup)\r\n        },\r\n        dispose(){\r\n            if (form && backup)\r\n                form.removeEventListener('reset', backup)\r\n        }\r\n    }\r\n}\r\n\r\nfunction OptionsAdapterJson(options, getDisabled, getSize, getIsValid, getIsInvalid, trigger) {\r\n    return {\r\n        getOptions(){\r\n            return options\r\n        },\r\n        triggerChange(){\r\n            trigger('multiselect:change')\r\n        },\r\n        getDisabled(){\r\n            return getDisabled?getDisabled():false\r\n        },\r\n        getSize(){\r\n            return getSize?getSize():null\r\n        },\r\n        getIsValid(){\r\n            return getIsValid?getIsValid():false\r\n        },\r\n        getIsInvalid(){\r\n            return getIsInvalid?getIsInvalid():false\r\n        }\r\n    }\r\n}\r\n\r\nexport {OptionsAdapterJson, OptionsAdapterElement}","export function LabelAdapter(labelElement, createInputId){\r\n    var backupedForAttribute = null; // state saved between init and dispose\r\n    return {\r\n        init(filterInputElement) {\r\n            if (labelElement) {\r\n                backupedForAttribute = labelElement.getAttribute('for');\r\n                var newId = createInputId();\r\n                filterInputElement.setAttribute('id', newId);\r\n                labelElement.setAttribute('for',newId);\r\n            }\r\n        },\r\n        dispose(){\r\n            if(backupedForAttribute)\r\n                labelElement.setAttribute('for',backupedForAttribute);\r\n        }\r\n    }\r\n}","import  {addClasses, setStyles} from './DomTools';\r\n\r\nexport function BsPickContentStylingCorrector(configuration) {\r\n    return {\r\n        disablePickContent(content){\r\n            setStyles(content, configuration.pickContentStyleDisabled);\r\n        },\r\n    \r\n        createPickContent(selectedItem, button){\r\n            setStyles(selectedItem, configuration.pickStyle);\r\n            setStyles(button, configuration.pickButtonStyle);\r\n        }\r\n    }\r\n}\r\n\r\nexport function BsPickContentGenerator(configuration, stylingCorrector, $) {\r\n    return function (selectedItem, optionItem, removeSelectedItem){\r\n            let $selectedItem = $(selectedItem)\r\n            addClasses(selectedItem, configuration.pickClass);\r\n            let $content = $(`<span/>`).text(optionItem.text);\r\n            let content = $content.get(0); \r\n            $content.appendTo($selectedItem);\r\n            if (optionItem.disabled ){\r\n                addClasses(content, configuration.pickContentClassDisabled)\r\n                if (stylingCorrector && stylingCorrector.disablePickContent)\r\n                    stylingCorrector.disablePickContent(content);\r\n            }\r\n\r\n            let $button = $('<button aria-label=\"Close\" tabIndex=\"-1\" type=\"button\"><span aria-hidden=\"true\">&times;</span></button>')\r\n                // bs 'close' class that will be added to button set the float:right, therefore it impossible to configure no-warp policy \r\n                // with .css(\"white-space\", \"nowrap\") or  .css(\"display\", \"inline-block\"); TODO: migrate to flex? \r\n                .css(\"float\", \"none\").appendTo($selectedItem)\r\n                .addClass(configuration.pickRemoveButtonClass) // bs close class set the float:right\r\n                .on(\"click\", \r\n                    jqEvent =>    \r\n                        removeSelectedItem(jqEvent.originalEvent)\r\n                    );\r\n            if (stylingCorrector && stylingCorrector.createPickContent)\r\n                stylingCorrector.createPickContent(selectedItem, $button.get(0));\r\n            return {\r\n                disable(isDisabled){ \r\n                    $button.prop('disabled', isDisabled); \r\n                },\r\n                dispose(){\r\n                    $button.unbind();\r\n                }\r\n            };\r\n        }\r\n}","import {addClasses, removeClasses, setStyles} from './DomTools';\r\nimport {createEmpty} from './JsTools'\r\n\r\nexport function BsChoiceContentStylingCorrector(configuration) {\r\n    var resetStyle = createEmpty(resetStyle, configuration.choiceLabelStyleDisabled, '');\r\n    return{\r\n        disabledStyle(checkBox, checkBoxLabel, isDisbaled){\r\n            setStyles(checkBoxLabel, isDisbaled? configuration.choiceLabelStyleDisabled : resetStyle)\r\n        }\r\n    }\r\n}\r\n\r\nexport function BsChoiceContentGenerator(configuration, stylingCorrector, $) {\r\n   \r\n    return function(choiceElement, option){\r\n        let $choiceElement = $(choiceElement);\r\n        $choiceElement.addClass(configuration.choiceClass);\r\n        let $choiceContent= $(`<div class=\"custom-control custom-checkbox\">\r\n            <input type=\"checkbox\" class=\"custom-control-input\">\r\n            <label class=\"custom-control-label justify-content-start\"></label>\r\n        </div>`);\r\n        $choiceContent.appendTo(choiceElement);\r\n        let $checkBox = $choiceContent.find(`INPUT[type=\"checkbox\"]`);\r\n        let $checkBoxLabel = $choiceContent.find(`label`);\r\n        $checkBoxLabel.text(option.text);\r\n\r\n        var tmp = { \r\n            select(isSelected){ $checkBox.prop('checked', isSelected); }, \r\n            // --- distinct disable and disabledStyle to provide a possibility to unselect disabled option\r\n            disable(isDisabled){ $checkBox.prop('disabled', isDisabled); },\r\n            disabledStyle(isDisbaled){ \r\n                if (isDisbaled) \r\n                    $checkBox.addClass(configuration.choiceCheckBoxClassDisabled);\r\n                else\r\n                    $checkBox.removeClass(configuration.choiceCheckBoxClassDisabled);\r\n                if (stylingCorrector && stylingCorrector.disabledStyle)\r\n                    stylingCorrector.disabledStyle($checkBox.get(0), $checkBoxLabel.get(0), isDisbaled); \r\n            },\r\n            hoverIn(){\r\n                addClasses(choiceElement, configuration.choiceClassHover);\r\n            },\r\n            hoverOut(){\r\n                removeClasses(choiceElement, configuration.choiceClassHover);\r\n            },\r\n            onSelected(toggle) {\r\n                $checkBox.on(\"change\", toggle)\r\n                $choiceElement.on(\"click\", event => {\r\n                    if (choiceElement === event.target || $.contains(choiceElement, event.target)) {\r\n                        toggle();\r\n                    }\r\n                })\r\n            },\r\n            dispose(){\r\n                $checkBox.unbind();\r\n                $choiceElement.unbind();\r\n            }\r\n        }\r\n        \r\n        return tmp;\r\n    }\r\n}"]}