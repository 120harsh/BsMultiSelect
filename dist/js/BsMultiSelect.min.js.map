{"version":3,"sources":["../../js/src/FilterPanel.js","../../js/src/OptionsPanel.js","../../js/src/removeElement.js","../../js/src/PicksPanel.js","../../js/src/MultiSelectInputAspect.js","../../js/src/MultiSelect.js","../../js/src/EventSkipper.js","../../js/src/Tools.js","../../js/src/Bs4StylingMethodCss.js","../../js/src/Bs4StylingMethodJs.js","../../js/src/Bs4Styling.js","../../js/src/Bs4SelectedItemContent.js","../../js/src/Bs4DropDownItemContent.js","../../js/src/BsMultiSelect.js","../../js/src/ContainerAdapter.js","../../js/src/AddToJQueryPrototype.js","../../js/src/OptionsAdapters.js","../../js/src/LabelAdapter.js"],"names":["FilterPanel","createElement","insertIntoDom","onFocusIn","onFocusOut","onKeyDownArrowUp","onKeyDownArrowDown","onTabForEmpty","onBackspace","onEnterOrTabToCompleate","onKeyDownEsc","onKeyUpEsc","onInput","s","inputElement","setAttribute","style","border","padding","outline","backgroundColor","onfilterInputKeyDown","event","indexOf","which","value","preventDefault","onFilterInputKeyUp","onFilterInputInput","filterInputValue","width","length","setEmptyLength","addEventListener","input","isEmpty","setEmpty","setFocus","focus","isEventTarget","target","dispose","removeEventListener","OptionsPanel","dropDownMenu","onShow","onHide","eventSkipper","dropDownItemContent","styling","getVisibleMultiSelectDataList","resetFilter","updateDropDownLocation","filterPanelSetFocus","listStyleType","hoveredMultiSelectData","hoveredMultiSelectDataIndex","candidateToHoveredMultiSelectData","hideDropDown","resetCandidateToHoveredMultiSelectData","display","showDropDown","setSkippable","hoverInInternal","index","HoverIn","dropDownMenuItemElement","resetDropDownMenuHover","HoverOut","processCandidateToHovered","visibleIndex","stopAndResetDropDownMenuHover","toggleHovered","toggle","keyDownArrow","down","visibleMultiSelectDataList","newIndex","i","visible","insertDropDownItem","MultiSelectData","createSelectedItemGen","triggerChange","isSelected","isOptionDisabled","onDropDownMenuItemElementMouseover","isSkippable","onDropDownMenuItemElementMouseleave","appendChild","content","option","setDropDownItemContentDisabled","disabledStyle","disable","createSelectedItem","DropDownItemContent","DisposeDropDownMenuItemElement","onSelected","excludedFromSearch","getIsVisble","removeElement","e","parentNode","removeChild","PicksPanel","picksElement","init","selectedItemContent","isComponentDisabled","onRemove","onClick","processRemoveButtonClick","filterIsEmpty","placeholderText","picksCount","flexWrap","placeholderItemElement","textContent","position","overflow","whiteSpace","inputItemElement","updatePlacehodlerVisibility","isVisible","left","MultiSelectDataSelectedTail","selectedPanelClick","iterateAll","isDisabled","selectedPrev","insert","selectedItemElement","this","selectedPanel","insertBefore","selectedNext","removeSelectedItem","selected","select","SelectedItemContent","removeSelectedTail","resetMultiSelectDataSelectedTail","enable","toRemove","firstChild","MultiSelectInputAspect","window","appendToContainer","filterInputItem","optionsElement","hideDropDownAndResetFilter","isDropDownMenuEmpty","Popper","skipoutMousedown","skipFocusout","documentMouseup","contains","document","popper","placement","modifiers","preventOverflow","enabled","hide","flip","filterInputItemOffsetLeft","preventDefaultClickEvent","alignToFilterInputItemLocation","force","offsetLeft","update","destroy","alignAndShowDropDown","processUncheck","uncheckOption","setTimeout","onDropDownShow","onDropDownHide","getSkipFocusout","resetSkipFocusout","filterMultiSelectData","isFiltered","MultiSelect","optionsAdapter","containerAdapter","labelAdapter","createStylingComposite","configuration","onDispose","TypeError","visibleCount","optionsPanel","stylingComposite","resetMultiSelectDataList","MultiSelectDataList","filteredMultiSelectDataList","filterPanel","processEmptyInput","multiSelectData","isHidden","resetFilterDropDownMenu","GetContainer","container","Update","UpdateIsValid","UpdateSize","UpdateDisabled","UpdateData","DeselectAll","SelectAll","empty","picksPanel","updateDataImpl","createDropDownItems","options","_this","getOptions","disabled","hidden","searchText","text","toLowerCase","trim","remove","removeDropDownMenuItemElement","push","p1","p2","p3","aspect","readyState","createDropDownItemsHandler","Dispose","getIsValid","getIsInvalid","getDisabled","Disable","Enable","resetLength","list","j","collectFilterDropDownMenu","fullMatchMultiSelectData","name","_this2","lazyfilterItemInputElementAtach","filterItemInputElement","filterItemElement","FocusIn","FocusOut","stopPropagation","doUncheck","Init","attachContainer","subscribeToReset","ExtendIfUndefined","destination","source","property","undefined","bs4StylingMethodCssDefaults","selectedPanelFocusClass","selectedPanelDisabledClass","dropDownItemDisabledClass","defSelectedPanelStyle","margin-bottom","height","bs4StylingMethodJsDefaults","selectedPanelDefMinHeight","selectedPanelLgMinHeight","selectedPanelSmMinHeight","selectedPanelDisabledBackgroundColor","selectedPanelFocusBorderColor","selectedPanelFocusBoxShadow","selectedPanelFocusValidBoxShadow","selectedPanelFocusInvalidBoxShadow","filterInputColor","placeholderItemElementColor","bs4StylingDefaults","containerClass","dropDownMenuClass","dropDownItemClass","dropDownItemHoverClass","selectedPanelClass","selectedItemClass","removeSelectedItemButtonClass","placeholderItemClass","filterInputItemClass","filterInputClass","bs4StylingMethodCssdefaults","selectedItemContentDisabledClass","defSelectedItemStyle","padding-left","line-height","defRemoveSelectedItemButtonStyle","font-size","selectedItemContentDisabledOpacity","bs4SelectedItemContentDefaults","dropdDownLabelDisabledColor","$","bs4DropDownItemContentDefaults","ContainerAdapter","selectElement","containerElement","ownContainerElement","ownPicksElement","backupDisplay","nextSibling","FindDirectChildByTagName","element","tagName","returnValue","children","tmp","pluginName","createPlugin","firstChar","charAt","firstCharLower","prototypableName","slice","noConflictPrototypable","fn","dataKey","prototypable","each","$e","instance","data","isMethodName","test","removeData","methodName","noConflict","AddToJQueryPrototype","settings","extend","preBuildConfiguration","stylingMethod","useCss","adapter","$selectedPanel","removeClass","addClass","OnInit","composite","css","$filterInput","$placeholder","hasClass","$container","$dropDownMenu","$filterInputItem","isValid","isInvalid","dropDownItem","trigger","form","backup","eventName","createInputId","id","closest","get","label","$formGroup","$label","find","getAttribute","$form","$fieldset","fieldset","getElementsByTagName","classList","handler","backupedFor","filterInput","newId","selectedItemContentStylingMethod","disableSelectedItemContent","$content","createSelectedItemContent","$selectedItem","$button","selectedItem","optionItem","appendTo","on","jqEvent","originalEvent","prop","unbind","bs4DropDownItemContent","dropDownItemContentStylingMethod","$checkBox","$checkBoxLabel","isDisbaled","$dropDownItem","$dropDownItemContent","placeholder","multiSelect","postBuildConfiguration"],"mappings":"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","sourcesContent":["function defFilterInputStyleSys(s) {s.border='0'; s.padding='0'; s.outline='none'; s.backgroundColor='transparent' };\r\n\r\nfunction FilterPanel(\r\n        createElement,\r\n        insertIntoDom,\r\n        onFocusIn,  // show dropdown\r\n        onFocusOut, // hide dropdown\r\n        onKeyDownArrowUp, \r\n        onKeyDownArrowDown,\r\n        onTabForEmpty,  // tab on empty\r\n        onBackspace, // backspace alike\r\n        onEnterOrTabToCompleate, // \"compleate alike\"\r\n        onKeyDownEsc, \r\n        onKeyUpEsc, // \"esc\" alike\r\n        onInput // filter\r\n    ) {\r\n    \r\n    var inputElement = createElement('INPUT'); \r\n    \r\n    inputElement.setAttribute(\"type\",\"search\");\r\n    inputElement.setAttribute(\"autocomplete\",\"off\");\r\n\r\n    defFilterInputStyleSys(inputElement.style);\r\n\r\n    insertIntoDom(inputElement);\r\n\r\n    var onfilterInputKeyDown = (event) => {\r\n        if ([38, 40, 13 ,27].indexOf(event.which)>=0 \r\n            || (event.which == 9 && inputElement.value) ) {\r\n            event.preventDefault(); \r\n            // preventDefault for tab(9) it enables keyup,\r\n            // prevent form default button (13-enter) \r\n            // but doesn't help with bootsrap modal ESC or ENTER (close behaviour);\r\n            // esc(27) there is just in case\r\n        }\r\n        if (event.which == 27 ) {\r\n            onKeyDownEsc(inputElement.value?false:true, event); // support BS do not close modal - event.stopPropagation inside\r\n        }\r\n        else if (event.which == 38) {\r\n            onKeyDownArrowUp();\r\n        }\r\n        else if (event.which == 40) {\r\n            onKeyDownArrowDown();\r\n        }\r\n        else if (event.which == 9  /*tab*/) { // no keydown for this\r\n            if (!inputElement.value) {\r\n                 onTabForEmpty(); // filter is empty, nothing to reset\r\n            }\r\n        }\r\n        else if (event.which == 8 /*backspace*/) {\r\n            // NOTE: this will process backspace only if there are no text in the input field\r\n            // If user will find this inconvinient, we will need to calculate something like this\r\n            // this.isBackspaceAtStartPoint = (this.filterInput.selectionStart == 0 && this.filterInput.selectionEnd == 0);\r\n            if (!inputElement.value)\r\n            { \r\n                onBackspace();\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n    \r\n    var onFilterInputKeyUp = (event) => {\r\n        if (event.which == 13 || event.which == 9) {\r\n            onEnterOrTabToCompleate();\r\n        }\r\n        else if (event.which == 27) { // escape\r\n            onKeyUpEsc(); // is it always empty (bs x can still it) \r\n        }\r\n    }\r\n    \r\n    // it can be initated by 3PP functionality\r\n    // sample (1) BS functionality - input x button click - clears input\r\n    // sample (2) BS functionality - esc keydown - clears input\r\n    // and there could be difference in processing: (2) should hide the menu, then reset , when (1) should just reset without hiding.\r\n    var onFilterInputInput = () => {\r\n        var filterInputValue = inputElement.value;\r\n        onInput(\r\n            filterInputValue, \r\n            ()=> inputElement.style.width = filterInputValue.length*1.3 + 2 + \"ch\"\r\n        );\r\n    }\r\n    \r\n    inputElement.addEventListener('focusin', onFocusIn);\r\n    inputElement.addEventListener('focusout', onFocusOut);\r\n    inputElement.addEventListener('keydown', onfilterInputKeyDown);    \r\n    inputElement.addEventListener('keyup', onFilterInputKeyUp);\r\n    inputElement.addEventListener('input', onFilterInputInput);\r\n\r\n    function setEmptyLength(){\r\n        inputElement.style.width=\"1rem\";\r\n    }\r\n    setEmptyLength();\r\n\r\n    function setEmpty(){\r\n        inputElement.value ='';\r\n        setEmptyLength();\r\n    };\r\n    \r\n    return {\r\n        input:inputElement,\r\n        isEmpty(){\r\n            return inputElement.value ? false:true;\r\n        },\r\n        setEmpty,\r\n        setEmptyLength,\r\n        setFocus(){\r\n            inputElement.focus();\r\n        },\r\n        isEventTarget(event){\r\n            return event.target == inputElement;\r\n        },\r\n        dispose(){\r\n            inputElement.removeEventListener('focusin', onFocusIn);\r\n            inputElement.removeEventListener('focusout', onFocusOut);\r\n            inputElement.removeEventListener('keydown', onfilterInputKeyDown);\r\n            inputElement.removeEventListener('keyup', onFilterInputKeyUp);\r\n            inputElement.removeEventListener('input', onFilterInputInput);\r\n        }\r\n    }\r\n}\r\n\r\nexport default FilterPanel;","function defDropDownMenuStyleSys(s) {s.listStyleType='none'}; // remove bullets since this is ul\r\n\r\nfunction OptionsPanel(createElement, dropDownMenu, onShow, onHide, eventSkipper, dropDownItemContent, styling, \r\n        getVisibleMultiSelectDataList, resetFilter, updateDropDownLocation, filterPanelSetFocus) {\r\n    \r\n    // prevent heavy understandable styling error\r\n    defDropDownMenuStyleSys(dropDownMenu.style);\r\n    var hoveredMultiSelectData=null;\r\n    var hoveredMultiSelectDataIndex = null;\r\n    var candidateToHoveredMultiSelectData=null;\r\n\r\n    function hideDropDown() {\r\n        if (candidateToHoveredMultiSelectData){\r\n            resetCandidateToHoveredMultiSelectData();\r\n        }\r\n        if (dropDownMenu.style.display != 'none')\r\n        {\r\n            dropDownMenu.style.display = 'none';\r\n            onHide();\r\n        }\r\n    }\r\n\r\n    function showDropDown() {\r\n        if (dropDownMenu.style.display != 'block')\r\n        {\r\n            eventSkipper.setSkippable();\r\n            dropDownMenu.style.display = 'block';\r\n            onShow();\r\n        }\r\n    }\r\n\r\n    var hoverInInternal = function(index){\r\n        hoveredMultiSelectDataIndex = index;\r\n        hoveredMultiSelectData = getVisibleMultiSelectDataList()[index];\r\n        styling.HoverIn(hoveredMultiSelectData.dropDownMenuItemElement);\r\n    }\r\n\r\n    function resetDropDownMenuHover() {\r\n        if (hoveredMultiSelectData) {\r\n            styling.HoverOut(hoveredMultiSelectData.dropDownMenuItemElement);\r\n            hoveredMultiSelectData = null;\r\n            hoveredMultiSelectDataIndex = null;\r\n        }\r\n    }\r\n\r\n    var resetCandidateToHoveredMultiSelectData = function(){\r\n        candidateToHoveredMultiSelectData.dropDownMenuItemElement.removeEventListener('mousemove', processCandidateToHovered);\r\n        candidateToHoveredMultiSelectData.dropDownMenuItemElement.removeEventListener('mousedown', processCandidateToHovered);\r\n        candidateToHoveredMultiSelectData = null;\r\n    }\r\n\r\n    var processCandidateToHovered = function() {\r\n        if (hoveredMultiSelectData != candidateToHoveredMultiSelectData)\r\n        {\r\n            resetDropDownMenuHover(); \r\n            hoverInInternal(candidateToHoveredMultiSelectData.visibleIndex);\r\n        }\r\n        if(candidateToHoveredMultiSelectData) \r\n            resetCandidateToHoveredMultiSelectData();\r\n    }\r\n\r\n    function toggleHovered(){\r\n        if (hoveredMultiSelectData) {\r\n            hoveredMultiSelectData.toggle();\r\n            resetDropDownMenuHover();\r\n            hideDropDown(); // always hide 1st\r\n            resetFilter();\r\n        } \r\n    }\r\n\r\n    function keyDownArrow(down) {\r\n        let visibleMultiSelectDataList = getVisibleMultiSelectDataList();\r\n        let length = visibleMultiSelectDataList.length;\r\n        let newIndex=null;\r\n        if (length > 0) {\r\n            if (down) {\r\n                let i = hoveredMultiSelectDataIndex==null?0:hoveredMultiSelectDataIndex+1;\r\n                while(i<length){\r\n                    if (visibleMultiSelectDataList[i].visible){\r\n                        newIndex=i;\r\n                        break;\r\n                    }\r\n                    i++;\r\n                }\r\n            } else {\r\n                let i = hoveredMultiSelectDataIndex==null?length-1:hoveredMultiSelectDataIndex-1;\r\n                while(i>=0){\r\n                    if (visibleMultiSelectDataList[i].visible){\r\n                        newIndex=i;\r\n                        break;\r\n                    }\r\n                    i--;\r\n                }\r\n            }\r\n        }\r\n        \r\n        if (newIndex!=null)\r\n        {\r\n            if (hoveredMultiSelectData)\r\n                styling.HoverOut(hoveredMultiSelectData.dropDownMenuItemElement);\r\n            updateDropDownLocation();\r\n            showDropDown(); \r\n            hoverInInternal(newIndex);\r\n        }\r\n    }\r\n\r\n    var onDropDownMenuItemElementMouseoverGeneral = function(MultiSelectData, dropDownMenuItemElement)\r\n    {\r\n        if (eventSkipper.isSkippable())\r\n        {\r\n            if(candidateToHoveredMultiSelectData)\r\n                resetCandidateToHoveredMultiSelectData()\r\n\r\n            candidateToHoveredMultiSelectData = MultiSelectData;\r\n            dropDownMenuItemElement.addEventListener('mousemove', processCandidateToHovered);\r\n            dropDownMenuItemElement.addEventListener('mousedown', processCandidateToHovered);\r\n        }\r\n        else\r\n        {\r\n            if (hoveredMultiSelectData!=MultiSelectData)\r\n            {\r\n                // mouseleave is not enough to guarantee remove hover styles in situations\r\n                // when style was setuped without mouse (keyboard arrows)\r\n                // therefore force reset manually\r\n                resetDropDownMenuHover(); \r\n                hoverInInternal(MultiSelectData.visibleIndex);\r\n            }                \r\n        }\r\n    }\r\n\r\n    function insertDropDownItem(MultiSelectData, createSelectedItemGen, triggerChange, isSelected, isOptionDisabled) {\r\n        var dropDownMenuItemElement = createElement('LI');\r\n        \r\n        // in chrome it happens on \"become visible\" so we need to skip it, \r\n        // for IE11 and edge it doesn't happens, but for IE11 and Edge it doesn't happens on small \r\n        // mouse moves inside the item. \r\n        // https://stackoverflow.com/questions/59022563/browser-events-mouseover-doesnt-happen-when-you-make-element-visible-and-mous\r\n        \r\n        var onDropDownMenuItemElementMouseover = () => onDropDownMenuItemElementMouseoverGeneral(\r\n            MultiSelectData,\r\n            dropDownMenuItemElement\r\n        )\r\n\r\n        dropDownMenuItemElement.addEventListener('mouseover', onDropDownMenuItemElementMouseover);\r\n        \r\n        // note 1: mouseleave preferred to mouseout - which fires on each descendant\r\n        // note 2: since I want add aditional info panels to the dropdown put mouseleave on dropdwon would not work\r\n        var onDropDownMenuItemElementMouseleave = () => {\r\n            if (!eventSkipper.isSkippable()) {\r\n                resetDropDownMenuHover();\r\n            }\r\n        }\r\n\r\n        dropDownMenuItemElement.addEventListener('mouseleave', onDropDownMenuItemElementMouseleave);\r\n\r\n        dropDownMenu.appendChild(dropDownMenuItemElement);\r\n\r\n        let content = dropDownItemContent(dropDownMenuItemElement, MultiSelectData.option); \r\n        MultiSelectData.dropDownMenuItemElement = dropDownMenuItemElement;\r\n        MultiSelectData.DropDownItemContent = content;\r\n\r\n        MultiSelectData.DisposeDropDownMenuItemElement = ()=> {\r\n            dropDownMenuItemElement.removeEventListener('mouseover',  onDropDownMenuItemElementMouseover);\r\n            dropDownMenuItemElement.removeEventListener('mouseleave', onDropDownMenuItemElementMouseleave);\r\n        }\r\n\r\n        var setDropDownItemContentDisabled = (content,  isSelected) => {\r\n            content.disabledStyle(true);\r\n            // do not desable if selected! there should be possibility to unselect \"disabled\"\r\n            content.disable(!isSelected);\r\n        }\r\n\r\n        if (isOptionDisabled)\r\n            setDropDownItemContentDisabled(content, isSelected )\r\n\r\n        content.onSelected( () => {\r\n            MultiSelectData.toggle();\r\n            filterPanelSetFocus();\r\n        });\r\n        // ------------------------------------------------------------------------------\r\n        \r\n        var createSelectedItem = () => createSelectedItemGen(\r\n            MultiSelectData,\r\n            isOptionDisabled,\r\n            () => setDropDownItemContentDisabled(content, false)\r\n        );\r\n        \r\n        if (isSelected)\r\n        {\r\n            createSelectedItem();\r\n        }\r\n        else\r\n        {\r\n            MultiSelectData.excludedFromSearch =  isOptionDisabled;\r\n            if (isOptionDisabled)\r\n                MultiSelectData.toggle = () => { }\r\n            else\r\n                MultiSelectData.toggle = () =>  {\r\n                    createSelectedItem();\r\n                    triggerChange();\r\n                }\r\n        }\r\n        // TODO: refactore it\r\n    }\r\n\r\n    var item = {\r\n        hoverInInternal,\r\n        stopAndResetDropDownMenuHover(){\r\n            eventSkipper.setSkippable(); //disable Hover On MouseEnter - filter's changes should remove hover\r\n            resetDropDownMenuHover();\r\n        },\r\n        showDropDown,\r\n        hideDropDown,\r\n        toggleHovered,\r\n        keyDownArrow,\r\n        insertDropDownItem,\r\n        getIsVisble(){\r\n            return dropDownMenu.style.display != 'none';\r\n        }\r\n        \r\n    }\r\n    return item;\r\n}\r\n\r\nexport default OptionsPanel;","function removeElement(e) {e.parentNode.removeChild(e)}\r\nexport default removeElement;","import removeElement from './removeElement.js'\r\n\r\nfunction defSelectedPanelStyleSys(s) {s.display='flex'; s.flexWrap='nowrap'; s.listStyleType='none'};  // remove bullets since this is ul\r\n//function defPlaceholderStyleSys(s) {s.position='absolute'; s.overflow='hidden'; s.whiteSpace='nowrap' };\r\nfunction defPlaceholderStyleSys(s) {s.position='relative'; s.overflow='hidden'; s.whiteSpace='nowrap'; };\r\n\r\nfunction PicksPanel (\r\n        createElement,\r\n        picksElement, \r\n        init, \r\n        selectedItemContent, \r\n        isComponentDisabled, \r\n        triggerChange, \r\n        onRemove,\r\n        onClick,\r\n        processRemoveButtonClick,\r\n        filterIsEmpty,\r\n        placeholderText\r\n) \r\n{\r\n    var picksCount = 0;\r\n\r\n    defSelectedPanelStyleSys(picksElement.style); \r\n    var placeholderItemElement = createElement('LI');\r\n    placeholderItemElement.textContent = placeholderText;\r\n    defPlaceholderStyleSys(placeholderItemElement.style); \r\n\r\n    var inputItemElement = createElement('LI'); // detached\r\n    \r\n\r\n    function showPlacehodler(isVisible){\r\n        placeholderItemElement.style.display= isVisible?\"block\":\"none\";\r\n        placeholderItemElement.style.left=isComponentDisabled?\"auto\":\"-1rem\";\r\n        picksElement.style.flexWrap= isVisible?\"nowrap\":\"wrap\";\r\n    }\r\n\r\n    function updatePlacehodlerVisibility(){\r\n        showPlacehodler(picksCount==0 && filterIsEmpty());\r\n    }\r\n    \r\n    \r\n    picksElement.appendChild(inputItemElement); // located filter in selectionsPanel\r\n    picksElement.appendChild(placeholderItemElement); // placeholder should be first! this is used in css\r\n    \r\n\r\n    init(inputItemElement);\r\n    var MultiSelectDataSelectedTail = null;\r\n\r\n    function removeSelectedTail(){\r\n        if (MultiSelectDataSelectedTail){ \r\n            MultiSelectDataSelectedTail.toggle(); // always remove in this case\r\n        }\r\n    }\r\n\r\n    function removeSelectedFromList(MultiSelectData){\r\n        if (MultiSelectData.selectedPrev){\r\n            (MultiSelectData.selectedPrev).selectedNext = MultiSelectData.selectedNext;\r\n        }\r\n        if (MultiSelectData.selectedNext){\r\n           (MultiSelectData.selectedNext).selectedPrev = MultiSelectData.selectedPrev;\r\n        }\r\n        if (MultiSelectDataSelectedTail == MultiSelectData){\r\n            MultiSelectDataSelectedTail = MultiSelectData.selectedPrev;\r\n        }\r\n        MultiSelectData.selectedNext=null;\r\n        MultiSelectData.selectedPrev=null;\r\n    }\r\n\r\n\r\n    function createSelectedItem(MultiSelectData, isOptionDisabled, setDropDownItemContentDisabled) {\r\n        \r\n        var selectedItemElement = createElement('LI');\r\n        MultiSelectData.selectedItemElement = selectedItemElement;\r\n        if (MultiSelectDataSelectedTail){\r\n            MultiSelectDataSelectedTail.selectedNext = MultiSelectData;\r\n            MultiSelectData.selectedPrev = MultiSelectDataSelectedTail;\r\n        }\r\n        MultiSelectDataSelectedTail = MultiSelectData;\r\n\r\n        var removeSelectedItem = () => {\r\n            MultiSelectData.option.selected = false;\r\n            MultiSelectData.excludedFromSearch = isOptionDisabled;\r\n            if (isOptionDisabled)\r\n            {\r\n                setDropDownItemContentDisabled(MultiSelectData.DropDownItemContent, false);\r\n                MultiSelectData.toggle = ()=> {};\r\n            }\r\n            else\r\n            {\r\n                MultiSelectData.toggle = ()=>{\r\n                    createSelectedItem(MultiSelectData, isOptionDisabled, setDropDownItemContentDisabled);\r\n                    triggerChange();\r\n                };\r\n            }\r\n            MultiSelectData.DropDownItemContent.select(false);\r\n            removeElement(selectedItemElement);\r\n            MultiSelectData.SelectedItemContent.dispose();\r\n            MultiSelectData.SelectedItemContent=null;\r\n            MultiSelectData.selectedItemElement=null;\r\n\r\n            removeSelectedFromList(MultiSelectData);\r\n            picksCount--;\r\n            updatePlacehodlerVisibility();\r\n            triggerChange();\r\n        }\r\n\r\n        // processRemoveButtonClick removes the \r\n        // what is a problem with calling removeSelectedItem directly (not using  setTimeout(removeSelectedItem, 0)):\r\n        // consider situation \"MultiSelect\" on DROPDOWN (that should be closed on the click outside dropdown)\r\n        // therefore we aslo have document's click's handler where we decide to close or leave the DROPDOWN open.\r\n        // because of the event's bubling process removeSelectedItem runs first. \r\n        // that means the event's target element on which we click (the x button) will be removed from the DOM together with badge \r\n        // before we could analize is it belong to our dropdown or not.\r\n        // important 1: we can't just the stop propogation using stopPropogate because click outside dropdown on the similar \r\n        // component that use stopPropogation will not close dropdown (error, dropdown should be closed)\r\n        // important 2: we can't change the dropdown's event handler to leave dropdown open if event's target is null because of\r\n        // the situation described above: click outside dropdown on the same component.\r\n        // Alternatively it could be possible to use stopPropogate but together create custom click event setting new target that belomgs to DOM (e.g. panel)\r\n\r\n        let removeSelectedItemAndCloseDropDown = () => {\r\n            removeSelectedItem();\r\n            onRemove();\r\n        };\r\n    \r\n        let onRemoveSelectedItemEvent = (event) => {\r\n            processRemoveButtonClick(() => removeSelectedItemAndCloseDropDown(), event);\r\n        };\r\n\r\n        MultiSelectData.SelectedItemContent = selectedItemContent(\r\n            selectedItemElement,\r\n            MultiSelectData.option,\r\n            onRemoveSelectedItemEvent);\r\n\r\n        var disable = (isDisabled) =>\r\n            MultiSelectData.SelectedItemContent.disable(isDisabled);\r\n        disable(isComponentDisabled);\r\n        MultiSelectData.option.selected = true;\r\n        MultiSelectData.excludedFromSearch = true; // all selected excluded from search\r\n        //MultiSelectData.remove  = removeSelectedItemAndCloseDropDown;\r\n        MultiSelectData.disable = disable;\r\n        picksElement.insertBefore(selectedItemElement, inputItemElement);\r\n\r\n\r\n        MultiSelectData.toggle = () => removeSelectedItem();\r\n        MultiSelectData.DropDownItemContent.select(true);\r\n        picksCount++;\r\n        updatePlacehodlerVisibility();\r\n    }\r\n\r\n    var selectedPanelClick = event => {\r\n        onClick(event);\r\n    };\r\n\r\n    function iterateAll(isDisabled){\r\n        let i = MultiSelectDataSelectedTail;\r\n        while(i){\r\n            i.disable(isDisabled); \r\n            i = i.selectedPrev;\r\n        }\r\n    }\r\n\r\n    var item = {\r\n        inputItemElement,\r\n        placeholderItemElement,\r\n        insert(selectedItemElement){\r\n            this.selectedPanel.insertBefore(selectedItemElement, inputItemElement);\r\n        },\r\n        createSelectedItem,\r\n        removeSelectedTail,\r\n        resetMultiSelectDataSelectedTail() {\r\n            picksCount =0;\r\n            MultiSelectDataSelectedTail = null;\r\n        },\r\n        updatePlacehodlerVisibility,\r\n        enable(){\r\n            isComponentDisabled= false;\r\n            inputItemElement.style.display = \"block\";\r\n            iterateAll(false);\r\n            updatePlacehodlerVisibility();\r\n            picksElement.addEventListener(\"click\", selectedPanelClick);\r\n\r\n        },\r\n        disable(){\r\n            isComponentDisabled= true;\r\n            inputItemElement.style.display = \"none\";\r\n            iterateAll(true);\r\n            updatePlacehodlerVisibility();\r\n            picksElement.removeEventListener(\"click\", selectedPanelClick);\r\n\r\n        },\r\n        dispose(){\r\n            var toRemove = picksElement.firstChild;\r\n            while( toRemove ) {\r\n                picksElement.removeChild( toRemove );\r\n                toRemove = picksElement.firstChild;\r\n            }\r\n            //inputItemElement.parentNode.removeChild(inputItemElement);\r\n            picksElement.removeEventListener(\"click\", selectedPanelClick); // OPEN dropdown\r\n        }\r\n        \r\n    }\r\n    return item;\r\n}\r\n\r\nexport default PicksPanel;","function MultiSelectInputAspect (\r\n    window,\r\n    appendToContainer, \r\n    filterInputItem, \r\n    picksElement,\r\n    optionsElement, \r\n    showDropDown,\r\n    hideDropDownAndResetFilter,\r\n    isDropDownMenuEmpty,\r\n    Popper\r\n    ) {\r\n\r\n        appendToContainer();\r\n        var document = window.document;\r\n\r\n    var skipFocusout = false;\r\n    \r\n    // we want to escape the closing of the menu (because of focus out from) on a user's click inside the container\r\n    var skipoutMousedown = function() {\r\n         skipFocusout = true;\r\n    }\r\n\r\n    var documentMouseup = function(event) {\r\n        // if click outside container - close dropdown\r\n        if (  !(optionsElement === event.target \r\n                || picksElement === event.target \r\n                || optionsElement.contains(event.target)\r\n                || picksElement.contains(event.target)\r\n               )\r\n            ) {\r\n            hideDropDownAndResetFilter();\r\n        }\r\n    }\r\n\r\n    var popper = new Popper( \r\n        filterInputItem, \r\n        optionsElement, \r\n        {\r\n            placement: 'bottom-start',\r\n            modifiers: {\r\n                preventOverflow: {enabled:false},\r\n                hide: {enabled:false},\r\n                flip: {enabled:false}\r\n            }\r\n        }\r\n    );\r\n\r\n    var filterInputItemOffsetLeft = null; // used to detect changes in input field position (by comparision with current value)\r\n    var preventDefaultClickEvent = null;\r\n\r\n    function alignAndShowDropDown(event){\r\n        if (preventDefaultClickEvent != event) {\r\n            if (!isDropDownMenuEmpty())\r\n            {\r\n                alignToFilterInputItemLocation(true);\r\n                showDropDown();\r\n            }\r\n        }\r\n        preventDefaultClickEvent=null;\r\n    }\r\n    \r\n    function alignToFilterInputItemLocation(force) {\r\n        let offsetLeft = filterInputItem.offsetLeft;\r\n        if (force || filterInputItemOffsetLeft != offsetLeft){ // position changed\r\n            popper.update();\r\n            filterInputItemOffsetLeft = offsetLeft;\r\n        }\r\n    }\r\n\r\n    return {\r\n        dispose(){\r\n            popper.destroy();\r\n        },\r\n        alignToFilterInputItemLocation,\r\n        alignAndShowDropDown,\r\n        processUncheck(uncheckOption, event){\r\n            // we can't remove item on \"click\" in the same loop iteration - it is unfrendly for 3PP event handlers (they will get detached element)\r\n            // never remove elements in the same event iteration\r\n\r\n            window.setTimeout(()=>uncheckOption(),0)\r\n            preventDefaultClickEvent = event; // setPreventDefaultMultiSelectEvent\r\n        },\r\n        onDropDownShow(){\r\n            // add listeners that manages close dropdown on input's focusout and click outside container\r\n            //container.removeEventListener(\"mousedown\", containerMousedown);\r\n\r\n            picksElement.addEventListener(\"mousedown\", skipoutMousedown);\r\n            optionsElement.addEventListener(\"mousedown\", skipoutMousedown);\r\n            document.addEventListener(\"mouseup\", documentMouseup);\r\n            \r\n        },\r\n        onDropDownHide(){\r\n            picksElement.removeEventListener(\"mousedown\", skipoutMousedown);\r\n            optionsElement.addEventListener(\"mousedown\", skipoutMousedown);\r\n            document.removeEventListener(\"mouseup\", documentMouseup);\r\n        },\r\n        getSkipFocusout : function() {\r\n             return skipFocusout;\r\n        },\r\n        resetSkipFocusout : function() {\r\n             skipFocusout=false;\r\n        }\r\n    }\r\n}\r\n\r\nexport default MultiSelectInputAspect;","import Popper from 'popper.js'\r\nimport FilterPanel from './FilterPanel.js'\r\nimport OptionsPanel from './OptionsPanel.js'\r\nimport PicksPanel from './PicksPanel.js'\r\nimport MultiSelectInputAspect from './MultiSelectInputAspect.js'\r\nimport EventSkipper from './EventSkipper.js'\r\nimport removeElement from './removeElement.js'\r\n\r\nfunction filterMultiSelectData(MultiSelectData, isFiltered, visibleIndex) {\r\n    MultiSelectData.visible = isFiltered;\r\n    MultiSelectData.visibleIndex = visibleIndex;\r\n    MultiSelectData.dropDownMenuItemElement.style.display = isFiltered ? 'block': 'none';\r\n} \r\n\r\nfunction resetFilterDropDownMenu(MultiSelectDataList) {\r\n    for(let i=0; i<MultiSelectDataList.length; i++)\r\n    {\r\n        let multiSelectData = MultiSelectDataList[i];\r\n        if ( !multiSelectData.isHidden )\r\n        {\r\n            filterMultiSelectData(multiSelectData, true, i);\r\n        }\r\n    }\r\n}\r\n\r\nfunction collectFilterDropDownMenu(MultiSelectDataList, text) {\r\n    var list = [];\r\n    var j = 0;\r\n    for(let i=0; i<MultiSelectDataList.length; i++)\r\n    {\r\n        let multiSelectData = MultiSelectDataList[i];\r\n        if ( !multiSelectData.isHidden )\r\n        {\r\n            if ( multiSelectData.excludedFromSearch || multiSelectData.searchText.indexOf(text)<0 )\r\n            {\r\n                filterMultiSelectData(multiSelectData, false);\r\n            }\r\n            else \r\n            {\r\n                filterMultiSelectData(multiSelectData, true, j++);\r\n                list.push( multiSelectData );\r\n            }\r\n        }\r\n    }\r\n    return list;\r\n}\r\n\r\nclass MultiSelect {\r\n    constructor(optionsAdapter, containerAdapter, styling, \r\n        selectedItemContent, dropDownItemContent, \r\n        labelAdapter, createStylingComposite, placeholderText,\r\n        configuration, onDispose, window) {\r\n        if (typeof Popper === 'undefined') {\r\n            throw new TypeError('DashboardCode BsMultiSelect require Popper.js (https://popper.js.org)')\r\n        }\r\n\r\n        this.onDispose = onDispose; // public\r\n\r\n        // readonly\r\n        this.optionsAdapter = optionsAdapter;\r\n        this.containerAdapter = containerAdapter;\r\n        this.styling = styling;\r\n        this.selectedItemContent = selectedItemContent;\r\n        this.dropDownItemContent = dropDownItemContent;\r\n        this.labelAdapter = labelAdapter;\r\n        this.createStylingComposite = createStylingComposite;\r\n        this.configuration = configuration;\r\n        this.placeholderText = placeholderText;\r\n        this.window = window;\r\n\r\n        this.visibleCount=10;\r\n\r\n        this.optionsPanel = null;\r\n\r\n        this.stylingComposite = null;\r\n\r\n        this.isComponentDisabled = null;\r\n                \r\n        this.resetMultiSelectDataList();\r\n    }\r\n\r\n    resetMultiSelectDataList(){\r\n        this.MultiSelectDataList = [];\r\n        this.filteredMultiSelectDataList = null;\r\n    }\r\n\r\n    \r\n    getVisibleMultiSelectDataList(){\r\n        if (this.filteredMultiSelectDataList)\r\n            return this.filteredMultiSelectDataList;\r\n        else\r\n            return this.MultiSelectDataList;\r\n    }\r\n\r\n    resetFilter(){\r\n        if (!this.filterPanel.isEmpty()) {\r\n            this.filterPanel.setEmpty();\r\n            this.processEmptyInput();\r\n        }\r\n    }\r\n\r\n    processEmptyInput(){\r\n        this.filterPanel.setEmptyLength();\r\n        resetFilterDropDownMenu(this.MultiSelectDataList);\r\n        this.filteredMultiSelectDataList = null;\r\n    }\r\n\r\n    // -----------------------------------------------------------------------------------------------------------------------\r\n    GetContainer(){\r\n        return this.containerAdapter.container;\r\n    }\r\n\r\n    Update(){\r\n        this.UpdateIsValid();\r\n        this.UpdateSize();\r\n        this.UpdateDisabled();\r\n        this.UpdateData();\r\n    }\r\n\r\n    /*\r\n    UpdateOption(index){\r\n        let multiSelectData = this.MultiSelectDataList[index];\r\n        let option = multiSelectData.option;\r\n        multiSelectData.searchText = option.text.toLowerCase().trim();\r\n        if (multiSelectData.isHidden != option.isHidden)\r\n        {\r\n            multiSelectData.isHidden=option.isHidden;\r\n            if (multiSelectData.isHidden)\r\n                this.optionsPanel.insertDropDownItem(multiSelectData, \r\n                    (p1,p2,p3)=>this.picksPanel.createSelectedItem(p1,p2,p3),\r\n                    ()=>this.optionsAdapter.triggerChange(),\r\n                    option.isSelected, option.isDisabled);\r\n            else\r\n                multiSelectData.removeDropDownMenuItemElement();\r\n        }\r\n        else \r\n        {\r\n            if (multiSelectData.isSelected != option.isSelected)\r\n            {\r\n                multiSelectData.isSelected=option.isSelected;\r\n                if (multiSelectData.isSelected)\r\n                {\r\n                    // this.insertDropDownItem(multiSelectData, (e)=>this.dropDownMenu.appendChild(e), isSelected, isDisabled);\r\n                }\r\n                else\r\n                {\r\n                    // multiSelectData.removeDropDownMenuItemElement();\r\n                }\r\n            }\r\n            if (multiSelectData.isDisabled != option.isDisabled)\r\n            {\r\n                multiSelectData.isDisabled=option.isDisabled;\r\n                if (multiSelectData.isDisabled)\r\n                {\r\n                    // this.insertDropDownItem(multiSelectData, (e)=>this.dropDownMenu.appendChild(e), isSelected, isDisabled);\r\n                }\r\n                else\r\n                {\r\n                    // multiSelectData.removeDropDownMenuItemElement();\r\n                }\r\n            }\r\n        }    \r\n        //multiSelectData.updateOption();\r\n    }*/\r\n\r\n    DeselectAll(){\r\n        this.optionsPanel.hideDropDown(); // always hide 1st\r\n        this.resetFilter();\r\n\r\n        for(let i=0; i<this.MultiSelectDataList.length; i++)\r\n        {\r\n            let multiSelectData = this.MultiSelectDataList[i];\r\n            if (multiSelectData.selectedItemElement)\r\n                multiSelectData.toggle();\r\n        }\r\n    }\r\n\r\n    SelectAll(){\r\n        this.optionsPanel.hideDropDown(); // always hide 1st\r\n        this.resetFilter();\r\n\r\n        for(let i=0; i<this.MultiSelectDataList.length; i++)\r\n        {\r\n            let multiSelectData = this.MultiSelectDataList[i];\r\n            if (!multiSelectData.excludedFromSearch)\r\n                multiSelectData.toggle();\r\n        }\r\n    }\r\n\r\n    empty(){\r\n        // close drop down , remove filter and listeners\r\n        this.optionsPanel.hideDropDown(); // always hide 1st\r\n        this.resetFilter();\r\n\r\n        for(let i=0; i<this.MultiSelectDataList.length; i++)\r\n        {\r\n            let multiSelectData = this.MultiSelectDataList[i];\r\n            if (multiSelectData.dropDownMenuItemElement)\r\n                removeElement(multiSelectData.dropDownMenuItemElement);\r\n            if (multiSelectData.selectedItemElement)\r\n                removeElement(multiSelectData.selectedItemElement);\r\n        }\r\n        this.resetMultiSelectDataList();\r\n        this.picksPanel.resetMultiSelectDataSelectedTail();// this.MultiSelectDataSelectedTail = null;\r\n    }\r\n\r\n    UpdateData(){\r\n        this.empty();\r\n        // reinitiate\r\n        this.updateDataImpl();\r\n    }\r\n\r\n    updateDataImpl(){\r\n        var createDropDownItems = () => {\r\n            let options = this.optionsAdapter.getOptions();\r\n            var j = 0;\r\n            for(let i = 0; i<options.length; i++) {\r\n                let option = options[i];\r\n\r\n                let isSelected = option.selected;\r\n\r\n                let isDisabled = (option.disabled)?option.disabled:false;\r\n                let isHidden   = (option.hidden)?option.hidden:false;\r\n                \r\n                var MultiSelectData = {\r\n                    searchText: option.text.toLowerCase().trim(),\r\n                    excludedFromSearch: isSelected || isDisabled || isHidden,\r\n                    option: option,\r\n                    isHidden: isHidden,\r\n                    dropDownMenuItemElement: null,\r\n                    dropDownItemContent: null,\r\n                    selectedPrev: null,\r\n                    selectedNext: null,\r\n                    visible: false,\r\n                    toggle: null,\r\n                    selectedItemElement: null,\r\n                    remove: null,\r\n                    disable: null,\r\n                    removeDropDownMenuItemElement: null\r\n                };\r\n\r\n                this.MultiSelectDataList.push(MultiSelectData);\r\n                if (!isHidden){\r\n                    MultiSelectData.visible = true;\r\n                    MultiSelectData.visibleIndex=i;\r\n                    this.optionsPanel.insertDropDownItem(MultiSelectData, \r\n                        (p1,p2,p3)=>this.picksPanel.createSelectedItem(p1,p2,p3),\r\n                        ()=>this.optionsAdapter.triggerChange(), isSelected, isDisabled);\r\n                }\r\n            } \r\n            this.aspect.alignToFilterInputItemLocation(false);\r\n        }\r\n\r\n        // some browsers (IE11) can change select value (as part of \"autocomplete\") after page is loaded but before \"ready\" event\r\n        if (document.readyState != 'loading'){\r\n            createDropDownItems();\r\n        } else {\r\n            var createDropDownItemsHandler = function(){\r\n                createDropDownItems();\r\n                document.removeEventListener(\"DOMContentLoaded\", createDropDownItemsHandler);\r\n            }\r\n            document.addEventListener('DOMContentLoaded', createDropDownItemsHandler); // IE9+\r\n        }\r\n    }\r\n\r\n    Dispose(){\r\n        if (this.onDispose)\r\n            this.onDispose(); // primary used to remove from jQuery tables\r\n        \r\n        // remove event listeners\r\n        // TODO check if open\r\n        this.optionsPanel.hideDropDown();\r\n        if (this.optionsAdapter.dispose)\r\n            this.optionsAdapter.dispose();\r\n        this.picksPanel.dispose();\r\n        this.filterPanel.dispose();\r\n        \r\n        this.labelAdapter.dispose();\r\n        \r\n        this.aspect.dispose();\r\n        \r\n        this.containerAdapter.dispose();\r\n\r\n        for(let i=0; i<this.MultiSelectDataList.length; i++)\r\n        {\r\n            let multiSelectData = this.MultiSelectDataList[i];\r\n            multiSelectData.toggle = null;\r\n            multiSelectData.remove = null; \r\n            multiSelectData.removeDropDownMenuItemElement = null;\r\n            if (multiSelectData.DisposeDropDownMenuItemElement)\r\n                multiSelectData.DisposeDropDownMenuItemElement();\r\n            \r\n            if (multiSelectData.SelectedItemContent)\r\n                multiSelectData.SelectedItemContent.dispose();\r\n            if (multiSelectData.DropDownItemContent)\r\n                multiSelectData.DropDownItemContent.dispose();\r\n        }\r\n    }\r\n\r\n    UpdateSize(){\r\n        if (this.styling.UpdateSize)\r\n            this.styling.UpdateSize(this.stylingComposite);\r\n    }\r\n\r\n    UpdateIsValid(){\r\n        if (this.styling.UpdateIsValid)\r\n            this.styling.UpdateIsValid(this.stylingComposite, this.optionsAdapter.getIsValid(), this.optionsAdapter.getIsInvalid());\r\n    }\r\n\r\n    UpdateDisabled(){\r\n        let isComponentDisabled = this.optionsAdapter.getDisabled();\r\n        if (this.isComponentDisabled!==isComponentDisabled){\r\n            if (isComponentDisabled) {\r\n                this.picksPanel.disable();\r\n                this.styling.Disable(this.stylingComposite);\r\n            } else {\r\n                this.picksPanel.enable();\r\n                this.styling.Enable(this.stylingComposite);\r\n            }\r\n            this.isComponentDisabled=isComponentDisabled;\r\n        }\r\n    }\r\n \r\n    input(filterInputValue, resetLength){\r\n        let text = filterInputValue.trim().toLowerCase();\r\n        var isEmpty=false;\r\n        if (text == '')\r\n            isEmpty=true;\r\n        else\r\n        {\r\n            // check if exact match, otherwise new search\r\n            this.filteredMultiSelectDataList = collectFilterDropDownMenu(this.MultiSelectDataList, text);\r\n            if (this.filteredMultiSelectDataList.length == 1)\r\n            {\r\n                let fullMatchMultiSelectData =  this.filteredMultiSelectDataList[0];\r\n                if (fullMatchMultiSelectData.searchText == text)\r\n                {\r\n                    fullMatchMultiSelectData.toggle();\r\n                    this.filterPanel.setEmpty(); // clear\r\n                    isEmpty=true;\r\n                }\r\n            }\r\n        }\r\n        if (isEmpty)\r\n            this.processEmptyInput();\r\n        else\r\n            resetLength();  \r\n        \r\n        \r\n        this.optionsPanel.stopAndResetDropDownMenuHover();\r\n        if (this.getVisibleMultiSelectDataList().length == 1) {\r\n            this.optionsPanel.hoverInInternal(0)\r\n        }\r\n\r\n        if (this.getVisibleMultiSelectDataList().length > 0) {\r\n            this.aspect.alignToFilterInputItemLocation(true); // we need it to support case when textbox changes its place because of line break (texbox grow with each key press)\r\n            this.optionsPanel.showDropDown();\r\n        } else {\r\n            this.optionsPanel.hideDropDown();\r\n        }\r\n    }\r\n\r\n    init() {\r\n        var document = this.window.document;\r\n        var createElement = (name) => document.createElement(name);\r\n        let container = this.containerAdapter.container;\r\n\r\n        var lazyfilterItemInputElementAtach=null;\r\n        \r\n        this.filterPanel = FilterPanel(\r\n            createElement,\r\n            (filterItemInputElement) => {\r\n                lazyfilterItemInputElementAtach = (filterItemElement)=>{\r\n                    filterItemElement.appendChild(filterItemInputElement);\r\n                    this.labelAdapter.init(filterItemInputElement); \r\n                };\r\n            },\r\n            () => {\r\n                this.styling.FocusIn(this.stylingComposite)\r\n            },  // focus in - show dropdown\r\n            () => {\r\n                if (!this.aspect.getSkipFocusout()) // skip initiated by mouse click (we manage it different way)\r\n                {\r\n                    this.resetFilter(); // if do not do this we will return to filtered list without text filter in input\r\n                    this.styling.FocusOut(this.stylingComposite)\r\n                }\r\n                this.aspect.resetSkipFocusout();\r\n            }, // focus out - hide dropdown\r\n            () => this.optionsPanel.keyDownArrow(false), // arrow up\r\n            () => this.optionsPanel.keyDownArrow(true),  // arrow down\r\n            () => this.optionsPanel.hideDropDown(),  // tab on empty\r\n            () => {\r\n                this.picksPanel.removeSelectedTail();\r\n                this.aspect.alignToFilterInputItemLocation(false);\r\n            }, // backspace - \"remove last\"\r\n            () => { \r\n                if (this.optionsPanel.getIsVisble())\r\n                    this.optionsPanel.toggleHovered() }, // tab/enter \"compleate hovered\"\r\n            (isEmpty, event) => {\r\n                if (!isEmpty || this.optionsPanel.getIsVisble()) // supports bs modal - stop esc (close modal) propogation\r\n                    event.stopPropagation();\r\n            }, // esc keydown\r\n            () => {\r\n                this.optionsPanel.hideDropDown(); // always hide 1st\r\n                this.resetFilter();\r\n            }, // esc keyup \r\n            (filterInputValue, resetLength) =>\r\n            { \r\n                this.picksPanel.updatePlacehodlerVisibility();\r\n                this.input(filterInputValue, resetLength) \r\n            }// filter\r\n        );\r\n        \r\n        this.picksPanel =  PicksPanel(\r\n            createElement,\r\n            this.containerAdapter.picksElement,\r\n            (filterItemElement) => {\r\n                lazyfilterItemInputElementAtach(filterItemElement);\r\n            },\r\n            this.selectedItemContent,\r\n            this.isComponentDisabled,\r\n            () => this.optionsAdapter.triggerChange(),\r\n            () => {\r\n                this.optionsPanel.hideDropDown(); // always hide 1st\r\n                this.resetFilter();\r\n            },\r\n            (event) => {\r\n                if (!this.filterPanel.isEventTarget(event))\r\n                     this.filterPanel.setFocus();\r\n                this.aspect.alignAndShowDropDown(event); \r\n            },\r\n            (doUncheck, event) => {\r\n                this.aspect.processUncheck(doUncheck, event);\r\n            },\r\n            () => this.filterPanel.isEmpty(),\r\n            this.placeholderText\r\n        );\r\n\r\n        this.optionsPanel = OptionsPanel(\r\n            createElement,\r\n            this.containerAdapter.optionsElement,\r\n            () => this.aspect.onDropDownShow(),\r\n            () => this.aspect.onDropDownHide(),\r\n            EventSkipper(this.window),\r\n            this.dropDownItemContent,\r\n            this.styling, \r\n            () => this.getVisibleMultiSelectDataList(),\r\n            () => this.resetFilter(),\r\n            () => this.aspect.alignToFilterInputItemLocation(true),\r\n            () => this.filterPanel.setFocus()\r\n        );\r\n\r\n        this.aspect =  MultiSelectInputAspect(\r\n            this.window,\r\n            ()=>this.containerAdapter.appendToContainer(), \r\n            this.picksPanel.inputItemElement, \r\n            this.containerAdapter.picksElement, \r\n            this.containerAdapter.optionsElement, \r\n            () => this.optionsPanel.showDropDown(),\r\n            () => {  \r\n                this.optionsPanel.hideDropDown();\r\n                this.resetFilter();\r\n            },\r\n            () => this.getVisibleMultiSelectDataList().length==0, \r\n            Popper\r\n        );\r\n\r\n        this.stylingComposite = this.createStylingComposite(container, \r\n            this.containerAdapter.picksElement,\r\n            this.picksPanel.placeholderItemElement, \r\n            this.picksPanel.inputItemElement, \r\n            this.filterPanel.input, \r\n            this.containerAdapter.optionsElement);\r\n        \r\n        this.styling.Init(this.stylingComposite);\r\n\r\n        this.containerAdapter.attachContainer();\r\n\r\n        this.UpdateSize();            \r\n        this.UpdateIsValid();\r\n        this.UpdateDisabled(); // should be done after updateDataImpl\r\n        this.updateDataImpl();\r\n\r\n        if (this.optionsAdapter.subscribeToReset)\r\n            this.optionsAdapter.subscribeToReset(()=> this.window.setTimeout( ()=>this.UpdateData() ) );\r\n    }\r\n}\r\n\r\nexport default MultiSelect;\r\n","export default function EventSkipper(window) {\r\n    var isSkippable = false;\r\n    return {\r\n        isSkippable(){\r\n            return isSkippable;\r\n        },\r\n        setSkippable(){\r\n            isSkippable = true;\r\n            window.setTimeout( \r\n                () => {  \r\n                    isSkippable = false;\r\n                }, 0)\r\n        }\r\n    }\r\n}","export function ExtendIfUndefined(destination, source) {\r\n    for (var property in source)\r\n        if (destination[property] === undefined)\r\n            destination[property] = source[property];\r\n}\r\n\r\nexport function ExtendIfUndefinedFluent(destination, source) {\r\n    ExtendIfUndefined(destination, source);\r\n    return destination;\r\n}","import  { ExtendIfUndefined } from './Tools';\r\n\r\nconst bs4StylingMethodCssDefaults = {\r\n    selectedPanelFocusClass : 'focus',\r\n    selectedPanelDisabledClass: 'disabled',\r\n    dropDownItemDisabledClass: 'disabled'\r\n};\r\n\r\nfunction Bs4StylingMethodCss(configuration){\r\n    ExtendIfUndefined(configuration, bs4StylingMethodCssDefaults);\r\n\r\n    return {\r\n        Enable($selectedPanel){\r\n            $selectedPanel.removeClass(configuration.selectedPanelDisabledClass)\r\n        },\r\n    \r\n        Disable($selectedPanel){\r\n            $selectedPanel.addClass(configuration.selectedPanelDisabledClass)\r\n        },\r\n    \r\n        FocusIn($selectedPanel){\r\n            $selectedPanel.addClass(configuration.selectedPanelFocusClass);\r\n        },\r\n    \r\n        FocusOut($selectedPanel){\r\n            $selectedPanel.removeClass(configuration.selectedPanelFocusClass);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Bs4StylingMethodCss;","import  { ExtendIfUndefined } from './Tools';\r\n\r\nconst defSelectedPanelStyle = {'margin-bottom': '0', 'height': 'auto'};\r\n\r\nconst bs4StylingMethodJsDefaults = {\r\n    selectedPanelDefMinHeight: 'calc(2.25rem + 2px)',\r\n    selectedPanelLgMinHeight:  'calc(2.875rem + 2px)',\r\n    selectedPanelSmMinHeight:  'calc(1.8125rem + 2px)',\r\n    selectedPanelDisabledBackgroundColor: '#e9ecef',\r\n    selectedPanelFocusBorderColor: '#80bdff',\r\n    selectedPanelFocusBoxShadow: '0 0 0 0.2rem rgba(0, 123, 255, 0.25)',\r\n    selectedPanelFocusValidBoxShadow: '0 0 0 0.2rem rgba(40, 167, 69, 0.25)',\r\n    selectedPanelFocusInvalidBoxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)',\r\n    filterInputColor: '#495057',\r\n    placeholderItemElementColor: '#6c757d'\r\n};\r\n\r\nfunction Bs4StylingMethodJs(configuration){\r\n    ExtendIfUndefined(configuration, bs4StylingMethodJsDefaults);\r\n\r\n    return {\r\n        OnInit(composite){\r\n            composite.$selectedPanel.css(defSelectedPanelStyle);\r\n            composite.$filterInput.css(\"color\", configuration.filterInputColor);\r\n            composite.$placeholder.css(\"color\", configuration.placeholderItemElementColor);\r\n        },\r\n    \r\n        UpdateSize($selectedPanel){\r\n            if ($selectedPanel.hasClass(\"form-control-lg\")){\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelLgMinHeight);\r\n            } else if ($selectedPanel.hasClass(\"form-control-sm\")){\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelSmMinHeight);\r\n            } else {\r\n                $selectedPanel.css(\"min-height\", configuration.selectedPanelDefMinHeight);\r\n            }\r\n        },\r\n    \r\n        Enable($selectedPanel){\r\n            $selectedPanel.css(\"background-color\", \"\")\r\n        },\r\n    \r\n        Disable($selectedPanel){\r\n            $selectedPanel.css(\"background-color\", configuration.selectedPanelDisabledBackgroundColor)\r\n        },\r\n    \r\n        FocusIn($selectedPanel){\r\n            if ($selectedPanel.hasClass(\"is-valid\")){\r\n                $selectedPanel.css(\"box-shadow\", configuration.selectedPanelFocusValidBoxShadow);\r\n            } else if ($selectedPanel.hasClass(\"is-invalid\")){\r\n                $selectedPanel.css(\"box-shadow\", configuration.selectedPanelFocusInvalidBoxShadow);\r\n            } else {\r\n                $selectedPanel\r\n                    .css(\"box-shadow\", configuration.selectedPanelFocusBoxShadow)\r\n                    .css(\"border-color\", configuration.selectedPanelFocusBorderColor);\r\n            }\r\n        },\r\n    \r\n        FocusOut($selectedPanel){\r\n                $selectedPanel.css(\"box-shadow\", \"\" ).css(\"border-color\", \"\")\r\n        },\r\n    }\r\n}\r\n\r\nexport default Bs4StylingMethodJs;","import  { ExtendIfUndefined } from './Tools';\r\n\r\n// Bs4Styling\r\nconst bs4StylingDefaults = {\r\n    containerClass: 'dashboardcode-bsmultiselect',\r\n    dropDownMenuClass: 'dropdown-menu',\r\n    dropDownItemClass:  'px-2',\r\n    dropDownItemHoverClass: 'text-primary bg-light',\r\n    selectedPanelClass: 'form-control',  \r\n    selectedItemClass: 'badge',\r\n    removeSelectedItemButtonClass: 'close',\r\n    placeholderItemClass: '',\r\n    filterInputItemClass: '',\r\n    filterInputClass: '',\r\n}\r\n\r\nfunction Bs4Styling(stylingMethod, configuration, $) {\r\n    ExtendIfUndefined(configuration, bs4StylingDefaults);\r\n\r\n    return {\r\n        Init(composite){\r\n            composite.$container.addClass(configuration.containerClass);\r\n            composite.$selectedPanel.addClass(configuration.selectedPanelClass);\r\n            composite.$dropDownMenu.addClass(configuration.dropDownMenuClass);\r\n            composite.$filterInputItem.addClass(configuration.filterInputItemClass);\r\n            composite.$filterInput.addClass(configuration.filterInputClass);\r\n            if (stylingMethod.OnInit)\r\n                stylingMethod.OnInit(composite)\r\n        },\r\n\r\n        UpdateIsValid(composite, isValid, isInvalid){\r\n            if (isValid)\r\n                composite.$selectedPanel.addClass('is-valid');\r\n\r\n            if (isInvalid)\r\n                composite.$selectedPanel.addClass('is-invalid');\r\n        },\r\n\r\n        UpdateSize(composite){\r\n            if(stylingMethod.UpdateSize)\r\n               stylingMethod.UpdateSize(composite.$selectedPanel)\r\n        },\r\n\r\n        Enable(composite){\r\n            stylingMethod.Enable(composite.$selectedPanel)\r\n        },\r\n\r\n        Disable(composite){\r\n            stylingMethod.Disable(composite.$selectedPanel)\r\n        },\r\n\r\n        FocusIn(composite){\r\n            stylingMethod.FocusIn(composite.$selectedPanel)\r\n        },\r\n\r\n        FocusOut(composite){\r\n            stylingMethod.FocusOut(composite.$selectedPanel)\r\n        },\r\n\r\n        HoverIn(dropDownItem){\r\n            $(dropDownItem).addClass(configuration.dropDownItemHoverClass);\r\n        },\r\n\r\n        HoverOut(dropDownItem){\r\n            $(dropDownItem).removeClass(configuration.dropDownItemHoverClass);\r\n        }\r\n    }\r\n    \r\n}\r\n\r\nexport default Bs4Styling;","import  { ExtendIfUndefined } from './Tools';\r\n\r\nconst bs4StylingMethodCssdefaults = {\r\n    selectedItemContentDisabledClass: 'disabled'\r\n};\r\n\r\nfunction Bs4SelectedItemContentStylingMethodCss(configuration) {\r\n    ExtendIfUndefined(configuration, bs4StylingMethodCssdefaults);\r\n\r\n    return {\r\n        disableSelectedItemContent($content){\r\n            $content.addClass(configuration.selectedItemContentDisabledClass )\r\n        }\r\n    }\r\n}\r\n\r\nconst defSelectedItemStyle = {'padding-left': '0px', 'line-height': '1.5em'};\r\nconst defRemoveSelectedItemButtonStyle = {'font-size':'1.5em', 'line-height': '.9em'};\r\nconst bs4StylingMethodJsDefaults = {\r\n    selectedItemContentDisabledOpacity: '.65'\r\n };\r\n\r\nfunction Bs4SelectedItemContentStylingMethodJs(configuration) {\r\n    ExtendIfUndefined(configuration, bs4StylingMethodJsDefaults);\r\n    return {\r\n        disableSelectedItemContent($content){\r\n            $content.css(\"opacity\", configuration.selectedItemContentDisabledOpacity )\r\n        },\r\n    \r\n        createSelectedItemContent($selectedItem, $button){\r\n            $selectedItem.css(defSelectedItemStyle);\r\n            if ($button)\r\n                $button.css(defRemoveSelectedItemButtonStyle);\r\n        }\r\n    }\r\n}\r\n\r\nconst bs4SelectedItemContentDefaults = {\r\n    selectedItemClass: 'badge',\r\n    removeSelectedItemButtonClass: 'close'\r\n};\r\nfunction Bs4SelectedItemContent(stylingMethod, configuration, $) {\r\n    ExtendIfUndefined(configuration, bs4SelectedItemContentDefaults);\r\n    \r\n    return function (selectedItem, optionItem, removeSelectedItem){\r\n            let $selectedItem = $(selectedItem)\r\n            $selectedItem.addClass(configuration.selectedItemClass);\r\n            let $content = $(`<span/>`).text(optionItem.text);\r\n            $content.appendTo($selectedItem);\r\n            if (optionItem.disabled ){\r\n                stylingMethod.disableSelectedItemContent($content);\r\n            }\r\n\r\n            let $button = $('<button aria-label=\"Close\" tabIndex=\"-1\" type=\"button\"><span aria-hidden=\"true\">&times;</span></button>')\r\n                // bs 'close' class that will be added to button set the float:right, therefore it impossible to configure no-warp policy \r\n                // with .css(\"white-space\", \"nowrap\") or  .css(\"display\", \"inline-block\"); TODO: migrate to flex? \r\n                .css(\"float\", \"none\").appendTo($selectedItem)\r\n                .addClass(configuration.removeSelectedItemButtonClass) // bs close class set the float:right\r\n                .on(\"click\", \r\n                    jqEvent =>    \r\n                        removeSelectedItem(jqEvent.originalEvent)\r\n                    );\r\n            if (stylingMethod.createSelectedItemContent)\r\n                stylingMethod.createSelectedItemContent($selectedItem, $button);\r\n            return {\r\n                disable(isDisabled){ \r\n                    $button.prop('disabled', isDisabled); \r\n                },\r\n                dispose(){\r\n                    $button.unbind();\r\n                }\r\n            };\r\n        }\r\n}\r\n\r\nexport { Bs4SelectedItemContent as Bs4SelectedItemContent, Bs4SelectedItemContentStylingMethodJs, Bs4SelectedItemContentStylingMethodCss};","import  { ExtendIfUndefined} from './Tools';\r\n\r\nconst bs4StylingMethodCssDefaults = {\r\n    selectedItemContentDisabledClass: 'disabled',\r\n};\r\n\r\nfunction Bs4DropDownItemContentStylingMethodCss(configuration) {\r\n    ExtendIfUndefined(configuration, bs4StylingMethodCssDefaults);\r\n    return {\r\n        disabledStyle($checkBox, $checkBoxLabel, isDisbaled){\r\n            if (isDisbaled) \r\n                $checkBox.addClass(configuration.dropDownItemDisabledClass);\r\n            else\r\n                $checkBox.removeClass(configuration.dropDownItemDisabledClass);\r\n        }\r\n    }\r\n}\r\n\r\nconst bs4StylingMethodJsDefaults = {\r\n    selectedItemContentDisabledOpacity: '.65',\r\n    dropdDownLabelDisabledColor: '#6c757d'\r\n};\r\n\r\nfunction Bs4DropDownItemContentStylingMethodJs(configuration) {\r\n    ExtendIfUndefined(configuration, bs4StylingMethodJsDefaults);\r\n    return{\r\n        disabledStyle($checkBox, $checkBoxLabel, isDisbaled){\r\n            $checkBoxLabel.css('color', isDisbaled?configuration.dropdDownLabelDisabledColor:'')\r\n        }\r\n    }\r\n}\r\n\r\nconst bs4DropDownItemContentDefaults = {\r\n    dropDownItemClass:  'px-2',\r\n}\r\n\r\nfunction Bs4DropDownItemContent(stylingMethod, configuration, $) {\r\n    ExtendIfUndefined(configuration, bs4DropDownItemContentDefaults);\r\n    return function(dropDownItem, option){\r\n        let $dropDownItem = $(dropDownItem);\r\n        $dropDownItem.addClass(configuration.dropDownItemClass);\r\n        let $dropDownItemContent= $(`<div class=\"custom-control custom-checkbox\">\r\n            <input type=\"checkbox\" class=\"custom-control-input\">\r\n            <label class=\"custom-control-label\"></label>\r\n        </div>`);\r\n        $dropDownItemContent.appendTo(dropDownItem);\r\n        let $checkBox = $dropDownItemContent.find(`INPUT[type=\"checkbox\"]`);\r\n        let $checkBoxLabel = $dropDownItemContent.find(`label`);\r\n        $checkBoxLabel.text(option.text);\r\n\r\n        var tmp = { \r\n            select(isSelected){ $checkBox.prop('checked', isSelected); }, \r\n            // --- distinct disable and disabledStyle to provide a possibility to unselect disabled option\r\n            disable(isDisabled){ $checkBox.prop('disabled', isDisabled); },\r\n            disabledStyle(isDisbaled){ stylingMethod.disabledStyle($checkBox, $checkBoxLabel, isDisbaled); },\r\n\r\n            onSelected(toggle) {\r\n                $checkBox.on(\"change\", toggle)\r\n                $dropDownItem.on(\"click\", event => {\r\n                    if (dropDownItem === event.target || $.contains(dropDownItem, event.target)) {\r\n                        toggle();\r\n                    }\r\n                })\r\n            },\r\n            dispose(){\r\n                $checkBox.unbind();\r\n                $dropDownItem.unbind();\r\n            }\r\n        }\r\n        \r\n        return tmp;\r\n    }\r\n}\r\n\r\nexport { Bs4DropDownItemContent, Bs4DropDownItemContentStylingMethodJs, Bs4DropDownItemContentStylingMethodCss };","import $ from 'jquery'\r\n\r\nimport MultiSelect from './MultiSelect'\r\nimport LabelAdapter from './LabelAdapter';\r\nimport {OptionsAdapterJson,OptionsAdapterElement} from './OptionsAdapters';\r\n\r\nimport Bs4StylingMethodCss from './Bs4StylingMethodCss'\r\nimport Bs4StylingMethodJs from './Bs4StylingMethodJs'\r\nimport Bs4Styling from './Bs4Styling';\r\nimport AddToJQueryPrototype from './AddToJQueryPrototype'\r\n\r\nimport { Bs4SelectedItemContent, Bs4SelectedItemContentStylingMethodJs, Bs4SelectedItemContentStylingMethodCss} from './Bs4SelectedItemContent';\r\nimport { Bs4DropDownItemContent, Bs4DropDownItemContentStylingMethodJs, Bs4DropDownItemContentStylingMethodCss} from './Bs4DropDownItemContent';\r\nimport ContainerAdapter from './ContainerAdapter';\r\n\r\nfunction FindDirectChildByTagName(element, tagName){\r\n    var returnValue = null;\r\n    for (var i = 0; i<element.children.length;i++)\r\n    {\r\n        let tmp = element.children[i];\r\n        if (tmp.tagName==tagName)\r\n        {\r\n            returnValue = tmp;\r\n            break;\r\n        }\r\n    }\r\n    return returnValue;\r\n}\r\n\r\n(\r\n    (window, $) => {\r\n        AddToJQueryPrototype('BsMultiSelect',\r\n            (element, settings, onDispose) => {\r\n                let configuration = $.extend({}, settings); // settings used per jQuery intialization, configuration per element\r\n                if (configuration.preBuildConfiguration)\r\n                    configuration.preBuildConfiguration(element, configuration);\r\n                \r\n                let useCss = configuration.useCss;\r\n                let styling = configuration.styling;\r\n                if (!configuration.adapter)\r\n                {\r\n                    let stylingMethod = configuration.stylingMethod;\r\n                    if (!stylingMethod)\r\n                    {\r\n                        if (useCss)\r\n                            stylingMethod = Bs4StylingMethodCss(configuration);\r\n                        else\r\n                            stylingMethod = Bs4StylingMethodJs(configuration);\r\n                    }\r\n                    styling = Bs4Styling(stylingMethod, configuration, $);\r\n                }\r\n\r\n                let optionsAdapter = null;\r\n                let containerAdapter = null;\r\n                if (configuration.optionsAdapter)\r\n                    optionsAdapter = configuration.optionsAdapter;\r\n                else\r\n                {\r\n                    var createElement = function(name){\r\n                        return window.document.createElement(name);\r\n                    }\r\n                    var trigger = function(eventName){\r\n                        $(element).trigger(eventName);\r\n                    }\r\n                    if (configuration.options){\r\n                        optionsAdapter = OptionsAdapterJson(\r\n                            configuration.options,\r\n                            configuration.getDisabled,\r\n                            configuration.getIsValid,\r\n                            configuration.getIsInvalid,\r\n                            trigger );\r\n                        if (!configuration.createInputId)\r\n                            configuration.createInputId = () => `${configuration.containerClass}-generated-filter-${element.id}`;\r\n                        // find direct child by tagName\r\n                        var picksElement = FindDirectChildByTagName(element, \"UL\");\r\n                        containerAdapter = ContainerAdapter(createElement, null, element, picksElement);\r\n                    } \r\n                    else  \r\n                    {\r\n                        var selectElement = null;\r\n                        var containerElement = null;\r\n                        if (element.tagName==\"SELECT\")\r\n                            selectElement = element;\r\n                        else \r\n                        { \r\n                            selectElement = FindDirectChildByTagName(element, \"SELECT\");\r\n                            if (!selectElement)\r\n                                throw \"No SELECT element or options in configuraion found\";\r\n                            containerElement = element;\r\n                        }\r\n\r\n                        if (!containerElement && configuration.containerClass)\r\n                        {\r\n                            var $container = $(selectElement).closest('.'+configuration.containerClass);\r\n                            if ($container.length>0)\r\n                                containerElement =  $container.get(0);\r\n                        }\r\n\r\n\r\n                        if (!configuration.label)\r\n                        {\r\n                            let $formGroup = $(selectElement).closest('.form-group');\r\n                            if ($formGroup.length == 1) {\r\n                                let $label = $formGroup.find(`label[for=\"${selectElement.id}\"]`);\r\n                                if ($label.length>0)\r\n                                {   \r\n                                    let label = $label.get(0);\r\n                                    let forId = label.getAttribute('for');\r\n                                    if (forId == selectElement.id) {\r\n                                        configuration.label = label;\r\n                                    }\r\n                                }   \r\n                            }\r\n                        }\r\n                        var $form = $(selectElement).closest('form');\r\n                        var form = null;\r\n                        if ($form.length == 1) {\r\n                            form = $form.get(0);\r\n                        }\r\n                        \r\n                        if (!configuration.getDisabled) {\r\n                            var $fieldset = $(selectElement).closest('fieldset');\r\n                        \r\n                            if ($fieldset.length == 1) {\r\n                                var fieldset = $fieldset.get(0);\r\n                                configuration.getDisabled = () => selectElement.disabled || fieldset.disabled;\r\n                            }else{\r\n                                configuration.getDisabled = () => selectElement.disabled;\r\n                            }\r\n                        }\r\n                        optionsAdapter = OptionsAdapterElement(selectElement, configuration.getDisabled, trigger, form);\r\n\r\n                        if (!configuration.createInputId)\r\n                            configuration.createInputId = () => `${configuration.containerClass}-generated-input-${((selectElement.id)?selectElement.id:selectElement.name).toLowerCase()}-id`;\r\n\r\n                        \r\n                        var picksElement = null;\r\n                        if (containerElement)\r\n                            picksElement = FindDirectChildByTagName(containerElement, \"UL\");\r\n                        containerAdapter = ContainerAdapter(createElement, selectElement, containerElement, picksElement);\r\n                        \r\n                    }\r\n                }\r\n                let labelAdapter = LabelAdapter(configuration.label, configuration.createInputId);\r\n\r\n                let selectedItemContent = configuration.selectedItemContent;\r\n                if (!selectedItemContent){\r\n                    let selectedItemContentStylingMethod = configuration.selectedItemContentStylingMethod;\r\n                    if (!selectedItemContentStylingMethod)\r\n                    {\r\n                        if (useCss)\r\n                            selectedItemContentStylingMethod=Bs4SelectedItemContentStylingMethodCss(configuration, $);\r\n                        else\r\n                            selectedItemContentStylingMethod=Bs4SelectedItemContentStylingMethodJs(configuration, $);\r\n                    }\r\n                    selectedItemContent = Bs4SelectedItemContent(selectedItemContentStylingMethod, configuration, $);\r\n                }\r\n\r\n                let dropDownItemContent = configuration.bs4DropDownItemContent;\r\n                if (!dropDownItemContent){\r\n                    let dropDownItemContentStylingMethod = configuration.dropDownItemContentStylingMethod;\r\n                    if (useCss)\r\n                        dropDownItemContentStylingMethod=Bs4DropDownItemContentStylingMethodCss(configuration, $);\r\n                    else\r\n                        dropDownItemContentStylingMethod=Bs4DropDownItemContentStylingMethodJs(configuration, $);\r\n                    dropDownItemContent = Bs4DropDownItemContent(dropDownItemContentStylingMethod, configuration, $)\r\n                }\r\n\r\n                let createStylingComposite = function(container, selectedPanel, placeholder, filterInputItem, filterInput, dropDownMenu){\r\n                    return {\r\n                        $container:$(container),\r\n                        $selectedPanel:$(selectedPanel),\r\n                        $placeholder:$(placeholder),\r\n                        $filterInputItem:$(filterInputItem),\r\n                        $filterInput:$(filterInput),\r\n                        $dropDownMenu:$(dropDownMenu)\r\n                    };\r\n                }\r\n                var placeholderText = configuration.placeholder;\r\n                if (!placeholderText)\r\n                {\r\n                    if (selectElement)\r\n                        placeholderText = $(selectElement).data(\"bsmultiselect-placeholder\");\r\n                    else if (containerElement)                 \r\n                        placeholderText = $(containerElement).data(\"bsmultiselect-placeholder\");\r\n                }\r\n\r\n                let multiSelect = new MultiSelect(\r\n                    optionsAdapter,\r\n                    containerAdapter,\r\n                    styling,\r\n                    selectedItemContent,\r\n                    dropDownItemContent,\r\n                    labelAdapter,\r\n                    createStylingComposite,\r\n                    placeholderText,\r\n                    configuration,\r\n                    onDispose,\r\n                    window);\r\n                \r\n                if (configuration.postBuildConfiguration)\r\n                    configuration.postBuildConfiguration(element, multiSelect);\r\n                \r\n                multiSelect.init();\r\n                return multiSelect;\r\n            }, $);\r\n    }\r\n)(window, $)\r\n","/*\r\n// 1\r\n<select name=\"States1\" id=\"edit-states1-id\" class=\"form-control\" \r\n        multiple=\"multiple\" style=\"display: none;\"> <!-- plugin element-->\r\n                <option value=\"AL\">Alabama</option>\r\n                <option value=\"AK\" disabled=\"\">Alaska</option>\r\n</select>\r\n\r\n// 2\r\n<div class=\"dashboardcode-bsmultiselect\"> \r\n    <div class=\"input-group\" >\r\n        <div class=\"input-group-prepend\">\r\n            <button class=\"btn btn-outline-secondary\" type=\"button\">Button</button>\r\n        </div>\r\n\r\n        <select name=\"States1\" id=\"edit-states1-id\" class=\"form-control\"\r\n            multiple=\"multiple\" style=\"display: none;\">  <!-- plugin element-->\r\n                <option value=\"AL\">Alabama</option>\r\n                <option value=\"AK\" disabled=\"\">Alaska</option>\r\n        </select>\r\n\r\n        <ul class=\"form-control\"></ul> <!-- optional - for \"no flick\" -->\r\n    </div>\r\n</div>\r\n\r\n// 2\r\n<div></div> \r\n\r\n// 3\r\n<div class=\"dashboardcode-bsmultiselect\">\r\n    <div class=\"input-group\" >\r\n        <div class=\"input-group-prepend\">\r\n            <button class=\"btn btn-outline-secondary\" type=\"button\">Button</button>\r\n        </div>\r\n\r\n        <ul class=\"form-control\"></ul> <!-- json plugin key element -->\r\n    </div>\r\n</div>\r\n*/\r\n\r\nexport default function ContainerAdapter(createElement, selectElement, containerElement, picksElement) { // select\r\n    var ownContainerElement = false;\r\n    var ownPicksElement = false;\r\n    var backupDisplay = null;\r\n    if (!containerElement){\r\n        containerElement = createElement('div');\r\n        ownContainerElement= true;\r\n    }\r\n    if (!picksElement){\r\n        picksElement = createElement('UL');\r\n        ownPicksElement = true;\r\n    }\r\n    var optionsElement = createElement('UL');\r\n    optionsElement.style.display=\"none\";\r\n    if (selectElement)\r\n    { \r\n        backupDisplay = selectElement.style.display;\r\n        selectElement.style.display='none';\r\n    }\r\n    \r\n    return {\r\n        container: containerElement,\r\n        picksElement,\r\n        optionsElement,\r\n        init(){\r\n            if (ownPicksElement)\r\n                containerElement.appendChild(picksElement);\r\n        },\r\n        appendToContainer(){\r\n            if (ownContainerElement || !selectElement)            \r\n            {\r\n                containerElement.appendChild(picksElement);\r\n                containerElement.appendChild(optionsElement);\r\n            }\r\n            else\r\n            {\r\n                if (selectElement)\r\n                {\r\n                    selectElement.parentNode.insertBefore(optionsElement, selectElement.nextSibling);\r\n                    selectElement.parentNode.insertBefore(picksElement, optionsElement);\r\n                }\r\n            }\r\n        },\r\n        attachContainer(){\r\n            if (ownContainerElement)\r\n                selectElement.parentNode.insertBefore(containerElement, selectElement.nextSibling);\r\n        },\r\n        dispose(){\r\n            if (ownContainerElement)\r\n                containerElement.parentNode.removeChild(containerElement);\r\n            if (ownPicksElement)\r\n                picksElement.parentNode.removeChild(picksElement);\r\n            optionsElement.parentNode.removeChild(optionsElement);\r\n            if (selectElement)\r\n                selectElement.style.display = backupDisplay;\r\n        }\r\n    }\r\n}","function AddToJQueryPrototype(pluginName, createPlugin, $){\r\n    const firstChar = pluginName.charAt(0);\r\n    const firstCharLower = firstChar.toLowerCase();\r\n    if (firstCharLower == firstChar) {\r\n        throw new TypeError(`Plugin name '${pluginName}' should be started from upper case char`)\r\n    }\r\n    const prototypableName = firstCharLower + pluginName.slice(1)\r\n    const noConflictPrototypable = $.fn[prototypableName];\r\n    const dataKey = `DashboardCode.${pluginName}`;\r\n\r\n    function prototypable(options) {\r\n        return this.each( function () {\r\n            let $e = $(this);\r\n            let instance = $e.data(dataKey)\r\n            let isMethodName = typeof options === 'string';\r\n            if (!instance) {\r\n                if (isMethodName && /Dispose/.test(options)) {\r\n                    return;\r\n                }\r\n                const optionsObject = (typeof options === 'object')?options:null;\r\n\r\n                instance = createPlugin(this, optionsObject,\r\n                    () => {\r\n                        $e.removeData(dataKey)\r\n                    });\r\n                $e.data(dataKey, instance);\r\n            }\r\n\r\n            if (isMethodName) {\r\n                let methodName = options;\r\n                if (typeof instance[methodName] === 'undefined') {\r\n                    throw new TypeError(`No method named '${methodName}'`)\r\n                }\r\n                instance[methodName]()\r\n            }\r\n        })\r\n    }\r\n\r\n    $.fn[prototypableName] = prototypable;\r\n\r\n    // pluginName with first capitalized letter - return plugin instance for 1st $selected item\r\n    $.fn[pluginName] = function () {\r\n        return $(this).data(dataKey);\r\n    };\r\n\r\n    $.fn[prototypableName].noConflict = function () {\r\n        $.fn[prototypableName] = noConflictPrototypable\r\n        return prototypable;\r\n    }\r\n}\r\n\r\nexport default AddToJQueryPrototype;","function OptionsAdapterElement(selectElement, getDisabled, trigger, form) {\r\n    var backup;\r\n    return {\r\n        getOptions(){\r\n            return selectElement.getElementsByTagName('OPTION')\r\n        },\r\n        triggerChange(){\r\n            trigger('change')\r\n            trigger('multiselect:change')\r\n        },\r\n        getDisabled,\r\n        getIsValid(){\r\n            return selectElement.classList.contains('is-valid')\r\n        },\r\n        getIsInvalid(){\r\n            return selectElement.classList.contains('is-invalid')\r\n        },\r\n        subscribeToReset(handler){\r\n            backup = handler;\r\n            if (form)\r\n                form.addEventListener('reset', backup)\r\n        },\r\n        dispose(){\r\n            if (form && backup)\r\n                form.removeEventListener('reset', backup)\r\n        }\r\n    }\r\n}\r\n\r\nfunction OptionsAdapterJson(options, getDisabled, getIsValid, getIsInvalid, trigger) {\r\n    return {\r\n        getOptions(){\r\n            return options\r\n        },\r\n        triggerChange(){\r\n            trigger('multiselect:change')\r\n        },\r\n        getDisabled(){\r\n            return getDisabled?getDisabled():false\r\n        },\r\n        getIsValid(){\r\n            return getIsValid?getIsValid():false\r\n        },\r\n        getIsInvalid(){\r\n            return getIsInvalid?getIsInvalid():false\r\n        }\r\n    }\r\n}\r\n\r\nexport {OptionsAdapterJson, OptionsAdapterElement}","function LabelAdapter(label, createInputId){\r\n    var backupedFor = null; // state saved between init and dispose\r\n    return {\r\n        init(filterInput) {\r\n            if (label) {\r\n                backupedFor = label.getAttribute('for');\r\n                var newId = createInputId();\r\n                filterInput.setAttribute('id', newId);\r\n                label.setAttribute('for',newId);\r\n            }\r\n        },\r\n        dispose(){\r\n            if(backupedFor)\r\n                label.setAttribute('for',backupedFor);\r\n        }\r\n    }\r\n}\r\n\r\nexport default LabelAdapter;"]}