/*!
  * DashboardCode BsMultiSelect v0.1.6 (https://dashboardcode.github.io/BsMultiSelect/)
  * Copyright 2017-2018 Roman Pokrovskij (github user rpokrovskij)
  * Licensed under APACHE 2 (https://github.com/DashboardCode/BsMultiSelect/blob/master/LICENSE)
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["jquery","popper.js"],t):e.BsMultiSelect=t(e.jQuery,e.Popper)}(this,function(e,t){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var l=function(){function e(e,t,o){this.jQuery=e,this.options=t,this.hiddenSelect=o}var t=e.prototype;return t.CreateSelectedItemContent=function(e,t,o){this.options.selectedItemClass?e.addClass(this.options.selectedItemClass):(e.addClass("badge"),e.css({"padding-left":"0px","line-height":"1rem"}));var n=this.jQuery("<span>"+t+"</span>"),s=this.jQuery('<button aria-label="Close" tabIndex="-1" type="button"><span aria-hidden="true">&times;</span></button>');this.options.removeSelectedItemButtonClass?s.addClass(this.options.removeSelectedItemButtonClass):(s.addClass("close"),s.css({"line-height":"1rem","font-size":"1.3rem"})),s.click(function(){o()}),n.appendTo(e),s.appendTo(e)},t.CreateDropDownItemContent=function(e,t,o,n){var s=this.options.containerClass+"-"+this.hiddenSelect.name.toLowerCase()+"-generated-id-"+t.toLowerCase(),i=n?"checked":"";this.jQuery('<div class="custom-control custom-checkbox">\n                <input type="checkbox" class="custom-control-input" id="'+s+'" '+i+'>\n                <label class="custom-control-label" for="'+s+'">'+o+"</label>\n        </div>").appendTo(e),e.addClass(this.options.dropDownItemClass);var l=e.find('INPUT[type="checkbox"]');return function(e){l.prop("checked",e)}},t.Init=function(e){var t=this.jQuery(this.hiddenSelect);t.hasClass("is-valid")&&e.addClass("is-valid"),t.hasClass("is-invalid")&&e.addClass("is-invalid")},t.Enable=function(e,t){if(t){var o=this.hiddenSelect.id,n=this.jQuery(this.hiddenSelect).closest(".form-group");if(1==n.length){var s=n.find('label[for="'+o+'"]'),i=s.attr("for"),l=e.find("input");if(i==this.hiddenSelect.id){var a=this.options.containerClass+"-generated-filter-id-"+this.hiddenSelect.id;l.attr("id",a),s.attr("for",a)}}}else this.options.selectedPanelReadonlyClass?e.addClass(this.options.selectedPanelReadonlyClass):e.css({"background-color":this.options.selectedPanelReadonlyBackgroundColor}),e.find("BUTTON").prop("disabled",!0)},t.Hover=function(e,t){t?e.addClass("text-primary").addClass("bg-light"):e.removeClass("text-primary").removeClass("bg-light")},t.FilterClick=function(e){return!("BUTTON"==e.target.nodeName||"SPAN"==e.target.nodeName&&"BUTTON"==e.target.parentElement.nodeName)},t.Focus=function(e,t){t?this.options.selectedPanelFocusClass?e.addClass("this.options.selectedPanelFocusClass"):e.hasClass("is-valid")&&this.options.selectedPanelValidBoxShadow?e.css("box-shadow",this.options.selectedPanelValidBoxShadow):e.hasClass("is-invalid")&&this.options.selectedPanelInvalidBoxShadow?e.css("box-shadow",this.options.selectedPanelInvalidBoxShadow):e.css("box-shadow",this.options.selectedPanelBoxShadow).css("border-color",this.options.selectedPanelBorderColor):this.options.selectedPanelFocusClass?e.removeClass(this.options.selectedPanelFocusClass):e.css("box-shadow","").css("border-color","")},e}();return function(a,d,p){var e=d.fn[t],t="dashboardCodeBsMultiSelect",n="plugin_"+t,c={"margin-bottom":"0"},u={display:"flex","flex-wrap":"wrap"},h={"list-style-type":"none"},f={width:"2ch",border:"0",padding:"0",outline:"none"},w={"list-style-type":"none"},o={doManageFocus:!0,selectedPanelDefMinHeight:"calc(2.25rem + 2px)",selectedPanelReadonlyBackgroundColor:"#e9ecef",selectedPanelBoxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.25)",selectedPanelBorderColor:"#80bdff",selectedPanelValidBoxShadow:" 0 0 0 0.2rem rgba(40, 167, 69, 0.25)",selectedPanelInvalidBoxShadow:"0 0 0 0.2rem rgba(220, 53, 69, 0.25)",filterInputColor:"#495057",containerClass:"dashboardcode-bsmultiselect",dropDownMenuClass:"dropdown-menu",dropDownItemClass:"px-2",selectedPanelClass:"",selectedPanelFocusClass:"",selectedPanelReadonlyClass:"",selectedItemClass:"",removeSelectedItemButtonClass:"",filterInputItemClass:"",filterInputClass:""},s=function(){function e(e,t){if("undefined"==typeof p)throw new TypeError("DashboardCode BsMultiSelect require Popper.js (https://popper.js.org)");this.hiddenSelect=e,this.options=d.extend({},o,t),this.jQuery=d,this.adapter=new l(d,this.options,this.hiddenSelect),this.container=null,this.dropDownMenu=null,this.selectedPanel=null,this.filterInput=null,this.filterInputItem=null,this.popper=null,this.filterInputItemOffsetLeft=null,this.skipFocusout=!1,this.backspaceAtStartPoint=null,this.selectedDropDownItem=null,this.selectedDropDownIndex=null,this.hasItems=!1,this.init()}var t=e.prototype;return t.updateDropDownPosition=function(e){var t=this.filterInputItem.offsetLeft;(e||this.filterInputItemOffsetLeft!=t)&&(this.popper.update(),this.filterInputItemOffsetLeft=t)},t.hideDropDown=function(){d(this.dropDownMenu).hide()},t.showDropDown=function(){this.updateDropDownPosition(!0),d(this.dropDownMenu).show()},t.closeDropDown=function(){this.resetSelectDropDownMenu(),this.clearFilterInput(),this.hideDropDown(),this.updateDropDownPosition()},t.clearFilterInput=function(e){""!=this.filterInput.value&&(this.filterInput.value="",this.adoptFilterInputLength(),this.filterDropDownMenu(),e&&this.hasItems&&this.updateDropDownPosition(!1))},t.filterDropDownMenu=function(){var s=this.filterInput.value.trim().toLowerCase(),i=0;d(this.dropDownMenu).find("LI").each(function(e,t){var o=d(t);if(""==s)o.show(),i++;else{var n=o.data("option-text");!o.data("option-selected")&&0<=n.indexOf(s)?(o.show(),i++):o.hide()}}),this.hasItems=0<i,this.resetSelectDropDownMenu()},t.appendDropDownItem=function(n){var s=this,i=n.value,l=n.text,e=n.selected,a=d("<li/>");a.data("option-id",i),a.data("option-text",l.toLowerCase());var r=this.adapter.CreateDropDownItemContent(a,i,l,e);a.appendTo(d(this.dropDownMenu));var t=function e(){a.data("option-selected",!0);var t=d("<li/>");t.data("option-id",i),n.selected=!0,r(!0);var o=function(){a.data("option-selected",!1),a.data("option-toggle",e),t.data("option-remove",null),t.remove(),n.selected=!1,r(!1)};return s.adapter.CreateSelectedItemContent(t,l,function(){o(),s.clearFilterInput(!0),s.updateDropDownPosition(!1),d(s.filterInput).focus()}),t.insertBefore(s.jQuery(s.filterInputItem)),a.data("option-toggle",o),t.data("option-remove",o),t};a.data("option-toggle",function(){return t()}),e&&t()},t.adoptFilterInputLength=function(){this.filterInput.style.width=1.3*this.filterInput.value.length+2+"ch"},t.resetSelectDropDownMenu=function(){null!==this.selectedDropDownItem&&(this.adapter.Hover(d(this.selectedDropDownItem),!1),this.selectedDropDownItem=null),this.selectedDropDownIndex=null},t.keydownArrow=function(e){var t=d(this.dropDownMenu).find('LI:not([style*="display: none"])').toArray();if(0<t.length){if(this.hasItems&&this.showDropDown(),null===this.selectedDropDownItem)this.selectedDropDownIndex=e?0:t.length-1;else if(this.adapter.Hover(d(this.selectedDropDownItem),!1),e){var o=this.selectedDropDownIndex+1;this.selectedDropDownIndex=o<t.length?o:0}else{var n=this.selectedDropDownIndex-1;this.selectedDropDownIndex=0<=n?n:t.length-1}this.selectedDropDownItem=t[this.selectedDropDownIndex],this.adapter.Hover(d(this.selectedDropDownItem),!0)}},t.init=function(){var r=this,t=d(this.hiddenSelect);t.hide();var e=this.hiddenSelect.disabled,o=d("<div/>");o.addClass(this.options.containerClass),o.insertAfter(t),this.container=o.get(0);var n=d("<ul/>");n.css(u),this.options.selectedPanelClass?n.addClass(this.options.selectedPanelClass):(n.addClass("form-control"),n.css(c),n.css({"min-height":this.options.selectedPanelMinHeight})),n.appendTo(this.container),this.selectedPanel=n.get(0),this.adapter.Init(n);var s=d("<li/>");this.filterInputItem=s.get(0),s.css(h),this.options.filterInputItemClass||s.addClass(this.options.filterInputItemClass),s.appendTo(this.selectedPanel);var i=d('<input type="search" autocomplete="off">');this.options.filterInputClass?i.addClass(this.options.filterInputClass):(i.css(f),i.css("color",this.options.filterInputColor)),i.appendTo(this.filterInputItem),this.filterInput=i.get(0);var l=d("<ul/>").css({display:"none"}).appendTo(o);this.dropDownMenu=l.get(0),l.addClass(this.options.dropDownMenuClass),l.css(w),this.popper=new p(this.filterInput,this.dropDownMenu,{placement:"bottom-start",modifiers:{preventOverflow:{enabled:!1},hide:{enabled:!1},flip:{enabled:!1}}}),d(document).ready(function(){var e=t.find("option");e.each(function(e,t){r.appendDropDownItem(t)}),r.hasItems=0<e.length,r.updateDropDownPosition(!1),l.find("li").click(function(e){e.preventDefault(),e.stopPropagation(),d(e.currentTarget).closest("LI").data("option-toggle")(),r.clearFilterInput(!1),r.filterInput.focus()}),l.find("li").on("mouseover",function(e){r.adapter.Hover(d(e.target).closest("li"),!0)}),l.find("li").on("mouseout",function(e){r.adapter.Hover(d(e.target).closest("li"),!1)})}),e?(this.filterInput.style.display="none",this.adapter.Enable(d(this.selectedPanel),!1)):(this.filterInput.style.display="inline-block",this.adapter.Enable(d(this.selectedPanel),!0),l.click(function(e){e.stopPropagation()}),l.on("mouseover",function(){r.resetSelectDropDownMenu()}),n.click(function(e){"INPUT"!=e.target.nodeName&&d(r.filterInput).val("").focus(),r.hasItems&&r.adapter.FilterClick(e)&&r.showDropDown()}),i.on("keydown",function(e){38==e.which?(e.preventDefault(),r.keydownArrow(!1)):40==e.which?(e.preventDefault(),r.keydownArrow(!0)):13==e.which?e.preventDefault():9==e.which?r.filterInput.value?e.preventDefault():r.closeDropDown():(8==e.which&&(r.backspaceAtStartPoint=0==r.filterInput.selectionStart&&0==r.filterInput.selectionEnd),r.resetSelectDropDownMenu())}),i.on("keyup",function(e){if(13==e.which||9==e.which)if(r.selectedDropDownItem){d(r.selectedDropDownItem).data("option-toggle")(),r.closeDropDown()}else{for(var t=r.filterInput.value.trim().toLowerCase(),o=r.dropDownMenu.querySelectorAll("LI"),n=null,s=0;s<o.length;++s){var i=o[s];if(i.textContent.trim().toLowerCase()==t){n=i;break}}if(n){var l=d(n);if(!l.data("option-selected"))l.data("option-toggle")();r.clearFilterInput(!0)}}else if(8==e.which){if(0==r.filterInput.selectionEnd&&0==r.filterInput.selectionStart&&r.backspaceAtStartPoint){var a=d(r.selectedPanel).find("LI:last").prev();if(a.length)a.data("option-remove")()}r.backspaceAtStartPoint=null,r.updateDropDownPosition(!1)}else 27==e.which&&r.closeDropDown()}),i.on("input",function(){r.adoptFilterInputLength(),r.filterDropDownMenu(),r.hasItems?(r.updateDropDownPosition(!1),r.showDropDown()):r.hideDropDown()}),this.options.doManageFocus&&(i.focusin(function(){r.adapter.Focus(n,!0)}),i.focusout(function(){r.skipFocusout||r.adapter.Focus(n,!1)}),o.mousedown(function(){r.skipFocusout=!0}),d(a.document).mouseup(function(){r.skipFocusout=!1})),d(a.document).mouseup(function(e){r.container===e.target||d.contains(r.container,e.target)||r.closeDropDown()}))},e}();function i(o){return this.each(function(){var e=d(this).data(n);if(!e){if(/dispose|hide/.test(o))return;e=new s(this,"object"==typeof o?o:null),d(this).data(n,e)}if("string"==typeof o){var t=o;if("undefined"==typeof e[t])throw new TypeError('No method named "'+t+'"');e[t]()}})}return d.fn[t]=i,d.fn[t.charAt(0).toUpperCase()+t.slice(1)]=function(){return d(this).data("plugin_"+t)},d.fn[t].Constructor=s,d.fn[t].noConflict=function(){return d.fn[t]=e,i},s}(window,e,t)});
//# sourceMappingURL=BsMultiSelect.min.js.map