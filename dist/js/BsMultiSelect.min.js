/*!
  * DashboardCode BsMultiSelect v0.1.5 (https://dashboardcode.github.io/BsMultiSelect/)
  * Copyright 2017-2018 Roman Pokrovskij (github user rpokrovskij)
  * Licensed under APACHE 2 (https://github.com/DashboardCode/BsMultiSelect/blob/master/LICENSE)
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["jquery","popper.js"],t):e.BsMultiSelect=t(e.jQuery,e.Popper)}(this,function(e,t){"use strict";return e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,function(d,D,p){var e=D.fn[t],t="dashboardCodeBsMultiSelect",n="plugin_"+t,c={display:"block"},h={width:"2ch",border:"0",padding:"0",outline:"none"},m={cursor:"text",display:"flex","flex-wrap":"wrap","align-items":"center","margin-bottom":"0px"},l={"padding-left":"0px",display:"flex","align-items":"center"},r={"line-height":"1rem","font-size":"1.3rem"},o={items:[],defaults:[],selectedPanelMinHeight:"calc(2.25rem + 2px)",selectedPanelReadonlyBackgroundColor:"#e9ecef",selectedPanelValidBoxShadow:" 0 0 0 0.2rem rgba(40, 167, 69, 0.25)",selectedPanelInvalidBoxShadow:"0 0 0 0.2rem rgba(220, 53, 69, 0.25)",filterInputColor:"#495057",containerClass:"dashboardcode-bsmultiselect",dropDownMenuClass:"dropdown-menu",dropDownItemClass:"px-2",selectedPanelClass:"",selectedPanelReadonlyClass:"",selectedItemClass:"",removeSelectedItemButtonClass:"",filterInputItemClass:"",filterInputClass:""},s=function(){function e(e,t){if("undefined"==typeof p)throw new TypeError("DashboardCode bsMultiSelect require Popper.js (https://popper.js.org)");this.element=e,this.options=D.extend({},o,t),this.hiddenSelect=e,this.container=null,this.dropDownMenu=null,this.selectedPanel=null,this.filterInput=null,this.filterInputItem=null,this.popper=null,this.filterInputItemOffsetLeft=null,this.skipFocusout=!1,this.backspaceAtStartPoint=null,this.selectedDropDownItem=null,this.selectedDropDownIndex=null,this.hasItems=!1,this.init()}var t=e.prototype;return t.updateDropDownPosition=function(e){var t=this.filterInputItem.offsetLeft;(e||this.filterInputItemOffsetLeft!=t)&&(this.popper.update(),this.filterInputItemOffsetLeft=t)},t.hideDropDown=function(){D(this.dropDownMenu).hide()},t.showDropDown=function(){this.updateDropDownPosition(!0),D(this.dropDownMenu).show()},t.setCheck=function(e,t){for(var o=0;o<this.hiddenSelect.options.length;o+=1){if(this.hiddenSelect.options[o].value==e){this.hiddenSelect.options[o].selected=t;break}}},t.getInputValue=function(){return D(this.hiddenSelect).val()},t.closeDropDown=function(){this.resetSelectDropDownMenu(),this.clearFilterInput(),this.hideDropDown(),this.updateDropDownPosition()},t.clearFilterInput=function(e){""!=this.filterInput.value&&(this.filterInput.value="",this.adoptFilterInputLength(),this.filterDropDownMenu(),e&&this.hasItems&&this.updateDropDownPosition(!1))},t.filterDropDownMenu=function(){var s=this.filterInput.value.trim(),i=0;D(this.dropDownMenu).find("li").each(function(e,t){var o=D(t);if(""==s)o.show(),i++;else{var n=o.text();!o.find('input[type="checkbox"]').prop("checked")&&0<=n.toLowerCase().indexOf(s.toLowerCase())?(o.show(),i++):o.hide()}}),this.hasItems=0<i,this.resetSelectDropDownMenu()},t.clickDropDownItem=function(e){e.preventDefault(),e.stopPropagation();var t=D(e.currentTarget).closest("LI"),o=t.data("option-id"),n=t.find('input[type="checkbox"]');if(n.prop("checked")){var s=D(this.selectedPanel).find('li[data-option-id="'+o+'"]');this.removeSelectedItem(s,o,n)}else{var i=t.find("label").text();this.createAndAppendSelectedItem(n,o,i),n.prop("checked",!0)}this.clearFilterInput(!1),this.filterInput.focus()},t.appendDropDownItem=function(e,t,o){var n=e,s="dashboardcode-bsmultiselect-"+this.hiddenSelect.name.toLowerCase()+"-generated-id-"+n.toLowerCase(),i=D('<li data-option-id="'+n+'">\n                    <div class="custom-control custom-checkbox">\n                        <input type="checkbox" class="custom-control-input" id="'+s+'" '+(o?"checked":"")+'>\n                        <label class="custom-control-label" for="'+s+'">'+t+"</label>\n                    </div>\n                 </li>").addClass(this.options.dropDownItemClass).appendTo(D(this.dropDownMenu)).find('input[type="checkbox"]');o&&this.createAndAppendSelectedItem(i,n,t)},t.createAndAppendSelectedItem=function(e,t,o){var n=this,s=D('<li data-option-id="'+t+'"><span>'+o+"</span></li>");this.options.selectedItemClass?s.addClass(this.options.selectedItemClass):(s.addClass("badge"),s.css(l)),s.insertBefore(D(this.filterInputItem));var i=D("<button aria-label='Close' tabIndex='-1' type='button'><span aria-hidden='true'>&times;</span></button>");this.options.removeSelectedItemButtonClass?i.addClass(this.options.removeSelectedItemButtonClass):(i.addClass("close"),i.css(r)),i.appendTo(s),this.setCheck(t,!0),i.click(function(){n.removeSelectedItem(s,t,e),n.clearFilterInput(!0),n.updateDropDownPosition(!1),D(n.filterInput).focus()})},t.adoptFilterInputLength=function(){this.filterInput.style.width=1.3*this.filterInput.value.length+2+"ch"},t.analyzeInputText=function(){for(var e=this.filterInput.value.trim().toLowerCase(),t=this.dropDownMenu.querySelectorAll("LI"),o=null,n=0;n<t.length;++n){var s=t[n];if(s.textContent.trim().toLowerCase()==e){o=s;break}}if(o){var i=D(o),l=i.find('input[type="checkbox"]');if(!l.prop("checked")){var r=i.data("option-id"),a=i.find("label").text();this.createAndAppendSelectedItem(l,r,a),l.prop("checked",!0)}this.clearFilterInput(!0)}},t.resetSelectDropDownMenu=function(){null!==this.selectedDropDownItem&&(this.selectedDropDownItem.classList.remove("bg-light"),this.selectedDropDownItem.classList.remove("text-primary"),this.selectedDropDownItem=null),this.selectedDropDownIndex=null},t.keydownArrow=function(e){var t=D(this.dropDownMenu).find('LI:not([style*="display: none"])').toArray();if(0<t.length){if(this.hasItems&&this.showDropDown(),null===this.selectedDropDownItem)this.selectedDropDownIndex=e?0:t.length-1;else if(this.selectedDropDownItem.classList.remove("bg-light"),this.selectedDropDownItem.classList.remove("text-primary"),e){var o=this.selectedDropDownIndex+1;this.selectedDropDownIndex=o<t.length?o:0}else{var n=this.selectedDropDownIndex-1;this.selectedDropDownIndex=0<=n?n:t.length-1}this.selectedDropDownItem=t[this.selectedDropDownIndex],this.selectedDropDownItem.classList.add("text-primary"),this.selectedDropDownItem.classList.add("bg-light")}},t.removeSelectedItem=function(e,t,o){e.remove(),this.setCheck(t,!1),o.prop("checked",!1)},t.init=function(){var u=this,t=D(this.hiddenSelect);t.hide();var e=this.hiddenSelect.disabled,o=D("<div/>");o.addClass(this.options.containerClass),o.insertAfter(t),this.container=o.get(0);var n=D("<ul/>");this.options.selectedPanelClass?n.addClass(this.options.selectedPanelClass):(n.addClass("form-control btn border"),n.css(m),n.css("min-height",this.options.selectedPanelMinHeight)),n.appendTo(this.container),this.selectedPanel=n.get(0),t.hasClass("is-valid")&&(n.removeClass("border"),n.addClass("is-valid")),t.hasClass("is-invalid")&&(n.removeClass("border"),n.addClass("is-invalid"));var s=D("<li/>");this.filterInputItem=s.get(0),this.options.filterInputItemClass?s.addClass(this.options.filterInputItemClass):s.css(c),s.appendTo(this.selectedPanel);var i=D('<input type="search" autocomplete="off">');this.options.filterInputClass?i.addClass(this.options.filterInputClass):(i.css(h),i.css("color",this.options.filterInputColor)),i.appendTo(this.filterInputItem),this.filterInput=i.get(0);var f=D("<ul/>").css({display:"none"}).appendTo(o);if(this.dropDownMenu=f.get(0),f.addClass(this.options.dropDownMenuClass),f.css({"list-style-type":"none"}),this.popper=new p(this.filterInput,this.dropDownMenu,{placement:"bottom-start",modifiers:{preventOverflow:{enabled:!1},hide:{enabled:!1},flip:{enabled:!1}}}),D(document).ready(function(){if(u.options.items){var e=t.find("option");e.each(function(e,t){var o=t.value,n=t.text,s=t.selected;u.appendDropDownItem(o,n,s)}),u.hasItems=0<e.length}else u.options.items.forEach(function(e){var t=e.value,o=e.text,n=e.isChecked;u.appendDropDownItem(t,o,n)}),u.hasItems=0<u.options.items.length;u.updateDropDownPosition(!1),f.find("li").click(function(e){u.clickDropDownItem(e)}),f.find("li").on("mouseover",function(e){D(e.target).closest("li").addClass("text-primary").addClass("bg-light")}),f.find("li").on("mouseout",function(e){D(e.target).closest("li").removeClass("text-primary").removeClass("bg-light")})}),e)this.filterInput.style.display="none",this.options.selectedPanelReadonlyClass?n.addClass(this.options.selectedPanelReadonlyClass):n.css({"background-color":this.options.selectedPanelReadonlyBackgroundColor}),n.find("button").prop("disabled",!0),n.addClass();else{var l=this.hiddenSelect.id,r=t.closest(".form-group");if(1==r.length){var a=r.find('label[for="'+l+'"]');a.attr("for")==this.hiddenSelect.id&&(this.filterInput.id="dashboardcode-bsmultiselect-generated-filter-id-"+this.hiddenSelect.id,a.attr("for",this.filterInput.id))}f.click(function(e){e.stopPropagation()}),f.on("mouseover",function(){u.resetSelectDropDownMenu()}),n.click(function(e){"INPUT"!=e.target.nodeName&&D(u.filterInput).val("").focus(),"BUTTON"==e.target.nodeName||"SPAN"==e.target.nodeName&&"BUTTON"==e.target.parentElement.nodeName||!u.hasItems||u.showDropDown()}),i.on("keydown",function(e){38==e.which||38==e.keyCode?(e.preventDefault(),u.keydownArrow(!1)):40==e.which||40==e.keyCode?(e.preventDefault(),u.keydownArrow(!0)):13==e.which||13==e.keyCode?e.preventDefault():9==e.which||9==e.keyCode?u.filterInput.value?e.preventDefault():u.closeDropDown():(8!=e.which&&8!=e.keyCode||(u.backspaceAtStartPoint=0==u.filterInput.selectionStart&&0==u.filterInput.selectionEnd),u.resetSelectDropDownMenu())}),i.on("keyup",function(e){if(13==e.which||13==e.keyCode||9==e.which||9==e.keyCode){if(u.selectedDropDownItem){var t=D(u.selectedDropDownItem),o=t.find('input[type="checkbox"]'),n=t.data("option-id");if(o.prop("checked")){var s=D(u.selectedPanel).find('LI[data-option-id="'+n+'"]:first');u.removeSelectedItem(s,n,o)}else{var i=t.find("label").text();u.createAndAppendSelectedItem(o,n,i),o.prop("checked",!0),u.resetSelectDropDownMenu()}13!=e.which&&13!=e.keyCode||u.closeDropDown()}else u.analyzeInputText();9!=e.which&&9!=e.keyCode||u.closeDropDown()}else if(8==e.which||8==e.keyCode){var l=u.filterInput.selectionStart;if(0==u.filterInput.selectionEnd&&0==l&&u.backspaceAtStartPoint){var r=D(u.selectedPanel),a=r.find("LI").toArray();if(2<=a.length){var d=a[a.length-2],p=D(d).data("option-id"),c=f.find('LI[data-option-id="'+p+'"]:first').find('input[type="checkbox"]:first'),h=r.find('LI[data-option-id="'+p+'"]:first');u.removeSelectedItem(h,p,c)}}u.backspaceAtStartPoint=null,u.updateDropDownPosition(!1)}else 27!=e.which&&27!=e.keyCode||u.closeDropDown()}),i.on("input",function(){u.adoptFilterInputLength(),u.filterDropDownMenu(),u.hasItems?(u.updateDropDownPosition(!1),u.showDropDown()):u.hideDropDown()}),i.focusin(function(){n.hasClass("is-valid")&&u.options.selectedPanelValidBoxShadow?n.css("box-shadow",u.options.selectedPanelValidBoxShadow):n.hasClass("is-invalid")&&u.options.selectedPanelInvalidBoxShadow&&n.css("box-shadow",u.options.selectedPanelInvalidBoxShadow),D(u.selectedPanel).addClass("focus")}),i.focusout(function(){u.skipFocusout||(n.css("box-shadow",""),D(u.selectedPanel).removeClass("focus"))}),o.mousedown(function(){u.skipFocusout=!0}),D(d.document).mouseup(function(e){u.skipFocusout=!1,u.container===e.target||D.contains(u.container,e.target)||u.closeDropDown()})}},e}();function i(o){return this.each(function(){var e=D(this).data(n);if(!e){if(/dispose|hide/.test(o))return;e=new s(this,"object"==typeof o?o:null),D(this).data(n,e)}if("string"==typeof o){var t=o;if("undefined"==typeof e[t])throw new TypeError('No method named "'+t+'"');e[t]()}})}return D.fn[t]=i,D.fn[t.charAt(0).toUpperCase()+t.slice(1)]=function(){return D(this).data("plugin_"+t)},D.fn[t].Constructor=s,D.fn[t].noConflict=function(){return D.fn[t]=e,i},s}(window,e,t)});
//# sourceMappingURL=BsMultiSelect.min.js.map