{"version":3,"file":"BsMultiSelect.esm.js","sources":["../../js/src/ToolsDom.js","../../js/src/ToolsJs.js","../../js/src/ToolsStyling.js","../../js/src/PluginManager.js","../../js/src/BsCss.js","../../js/src/plugins/LabelPlugin.js","../../js/src/plugins/RtlPlugin.js","../../js/src/plugins/FormResetPlugin.js","../../js/src/ValidityApi.js","../../js/src/plugins/ValidationApiPlugin.js","../../js/src/plugins/BsAppearancePlugin.js","../../js/src/plugins/HiddenOptionPlugin.js","../../js/src/plugins/CssPatchPlugin.js","../../js/src/BsMultiSelect.esm.js"],"sourcesContent":["export function removeElement(e) {e.parentNode.removeChild(e)}\r\n\r\nexport function findDirectChildByTagName(element, tagName){\r\n    let value = null;\r\n    for (let i = 0; i<element.children.length; i++)\r\n    {\r\n        let tmp = element.children[i];\r\n        if (tmp.tagName==tagName)\r\n        {\r\n            value = tmp;\r\n            break;\r\n        }\r\n    }\r\n    return value;\r\n}\r\n\r\nexport function closestByTagName(element, tagName){\r\n    return closest(element, e => e.tagName === tagName) // TODO support xhtml?  e.tagName.toUpperCase() ?\r\n}\r\n\r\nexport function closestByClassName(element, className){\r\n    return closest(element, e => e.classList.contains(className))\r\n}\r\n\r\nexport function closestByAttribute(element, attributeName, attribute){\r\n    return closest(element, e => e.getAttribute(attributeName)===attribute )\r\n}\r\n\r\nexport function containsAndSelf(node, otherNode ){\r\n    return node === otherNode || node.contains(otherNode);  \r\n}\r\n\r\nexport function getDataGuardedWithPrefix(element, prefix, name){\r\n    var tmp1 = element.getAttribute('data-' + prefix + '-' + name);\r\n    if (tmp1) {\r\n        return tmp1;\r\n    } else  {\r\n        var tmp2 = element.getAttribute('data-' + name);\r\n        if (tmp2)\r\n            return tmp2;\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction closest(element, predicate){\r\n    if (!element || !(element instanceof Element)) return null; // should be element, not document (TODO: check iframe)\r\n     \r\n    if (predicate(element)) return element;\r\n    return closest(element.parentNode, predicate);\r\n}\r\n\r\nexport function siblingsAsArray(element){\r\n    var value = []\r\n    if (element.parentNode){\r\n        var children = element.parentNode.children;\r\n        var l = element.parentNode.children.length;\r\n        if (children.length>1){\r\n            for (var i=0; i < l; ++i){\r\n                var e = children[i];\r\n                if (e!=element)\r\n                    value.push(e);\r\n                \r\n            }\r\n        }\r\n    }\r\n    return value;\r\n}\r\n\r\nexport function getIsRtl(element){\r\n    var isRtl = false;\r\n    var e = closestByAttribute(element,\"dir\",\"rtl\");\r\n    if (e)\r\n        isRtl = true;\r\n    return isRtl;\r\n}\r\n\r\nexport function EventBinder(){\r\n    var list = [];\r\n    return {\r\n        bind(element, eventName, handler) {\r\n            element.addEventListener(eventName, handler)\r\n            list.push( {element, eventName, handler} )\r\n        },\r\n        unbind() {\r\n            list.forEach( e=> {\r\n                let {element, eventName, handler}=e;\r\n                element.removeEventListener(eventName, handler)\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport function AttributeBackup(){\r\n    var list = [];\r\n    return {\r\n        set(element, attributeName, attribute){\r\n            var currentAtribute =  element.getAttribute(attributeName); \r\n            list.push( {element, currentAtribute, attribute} )\r\n            element.setAttribute(attributeName, attribute)\r\n        },\r\n        restore(){\r\n            list.forEach(e=>{\r\n                let {element, attributeName, attribute} = e;\r\n                if (attributeName)\r\n                    element.setAttribute(attributeName, attribute)\r\n                else\r\n                    element.removeAttribute(attributeName)\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport function EventLoopFlag(window) {\r\n    var flag = false;\r\n    return {\r\n        get(){\r\n            return flag;\r\n        },\r\n        set(){\r\n            flag = true;\r\n            window.setTimeout( \r\n                () => {  \r\n                    flag = false;\r\n                }, 0)\r\n        }\r\n    }\r\n}","export function isObject(value){\r\n    return typeof value === 'object' && value !== null\r\n}\r\n\r\nexport function isBoolean(value){\r\n    return value === true || value === false;\r\n}\r\n\r\nexport function isString(value){\r\n    return value instanceof String || typeof(value) === 'string';\r\n}\r\n\r\nexport function extendIfUndefined(destination, source) {\r\n    for (let property in source)\r\n        if (destination[property] === undefined)\r\n            destination[property] = source[property];\r\n}\r\n\r\nexport function extendOverriding(destination, source) {\r\n    for (let property in source)\r\n        destination[property] = source[property];\r\n}\r\n\r\nexport function shallowClearClone(source, ...sources) { // override previous, no null and undefined\r\n    var destination = {};\r\n    for (let property in source){ // TODO:  Object.assign (need polyfill for IE11)\r\n        let v = source[property];\r\n        if (!(v === null || v===undefined))\r\n            destination[property] = v;\r\n    }\r\n    if(sources)\r\n        sources.forEach(\r\n            s=>{\r\n                for(let property in s){\r\n                    let v = s[property];\r\n                    if (!(v === null || v===undefined))\r\n                        destination[property] = v;\r\n                    else\r\n                        if (destination.hasOwnProperty(property)){\r\n                            delete destination[property];\r\n                        }\r\n                }\r\n            }\r\n        )\r\n    return destination;\r\n}\r\n\r\nfunction forEachRecursion(f, i){\r\n    if (!i)\r\n        return;\r\n    f(i.value); \r\n    forEachRecursion(f, i.prev);\r\n}\r\n\r\nexport function List(){\r\n    var tail = null;\r\n    var count = 0;\r\n    return {\r\n        add(e){\r\n            if (tail){\r\n                tail.next = {value:e, prev:tail, next:null};\r\n                tail = tail.next;\r\n            } else \r\n                tail = {value:e, prev:null, next:null}\r\n            count++;\r\n            let node = tail;\r\n            function remove(){\r\n                if (node.prev){\r\n                    (node.prev).next = node.next;\r\n                }\r\n                if (node.next){\r\n                    (node.next).prev = node.prev;\r\n                }\r\n                if (tail == node){\r\n                    tail = node.prev;\r\n                }\r\n                count--;\r\n            }\r\n            return remove;\r\n        },\r\n        forEach(f){\r\n            forEachRecursion(f, tail);\r\n        },\r\n        getTail(){ return (tail)?tail.value:null },\r\n        getCount(){ return count },\r\n        isEmpty(){ return count==0 },\r\n        reset(){ tail=null; \r\n            count = 0 }\r\n    }\r\n}\r\n\r\nexport function ListFacade(getPrev, setPrev, getNext, setNext){\r\n    var head = null, tail = null;\r\n    var count = 0;\r\n    var remove = (e) => {\r\n        let next = getNext(e);\r\n        let prev = getPrev(e);\r\n        if (prev) {\r\n            setNext(prev, next)\r\n        }\r\n        if (next) {\r\n             setPrev(next, prev)\r\n        }\r\n        if (tail == e) {\r\n            tail = prev;\r\n        }\r\n        if (head == e) {\r\n            head = next; \r\n        }\r\n        count--;\r\n    }\r\n    return {\r\n        add(e, next){\r\n            if (!tail){\r\n                head = tail = e;\r\n            }\r\n            else {\r\n                if (!next){\r\n                    setPrev(e, tail);\r\n                    setNext(tail, e);\r\n                    tail = e;\r\n                } \r\n                else{\r\n                    if (next===head)\r\n                        head=e;\r\n                    let prev = getPrev(next);\r\n                    setNext(e, next);\r\n                    setPrev(next, e);\r\n                    if (prev){\r\n                        setPrev(e, prev);\r\n                        setNext(prev, e);\r\n                    } else {\r\n                        setPrev(e, null);\r\n                    }\r\n                } \r\n            }\r\n            count++;\r\n        },\r\n        remove, \r\n        forEach(f){\r\n            forEachRecursion(f, tail);\r\n        },\r\n        getHead(){ return head },\r\n        getTail(){ return tail },\r\n        getCount(){ return count },\r\n        isEmpty(){ return count==0 },\r\n        reset(){ \r\n            tail=head=null; \r\n            count = 0; }\r\n    }\r\n}\r\n\r\nexport function CollectionFacade(getPrev, setPrev, getNext, setNext){\r\n    var list = [];\r\n    var head = null, tail = null;\r\n    var count = 0;\r\n    var remove = (key) => {\r\n        var e = list[key];\r\n        list.splice(key, 1);\r\n        let next = getNext(e);\r\n        let prev = getPrev(e);\r\n        if (prev) {\r\n            setNext(prev, next)\r\n        }\r\n        if (next) {\r\n             setPrev(next, prev)\r\n        }\r\n        if (tail == e) {\r\n            tail = prev;\r\n        }\r\n        if (head == e) {\r\n            head = next; \r\n        }\r\n        count--;\r\n        return e;\r\n    }\r\n    return {\r\n        getLength(){\r\n            return list.length;\r\n        },\r\n        push(e){\r\n            list.push(e);\r\n            if (!tail){\r\n                head = tail = e;\r\n            }\r\n            else {\r\n                setPrev(e, tail);\r\n                setNext(tail, e);\r\n                tail = e;\r\n            }\r\n            count++;\r\n        },\r\n        add(e, key){\r\n            if (!tail){\r\n                head = tail = e;\r\n            }\r\n            else {\r\n                let next = list[key];\r\n                if (!next) {\r\n                    setPrev(e, tail);\r\n                    setNext(tail, e);\r\n                    tail = e;\r\n                } \r\n                else {\r\n                    list.splice(key, 0, e);\r\n\r\n                    if (next===head)\r\n                        head=e;\r\n                    let prev = getPrev(next);\r\n                    setNext(e, next);\r\n                    setPrev(next, e);\r\n                    if (prev){\r\n                        setPrev(e, prev);\r\n                        setNext(prev, e);\r\n                    } else {\r\n                        setPrev(e, null);\r\n                    }\r\n                } \r\n            }\r\n            count++;\r\n        },\r\n        get: (key) => list[key],\r\n        remove, \r\n        forLoop(f){\r\n            for(let i=0; i<list.length; i++)\r\n            {\r\n                let e = list[i];\r\n                f(e);\r\n            }\r\n        },\r\n        getHead(){ return head },\r\n        getTail(){ return tail },\r\n        getCount(){ return count },\r\n        isEmpty(){ return count==0 },\r\n        reset(){ \r\n            list=[];\r\n            tail=head=null; \r\n            count = 0; }\r\n    }\r\n}\r\n\r\nexport function pushUnique(array, item){\r\n    if(array.indexOf(item) == -1) {\r\n        array.push(item);\r\n            return true;\r\n    }\r\n    return false;\r\n} \r\n\r\nexport function composeSync(...functions){\r\n    return () => sync(...functions)\r\n}\r\n\r\nexport function sync(...functions){\r\n    functions.forEach(\r\n        (f) => {\r\n            if (f)\r\n                f();\r\n        }\r\n    )\r\n}\r\n\r\nexport function def(...functions){\r\n    for (let f of functions) \r\n        if (f) {\r\n           return f;\r\n        }\r\n}\r\n\r\nexport function defCall(...functions){\r\n    for (let f of functions) \r\n        if (f) {\r\n            if (f instanceof Function){\r\n                let tmp =  f();\r\n                if (tmp)\r\n                    return tmp;\r\n            }\r\n            else\r\n                return f \r\n        }\r\n}\r\n\r\nexport function Observable(){\r\n    var list = [];\r\n    return {\r\n        trigger(){\r\n            f();\r\n        },\r\n        attach(f){\r\n            list.push(f)\r\n        },\r\n        detachAll(){\r\n            list.length = 0;\r\n        }\r\n    }\r\n}\r\n\r\nexport function ObservableValue(value){\r\n    var list = List();\r\n    return {\r\n        getValue(){\r\n            return value;\r\n        },\r\n        setValue(newValue){\r\n            value = newValue;\r\n            list.forEach(f=>f(newValue));\r\n        },\r\n        attach(f){\r\n            return list.add(f)\r\n        },\r\n        detachAll(){\r\n            list.reset();\r\n        }\r\n    }\r\n}\r\n\r\n// export function isFunction(obj){\r\n//     return typeof obj === 'function'\r\n// }\r\n\r\nexport function ObservableLambda(func){\r\n    var list = List();\r\n    var value = func();\r\n    return {\r\n        getValue(){\r\n            return value;\r\n        },\r\n        call(){\r\n            value = func();\r\n            list.forEach(f=>f(value));\r\n        },\r\n        attach(f){\r\n            return list.add(f)\r\n        },\r\n        detachAll(){\r\n            list.reset();\r\n        }\r\n    }\r\n}","import {shallowClearClone, isString} from './ToolsJs';\r\n\r\nexport function addStyling(element, styling){\r\n    var backupStyling = {classes:[], styles:{}}\r\n    if (styling) {\r\n        var {classes, styles} = styling;\r\n        classes.forEach(e => element.classList.add(e)) // todo use add(classes)\r\n        backupStyling.classes = classes.slice();\r\n        for (let property in styles){\r\n            backupStyling.styles[property] = element.style[property];\r\n            element.style[property] = styles[property]; // todo use Object.assign (need polyfill for IE11)\r\n        }\r\n    }\r\n    return backupStyling;\r\n}\r\n\r\nfunction removeStyling(element, styling){\r\n    if (styling) {\r\n        var {classes, styles} = styling;\r\n        classes.forEach(e=>element.classList.remove(e)) // todo use remove(classes)\r\n        for (let property in styles)\r\n            element.style[property]  = styles[property]; // todo use Object.assign (need polyfill for IE11)\r\n    }\r\n}\r\n\r\nexport function toggleStyling(element, styling){\r\n    var backupStyling = {classes:[], styles:{}};\r\n    var isOn=false;\r\n    return (value)=>{\r\n        if (value) {\r\n            if (isOn===false){\r\n                backupStyling = addStyling(element, styling)\r\n                isOn=true;\r\n            }\r\n        } else {\r\n            if (isOn===true){\r\n                removeStyling(element,backupStyling);\r\n                isOn=false;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction extendClasses(out, param, actionStr, actionArr, isRemoveEmptyClasses){\r\n    if (isString(param)){\r\n        if (param === \"\"){\r\n            if (isRemoveEmptyClasses){\r\n                out.classes = [];\r\n            }\r\n        } else {\r\n            let c = param.split(' ');\r\n            out.classes = actionStr(c);\r\n        }\r\n        return true;\r\n    } else if (param instanceof Array){\r\n        if (param.length==0){\r\n            if (isRemoveEmptyClasses){\r\n                out.classes = [];\r\n            }\r\n        }\r\n        else{\r\n            out.classes = actionArr(param);\r\n        }\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction extend(value, param, actionStr, actionArr, actionObj, isRemoveEmptyClasses){\r\n    var success = extendClasses(value, param, actionStr, actionArr, isRemoveEmptyClasses);\r\n    if (success === false){\r\n        if (param instanceof Object){\r\n            var {classes, styles} = param;\r\n            extendClasses(value, classes, actionStr, actionArr, isRemoveEmptyClasses);\r\n            \r\n            if (styles) {\r\n                value.styles = actionObj(styles);\r\n            } else if (!classes) {\r\n                value.styles = actionObj(param)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function Styling(param){\r\n    var value = {classes:[], styles:{}};\r\n    if (param){\r\n        extend(value, param, a=>a, a=>a.slice(), o=>shallowClearClone(o), true);\r\n    }\r\n    return Object.freeze(value);\r\n}\r\n\r\nfunction createStyling(isReplace, param, ...params){\r\n    var value = {classes:[], styles:{}};\r\n    if (param){\r\n        extend(value, param, a=>a, a=>a.slice(), o=>shallowClearClone(o),true);\r\n        if (params){\r\n            var {classes, styles} = value;\r\n            var extendInt = isReplace? (p)=>extend(value, p, s=>s, a=>a.slice(), o=> shallowClearClone(styles, o),true):\r\n                (p)=>extend(value, p, a=>classes.concat(a), a=>classes.concat(a), o=>shallowClearClone(styles, o),false)\r\n            params.forEach(p=> extendInt(p));\r\n        }\r\n    }\r\n    return Styling(value);\r\n}\r\n\r\nexport function createCss(stylings1, stylings2){\r\n    var destination = {};\r\n    for (let property in stylings1) {\r\n        let param1 = stylings1[property];\r\n\r\n        let param2 = stylings2?stylings2[property]:undefined;\r\n        if (param2===undefined)\r\n            destination[property] = Styling(param1)\r\n        else{\r\n            destination[property] = createStyling(true, param1, param2); \r\n        }\r\n    }\r\n    if (stylings2)\r\n        for (let property in stylings2) {\r\n            if (!stylings1[property])\r\n                destination[property] = Styling(stylings2[property])\r\n        }\r\n    return destination;\r\n}\r\n\r\nexport function extendCss(stylings1, stylings2){\r\n    for (let property in stylings2) {\r\n        let param2 = stylings2[property];\r\n        let param1 = stylings1[property];\r\n        if (param1 === undefined)\r\n            stylings1[property] = Styling(param2)\r\n        else{\r\n            stylings1[property] = createStyling(false, param1, param2); \r\n        }\r\n    }\r\n}","export function PluginManager(plugins, pluginData){\r\n    let instances = [];\r\n    if (plugins){\r\n        for(let i = 0; i<plugins.length; i++){\r\n            let instance = plugins[i](pluginData)\r\n            if (instance)\r\n                instances.push(instance);\r\n        }\r\n    }\r\n    \r\n    let disposes = [];\r\n    return {\r\n        afterConstructor(multiSelect){\r\n            for(let i = 0; i<instances.length; i++){\r\n                let dispose = instances[i].afterConstructor?.(multiSelect)\r\n                if (dispose)\r\n                    disposes.push(dispose);\r\n            }\r\n            instances=null;\r\n        },\r\n        dispose(){\r\n            for(let i = 0; i<disposes.length; i++){\r\n                disposes[i]()\r\n            }\r\n            disposes=null;\r\n        }\r\n    }\r\n}\r\n\r\nexport function initiateDefaults(constructors, defaults){\r\n    for(let i = 0; i<constructors.length; i++){\r\n        constructors[i].setDefaults?.(defaults)\r\n    }\r\n}\r\n\r\nexport function mergeDefaults(constructors, configuration, defaults, settings){\r\n    for(let i = 0; i<constructors.length; i++){\r\n        constructors[i].mergeDefaults?.(configuration, defaults, settings)\r\n    }\r\n}\r\n\r\nexport function buildedConfiguration(constructors, configuration){\r\n    for(let i = 0; i<constructors.length; i++){\r\n        constructors[i].buildedConfiguration?.(configuration)\r\n    }\r\n}\r\n","export const css = {\r\n    choices: 'dropdown-menu', // bs4, in bsmultiselect.scss as ul.dropdown-menu\r\n    choice_hover:  'hover',  //  not bs4, in scss as 'ul.dropdown-menu li.hover'\r\n    choice_selected: '', \r\n    choice_disabled: '', \r\n\r\n    picks: 'form-control',  // bs4, in scss 'ul.form-control'\r\n    picks_focus: 'focus', // not bs4, in scss 'ul.form-control.focus'\r\n    picks_disabled: 'disabled', //  not bs4, in scss 'ul.form-control.disabled'\r\n    pick_disabled: '',  \r\n    \r\n    pickFilter: '', \r\n    filterInput: '',\r\n\r\n    // used in pickContentGenerator\r\n    pick: 'badge', // bs4\r\n    pickContent: '',\r\n    pickContent_disabled: 'disabled', // not bs4, in scss 'ul.form-control li span.disabled'\r\n    pickButton: 'close', // bs4\r\n\r\n    // used in choiceContentGenerator\r\n    // choice:  'dropdown-item', // it seems like hover should be managed manually since there should be keyboard support\r\n    choiceCheckBox_disabled: 'disabled', //  not bs4, in scss as 'ul.form-control li .custom-control-input.disabled ~ .custom-control-label'\r\n    choiceContent: 'custom-control custom-checkbox d-flex', // bs4 d-flex required for rtl to align items\r\n    choiceCheckBox: 'custom-control-input', // bs4\r\n    choiceLabel: 'custom-control-label justify-content-start',\r\n    choiceLabel_disabled: ''  \r\n}\r\n\r\nexport const cssPatch = {\r\n    choices: {listStyleType:'none'},\r\n    picks: {listStyleType:'none', display:'flex', flexWrap:'wrap',  height: 'auto', marginBottom: '0'},\r\n    choice: 'px-md-2 px-1',  \r\n    choice_hover: 'text-primary bg-light', \r\n    filterInput: {border:'0px', height: 'auto', boxShadow:'none', \r\n        padding:'0', margin:'0', \r\n        outline:'none', backgroundColor:'transparent',\r\n        backgroundImage: 'none' // otherwise BS .was-validated set its image\r\n    },\r\n    filterInput_empty: 'form-control', // need for placeholder, TODO test form-control-plaintext\r\n\r\n    // used in staticContentGenerator\r\n    picks_disabled: {backgroundColor: '#e9ecef'},\r\n\r\n    picks_focus: {borderColor: '#80bdff', boxShadow: '0 0 0 0.2rem rgba(0, 123, 255, 0.25)'},\r\n    picks_focus_valid: {borderColor: '', boxShadow: '0 0 0 0.2rem rgba(40, 167, 69, 0.25)'},\r\n    picks_focus_invalid: {borderColor: '', boxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)'},\r\n    \r\n    // used in BsAppearance\r\n    picks_def: {minHeight: 'calc(2.25rem + 2px)'},\r\n    picks_lg:  {minHeight: 'calc(2.875rem + 2px)'},\r\n    picks_sm:  {minHeight: 'calc(1.8125rem + 2px)'},\r\n    \r\n    // used in pickContentGenerator\r\n    pick: {paddingLeft: '0px', lineHeight: '1.5em'},\r\n    pickButton: {fontSize:'1.5em', lineHeight: '.9em', float : \"none\"},\r\n    pickContent_disabled: {opacity: '.65'}, \r\n    \r\n    // used in choiceContentGenerator\r\n    choiceContent: {justifyContent: 'flex-start'}, // BS problem: without this on inline form menu items justified center\r\n    choiceLabel: {color: 'inherit'}, // otherwise BS .was-validated set its color\r\n    choiceCheckBox: {color: 'inherit'},\r\n    choiceLabel_disabled: {opacity: '.65'}  // more flexible than {color: '#6c757d'}; note: avoid opacity on pickElement's border; TODO write to BS4 \r\n};","\r\nimport {defCall} from '../ToolsJs';\r\n\r\nexport function LabelPlugin(pluginData){\r\n    let {configuration, staticContent} = pluginData;\r\n    let {label} = configuration;\r\n    staticContent.getLabelElement = () => defCall(label); // overrided by BS Appearance Plugin\r\n\r\n    let createInputId = null;\r\n    let {selectElement, containerClass, containerElement} = staticContent;\r\n    if(selectElement)\r\n        createInputId = () => `${containerClass}-generated-input-${((selectElement.id)?selectElement.id:selectElement.name).toLowerCase()}-id`;\r\n    else\r\n        createInputId = () => `${containerClass}-generated-filter-${containerElement.id}`;\r\n\r\n    return {\r\n        afterConstructor(){\r\n            let labelElement = staticContent.getLabelElement();\r\n            let backupedForAttribute = null; // state saved between init and dispose\r\n            if (labelElement) {\r\n                backupedForAttribute = labelElement.getAttribute('for');\r\n                var newId = createInputId();\r\n                staticContent.filterInputElement.setAttribute('id', newId);\r\n                labelElement.setAttribute('for',newId);\r\n            }\r\n            if (backupedForAttribute)\r\n                return ()=> labelElement.setAttribute('for',backupedForAttribute);\r\n        }\r\n    }\r\n}","import {getIsRtl, AttributeBackup} from '../ToolsDom';\r\nimport {isBoolean} from '../ToolsJs';\r\n\r\nexport function RtlPlugin(pluginData){\r\n    let {configuration, staticContent} = pluginData;\r\n    let {isRtl} = configuration;\r\n    let forceRtlOnContainer = false; \r\n    if (isBoolean(isRtl))\r\n        forceRtlOnContainer = true;\r\n    else\r\n        isRtl = getIsRtl(staticContent.initialElement);\r\n    \r\n    var attributeBackup = AttributeBackup();\r\n    if (forceRtlOnContainer){\r\n        attributeBackup.set(staticContent.containerElement, \"dir\", \"rtl\");\r\n    }\r\n    else if (staticContent.selectElement){\r\n        var dirAttributeValue = staticContent.selectElement.getAttribute(\"dir\");\r\n        if (dirAttributeValue){\r\n            attributeBackup.set(staticContent.containerElement, \"dir\", dirAttributeValue);\r\n        }\r\n    } \r\n    return {\r\n        afterConstructor(multiSelect){\r\n            var origCreatePopperConfiguration = multiSelect.createPopperConfiguration.bind(multiSelect);\r\n            multiSelect.createPopperConfiguration = () => {\r\n                var configuration = origCreatePopperConfiguration();\r\n                if (isRtl)\r\n                    configuration.placement = 'bottom-end';\r\n                return configuration;\r\n            }\r\n            return attributeBackup.restore;\r\n        }\r\n    }\r\n}","\r\nimport {EventBinder, closestByTagName} from '../ToolsDom';\r\n\r\nexport function FormResetPlugin(pluginData){\r\n    var {staticContent, window} = pluginData;\r\n    return {\r\n        afterConstructor(multiSelect){\r\n            var eventBuilder = EventBinder();\r\n            if (staticContent.selectElement){\r\n                var form = closestByTagName(staticContent.selectElement, 'FORM');\r\n                if (form) {\r\n                    eventBuilder.bind(form, \r\n                        'reset', \r\n                        () => window.setTimeout( ()=>multiSelect.UpdateData() ) );\r\n                }\r\n            }\r\n            return eventBuilder.unbind;\r\n        }\r\n    }\r\n}","function createValidity(valueMissing, customError){\r\n    return Object.freeze({\r\n        valueMissing,\r\n        customError,\r\n        valid: !(valueMissing || customError),\r\n    });\r\n}\r\n\r\nexport function ValidityApi(visibleElement, isValueMissingObservable, valueMissingMessage, onValid){\r\n    var customValidationMessage = \"\";\r\n    var validationMessage = \"\";\r\n    var validity = null;\r\n    var willValidate = true;\r\n    \r\n    function setMessage(valueMissing, customError){\r\n        validity = createValidity(valueMissing, customError);\r\n        validationMessage = customError?customValidationMessage:(valueMissing?valueMissingMessage:\"\")\r\n        visibleElement.setCustomValidity(validationMessage);\r\n        onValid(validity.valid);\r\n    }\r\n\r\n    setMessage(isValueMissingObservable.getValue(), false);\r\n\r\n    isValueMissingObservable.attach(\r\n        (value) => {\r\n            setMessage(value, validity.customError);\r\n        }\r\n    );\r\n    \r\n    return {\r\n        validationMessage,\r\n        willValidate,\r\n        validity,\r\n        setCustomValidity(message){\r\n            customValidationMessage = message;\r\n            setMessage(validity.valueMissing, customValidationMessage?true:false);\r\n        },\r\n        checkValidity(){\r\n            if (!validity.valid)\r\n                trigger('dashboardcode.multiselect:invalid')\r\n            return validity.valid;\r\n        },\r\n        reportValidity(){\r\n            staticContent.filterInputElement.reportValidity();\r\n            return checkValidity();\r\n        }\r\n    }\r\n}","import {ValidityApi} from '../ValidityApi'\r\nimport {ObservableValue, ObservableLambda, def, defCall, composeSync } from '../ToolsJs';\r\nimport {getDataGuardedWithPrefix} from '../ToolsDom';\r\n\r\nconst defValueMissingMessage = 'Please select an item in the list'\r\n\r\nexport function ValidationApiPlugin(pluginData){\r\n    var {configuration, staticContent, staticContent} = pluginData;\r\n    let {getIsValueMissing, valueMissingMessage, required} = configuration;\r\n    required = def(required, staticContent.required);\r\n    valueMissingMessage = defCall(valueMissingMessage,\r\n        ()=> getDataGuardedWithPrefix(staticContent.initialElement,\"bsmultiselect\",\"value-missing-message\"),\r\n        defValueMissingMessage)\r\n\r\n    return {\r\n        afterConstructor(multiSelect){\r\n            if (!getIsValueMissing) {\r\n                getIsValueMissing = () => {\r\n                    let count = 0;\r\n                    let optionsArray = multiSelect.getOptions();\r\n                    for (var i=0; i < optionsArray.length; i++) {\r\n                        if (optionsArray[i].selected) \r\n                            count++;\r\n                    }\r\n                    return count===0;\r\n                }\r\n            }\r\n        \r\n            var isValueMissingObservable = ObservableLambda(()=>required && getIsValueMissing());\r\n            var validationApiObservable = ObservableValue(!isValueMissingObservable.getValue());\r\n\r\n            staticContent.validationApiObservable = validationApiObservable;\r\n\r\n            let origOnChange = multiSelect.onChange;\r\n            multiSelect.onChange = () => { \r\n                isValueMissingObservable.call();\r\n                origOnChange(); \r\n            };\r\n        \r\n            var validationApi = ValidityApi(\r\n                staticContent.filterInputElement, \r\n                isValueMissingObservable, \r\n                valueMissingMessage,\r\n                (isValid)=>validationApiObservable.setValue(isValid));\r\n            multiSelect.validationApi = validationApi;\r\n\r\n            return ()=> composeSync(isValueMissingObservable.detachAll, validationApiObservable.detachAll)\r\n        }\r\n    }\r\n}\r\n\r\nValidationApiPlugin.setDefaults = (defaults)=>{\r\n    defaults.valueMissingMessage = '';\r\n}","import {closestByClassName, siblingsAsArray} from '../ToolsDom';\r\nimport {addStyling} from '../ToolsStyling'\r\nimport {ObservableLambda, composeSync} from '../ToolsJs';\r\n\r\nexport function BsAppearancePlugin(pluginData){\r\n    let {configuration, common, staticContent} = pluginData;\r\n    let {getValidity, getSize, useCssPatch, css} = configuration;\r\n    let selectElement = staticContent.selectElement;\r\n    \r\n    if (staticContent.getLabelElement){\r\n        let origGetLabelElement = staticContent.getLabelElement;\r\n        staticContent.getLabelElement = () => {\r\n            var e = origGetLabelElement();\r\n            if (e)\r\n                return e;\r\n            else\r\n                return getLabelElement(selectElement);\r\n        }\r\n    }\r\n    \r\n    if (staticContent.selectElement) {\r\n        if(!getValidity)\r\n            getValidity = composeGetValidity(selectElement);\r\n        if(!getSize) \r\n            getSize = composeGetSize(selectElement);\r\n    } else {\r\n        if (!getValidity)\r\n            getValidity = () => null\r\n        if (!getSize)\r\n            getSize = () => null;\r\n    }\r\n\r\n    common.getSize=getSize;\r\n    common.getValidity=getValidity;\r\n    return {\r\n        afterConstructor(multiSelect){\r\n            \r\n            var updateSize;\r\n            if (!useCssPatch){\r\n                updateSize= () => updateSizeForAdapter(staticContent.picksElement, getSize)\r\n            }\r\n            else{\r\n                const {picks_lg, picks_sm, picks_def} = css;\r\n                updateSize = () => updateSizeJsForAdapter(staticContent.picksElement, picks_lg, picks_sm, picks_def, getSize);\r\n            }\r\n            multiSelect.UpdateSize = updateSize;\r\n            \r\n            if (useCssPatch){\r\n                var defToggleFocusStyling = staticContent.toggleFocusStyling;\r\n                staticContent.toggleFocusStyling = () => {\r\n                    var validity =  validationObservable.getValue();\r\n                    var isFocusIn = staticContent.getIsFocusIn();\r\n                    defToggleFocusStyling(isFocusIn)\r\n                    if (isFocusIn){\r\n                        if (validity===false) { \r\n                            // but not toggle events (I know it will be done in future)\r\n                            staticContent.setIsFocusIn(isFocusIn);\r\n                            \r\n                            addStyling(staticContent.picksElement, css.picks_focus_invalid)\r\n                        } else if (validity===true) {\r\n                            // but not toggle events (I know it will be done in future)\r\n                            staticContent.setIsFocusIn(isFocusIn);\r\n                            \r\n                            addStyling(staticContent.picksElement, css.picks_focus_valid)  \r\n                        }              \r\n                    }\r\n                }\r\n            }\r\n        \r\n            var getWasValidated = () => {\r\n                var wasValidatedElement = closestByClassName(staticContent.initialElement, 'was-validated');\r\n                return wasValidatedElement?true:false;\r\n            }\r\n            var wasUpdatedObservable = ObservableLambda(()=>getWasValidated());\r\n            var getManualValidationObservable = ObservableLambda(()=>getValidity());\r\n            let validationApiObservable = staticContent.validationApiObservable;\r\n            \r\n            var validationObservable = ObservableLambda(\r\n                () => wasUpdatedObservable.getValue()?validationApiObservable.getValue():getManualValidationObservable.getValue()\r\n            )\r\n          \r\n            validationObservable.attach(\r\n                (value)=>{\r\n                    var  {validMessages, invalidMessages} = getMessagesElements(staticContent.containerElement);\r\n                    updateValidity( \r\n                    staticContent.picksElement,\r\n                    validMessages, invalidMessages,\r\n                    value);\r\n                    staticContent.toggleFocusStyling();\r\n                }\r\n            )\r\n            wasUpdatedObservable.attach(\r\n                ()=>validationObservable.call()\r\n            )\r\n            validationApiObservable.attach(\r\n                ()=>validationObservable.call()\r\n            )\r\n            getManualValidationObservable.attach(\r\n                ()=>validationObservable.call()\r\n            )\r\n               \r\n            multiSelect.UpdateValidity = ()=> getManualValidationObservable.call();\r\n            multiSelect.UpdateWasValidated = ()=>wasUpdatedObservable.call();\r\n            \r\n            multiSelect.UpdateAppearance = composeSync(\r\n                multiSelect.UpdateAppearance.bind(multiSelect), \r\n                updateSize, \r\n                validationObservable.call, getManualValidationObservable.call);\r\n            \r\n            return /* dispose */() => {\r\n                wasUpdatedObservable.detachAll();\r\n                validationObservable.detachAll();\r\n                getManualValidationObservable.detachAll();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction getLabelElement(selectElement){\r\n    let value = null;\r\n    let formGroup = closestByClassName(selectElement,'form-group');\r\n    if (formGroup) {\r\n        value = formGroup.querySelector(`label[for=\"${selectElement.id}\"]`);\r\n    }\r\n    return value;\r\n}\r\n\r\nfunction updateValidity(picksElement, validMessages, invalidMessages, validity){\r\n    if (validity===false){\r\n        picksElement.classList.add('is-invalid');\r\n        picksElement.classList.remove('is-valid');\r\n        invalidMessages.map(e=>e.style.display='block'); \r\n        validMessages.map(e=>e.style.display='none');      \r\n    }\r\n    else if (validity===true){\r\n        picksElement.classList.remove('is-invalid');\r\n        picksElement.classList.add('is-valid');\r\n        invalidMessages.map(e=>e.style.display='none'); \r\n        validMessages.map(e=>e.style.display='block'); \r\n    }else {\r\n        picksElement.classList.remove('is-invalid');\r\n        picksElement.classList.remove('is-valid');\r\n        invalidMessages.map(e=>e.style.display=''); \r\n        validMessages.map(e=>e.style.display=''); \r\n    }\r\n}\r\n\r\nfunction updateSize(picksElement, size){\r\n    if (size==\"lg\"){\r\n        picksElement.classList.add('form-control-lg');\r\n        picksElement.classList.remove('form-control-sm');\r\n    }\r\n    else if (size==\"sm\"){\r\n        picksElement.classList.remove('form-control-lg');\r\n        picksElement.classList.add('form-control-sm');\r\n    }\r\n    else{\r\n        picksElement.classList.remove('form-control-lg');\r\n        picksElement.classList.remove('form-control-sm');\r\n    }\r\n}\r\n\r\nfunction updateSizeJs(picksElement, picksLgStyling, picksSmStyling, picksDefStyling, size){\r\n    updateSize(picksElement, size);\r\n    if (size==\"lg\"){\r\n        addStyling(picksElement, picksLgStyling);\r\n    } else if (size==\"sm\"){\r\n        addStyling(picksElement, picksSmStyling);\r\n    } else {\r\n        addStyling(picksElement, picksDefStyling);\r\n    }\r\n}\r\n\r\nfunction updateSizeForAdapter(picksElement, getSize){\r\n    updateSize(picksElement, getSize())\r\n}\r\n\r\nfunction updateSizeJsForAdapter(picksElement, picksLgStyling, picksSmStyling, picksDefStyling, getSize){\r\n    updateSizeJs(picksElement, picksLgStyling, picksSmStyling, picksDefStyling, getSize())\r\n}\r\n\r\nfunction getMessagesElements(containerElement){\r\n    var siblings = siblingsAsArray(containerElement);\r\n    var invalidMessages =  siblings.filter(e=>e.classList.contains('invalid-feedback') || \r\n        e.classList.contains('invalid-tooltip'));\r\n    var validMessages =  siblings.filter(e=>e.classList.contains('valid-feedback') || \r\n        e.classList.contains('valid-tooltip'));\r\n    return {validMessages, invalidMessages}    \r\n} \r\n\r\nfunction composeGetValidity(selectElement){\r\n    var getValidity = () => \r\n        selectElement.classList.contains('is-invalid')?false:\r\n        (selectElement.classList.contains('is-valid')?true:null);\r\n    return getValidity;\r\n}\r\n\r\nfunction composeGetSize(selectElement){\r\n    let inputGroupElement = closestByClassName(selectElement, 'input-group');\r\n    let getSize = null;\r\n    if (inputGroupElement){\r\n        getSize = function(){\r\n            var value = null;\r\n            if (inputGroupElement.classList.contains('input-group-lg'))\r\n                value = 'lg';\r\n            else if (inputGroupElement.classList.contains('input-group-sm'))\r\n                value = 'sm';\r\n            return value;\r\n        }\r\n    }\r\n    else{ \r\n        getSize = function(){\r\n            var value = null;\r\n            if (selectElement.classList.contains('custom-select-lg') || selectElement.classList.contains('form-control-lg'))\r\n                value = 'lg';\r\n            else if (selectElement.classList.contains('custom-select-sm') || selectElement.classList.contains('form-control-sm'))\r\n                value = 'sm'; \r\n            return value;\r\n        }\r\n    }\r\n    return getSize;\r\n}\r\n\r\n","function updateHiddenChoice(choice, updateHidden , getIsOptionHidden){\r\n    let newIsOptionHidden = getIsOptionHidden(choice.option);\r\n    if (newIsOptionHidden != choice.isOptionHidden)\r\n    {\r\n        choice.isOptionHidden= newIsOptionHidden;\r\n        updateHidden(choice)\r\n    }\r\n}\r\n\r\nfunction getNextNonHidden(choice) { // TODO get next visible\r\n    let next = choice.itemNext;\r\n    if (!next) {\r\n        return null;\r\n    } else if (next.choiceElement) {\r\n        return next;\r\n    }\r\n    return getNextNonHidden(next)\r\n}\r\n\r\nexport function HiddenOptionPlugin(pluginData){\r\n    let {configuration, options} = pluginData;\r\n    let {getIsOptionHidden} = configuration;\r\n    if (options){\r\n        if (!getIsOptionHidden)\r\n            getIsOptionHidden = (option)=>(option.hidden===undefined)?false:option.hidden;     \r\n    } else{\r\n        if (!getIsOptionHidden)\r\n            getIsOptionHidden = (option)=>option.hidden;     \r\n    }\r\n\r\n    return {\r\n        afterConstructor(multiSelect){\r\n            multiSelect.getNext = (c)=>getNextNonHidden(c);\r\n    \r\n            var origIsSelectable = multiSelect.isSelectable.bind(multiSelect);\r\n            multiSelect.isSelectable = (choice) => origIsSelectable(choice) && !choice.isOptionHidden;\r\n            \r\n            function buildHiddenChoice(choice){\r\n                choice.updateSelected = () => void 0;\r\n                choice.updateDisabled = () => void 0;\r\n                \r\n                choice.choiceElement = null;\r\n                choice.choiceElementAttach = null;\r\n                choice.setVisible = null; \r\n                choice.setHoverIn = null;\r\n                choice.remove = null; \r\n                \r\n                choice.dispose = () => { \r\n                    choice.dispose = null;\r\n                };\r\n            }\r\n        \r\n            function updateHidden(choice) {\r\n                if (choice.isOptionHidden) {\r\n                    multiSelect.filterListFacade.remove(choice);\r\n                    choice.remove(); \r\n                    buildHiddenChoice(choice);\r\n                } else {\r\n                    let nextChoice = getNextNonHidden(choice);\r\n                    multiSelect.filterListFacade.add(choice, nextChoice);\r\n                    multiSelect.createChoiceElement(choice);\r\n                    choice.choiceElementAttach(nextChoice?.choiceElement); // itemPrev?.choiceElement\r\n                }\r\n            }\r\n            \r\n            multiSelect.updateHidden = (c) => updateHidden(c);\r\n        \r\n            function UpdateOptionHidden(key){\r\n                let choice = multiSelect.choicesPanel.get(key); // TODO: generalize index as key \r\n                updateHiddenChoice(choice, (c)=>multiSelect.updateHidden(c), getIsOptionHidden) // TODO: invite this.getIsOptionSelected\r\n            }\r\n            \r\n            function UpdateOptionsHidden(){\r\n                let options = multiSelect.getOptions();\r\n                for(let i = 0; i<options.length; i++){\r\n                    UpdateOptionHidden(i)\r\n                }\r\n            }\r\n        \r\n            multiSelect.UpdateOptionsHidden = () => UpdateOptionsHidden();\r\n            multiSelect.UpdateOptionHidden = (key) => UpdateOptionHidden(key);\r\n        \r\n            var origСreateChoice = multiSelect.createChoice.bind(multiSelect);\r\n        \r\n            multiSelect.createChoice = (option) => {\r\n                let choice = origСreateChoice(option);\r\n                choice.isOptionHidden = getIsOptionHidden(option);\r\n                return choice;\r\n            };\r\n        \r\n            var origInsertChoiceItem = multiSelect.insertChoiceItem.bind(multiSelect);\r\n            var origPushChoiceItem = multiSelect.pushChoiceItem.bind(multiSelect);\r\n        \r\n            multiSelect.insertChoiceItem=(choice)=>{\r\n                if (choice.isOptionHidden){ \r\n                    buildHiddenChoice(choice);\r\n                }\r\n                else{ \r\n                    origInsertChoiceItem(choice);\r\n                }\r\n            }\r\n        \r\n            multiSelect.pushChoiceItem=(choice)=>{\r\n                if (choice.isOptionHidden){ \r\n                    buildHiddenChoice(choice);\r\n                }\r\n                else{ \r\n                    origPushChoiceItem(choice);\r\n                }\r\n            }\r\n        \r\n            multiSelect.forEach = (f) => {\r\n                let choice = multiSelect.choicesPanel.getHead();\r\n                while(choice){\r\n                    if (!choice.isOptionHidden)\r\n                        f(choice);\r\n                    choice = multiSelect.getNext(choice);\r\n                }\r\n            }\r\n        \r\n            var origAddFilterFacade = multiSelect.addFilterFacade.bind(multiSelect);\r\n            multiSelect.addFilterFacade = (choice) => {\r\n                if ( !choice.isOptionHidden ) {\r\n                    origAddFilterFacade(choice);\r\n                }\r\n            }\r\n        \r\n            var origInsertFilterFacade = multiSelect.insertFilterFacade.bind(multiSelect);\r\n            multiSelect.addFilterFacade = (choice) => {\r\n                if ( !choice.isOptionHidden ){\r\n                    origInsertFilterFacade(choice);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","import {createCss, extendCss} from '../ToolsStyling';\r\nimport {isBoolean} from '../ToolsJs';\r\nimport {cssPatch} from '../BsCss'\r\n\r\nexport function CssPatchPlugin(){\r\n}\r\n\r\nCssPatchPlugin.setDefaults = (defaults)=>{\r\n    defaults.useCssPatch = true;\r\n    defaults.cssPatch = cssPatch;\r\n}\r\n\r\nCssPatchPlugin.mergeDefaults = (configuration, defaults, settings)=>{\r\n    if (isBoolean(settings.cssPatch))\r\n        throw new Error(\"BsMultiSelect: 'cssPatch' was used instead of 'useCssPatch'\") // often type of error\r\n    var defCssPatch = createCss(defaults.cssPatch, settings.cssPatch); // replace classes, merge styles\r\n    configuration.cssPatch = defCssPatch;\r\n}\r\n\r\nCssPatchPlugin.buildedConfiguration = (configuration) =>{\r\n    if (configuration.useCssPatch)\r\n        extendCss(configuration.css, configuration.cssPatch); \r\n}","import {BsMultiSelect as BsMultiSelectBase}  from './BsMultiSelect'\r\nimport {initiateDefaults} from './PluginManager';\r\nimport {css} from './BsCss'\r\nimport {LabelPlugin} from './plugins/LabelPlugin';\r\nimport {RtlPlugin} from './plugins/RtlPlugin';\r\nimport {FormResetPlugin} from './plugins/FormResetPlugin';\r\nimport {ValidationApiPlugin} from './plugins/ValidationApiPlugin';\r\nimport {BsAppearancePlugin} from './plugins/BsAppearancePlugin';\r\nimport {HiddenOptionPlugin} from './plugins/HiddenOptionPlugin';\r\nimport {CssPatchPlugin} from './plugins/CssPatchPlugin';\r\n\r\nimport {createCss} from './ToolsStyling';\r\nimport {extendIfUndefined} from './ToolsJs';\r\n\r\nconst defaults = {containerClass : \"dashboardcode-bsmultiselect\", css: css}\r\nconst defaultPlugins = [CssPatchPlugin, LabelPlugin, HiddenOptionPlugin, ValidationApiPlugin, BsAppearancePlugin, FormResetPlugin, RtlPlugin];\r\n\r\nexport function BsMultiSelect(element, environment, settings){\r\n    if (!environment.trigger)\r\n        environment.trigger = (e, name) => e.dispatchEvent(new environment.window.Event(name))\r\n\r\n    if (!environment.plugins)\r\n        environment.plugins = defaultPlugins;\r\n    \r\n    let configuration = {};\r\n   \r\n    if (settings)\r\n        adjustLegacySettings(settings);\r\n    \r\n    configuration.css = createCss(defaults.css, settings?.css);\r\n    mergeDefaults(defaultPlugins, configuration, defaults, settings);\r\n\r\n    extendIfUndefined(configuration, settings); \r\n    extendIfUndefined(configuration, defaults); \r\n\r\n    buildedConfiguration(defaultPlugins, configuration);\r\n\r\n    return BsMultiSelect(element, environment, configuration, settings?.onInit);\r\n}\r\n\r\ninitiateDefaults(defaultPlugins, defaults);\r\nBsMultiSelect.defaults=defaults;"],"names":["closestByTagName","element","tagName","closest","e","closestByClassName","className","classList","contains","closestByAttribute","attributeName","attribute","getAttribute","getDataGuardedWithPrefix","prefix","name","tmp1","tmp2","predicate","Element","parentNode","siblingsAsArray","value","children","l","length","i","push","getIsRtl","isRtl","EventBinder","list","bind","eventName","handler","addEventListener","unbind","forEach","removeEventListener","AttributeBackup","set","currentAtribute","setAttribute","restore","removeAttribute","isBoolean","isString","String","extendIfUndefined","destination","source","property","undefined","shallowClearClone","v","sources","s","hasOwnProperty","forEachRecursion","f","prev","List","tail","count","add","next","node","remove","getTail","getCount","isEmpty","reset","composeSync","functions","sync","def","defCall","Function","tmp","ObservableValue","getValue","setValue","newValue","attach","detachAll","ObservableLambda","func","call","addStyling","styling","backupStyling","classes","styles","slice","style","extendClasses","out","param","actionStr","actionArr","isRemoveEmptyClasses","c","split","Array","extend","actionObj","success","Object","Styling","a","o","freeze","createStyling","isReplace","params","extendInt","p","concat","createCss","stylings1","stylings2","param1","param2","extendCss","initiateDefaults","constructors","defaults","setDefaults","css","choices","choice_hover","choice_selected","choice_disabled","picks","picks_focus","picks_disabled","pick_disabled","pickFilter","filterInput","pick","pickContent","pickContent_disabled","pickButton","choiceCheckBox_disabled","choiceContent","choiceCheckBox","choiceLabel","choiceLabel_disabled","cssPatch","listStyleType","display","flexWrap","height","marginBottom","choice","border","boxShadow","padding","margin","outline","backgroundColor","backgroundImage","filterInput_empty","borderColor","picks_focus_valid","picks_focus_invalid","picks_def","minHeight","picks_lg","picks_sm","paddingLeft","lineHeight","fontSize","float","opacity","justifyContent","color","LabelPlugin","pluginData","configuration","staticContent","label","getLabelElement","createInputId","selectElement","containerClass","containerElement","id","toLowerCase","afterConstructor","labelElement","backupedForAttribute","newId","filterInputElement","RtlPlugin","forceRtlOnContainer","initialElement","attributeBackup","dirAttributeValue","multiSelect","origCreatePopperConfiguration","createPopperConfiguration","placement","FormResetPlugin","window","eventBuilder","form","setTimeout","UpdateData","createValidity","valueMissing","customError","valid","ValidityApi","visibleElement","isValueMissingObservable","valueMissingMessage","onValid","customValidationMessage","validationMessage","validity","willValidate","setMessage","setCustomValidity","message","checkValidity","trigger","reportValidity","defValueMissingMessage","ValidationApiPlugin","getIsValueMissing","required","optionsArray","getOptions","selected","validationApiObservable","origOnChange","onChange","validationApi","isValid","BsAppearancePlugin","common","getValidity","getSize","useCssPatch","origGetLabelElement","composeGetValidity","composeGetSize","updateSize","updateSizeForAdapter","picksElement","updateSizeJsForAdapter","UpdateSize","defToggleFocusStyling","toggleFocusStyling","validationObservable","isFocusIn","getIsFocusIn","setIsFocusIn","getWasValidated","wasValidatedElement","wasUpdatedObservable","getManualValidationObservable","getMessagesElements","validMessages","invalidMessages","updateValidity","UpdateValidity","UpdateWasValidated","UpdateAppearance","formGroup","querySelector","map","size","updateSizeJs","picksLgStyling","picksSmStyling","picksDefStyling","siblings","filter","inputGroupElement","updateHiddenChoice","updateHidden","getIsOptionHidden","newIsOptionHidden","option","isOptionHidden","getNextNonHidden","itemNext","choiceElement","HiddenOptionPlugin","options","hidden","getNext","origIsSelectable","isSelectable","buildHiddenChoice","updateSelected","updateDisabled","choiceElementAttach","setVisible","setHoverIn","dispose","filterListFacade","nextChoice","createChoiceElement","UpdateOptionHidden","key","choicesPanel","get","UpdateOptionsHidden","origСreateChoice","createChoice","origInsertChoiceItem","insertChoiceItem","origPushChoiceItem","pushChoiceItem","getHead","origAddFilterFacade","addFilterFacade","origInsertFilterFacade","insertFilterFacade","CssPatchPlugin","mergeDefaults","settings","Error","defCssPatch","buildedConfiguration","defaultPlugins","BsMultiSelect","environment","dispatchEvent","Event","plugins","adjustLegacySettings","onInit"],"mappings":"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"}