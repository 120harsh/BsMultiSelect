{"version":3,"sources":["../../js/src/ToolsDom.js","../../js/src/ToolsJs.js","../../js/src/ToolsStyling.js","../../js/src/PluginManager.js","../../js/src/BsCss.js","../../js/src/plugins/LabelPlugin.js","../../js/src/plugins/RtlPlugin.js","../../js/src/plugins/FormResetPlugin.js","../../js/src/ValidityApi.js","../../js/src/plugins/ValidationApiPlugin.js","../../js/src/plugins/BsAppearancePlugin.js","../../js/src/plugins/HiddenOptionPlugin.js","../../js/src/plugins/CssPatchPlugin.js","../../js/src/BsMultiSelect.esm.js"],"names":["closestByTagName","element","tagName","closest","e","closestByClassName","className","classList","contains","closestByAttribute","attributeName","attribute","getAttribute","getDataGuardedWithPrefix","prefix","name","tmp1","tmp2","predicate","Element","parentNode","siblingsAsArray","value","children","l","length","i","push","getIsRtl","isRtl","EventBinder","list","bind","eventName","handler","addEventListener","unbind","forEach","removeEventListener","AttributeBackup","set","currentAtribute","setAttribute","restore","removeAttribute","isBoolean","isString","String","extendIfUndefined","destination","source","property","undefined","shallowClearClone","v","_len","arguments","sources","Array","_key","s","hasOwnProperty","forEachRecursion","f","prev","List","tail","count","add","next","node","getTail","getCount","isEmpty","reset","composeSync","_len2","functions","_key2","sync","apply","_len3","_key3","def","_len4","_key4","_i","_functions","defCall","_len5","_key5","_i2","_functions2","Function","tmp","ObservableValue","getValue","setValue","newValue","attach","detachAll","ObservableLambda","func","call","addStyling","styling","backupStyling","classes","styles","slice","style","extendClasses","out","param","actionStr","actionArr","isRemoveEmptyClasses","c","split","extend","actionObj","Object","Styling","a","o","freeze","createStyling","isReplace","params","extendInt","p","concat","createCss","stylings1","stylings2","param1","param2","extendCss","initiateDefaults","constructors","defaults","_constructors$i$setDe","_constructors$i","setDefaults","css","choices","choice_hover","choice_selected","choice_disabled","picks","picks_focus","picks_disabled","pick_disabled","pickFilter","filterInput","pick","pickContent","pickContent_disabled","pickButton","choiceCheckBox_disabled","choiceContent","choiceCheckBox","choiceLabel","choiceLabel_disabled","cssPatch","listStyleType","display","flexWrap","height","marginBottom","choice","border","boxShadow","padding","margin","outline","backgroundColor","backgroundImage","filterInput_empty","borderColor","picks_focus_valid","picks_focus_invalid","picks_def","minHeight","picks_lg","picks_sm","paddingLeft","lineHeight","fontSize","float","opacity","justifyContent","color","LabelPlugin","pluginData","configuration","staticContent","label","getLabelElement","createInputId","selectElement","containerClass","containerElement","id","toLowerCase","afterConstructor","labelElement","backupedForAttribute","newId","filterInputElement","RtlPlugin","forceRtlOnContainer","initialElement","attributeBackup","dirAttributeValue","multiSelect","origCreatePopperConfiguration","createPopperConfiguration","placement","FormResetPlugin","window","eventBuilder","form","setTimeout","UpdateData","createValidity","valueMissing","customError","valid","ValidityApi","visibleElement","isValueMissingObservable","valueMissingMessage","onValid","customValidationMessage","validationMessage","validity","setMessage","setCustomValidity","willValidate","message","checkValidity","trigger","reportValidity","defValueMissingMessage","ValidationApiPlugin","_configuration","getIsValueMissing","required","optionsArray","getOptions","selected","validationApiObservable","origOnChange","onChange","validationApi","isValid","BsAppearancePlugin","common","getValidity","getSize","useCssPatch","origGetLabelElement","composeGetValidity","composeGetSize","updateSize","updateSizeJsForAdapter","picksElement","updateSizeForAdapter","UpdateSize","defToggleFocusStyling","toggleFocusStyling","validationObservable","isFocusIn","getIsFocusIn","setIsFocusIn","wasUpdatedObservable","getManualValidationObservable","_getMessagesElements","getMessagesElements","validMessages","invalidMessages","updateValidity","UpdateValidity","UpdateWasValidated","UpdateAppearance","formGroup","querySelector","remove","map","size","updateSizeJs","picksLgStyling","picksSmStyling","picksDefStyling","siblings","filter","inputGroupElement","updateHiddenChoice","updateHidden","getIsOptionHidden","newIsOptionHidden","option","isOptionHidden","getNextNonHidden","itemNext","choiceElement","HiddenOptionPlugin","options","hidden","getNext","origIsSelectable","isSelectable","buildHiddenChoice","updateSelected","updateDisabled","choiceElementAttach","setVisible","setHoverIn","dispose","UpdateOptionHidden","key","choicesPanel","get","filterListFacade","nextChoice","createChoiceElement","UpdateOptionsHidden","orig–°reateChoice","createChoice","origInsertChoiceItem","insertChoiceItem","origPushChoiceItem","pushChoiceItem","getHead","origAddFilterFacade","addFilterFacade","origInsertFilterFacade","insertFilterFacade","CssPatchPlugin","mergeDefaults","settings","Error","defCssPatch","buildedConfiguration","defaultPlugins","BsMultiSelect","environment","dispatchEvent","Event","plugins","adjustLegacySettings","onInit"],"mappings":"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","sourcesContent":["export function removeElement(e) {e.parentNode.removeChild(e)}\r\n\r\nexport function findDirectChildByTagName(element, tagName){\r\n    let value = null;\r\n    for (let i = 0; i<element.children.length; i++)\r\n    {\r\n        let tmp = element.children[i];\r\n        if (tmp.tagName==tagName)\r\n        {\r\n            value = tmp;\r\n            break;\r\n        }\r\n    }\r\n    return value;\r\n}\r\n\r\nexport function closestByTagName(element, tagName){\r\n    return closest(element, e => e.tagName === tagName) // TODO support xhtml?  e.tagName.toUpperCase() ?\r\n}\r\n\r\nexport function closestByClassName(element, className){\r\n    return closest(element, e => e.classList.contains(className))\r\n}\r\n\r\nexport function closestByAttribute(element, attributeName, attribute){\r\n    return closest(element, e => e.getAttribute(attributeName)===attribute )\r\n}\r\n\r\nexport function containsAndSelf(node, otherNode ){\r\n    return node === otherNode || node.contains(otherNode);  \r\n}\r\n\r\nexport function getDataGuardedWithPrefix(element, prefix, name){\r\n    var tmp1 = element.getAttribute('data-' + prefix + '-' + name);\r\n    if (tmp1) {\r\n        return tmp1;\r\n    } else  {\r\n        var tmp2 = element.getAttribute('data-' + name);\r\n        if (tmp2)\r\n            return tmp2;\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction closest(element, predicate){\r\n    if (!element || !(element instanceof Element)) return null; // should be element, not document (TODO: check iframe)\r\n     \r\n    if (predicate(element)) return element;\r\n    return closest(element.parentNode, predicate);\r\n}\r\n\r\nexport function siblingsAsArray(element){\r\n    var value = []\r\n    if (element.parentNode){\r\n        var children = element.parentNode.children;\r\n        var l = element.parentNode.children.length;\r\n        if (children.length>1){\r\n            for (var i=0; i < l; ++i){\r\n                var e = children[i];\r\n                if (e!=element)\r\n                    value.push(e);\r\n                \r\n            }\r\n        }\r\n    }\r\n    return value;\r\n}\r\n\r\nexport function getIsRtl(element){\r\n    var isRtl = false;\r\n    var e = closestByAttribute(element,\"dir\",\"rtl\");\r\n    if (e)\r\n        isRtl = true;\r\n    return isRtl;\r\n}\r\n\r\nexport function EventBinder(){\r\n    var list = [];\r\n    return {\r\n        bind(element, eventName, handler) {\r\n            element.addEventListener(eventName, handler)\r\n            list.push( {element, eventName, handler} )\r\n        },\r\n        unbind() {\r\n            list.forEach( e=> {\r\n                let {element, eventName, handler}=e;\r\n                element.removeEventListener(eventName, handler)\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport function AttributeBackup(){\r\n    var list = [];\r\n    return {\r\n        set(element, attributeName, attribute){\r\n            var currentAtribute =  element.getAttribute(attributeName); \r\n            list.push( {element, currentAtribute, attribute} )\r\n            element.setAttribute(attributeName, attribute)\r\n        },\r\n        restore(){\r\n            list.forEach(e=>{\r\n                let {element, attributeName, attribute} = e;\r\n                if (attributeName)\r\n                    element.setAttribute(attributeName, attribute)\r\n                else\r\n                    element.removeAttribute(attributeName)\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport function EventLoopFlag(window) {\r\n    var flag = false;\r\n    return {\r\n        get(){\r\n            return flag;\r\n        },\r\n        set(){\r\n            flag = true;\r\n            window.setTimeout( \r\n                () => {  \r\n                    flag = false;\r\n                }, 0)\r\n        }\r\n    }\r\n}","export function isObject(value){\r\n    return typeof value === 'object' && value !== null\r\n}\r\n\r\nexport function isBoolean(value){\r\n    return value === true || value === false;\r\n}\r\n\r\nexport function isString(value){\r\n    return value instanceof String || typeof(value) === 'string';\r\n}\r\n\r\nexport function extendIfUndefined(destination, source) {\r\n    for (let property in source)\r\n        if (destination[property] === undefined)\r\n            destination[property] = source[property];\r\n}\r\n\r\nexport function extendOverriding(destination, source) {\r\n    for (let property in source)\r\n        destination[property] = source[property];\r\n}\r\n\r\nexport function shallowClearClone(source, ...sources) { // override previous, no null and undefined\r\n    var destination = {};\r\n    for (let property in source){ // TODO:  Object.assign (need polyfill for IE11)\r\n        let v = source[property];\r\n        if (!(v === null || v===undefined))\r\n            destination[property] = v;\r\n    }\r\n    if(sources)\r\n        sources.forEach(\r\n            s=>{\r\n                for(let property in s){\r\n                    let v = s[property];\r\n                    if (!(v === null || v===undefined))\r\n                        destination[property] = v;\r\n                    else\r\n                        if (destination.hasOwnProperty(property)){\r\n                            delete destination[property];\r\n                        }\r\n                }\r\n            }\r\n        )\r\n    return destination;\r\n}\r\n\r\nfunction forEachRecursion(f, i){\r\n    if (!i)\r\n        return;\r\n    f(i.value); \r\n    forEachRecursion(f, i.prev);\r\n}\r\n\r\nexport function List(){\r\n    var tail = null;\r\n    var count = 0;\r\n    return {\r\n        add(e){\r\n            if (tail){\r\n                tail.next = {value:e, prev:tail, next:null};\r\n                tail = tail.next;\r\n            } else \r\n                tail = {value:e, prev:null, next:null}\r\n            count++;\r\n            let node = tail;\r\n            function remove(){\r\n                if (node.prev){\r\n                    (node.prev).next = node.next;\r\n                }\r\n                if (node.next){\r\n                    (node.next).prev = node.prev;\r\n                }\r\n                if (tail == node){\r\n                    tail = node.prev;\r\n                }\r\n                count--;\r\n            }\r\n            return remove;\r\n        },\r\n        forEach(f){\r\n            forEachRecursion(f, tail);\r\n        },\r\n        getTail(){ return (tail)?tail.value:null },\r\n        getCount(){ return count },\r\n        isEmpty(){ return count==0 },\r\n        reset(){ tail=null; \r\n            count = 0 }\r\n    }\r\n}\r\n\r\nexport function ListFacade(getPrev, setPrev, getNext, setNext){\r\n    var head = null, tail = null;\r\n    var count = 0;\r\n    var remove = (e) => {\r\n        let next = getNext(e);\r\n        let prev = getPrev(e);\r\n        if (prev) {\r\n            setNext(prev, next)\r\n        }\r\n        if (next) {\r\n             setPrev(next, prev)\r\n        }\r\n        if (tail == e) {\r\n            tail = prev;\r\n        }\r\n        if (head == e) {\r\n            head = next; \r\n        }\r\n        count--;\r\n    }\r\n    return {\r\n        add(e, next){\r\n            if (!tail){\r\n                head = tail = e;\r\n            }\r\n            else {\r\n                if (!next){\r\n                    setPrev(e, tail);\r\n                    setNext(tail, e);\r\n                    tail = e;\r\n                } \r\n                else{\r\n                    if (next===head)\r\n                        head=e;\r\n                    let prev = getPrev(next);\r\n                    setNext(e, next);\r\n                    setPrev(next, e);\r\n                    if (prev){\r\n                        setPrev(e, prev);\r\n                        setNext(prev, e);\r\n                    } else {\r\n                        setPrev(e, null);\r\n                    }\r\n                } \r\n            }\r\n            count++;\r\n        },\r\n        remove, \r\n        forEach(f){\r\n            forEachRecursion(f, tail);\r\n        },\r\n        getHead(){ return head },\r\n        getTail(){ return tail },\r\n        getCount(){ return count },\r\n        isEmpty(){ return count==0 },\r\n        reset(){ \r\n            tail=head=null; \r\n            count = 0; }\r\n    }\r\n}\r\n\r\nexport function CollectionFacade(getPrev, setPrev, getNext, setNext){\r\n    var list = [];\r\n    var head = null, tail = null;\r\n    var count = 0;\r\n    var remove = (key) => {\r\n        var e = list[key];\r\n        list.splice(key, 1);\r\n        let next = getNext(e);\r\n        let prev = getPrev(e);\r\n        if (prev) {\r\n            setNext(prev, next)\r\n        }\r\n        if (next) {\r\n             setPrev(next, prev)\r\n        }\r\n        if (tail == e) {\r\n            tail = prev;\r\n        }\r\n        if (head == e) {\r\n            head = next; \r\n        }\r\n        count--;\r\n        return e;\r\n    }\r\n    return {\r\n        getLength(){\r\n            return list.length;\r\n        },\r\n        push(e){\r\n            list.push(e);\r\n            if (!tail){\r\n                head = tail = e;\r\n            }\r\n            else {\r\n                setPrev(e, tail);\r\n                setNext(tail, e);\r\n                tail = e;\r\n            }\r\n            count++;\r\n        },\r\n        add(e, key){\r\n            if (!tail){\r\n                head = tail = e;\r\n            }\r\n            else {\r\n                let next = list[key];\r\n                if (!next) {\r\n                    setPrev(e, tail);\r\n                    setNext(tail, e);\r\n                    tail = e;\r\n                } \r\n                else {\r\n                    list.splice(key, 0, e);\r\n\r\n                    if (next===head)\r\n                        head=e;\r\n                    let prev = getPrev(next);\r\n                    setNext(e, next);\r\n                    setPrev(next, e);\r\n                    if (prev){\r\n                        setPrev(e, prev);\r\n                        setNext(prev, e);\r\n                    } else {\r\n                        setPrev(e, null);\r\n                    }\r\n                } \r\n            }\r\n            count++;\r\n        },\r\n        get: (key) => list[key],\r\n        remove, \r\n        forLoop(f){\r\n            for(let i=0; i<list.length; i++)\r\n            {\r\n                let e = list[i];\r\n                f(e);\r\n            }\r\n        },\r\n        getHead(){ return head },\r\n        getTail(){ return tail },\r\n        getCount(){ return count },\r\n        isEmpty(){ return count==0 },\r\n        reset(){ \r\n            list=[];\r\n            tail=head=null; \r\n            count = 0; }\r\n    }\r\n}\r\n\r\nexport function pushUnique(array, item){\r\n    if(array.indexOf(item) == -1) {\r\n        array.push(item);\r\n            return true;\r\n    }\r\n    return false;\r\n} \r\n\r\nexport function composeSync(...functions){\r\n    return () => sync(...functions)\r\n}\r\n\r\nexport function sync(...functions){\r\n    functions.forEach(\r\n        (f) => {\r\n            if (f)\r\n                f();\r\n        }\r\n    )\r\n}\r\n\r\nexport function def(...functions){\r\n    for (let f of functions) \r\n        if (f) {\r\n           return f;\r\n        }\r\n}\r\n\r\nexport function defCall(...functions){\r\n    for (let f of functions) \r\n        if (f) {\r\n            if (f instanceof Function){\r\n                let tmp =  f();\r\n                if (tmp)\r\n                    return tmp;\r\n            }\r\n            else\r\n                return f \r\n        }\r\n}\r\n\r\nexport function Observable(){\r\n    var list = [];\r\n    return {\r\n        trigger(){\r\n            f();\r\n        },\r\n        attach(f){\r\n            list.push(f)\r\n        },\r\n        detachAll(){\r\n            list.length = 0;\r\n        }\r\n    }\r\n}\r\n\r\nexport function ObservableValue(value){\r\n    var list = List();\r\n    return {\r\n        getValue(){\r\n            return value;\r\n        },\r\n        setValue(newValue){\r\n            value = newValue;\r\n            list.forEach(f=>f(newValue));\r\n        },\r\n        attach(f){\r\n            return list.add(f)\r\n        },\r\n        detachAll(){\r\n            list.reset();\r\n        }\r\n    }\r\n}\r\n\r\n// export function isFunction(obj){\r\n//     return typeof obj === 'function'\r\n// }\r\n\r\nexport function ObservableLambda(func){\r\n    var list = List();\r\n    var value = func();\r\n    return {\r\n        getValue(){\r\n            return value;\r\n        },\r\n        call(){\r\n            value = func();\r\n            list.forEach(f=>f(value));\r\n        },\r\n        attach(f){\r\n            return list.add(f)\r\n        },\r\n        detachAll(){\r\n            list.reset();\r\n        }\r\n    }\r\n}","import {shallowClearClone, isString} from './ToolsJs';\r\n\r\nexport function addStyling(element, styling){\r\n    var backupStyling = {classes:[], styles:{}}\r\n    if (styling) {\r\n        var {classes, styles} = styling;\r\n        classes.forEach(e => element.classList.add(e)) // todo use add(classes)\r\n        backupStyling.classes = classes.slice();\r\n        for (let property in styles){\r\n            backupStyling.styles[property] = element.style[property];\r\n            element.style[property] = styles[property]; // todo use Object.assign (need polyfill for IE11)\r\n        }\r\n    }\r\n    return backupStyling;\r\n}\r\n\r\nfunction removeStyling(element, styling){\r\n    if (styling) {\r\n        var {classes, styles} = styling;\r\n        classes.forEach(e=>element.classList.remove(e)) // todo use remove(classes)\r\n        for (let property in styles)\r\n            element.style[property]  = styles[property]; // todo use Object.assign (need polyfill for IE11)\r\n    }\r\n}\r\n\r\nexport function toggleStyling(element, styling){\r\n    var backupStyling = {classes:[], styles:{}};\r\n    var isOn=false;\r\n    return (value)=>{\r\n        if (value) {\r\n            if (isOn===false){\r\n                backupStyling = addStyling(element, styling)\r\n                isOn=true;\r\n            }\r\n        } else {\r\n            if (isOn===true){\r\n                removeStyling(element,backupStyling);\r\n                isOn=false;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction extendClasses(out, param, actionStr, actionArr, isRemoveEmptyClasses){\r\n    if (isString(param)){\r\n        if (param === \"\"){\r\n            if (isRemoveEmptyClasses){\r\n                out.classes = [];\r\n            }\r\n        } else {\r\n            let c = param.split(' ');\r\n            out.classes = actionStr(c);\r\n        }\r\n        return true;\r\n    } else if (param instanceof Array){\r\n        if (param.length==0){\r\n            if (isRemoveEmptyClasses){\r\n                out.classes = [];\r\n            }\r\n        }\r\n        else{\r\n            out.classes = actionArr(param);\r\n        }\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction extend(value, param, actionStr, actionArr, actionObj, isRemoveEmptyClasses){\r\n    var success = extendClasses(value, param, actionStr, actionArr, isRemoveEmptyClasses);\r\n    if (success === false){\r\n        if (param instanceof Object){\r\n            var {classes, styles} = param;\r\n            extendClasses(value, classes, actionStr, actionArr, isRemoveEmptyClasses);\r\n            \r\n            if (styles) {\r\n                value.styles = actionObj(styles);\r\n            } else if (!classes) {\r\n                value.styles = actionObj(param)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function Styling(param){\r\n    var value = {classes:[], styles:{}};\r\n    if (param){\r\n        extend(value, param, a=>a, a=>a.slice(), o=>shallowClearClone(o), true);\r\n    }\r\n    return Object.freeze(value);\r\n}\r\n\r\nfunction createStyling(isReplace, param, ...params){\r\n    var value = {classes:[], styles:{}};\r\n    if (param){\r\n        extend(value, param, a=>a, a=>a.slice(), o=>shallowClearClone(o),true);\r\n        if (params){\r\n            var {classes, styles} = value;\r\n            var extendInt = isReplace? (p)=>extend(value, p, s=>s, a=>a.slice(), o=> shallowClearClone(styles, o),true):\r\n                (p)=>extend(value, p, a=>classes.concat(a), a=>classes.concat(a), o=>shallowClearClone(styles, o),false)\r\n            params.forEach(p=> extendInt(p));\r\n        }\r\n    }\r\n    return Styling(value);\r\n}\r\n\r\nexport function createCss(stylings1, stylings2){\r\n    var destination = {};\r\n    for (let property in stylings1) {\r\n        let param1 = stylings1[property];\r\n\r\n        let param2 = stylings2?stylings2[property]:undefined;\r\n        if (param2===undefined)\r\n            destination[property] = Styling(param1)\r\n        else{\r\n            destination[property] = createStyling(true, param1, param2); \r\n        }\r\n    }\r\n    if (stylings2)\r\n        for (let property in stylings2) {\r\n            if (!stylings1[property])\r\n                destination[property] = Styling(stylings2[property])\r\n        }\r\n    return destination;\r\n}\r\n\r\nexport function extendCss(stylings1, stylings2){\r\n    for (let property in stylings2) {\r\n        let param2 = stylings2[property];\r\n        let param1 = stylings1[property];\r\n        if (param1 === undefined)\r\n            stylings1[property] = Styling(param2)\r\n        else{\r\n            stylings1[property] = createStyling(false, param1, param2); \r\n        }\r\n    }\r\n}","export function PluginManager(plugins, pluginData){\r\n    let instances = [];\r\n    if (plugins){\r\n        for(let i = 0; i<plugins.length; i++){\r\n            let instance = plugins[i](pluginData)\r\n            if (instance)\r\n                instances.push(instance);\r\n        }\r\n    }\r\n    \r\n    let disposes = [];\r\n    return {\r\n        afterConstructor(multiSelect){\r\n            for(let i = 0; i<instances.length; i++){\r\n                let dispose = instances[i].afterConstructor?.(multiSelect)\r\n                if (dispose)\r\n                    disposes.push(dispose);\r\n            }\r\n            instances=null;\r\n        },\r\n        dispose(){\r\n            for(let i = 0; i<disposes.length; i++){\r\n                disposes[i]()\r\n            }\r\n            disposes=null;\r\n        }\r\n    }\r\n}\r\n\r\nexport function initiateDefaults(constructors, defaults){\r\n    for(let i = 0; i<constructors.length; i++){\r\n        constructors[i].setDefaults?.(defaults)\r\n    }\r\n}\r\n\r\nexport function mergeDefaults(constructors, configuration, defaults, settings){\r\n    for(let i = 0; i<constructors.length; i++){\r\n        constructors[i].mergeDefaults?.(configuration, defaults, settings)\r\n    }\r\n}\r\n\r\nexport function buildedConfiguration(constructors, configuration){\r\n    for(let i = 0; i<constructors.length; i++){\r\n        constructors[i].buildedConfiguration?.(configuration)\r\n    }\r\n}\r\n","export const css = {\r\n    choices: 'dropdown-menu', // bs4, in bsmultiselect.scss as ul.dropdown-menu\r\n    choice_hover:  'hover',  //  not bs4, in scss as 'ul.dropdown-menu li.hover'\r\n    choice_selected: '', \r\n    choice_disabled: '', \r\n\r\n    picks: 'form-control',  // bs4, in scss 'ul.form-control'\r\n    picks_focus: 'focus', // not bs4, in scss 'ul.form-control.focus'\r\n    picks_disabled: 'disabled', //  not bs4, in scss 'ul.form-control.disabled'\r\n    pick_disabled: '',  \r\n    \r\n    pickFilter: '', \r\n    filterInput: '',\r\n\r\n    // used in pickContentGenerator\r\n    pick: 'badge', // bs4\r\n    pickContent: '',\r\n    pickContent_disabled: 'disabled', // not bs4, in scss 'ul.form-control li span.disabled'\r\n    pickButton: 'close', // bs4\r\n\r\n    // used in choiceContentGenerator\r\n    // choice:  'dropdown-item', // it seems like hover should be managed manually since there should be keyboard support\r\n    choiceCheckBox_disabled: 'disabled', //  not bs4, in scss as 'ul.form-control li .custom-control-input.disabled ~ .custom-control-label'\r\n    choiceContent: 'custom-control custom-checkbox d-flex', // bs4 d-flex required for rtl to align items\r\n    choiceCheckBox: 'custom-control-input', // bs4\r\n    choiceLabel: 'custom-control-label justify-content-start',\r\n    choiceLabel_disabled: ''  \r\n}\r\n\r\nexport const cssPatch = {\r\n    choices: {listStyleType:'none'},\r\n    picks: {listStyleType:'none', display:'flex', flexWrap:'wrap',  height: 'auto', marginBottom: '0'},\r\n    choice: 'px-md-2 px-1',  \r\n    choice_hover: 'text-primary bg-light', \r\n    filterInput: {border:'0px', height: 'auto', boxShadow:'none', \r\n        padding:'0', margin:'0', \r\n        outline:'none', backgroundColor:'transparent',\r\n        backgroundImage: 'none' // otherwise BS .was-validated set its image\r\n    },\r\n    filterInput_empty: 'form-control', // need for placeholder, TODO test form-control-plaintext\r\n\r\n    // used in staticContentGenerator\r\n    picks_disabled: {backgroundColor: '#e9ecef'},\r\n\r\n    picks_focus: {borderColor: '#80bdff', boxShadow: '0 0 0 0.2rem rgba(0, 123, 255, 0.25)'},\r\n    picks_focus_valid: {borderColor: '', boxShadow: '0 0 0 0.2rem rgba(40, 167, 69, 0.25)'},\r\n    picks_focus_invalid: {borderColor: '', boxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)'},\r\n    \r\n    // used in BsAppearance\r\n    picks_def: {minHeight: 'calc(2.25rem + 2px)'},\r\n    picks_lg:  {minHeight: 'calc(2.875rem + 2px)'},\r\n    picks_sm:  {minHeight: 'calc(1.8125rem + 2px)'},\r\n    \r\n    // used in pickContentGenerator\r\n    pick: {paddingLeft: '0px', lineHeight: '1.5em'},\r\n    pickButton: {fontSize:'1.5em', lineHeight: '.9em', float : \"none\"},\r\n    pickContent_disabled: {opacity: '.65'}, \r\n    \r\n    // used in choiceContentGenerator\r\n    choiceContent: {justifyContent: 'flex-start'}, // BS problem: without this on inline form menu items justified center\r\n    choiceLabel: {color: 'inherit'}, // otherwise BS .was-validated set its color\r\n    choiceCheckBox: {color: 'inherit'},\r\n    choiceLabel_disabled: {opacity: '.65'}  // more flexible than {color: '#6c757d'}; note: avoid opacity on pickElement's border; TODO write to BS4 \r\n};","\r\nimport {defCall} from '../ToolsJs';\r\n\r\nexport function LabelPlugin(pluginData){\r\n    let {configuration, staticContent} = pluginData;\r\n    let {label} = configuration;\r\n    staticContent.getLabelElement = () => defCall(label); // overrided by BS Appearance Plugin\r\n\r\n    let createInputId = null;\r\n    let {selectElement, containerClass, containerElement} = staticContent;\r\n    if(selectElement)\r\n        createInputId = () => `${containerClass}-generated-input-${((selectElement.id)?selectElement.id:selectElement.name).toLowerCase()}-id`;\r\n    else\r\n        createInputId = () => `${containerClass}-generated-filter-${containerElement.id}`;\r\n\r\n    return {\r\n        afterConstructor(){\r\n            let labelElement = staticContent.getLabelElement();\r\n            let backupedForAttribute = null; // state saved between init and dispose\r\n            if (labelElement) {\r\n                backupedForAttribute = labelElement.getAttribute('for');\r\n                var newId = createInputId();\r\n                staticContent.filterInputElement.setAttribute('id', newId);\r\n                labelElement.setAttribute('for',newId);\r\n            }\r\n            if (backupedForAttribute)\r\n                return ()=> labelElement.setAttribute('for',backupedForAttribute);\r\n        }\r\n    }\r\n}","import {getIsRtl, AttributeBackup} from '../ToolsDom';\r\nimport {isBoolean} from '../ToolsJs';\r\n\r\nexport function RtlPlugin(pluginData){\r\n    let {configuration, staticContent} = pluginData;\r\n    let {isRtl} = configuration;\r\n    let forceRtlOnContainer = false; \r\n    if (isBoolean(isRtl))\r\n        forceRtlOnContainer = true;\r\n    else\r\n        isRtl = getIsRtl(staticContent.initialElement);\r\n    \r\n    var attributeBackup = AttributeBackup();\r\n    if (forceRtlOnContainer){\r\n        attributeBackup.set(staticContent.containerElement, \"dir\", \"rtl\");\r\n    }\r\n    else if (staticContent.selectElement){\r\n        var dirAttributeValue = staticContent.selectElement.getAttribute(\"dir\");\r\n        if (dirAttributeValue){\r\n            attributeBackup.set(staticContent.containerElement, \"dir\", dirAttributeValue);\r\n        }\r\n    } \r\n    return {\r\n        afterConstructor(multiSelect){\r\n            var origCreatePopperConfiguration = multiSelect.createPopperConfiguration.bind(multiSelect);\r\n            multiSelect.createPopperConfiguration = () => {\r\n                var configuration = origCreatePopperConfiguration();\r\n                if (isRtl)\r\n                    configuration.placement = 'bottom-end';\r\n                return configuration;\r\n            }\r\n            return attributeBackup.restore;\r\n        }\r\n    }\r\n}","\r\nimport {EventBinder, closestByTagName} from '../ToolsDom';\r\n\r\nexport function FormResetPlugin(pluginData){\r\n    var {staticContent, window} = pluginData;\r\n    return {\r\n        afterConstructor(multiSelect){\r\n            var eventBuilder = EventBinder();\r\n            if (staticContent.selectElement){\r\n                var form = closestByTagName(staticContent.selectElement, 'FORM');\r\n                if (form) {\r\n                    eventBuilder.bind(form, \r\n                        'reset', \r\n                        () => window.setTimeout( ()=>multiSelect.UpdateData() ) );\r\n                }\r\n            }\r\n            return eventBuilder.unbind;\r\n        }\r\n    }\r\n}","function createValidity(valueMissing, customError){\r\n    return Object.freeze({\r\n        valueMissing,\r\n        customError,\r\n        valid: !(valueMissing || customError),\r\n    });\r\n}\r\n\r\nexport function ValidityApi(visibleElement, isValueMissingObservable, valueMissingMessage, onValid){\r\n    var customValidationMessage = \"\";\r\n    var validationMessage = \"\";\r\n    var validity = null;\r\n    var willValidate = true;\r\n    \r\n    function setMessage(valueMissing, customError){\r\n        validity = createValidity(valueMissing, customError);\r\n        validationMessage = customError?customValidationMessage:(valueMissing?valueMissingMessage:\"\")\r\n        visibleElement.setCustomValidity(validationMessage);\r\n        onValid(validity.valid);\r\n    }\r\n\r\n    setMessage(isValueMissingObservable.getValue(), false);\r\n\r\n    isValueMissingObservable.attach(\r\n        (value) => {\r\n            setMessage(value, validity.customError);\r\n        }\r\n    );\r\n    \r\n    return {\r\n        validationMessage,\r\n        willValidate,\r\n        validity,\r\n        setCustomValidity(message){\r\n            customValidationMessage = message;\r\n            setMessage(validity.valueMissing, customValidationMessage?true:false);\r\n        },\r\n        checkValidity(){\r\n            if (!validity.valid)\r\n                trigger('dashboardcode.multiselect:invalid')\r\n            return validity.valid;\r\n        },\r\n        reportValidity(){\r\n            staticContent.filterInputElement.reportValidity();\r\n            return checkValidity();\r\n        }\r\n    }\r\n}","import {ValidityApi} from '../ValidityApi'\r\nimport {ObservableValue, ObservableLambda, def, defCall, composeSync } from '../ToolsJs';\r\nimport {getDataGuardedWithPrefix} from '../ToolsDom';\r\n\r\nconst defValueMissingMessage = 'Please select an item in the list'\r\n\r\nexport function ValidationApiPlugin(pluginData){\r\n    var {configuration, staticContent, staticContent} = pluginData;\r\n    let {getIsValueMissing, valueMissingMessage, required} = configuration;\r\n    required = def(required, staticContent.required);\r\n    valueMissingMessage = defCall(valueMissingMessage,\r\n        ()=> getDataGuardedWithPrefix(staticContent.initialElement,\"bsmultiselect\",\"value-missing-message\"),\r\n        defValueMissingMessage)\r\n\r\n    return {\r\n        afterConstructor(multiSelect){\r\n            if (!getIsValueMissing) {\r\n                getIsValueMissing = () => {\r\n                    let count = 0;\r\n                    let optionsArray = multiSelect.getOptions();\r\n                    for (var i=0; i < optionsArray.length; i++) {\r\n                        if (optionsArray[i].selected) \r\n                            count++;\r\n                    }\r\n                    return count===0;\r\n                }\r\n            }\r\n        \r\n            var isValueMissingObservable = ObservableLambda(()=>required && getIsValueMissing());\r\n            var validationApiObservable = ObservableValue(!isValueMissingObservable.getValue());\r\n\r\n            staticContent.validationApiObservable = validationApiObservable;\r\n\r\n            let origOnChange = multiSelect.onChange;\r\n            multiSelect.onChange = () => { \r\n                isValueMissingObservable.call();\r\n                origOnChange(); \r\n            };\r\n        \r\n            var validationApi = ValidityApi(\r\n                staticContent.filterInputElement, \r\n                isValueMissingObservable, \r\n                valueMissingMessage,\r\n                (isValid)=>validationApiObservable.setValue(isValid));\r\n            multiSelect.validationApi = validationApi;\r\n\r\n            return ()=> composeSync(isValueMissingObservable.detachAll, validationApiObservable.detachAll)\r\n        }\r\n    }\r\n}\r\n\r\nValidationApiPlugin.setDefaults = (defaults)=>{\r\n    defaults.valueMissingMessage = '';\r\n}","import {closestByClassName, siblingsAsArray} from '../ToolsDom';\r\nimport {addStyling} from '../ToolsStyling'\r\nimport {ObservableLambda, composeSync} from '../ToolsJs';\r\n\r\nexport function BsAppearancePlugin(pluginData){\r\n    let {configuration, common, staticContent} = pluginData;\r\n    let {getValidity, getSize, useCssPatch, css} = configuration;\r\n    let selectElement = staticContent.selectElement;\r\n    \r\n    if (staticContent.getLabelElement){\r\n        let origGetLabelElement = staticContent.getLabelElement;\r\n        staticContent.getLabelElement = () => {\r\n            var e = origGetLabelElement();\r\n            if (e)\r\n                return e;\r\n            else\r\n                return getLabelElement(selectElement);\r\n        }\r\n    }\r\n    \r\n    if (staticContent.selectElement) {\r\n        if(!getValidity)\r\n            getValidity = composeGetValidity(selectElement);\r\n        if(!getSize) \r\n            getSize = composeGetSize(selectElement);\r\n    } else {\r\n        if (!getValidity)\r\n            getValidity = () => null\r\n        if (!getSize)\r\n            getSize = () => null;\r\n    }\r\n\r\n    common.getSize=getSize;\r\n    common.getValidity=getValidity;\r\n    return {\r\n        afterConstructor(multiSelect){\r\n            \r\n            var updateSize;\r\n            if (!useCssPatch){\r\n                updateSize= () => updateSizeForAdapter(staticContent.picksElement, getSize)\r\n            }\r\n            else{\r\n                const {picks_lg, picks_sm, picks_def} = css;\r\n                updateSize = () => updateSizeJsForAdapter(staticContent.picksElement, picks_lg, picks_sm, picks_def, getSize);\r\n            }\r\n            multiSelect.UpdateSize = updateSize;\r\n            \r\n            if (useCssPatch){\r\n                var defToggleFocusStyling = staticContent.toggleFocusStyling;\r\n                staticContent.toggleFocusStyling = () => {\r\n                    var validity =  validationObservable.getValue();\r\n                    var isFocusIn = staticContent.getIsFocusIn();\r\n                    defToggleFocusStyling(isFocusIn)\r\n                    if (isFocusIn){\r\n                        if (validity===false) { \r\n                            // but not toggle events (I know it will be done in future)\r\n                            staticContent.setIsFocusIn(isFocusIn);\r\n                            \r\n                            addStyling(staticContent.picksElement, css.picks_focus_invalid)\r\n                        } else if (validity===true) {\r\n                            // but not toggle events (I know it will be done in future)\r\n                            staticContent.setIsFocusIn(isFocusIn);\r\n                            \r\n                            addStyling(staticContent.picksElement, css.picks_focus_valid)  \r\n                        }              \r\n                    }\r\n                }\r\n            }\r\n        \r\n            var getWasValidated = () => {\r\n                var wasValidatedElement = closestByClassName(staticContent.initialElement, 'was-validated');\r\n                return wasValidatedElement?true:false;\r\n            }\r\n            var wasUpdatedObservable = ObservableLambda(()=>getWasValidated());\r\n            var getManualValidationObservable = ObservableLambda(()=>getValidity());\r\n            let validationApiObservable = staticContent.validationApiObservable;\r\n            \r\n            var validationObservable = ObservableLambda(\r\n                () => wasUpdatedObservable.getValue()?validationApiObservable.getValue():getManualValidationObservable.getValue()\r\n            )\r\n          \r\n            validationObservable.attach(\r\n                (value)=>{\r\n                    var  {validMessages, invalidMessages} = getMessagesElements(staticContent.containerElement);\r\n                    updateValidity( \r\n                    staticContent.picksElement,\r\n                    validMessages, invalidMessages,\r\n                    value);\r\n                    staticContent.toggleFocusStyling();\r\n                }\r\n            )\r\n            wasUpdatedObservable.attach(\r\n                ()=>validationObservable.call()\r\n            )\r\n            validationApiObservable.attach(\r\n                ()=>validationObservable.call()\r\n            )\r\n            getManualValidationObservable.attach(\r\n                ()=>validationObservable.call()\r\n            )\r\n               \r\n            multiSelect.UpdateValidity = ()=> getManualValidationObservable.call();\r\n            multiSelect.UpdateWasValidated = ()=>wasUpdatedObservable.call();\r\n            \r\n            multiSelect.UpdateAppearance = composeSync(\r\n                multiSelect.UpdateAppearance.bind(multiSelect), \r\n                updateSize, \r\n                validationObservable.call, getManualValidationObservable.call);\r\n            \r\n            return /* dispose */() => {\r\n                wasUpdatedObservable.detachAll();\r\n                validationObservable.detachAll();\r\n                getManualValidationObservable.detachAll();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction getLabelElement(selectElement){\r\n    let value = null;\r\n    let formGroup = closestByClassName(selectElement,'form-group');\r\n    if (formGroup) {\r\n        value = formGroup.querySelector(`label[for=\"${selectElement.id}\"]`);\r\n    }\r\n    return value;\r\n}\r\n\r\nfunction updateValidity(picksElement, validMessages, invalidMessages, validity){\r\n    if (validity===false){\r\n        picksElement.classList.add('is-invalid');\r\n        picksElement.classList.remove('is-valid');\r\n        invalidMessages.map(e=>e.style.display='block'); \r\n        validMessages.map(e=>e.style.display='none');      \r\n    }\r\n    else if (validity===true){\r\n        picksElement.classList.remove('is-invalid');\r\n        picksElement.classList.add('is-valid');\r\n        invalidMessages.map(e=>e.style.display='none'); \r\n        validMessages.map(e=>e.style.display='block'); \r\n    }else {\r\n        picksElement.classList.remove('is-invalid');\r\n        picksElement.classList.remove('is-valid');\r\n        invalidMessages.map(e=>e.style.display=''); \r\n        validMessages.map(e=>e.style.display=''); \r\n    }\r\n}\r\n\r\nfunction updateSize(picksElement, size){\r\n    if (size==\"lg\"){\r\n        picksElement.classList.add('form-control-lg');\r\n        picksElement.classList.remove('form-control-sm');\r\n    }\r\n    else if (size==\"sm\"){\r\n        picksElement.classList.remove('form-control-lg');\r\n        picksElement.classList.add('form-control-sm');\r\n    }\r\n    else{\r\n        picksElement.classList.remove('form-control-lg');\r\n        picksElement.classList.remove('form-control-sm');\r\n    }\r\n}\r\n\r\nfunction updateSizeJs(picksElement, picksLgStyling, picksSmStyling, picksDefStyling, size){\r\n    updateSize(picksElement, size);\r\n    if (size==\"lg\"){\r\n        addStyling(picksElement, picksLgStyling);\r\n    } else if (size==\"sm\"){\r\n        addStyling(picksElement, picksSmStyling);\r\n    } else {\r\n        addStyling(picksElement, picksDefStyling);\r\n    }\r\n}\r\n\r\nfunction updateSizeForAdapter(picksElement, getSize){\r\n    updateSize(picksElement, getSize())\r\n}\r\n\r\nfunction updateSizeJsForAdapter(picksElement, picksLgStyling, picksSmStyling, picksDefStyling, getSize){\r\n    updateSizeJs(picksElement, picksLgStyling, picksSmStyling, picksDefStyling, getSize())\r\n}\r\n\r\nfunction getMessagesElements(containerElement){\r\n    var siblings = siblingsAsArray(containerElement);\r\n    var invalidMessages =  siblings.filter(e=>e.classList.contains('invalid-feedback') || \r\n        e.classList.contains('invalid-tooltip'));\r\n    var validMessages =  siblings.filter(e=>e.classList.contains('valid-feedback') || \r\n        e.classList.contains('valid-tooltip'));\r\n    return {validMessages, invalidMessages}    \r\n} \r\n\r\nfunction composeGetValidity(selectElement){\r\n    var getValidity = () => \r\n        selectElement.classList.contains('is-invalid')?false:\r\n        (selectElement.classList.contains('is-valid')?true:null);\r\n    return getValidity;\r\n}\r\n\r\nfunction composeGetSize(selectElement){\r\n    let inputGroupElement = closestByClassName(selectElement, 'input-group');\r\n    let getSize = null;\r\n    if (inputGroupElement){\r\n        getSize = function(){\r\n            var value = null;\r\n            if (inputGroupElement.classList.contains('input-group-lg'))\r\n                value = 'lg';\r\n            else if (inputGroupElement.classList.contains('input-group-sm'))\r\n                value = 'sm';\r\n            return value;\r\n        }\r\n    }\r\n    else{ \r\n        getSize = function(){\r\n            var value = null;\r\n            if (selectElement.classList.contains('custom-select-lg') || selectElement.classList.contains('form-control-lg'))\r\n                value = 'lg';\r\n            else if (selectElement.classList.contains('custom-select-sm') || selectElement.classList.contains('form-control-sm'))\r\n                value = 'sm'; \r\n            return value;\r\n        }\r\n    }\r\n    return getSize;\r\n}\r\n\r\n","function updateHiddenChoice(choice, updateHidden , getIsOptionHidden){\r\n    let newIsOptionHidden = getIsOptionHidden(choice.option);\r\n    if (newIsOptionHidden != choice.isOptionHidden)\r\n    {\r\n        choice.isOptionHidden= newIsOptionHidden;\r\n        updateHidden(choice)\r\n    }\r\n}\r\n\r\nfunction getNextNonHidden(choice) { // TODO get next visible\r\n    let next = choice.itemNext;\r\n    if (!next) {\r\n        return null;\r\n    } else if (next.choiceElement) {\r\n        return next;\r\n    }\r\n    return getNextNonHidden(next)\r\n}\r\n\r\nexport function HiddenOptionPlugin(pluginData){\r\n    let {configuration, options} = pluginData;\r\n    let {getIsOptionHidden} = configuration;\r\n    if (options){\r\n        if (!getIsOptionHidden)\r\n            getIsOptionHidden = (option)=>(option.hidden===undefined)?false:option.hidden;     \r\n    } else{\r\n        if (!getIsOptionHidden)\r\n            getIsOptionHidden = (option)=>option.hidden;     \r\n    }\r\n\r\n    return {\r\n        afterConstructor(multiSelect){\r\n            multiSelect.getNext = (c)=>getNextNonHidden(c);\r\n    \r\n            var origIsSelectable = multiSelect.isSelectable.bind(multiSelect);\r\n            multiSelect.isSelectable = (choice) => origIsSelectable(choice) && !choice.isOptionHidden;\r\n            \r\n            function buildHiddenChoice(choice){\r\n                choice.updateSelected = () => void 0;\r\n                choice.updateDisabled = () => void 0;\r\n                \r\n                choice.choiceElement = null;\r\n                choice.choiceElementAttach = null;\r\n                choice.setVisible = null; \r\n                choice.setHoverIn = null;\r\n                choice.remove = null; \r\n                \r\n                choice.dispose = () => { \r\n                    choice.dispose = null;\r\n                };\r\n            }\r\n        \r\n            function updateHidden(choice) {\r\n                if (choice.isOptionHidden) {\r\n                    multiSelect.filterListFacade.remove(choice);\r\n                    choice.remove(); \r\n                    buildHiddenChoice(choice);\r\n                } else {\r\n                    let nextChoice = getNextNonHidden(choice);\r\n                    multiSelect.filterListFacade.add(choice, nextChoice);\r\n                    multiSelect.createChoiceElement(choice);\r\n                    choice.choiceElementAttach(nextChoice?.choiceElement); // itemPrev?.choiceElement\r\n                }\r\n            }\r\n            \r\n            multiSelect.updateHidden = (c) => updateHidden(c);\r\n        \r\n            function UpdateOptionHidden(key){\r\n                let choice = multiSelect.choicesPanel.get(key); // TODO: generalize index as key \r\n                updateHiddenChoice(choice, (c)=>multiSelect.updateHidden(c), getIsOptionHidden) // TODO: invite this.getIsOptionSelected\r\n            }\r\n            \r\n            function UpdateOptionsHidden(){\r\n                let options = multiSelect.getOptions();\r\n                for(let i = 0; i<options.length; i++){\r\n                    UpdateOptionHidden(i)\r\n                }\r\n            }\r\n        \r\n            multiSelect.UpdateOptionsHidden = () => UpdateOptionsHidden();\r\n            multiSelect.UpdateOptionHidden = (key) => UpdateOptionHidden(key);\r\n        \r\n            var orig–°reateChoice = multiSelect.createChoice.bind(multiSelect);\r\n        \r\n            multiSelect.createChoice = (option) => {\r\n                let choice = orig–°reateChoice(option);\r\n                choice.isOptionHidden = getIsOptionHidden(option);\r\n                return choice;\r\n            };\r\n        \r\n            var origInsertChoiceItem = multiSelect.insertChoiceItem.bind(multiSelect);\r\n            var origPushChoiceItem = multiSelect.pushChoiceItem.bind(multiSelect);\r\n        \r\n            multiSelect.insertChoiceItem=(choice)=>{\r\n                if (choice.isOptionHidden){ \r\n                    buildHiddenChoice(choice);\r\n                }\r\n                else{ \r\n                    origInsertChoiceItem(choice);\r\n                }\r\n            }\r\n        \r\n            multiSelect.pushChoiceItem=(choice)=>{\r\n                if (choice.isOptionHidden){ \r\n                    buildHiddenChoice(choice);\r\n                }\r\n                else{ \r\n                    origPushChoiceItem(choice);\r\n                }\r\n            }\r\n        \r\n            multiSelect.forEach = (f) => {\r\n                let choice = multiSelect.choicesPanel.getHead();\r\n                while(choice){\r\n                    if (!choice.isOptionHidden)\r\n                        f(choice);\r\n                    choice = multiSelect.getNext(choice);\r\n                }\r\n            }\r\n        \r\n            var origAddFilterFacade = multiSelect.addFilterFacade.bind(multiSelect);\r\n            multiSelect.addFilterFacade = (choice) => {\r\n                if ( !choice.isOptionHidden ) {\r\n                    origAddFilterFacade(choice);\r\n                }\r\n            }\r\n        \r\n            var origInsertFilterFacade = multiSelect.insertFilterFacade.bind(multiSelect);\r\n            multiSelect.addFilterFacade = (choice) => {\r\n                if ( !choice.isOptionHidden ){\r\n                    origInsertFilterFacade(choice);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","import {createCss, extendCss} from '../ToolsStyling';\r\nimport {isBoolean} from '../ToolsJs';\r\nimport {cssPatch} from '../BsCss'\r\n\r\nexport function CssPatchPlugin(){\r\n}\r\n\r\nCssPatchPlugin.setDefaults = (defaults)=>{\r\n    defaults.useCssPatch = true;\r\n    defaults.cssPatch = cssPatch;\r\n}\r\n\r\nCssPatchPlugin.mergeDefaults = (configuration, defaults, settings)=>{\r\n    if (isBoolean(settings.cssPatch))\r\n        throw new Error(\"BsMultiSelect: 'cssPatch' was used instead of 'useCssPatch'\") // often type of error\r\n    var defCssPatch = createCss(defaults.cssPatch, settings.cssPatch); // replace classes, merge styles\r\n    configuration.cssPatch = defCssPatch;\r\n}\r\n\r\nCssPatchPlugin.buildedConfiguration = (configuration) =>{\r\n    if (configuration.useCssPatch)\r\n        extendCss(configuration.css, configuration.cssPatch); \r\n}","import {BsMultiSelect as BsMultiSelectBase}  from './BsMultiSelect'\r\nimport {initiateDefaults} from './PluginManager';\r\nimport {css} from './BsCss'\r\nimport {LabelPlugin} from './plugins/LabelPlugin';\r\nimport {RtlPlugin} from './plugins/RtlPlugin';\r\nimport {FormResetPlugin} from './plugins/FormResetPlugin';\r\nimport {ValidationApiPlugin} from './plugins/ValidationApiPlugin';\r\nimport {BsAppearancePlugin} from './plugins/BsAppearancePlugin';\r\nimport {HiddenOptionPlugin} from './plugins/HiddenOptionPlugin';\r\nimport {CssPatchPlugin} from './plugins/CssPatchPlugin';\r\n\r\nimport {createCss} from './ToolsStyling';\r\nimport {extendIfUndefined} from './ToolsJs';\r\n\r\nconst defaults = {containerClass : \"dashboardcode-bsmultiselect\", css: css}\r\nconst defaultPlugins = [CssPatchPlugin, LabelPlugin, HiddenOptionPlugin, ValidationApiPlugin, BsAppearancePlugin, FormResetPlugin, RtlPlugin];\r\n\r\nexport function BsMultiSelect(element, environment, settings){\r\n    if (!environment.trigger)\r\n        environment.trigger = (e, name) => e.dispatchEvent(new environment.window.Event(name))\r\n\r\n    if (!environment.plugins)\r\n        environment.plugins = defaultPlugins;\r\n    \r\n    let configuration = {};\r\n   \r\n    if (settings)\r\n        adjustLegacySettings(settings);\r\n    \r\n    configuration.css = createCss(defaults.css, settings?.css);\r\n    mergeDefaults(defaultPlugins, configuration, defaults, settings);\r\n\r\n    extendIfUndefined(configuration, settings); \r\n    extendIfUndefined(configuration, defaults); \r\n\r\n    buildedConfiguration(defaultPlugins, configuration);\r\n\r\n    return BsMultiSelect(element, environment, configuration, settings?.onInit);\r\n}\r\n\r\ninitiateDefaults(defaultPlugins, defaults);\r\nBsMultiSelect.defaults=defaults;"]}